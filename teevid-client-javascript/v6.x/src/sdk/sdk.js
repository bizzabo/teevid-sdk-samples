/*! For license information please see sdk.js.LICENSE.txt */
module.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}({"./middleware/commons/constants.js":function(e,t){const r=(e,t)=>({length:e,geometry:{optimized_layout_full_quality:e-t,optimized_layout_threshold:t}});e.exports.lectureLayouts={"1_0":r(1,0),"2_0":r(2,0),"2_1":r(2,0),"2_2":r(2,1),"3_0":r(3,2),"3_1":r(3,2),"3_2":r(3,2),"3_3":r(3,3),"3_4":r(3,3),"4_0":r(4,0),"4_1":r(4,3),"4_2":r(4,3),"4_3":r(4,3),"4_4":r(4,4),"4_5":r(4,4),"5_0":r(5,3),"5_1":r(5,3),"5_2":r(5,4),"5_3":r(5,4),"5_4":r(5,5),"5_5":r(5,5),"6_0":r(6,0),"6_1":r(6,0),"6_2":r(6,5),"6_3":r(6,4),"6_4":r(6,6),"6_5":r(6,6),"6_6":r(6,5),"7_0":r(7,6),"7_1":r(7,6),"7_2":r(7,6),"7_3":r(7,6),"7_4":r(7,6),"8_0":r(8,4),"8_1":r(8,1),default:r(10,6)},e.exports.availableBandwidth=["auto","128 Kbps","256 Kbps","384 Kbps","512 Kbps","768 Kbps","1024 Kbps","1280 Kbps","1536 Kbps","1920 Kbps","3000 Kbps","4096 Kbps","10240 Kbps"],e.exports.availableResolution=["auto","352x240 (240p)","480x360 (360p)","640x480 (VGA)","858x480 (480p)","1280x720 (720p)","1920x1080 (1080p)","3840x2160 (4K)"],e.exports.Resolutions={"240p":"352x240 (240p)","360p":"480x360 (360p)","480p":"858x480 (480p)",VGA:"640x480 (VGA)","720p":"1280x720 (720p)","1080p":"1920x1080 (1080p)","4K":"3840x2160 (4K)"},e.exports.audioCodecs=["OPUS","PCMA","PCMU"],e.exports.videoCodecs=["VP8","VP9","H264","H265"],e.exports.orgLicenses=["EVT50","EVT100","EVT150","EVT200","EVT250","EVT300","EVT350","EVT400","EVT450","EVT500","EVTS50","EVTS100","EVTS150","EVTS200","EVTS250","EVTS300","EVTS350","EVTS400","EVTS450","EVTS500","none"]},"./middleware/commons/enums.js":function(e,t){e.exports.modes={INTERACTIVE:"interactive",BASIC_LECTURE:"basic-lecture",LECTURE:"lecture"},e.exports.StreamingStates={INIT:0,CONNECTED:1,IS_STREAMING:2,STOPPING:3,STOPPED:4,ERROR:5},e.exports.RecordingStates={STARTING:1,RECORDING:2,STOPPING:3,STOPPED:4,ERROR:5},e.exports.ConnectionStates={DISCONNECTED:0,CONNECTING:1,CONNECTED:2,IN_WAITING_ROOM:3,IN_WAITING_SLOT:4,PRE_CONNECTED:5},e.exports.CallStates={INACTIVE:0,CALLING:1,ACCEPTED:2,REJECTED:3},e.exports.Mute={NO_DEVICE:-1,UNMUTED:0,MUTED:1,MUTED_BY_MODER:2},e.exports.ParticipantRoles={PARTICIPANT:"Participant",MODERATOR:"Moderator",OWNER:"Owner"},e.exports.UserRoles={ADMIN:"admin",MODERATOR:"moderator",POWER_USER:"power user",USER:"user",GUEST:"guest",KURENTO:"kurento",CHAT:"chat"},e.exports.ChatUserTypes={USER:"user",PARTICIPANT:"participant"},e.exports.LayoutModes={AUTO:"auto",MANUAL:"manual"},e.exports.RoomTypes={EVENT:"event",MEETING:"meeting"},e.exports.EventTypes={GATEWAY:"gateway",WEB:"web",MW:"middleware"},e.exports.ParticipantTypes={WEB:"web",SIP:"sip",CEF:"cef"},e.exports.PollStates={SCHEDULED:"scheduled",ONGOING:"ongoing",DONE:"done"},e.exports.EventStates={SCHEDULED:"scheduled",ONGOING:"ongoing",DONE:"done"},e.exports.WebEventTypes={STREAMING:"streaming",INTERACTIVE:"interactive"},e.exports.JoinRejectionReasons={WAITING:"waiting-for-start",WRONG_PIN:"err-bad-access-pin",WRONG_OWNER_PIN:"err-bad-owner-pin",WRONG_MODERATOR_PIN:"err-bad-moderator-pin",WRONG_PANELIST_PIN:"err-bad-panelist-pin",WRONG_ATTENDEE_PIN:"err-bad-attendee-pin",NO_PIN:"err-access-pin-required",OVER:"err-event-over",INVALID_TOKEN:"err-invite-invalid",ROOM_FULL:"err-room-full",ERROR:"err-unknown"},e.exports.PeopleTypes={VIEWER:0,ATTENDEE:1,PARTICIPANT:2,PANELIST:3,MODERATOR:4},e.exports.ConversationOwnerTypes={USER:"User",ROOM:"Room"},e.exports.ReportTypes={MEETINGS:"meetings",EVENTS:"events",TIMELINES:"timelines",PARTICIPANTS:"participants"},e.exports.TimelineEventTypes={QOE:"qoe",ACTION:"action",DEBUG:"debug",INFO:"info"},e.exports.TimelineSE={STARTED:1,ENDED:0},e.exports.TimelineActorTypes={PARTICIPANT:"participant",SYSTEM:"system",MEDIA_SERVER:"media-server"},e.exports.TimelineEventNames={EVENT_REHEARSING:"tl_event-rehearsing",EVENT_LIVE:"tl_event-live",SCREEN_SHARE:"tl_screen-share",STORYBOARD_SHARE:"tl_stb-share",STORYBOARD_SCENE_CHANGE:"tl_stb-scene-change",LIVE_STAGE_LAYOUT_MODE:"tl_ls-layout-mode",LIVE_STAGE_LAYOUT_CHANGE:"tl_ls-layout-change",LIVE_STAGE_LAYOUT_MOVE_PARTICIPANT:"tl_ls-move-participant",REMOTE_MUTE:"tl_remote-mute",RAISE_HAND_REQUEST:"tl_rh-request",RAISE_HAND_RESPONSE:"tl_rh-response",POLL:"tl_poll",POLL_ANSWER:"tl_poll-answer",RECORDING:"tl_recording",STREAMING:"tl_streaming",CHAT:"tl_chat",INVITE:"tl_invite",UI_ERROR:"tl_ui-error",SFU_SIGNALING_DISCONNECT:"tl_sfu-signaling-disconnect",SFU_CONTROLLER_DISCONNECT:"tl_sfu-controller-disconnect",SFU_PING_MISSED:"tl_sfu-ping-missed",MODERATION_DISCONNECT:"tl_moderation-disconnect",MODERATION_PING_MISSED:"tl_moderation-ping-missed",ICE_FAILED:"tl_ice-failed",SDP_OFFER:"tl_sdp-offer",SDP_ANSWER:"tl_sdp-answer",ICE_PAIR:"tl_ice-pair",MEDIA_DATA:"tl_media-data",BW_SWITCH:"tl_bw-switch",CONNECTED:"tl_connected",CONNECTION_PROTOCOL:"tl_connection-protocol",DISCONNECTED:"tl_disconnected",RECONNECTED_SFU:"tl_reconnected-sfu",DEVICE_SWITCH:"tl_device-switch",MUTE_UPDATE:"tl_mute-update",TAB_CLOSE_ATTEMPT:"tl_tab-close-attempt",USER_HANGUP:"tl_user-hangup",PUBLISH_RES_CHANGED:"tl_pub-res-changed",LAYERS_CHANGED:"tl_layers-changed",BW_ALERT:"tl_bw-alert",FRAMERATE_ALERT:"tl_framerate-alert",PACKET_LOSS_ALERT:"tl_packet-loss-alert",RTT_ALERT:"tl_rtt-alert",TOTAL_PACKET_LOSS:"tl_total-pl-alert"},e.exports.StreamingServicesTypes={SOCIAL:"social",STREAMING:"streaming"},e.exports.SystemServicesNames={WOWZA:"Wowza",DEFAULT:"Default",YOUTUBE:"YouTube",FACEBOOK:"Facebook",CUSTOM:"Custom"},e.exports.StatNames={RTT:"stats-rtt",QOE:"stats-qoe",STUN_TURN:"stats-stun-turn",PROTOCOL:"stats-protocol",PACKETS_LOST:"stats-packets-lost",PACKET_LOSS_RATE:"stats-packet-loss",SIM_LAYERS:"stats-simulcast-layers",VIDEO_BW:"stats-video-bw",VIDEO_DELAY:"stats-video-delay",VIDEO_RES:"stats-video-resolution",VIDEO_CODEC:"stats-video-codec",AUDIO_BW:"stats-audio-bw",AUDIO_DELAY:"stats-audio-delay",AUDIO_CODEC:"stats-audio-codec",SCREEN_RES:"screen-video-resolution",SCREEN_BW:"screen-video-bw",BW_ESTIMATION:"stats-bw-estimation",FEC:"stats-fec"}},"./middleware/commons/messageTypes.js":function(e,t){e.exports.ServerMethods={S_INIT_DATA:"person-init",S_RES_JOIN_ACCEPED:"join-accept",S_RES_JOIN_REJECTED:"join-reject",S_EVENT_UPDATE:"update-event-state",S_SET_VIEWERS_COUNT:"s-set-viewers-count",S_VIEWER_ADDED:"s-viewer-added",S_VIEWER_ASK_QUESTION:"s-viewer-ask-question",S_SET_ACTIVE_SPEAKER_SLOT:"s-set-active-speaker-slot",S_SET_SHARED_SCREEN_SLOT:"s-set-shared-screen-slot",S_PERSON_VERIFICATION_OK:"s-person-verification-ok",S_VIEWER_VERIFICATION_RESULT:"s-viewer-verification-result",S_RESET_EVENT_CHAT:"s-reset-event-chat",READY:"ready",MEETING_STATE:"meeting-state",RECORDING_STATE:"recording-state",LECTURE_LAYOUT:"lecture-layout",LECTURE_SLIDE_NUMBER:"set-lecture-slide",PARTICIPANT_ADDED:"participant-added",PARTICIPANT_PUBLISHED:"publish",PARTICIPANT_NAME_CHANGED:"part-change-name",PARTICIPANT_REMOVED:"participant-removed",DISCONNECT:"disconnect",MUTE_UPDATE:"mute-update",MUTE:"mute",UNMUTE_REQUEST:"um-request",UNMUTE_RESPONSE:"um-response",OWNER_PIN_SUCCESS:"owner-pin-success",OWNER_PIN_FAILED:"owner-pin-failed",ROLE_CHANGED:"role-changed",CHAT:"chat-message",SEND_TRANSCRIPT:"send-transcript-message",SHARE_TRANSCRIPT:"share-transcript",TURN_ON_SUBTITLES:"turn-on-subtitles",STATUS_UPDATE:"status-update",RAISE_HAND_UPDATE:"raise-hand-set",RAISE_HAND_RES:"raise-hand-res",STREAMING_STATE:"streaming-state",PARTICIPANT_SHARES:"part-screen-share",STATS_UPDATE:"stats-update",RECEIVE_REQUEST_TO_PARTICIPATE:"receive-request-to-participate",SIP_CALL_STATE:"sip-call-state",BFM_ON_PAUSE:"bfm-on-pause",GATEWAY_AVAILABLE:"gateway-available",LAYOUT_ORDER_UPDATE:"update-layout-order",MW_NOTIFICATION:"middleware-notification",S_STORYBOARD_SHARE:"moderation-share-storyboard",S_SET_SPOTLIGHT_STREAMS:"moderation-set-spotlight-streams",S_EVENT_POLL_UPDATE:"s-poll-update",SHARING_STOP:"stop-sharing",ACCEPT_REQUEST_TO_PARTICIPATE:"accept-request-to-participate",REJECT_REQUEST_TO_PARTICIPATE:"reject-request-to-participate",REQUEST_TO_PARTICIPATE_SENT:"request-to-participate-sent",SET_STREAMING_STATE:"streaming-state",MODERATOR_MESSAGE:"moderator-message",MEETING_MODE:"set-meeting-mode",MON_LIST:"mcu-instance-list"},e.exports.ClientMethods={C_TIMELINE_EVENT:"timeline-event",C_BYE:"bye",C_REQ_JOIN:"join-request",C_CANCEL_JOIN:"join-cancel",C_START_EVENT:"event-start",C_STOP_EVENT:"event-stop",C_VIEWER_ASK_QUESTION:"viewer-ask-a-question",C_SET_ACTIVE_SPEAKER_SLOT:"set-active-speaker-slot",C_SET_SHARED_SCREEN_SLOT:"set-shared-screen-slot",C_PERSON_VERIFY:"c-person-verify",C_VIEWER_VERIFY:"c-viewer-verify",C_STORYBOARD_SHARE:"meeting-share-storyboard",C_SET_SPOTLIGHT_STREAMS:"meeting-set-spotlight-streams",C_EVENT_POLL_EDIT:"event-poll-edit",C_EVENT_POLL_END:"event-poll-end",C_EVENT_POLL_START:"event-poll-start",C_EVENT_POLL_VOTE:"event-poll-vote",C_SHARE_EVENT_LAYOUT:"event-share-layout",VOICE_ACTIVATION:"voice-activation",STATS:"stats",PARTICIPANT_UNPUBLISHED:"unpublish",LECTURE_LAYOUT:"lecture-layout",MEETING_MODE:"set-meeting-mode",GET_ROLE:"get-role",ROLE_CHANGED:"role-changed",KICK_PARTICIPANT:"kick-participant",LECTURE_SLIDE_NUMBER:"set-lecture-slide",PARTICIPANT_SHARES:"part-screen-share",SHARING_STOP:"stop-sharing",PARTICIPANT_READY:"participant-ready",PARTICIPANT_PUBLISHED:"publish",MUTE:"mute",UNMUTE_REQUEST:"um-request",UNMUTE_RESPONSE:"um-response",STATUS_UPDATE:"status-update",MUTE_UPDATE:"mute-update",PARTICIPANT_NAME_CHANGED:"part-change-name",OWNER_PIN_ENTER:"enter-owner-pin",CHAT:"chat-message",MESSAGE_TO_VIEWERS:"message-to-viewers",SEND_TRANSCRIPT:"send-transcript-message",SHARE_TRANSCRIPT:"share-transcript",TURN_ON_SUBTITLES:"turn-on-subtitles",ACCEPT_REQUEST_TO_PARTICIPATE:"accept-request-to-participate",REJECT_REQUEST_TO_PARTICIPATE:"reject-request-to-participate",RAISE_HAND_REQ:"raise-hand",RAISE_HAND_RES:"raise-hand-res",BFM_ON_PAUSE:"bfm-on-pause",SIP_CALL_STATE:"sip-call-state",RECORDING_STATE:"recording-state",ROOM_CLOSE:"room-close",MODERATOR_MESSAGE:"moderator-message",RAISE_HAND_UPDATE:"raise-hand-set",MEETING_DISBAND:"disband",LECTURE_STATE:"set-lecture-state",PARTICIPANT_REMOVE:"part-remove",STREAMING_START:"strm-start",STREAMING_STOP:"strm-stop",SHARING_START:"start-sharing",SEND_REQUEST_TO_PARTICIPATE:"send-request-to-participate",RECEIVE_REQUEST_TO_PARTICIPATE:"receive-request-to-participate",VIEWER_JOIN_TO_MEETING:"viewer-join-to-meeting",LEAVE_PLAYBACK_PAGE:"leave-playback-page",MW_NOTIFICATION:"middleware-notification"}},"./middleware/libs/services/timeline/types.js":function(e,t,r){const{TimelineEventNames:n,TimelineEventTypes:o,TimelineActorTypes:i}=r("./middleware/commons/enums.js"),a=(e,t,r,n)=>({type:e,name:t,data:n,actorInfo:r});t.action={eventRehearsing:(e,t)=>a(o.ACTION,n.EVENT_REHEARSING,e,{state:t}),eventLive:(e,t)=>a(o.ACTION,n.EVENT_LIVE,e,{state:t}),screenShare:(e,t)=>a(o.ACTION,n.SCREEN_SHARE,e,{state:t}),storyboardShare:(e,t,r)=>a(o.ACTION,n.STORYBOARD_SHARE,e,{state:t,storyboardId:r}),storyboardSceneChanged:(e,t)=>a(o.ACTION,n.STORYBOARD_SCENE_CHANGE,e,{sceneNumber:t}),lsLayoutMode:(e,t)=>a(o.ACTION,n.LIVE_STAGE_LAYOUT_MODE,e,{mode:t}),lsLayoutChange:(e,t)=>a(o.ACTION,n.LIVE_STAGE_LAYOUT_CHANGE,e,{layout:t}),muteRemote:(e,t,r)=>a(o.ACTION,n.REMOTE_MUTE,e,{devices:t,targetParticipantId:r}),raiseHandReq:(e,t)=>a(o.ACTION,n.RAISE_HAND_REQUEST,e,{isRaised:t}),raiseHandRes:(e,t,r)=>a(o.ACTION,n.RAISE_HAND_REQUEST,e,{accepted:t,targetId:r}),poll:(e,t,r)=>a(o.ACTION,n.POLL,e,{state:t,pollId:r}),pollAnswer:(e,t,r)=>a(o.ACTION,n.POLL_ANSWER,e,{answer:t,pollId:r}),recording:(e,t)=>a(o.ACTION,n.RECORDING,e,{state:t}),streaming:(e,t)=>a(o.ACTION,n.STREAMING,e,{state:t}),chat:(e,t)=>a(o.ACTION,n.CHAT,e,{type:t}),invite:(e,t,r)=>a(o.ACTION,n.INVITE,e,{room:t,targetUri:r})},t.info={connected:(e,t)=>a(o.INFO,n.CONNECTED,e,{basicInfo:t}),connectionProtocol:(e,t)=>a(o.INFO,n.CONNECTION_PROTOCOL,e,{protocol:t}),disconnected:(e,t)=>{let r=t;return"object"==typeof t&&(r=t.code),a(o.INFO,n.DISCONNECTED,e,{reason:r})},reconnectedSfu:e=>a(o.INFO,n.RECONNECTED_SFU,e,{}),deviceSwitch:(e,t,r)=>a(o.INFO,n.DEVICE_SWITCH,e,{deviceId:r,deviceKind:t}),muteUpdate:(e,t)=>a(o.INFO,n.MUTE_UPDATE,e,{devices:t}),tabCloseAttempt:e=>a(o.INFO,n.TAB_CLOSE_ATTEMPT,e,{}),userHangup:e=>a(o.INFO,n.USER_HANGUP,e,{})},t.qoe={publishResolutionChanged:(e,t,r)=>a(o.QOE,n.PUBLISH_RES_CHANGED,e,{resolution:t,bandwidth:r}),layersChanged:(e,t,r)=>a(o.QOE,n.LAYERS_CHANGED,e,{oldLayer:t,newLayer:r}),bandwidthAlert:(e,t)=>a(o.QOE,n.BW_ALERT,e,{currentBw:t}),frameRateAlert:(e,t)=>a(o.QOE,n.FRAMERATE_ALERT,e,{currentFr:t}),packetLossAlert:(e,t)=>a(o.QOE,n.PACKET_LOSS_ALERT,e,{lostCount:t}),rttAlert:(e,t)=>a(o.QOE,n.RTT_ALERT,e,{rtt:t}),totalPacketLossAlert:(e,t)=>a(o.QOE,n.TOTAL_PACKET_LOSS,e,{totalPacketLoss:t})},t.debug={connected:(e,t)=>a(o.DEBUG,n.CONNECTED,e,{extendedInfo:t}),recording:(e,t)=>a(o.DEBUG,n.RECORDING,e,{recordingOptions:t}),streaming:(e,t)=>a(o.DEBUG,n.STREAMING,e,{streamingOptions:t}),mediaPublished:(e,t)=>a(o.DEBUG,n.MEDIA_DATA,e,{mediaData:t}),uiError:(e,t)=>a(o.DEBUG,n.UI_ERROR,e,{error:t}),sfuDisconnect:(e,t)=>a(o.DEBUG,n.SFU_SIGNALING_DISCONNECT,e,{reason:t}),sfuControllerDisconnect:(e,t)=>a(o.DEBUG,n.SFU_CONTROLLER_DISCONNECT,e,{reason:t}),sfuPingMissed:(e,t)=>a(o.DEBUG,n.SFU_PING_MISSED,e,{missCount:t}),moderationDisconnect:(e,t)=>a(o.DEBUG,n.MODERATION_DISCONNECT,e,{reason:t}),moderationPingMissed:(e,t)=>a(o.DEBUG,n.MODERATION_PING_MISSED,e,{missCount:t}),iceFailed:(e,t)=>a(o.DEBUG,n.ICE_FAILED,e,{reason:t}),sdpOffer:(e,t)=>a(o.DEBUG,n.SDP_OFFER,e,{offer:t}),sdpAnswer:(e,t)=>a(o.DEBUG,n.SDP_ANSWER,e,{answer:t}),icePair:(e,t)=>a(o.DEBUG,n.ICE_PAIR,e,{data:t}),bwSwitch:(e,t)=>a(o.DEBUG,n.BW_SWITCH,e,t)},t.actors={participant:e=>({type:i.PARTICIPANT,id:e._id}),system:(e="")=>({type:i.SYSTEM,id:e}),mediaServer:(e="")=>({type:i.MEDIA_SERVER,id:e})}},"./node_modules/@babel/runtime/helpers/arrayLikeToArray.js":function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n},e.exports.default=e.exports,e.exports.__esModule=!0},"./node_modules/@babel/runtime/helpers/arrayWithHoles.js":function(e,t){e.exports=function(e){if(Array.isArray(e))return e},e.exports.default=e.exports,e.exports.__esModule=!0},"./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js":function(e,t,r){var n=r("./node_modules/@babel/runtime/helpers/arrayLikeToArray.js");e.exports=function(e){if(Array.isArray(e))return n(e)},e.exports.default=e.exports,e.exports.__esModule=!0},"./node_modules/@babel/runtime/helpers/construct.js":function(e,t,r){var n=r("./node_modules/@babel/runtime/helpers/setPrototypeOf.js"),o=r("./node_modules/@babel/runtime/helpers/isNativeReflectConstruct.js");function i(t,r,a){return o()?(e.exports=i=Reflect.construct,e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=i=function(e,t,r){var o=[null];o.push.apply(o,t);var i=new(Function.bind.apply(e,o));return r&&n(i,r.prototype),i},e.exports.default=e.exports,e.exports.__esModule=!0),i.apply(null,arguments)}e.exports=i,e.exports.default=e.exports,e.exports.__esModule=!0},"./node_modules/@babel/runtime/helpers/createClass.js":function(e,t){function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e},e.exports.default=e.exports,e.exports.__esModule=!0},"./node_modules/@babel/runtime/helpers/defineProperty.js":function(e,t){e.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.default=e.exports,e.exports.__esModule=!0},"./node_modules/@babel/runtime/helpers/esm/extends.js":function(e,t,r){"use strict";function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}r.d(t,"a",(function(){return n}))},"./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js":function(e,t,r){"use strict";function n(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}r.d(t,"a",(function(){return n}))},"./node_modules/@babel/runtime/helpers/inheritsLoose.js":function(e,t,r){var n=r("./node_modules/@babel/runtime/helpers/setPrototypeOf.js");e.exports=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,n(e,t)},e.exports.default=e.exports,e.exports.__esModule=!0},"./node_modules/@babel/runtime/helpers/isNativeReflectConstruct.js":function(e,t){e.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}},e.exports.default=e.exports,e.exports.__esModule=!0},"./node_modules/@babel/runtime/helpers/iterableToArray.js":function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.default=e.exports,e.exports.__esModule=!0},"./node_modules/@babel/runtime/helpers/iterableToArrayLimit.js":function(e,t){e.exports=function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}},e.exports.default=e.exports,e.exports.__esModule=!0},"./node_modules/@babel/runtime/helpers/nonIterableRest.js":function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0},"./node_modules/@babel/runtime/helpers/nonIterableSpread.js":function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0},"./node_modules/@babel/runtime/helpers/objectWithoutProperties.js":function(e,t,r){var n=r("./node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js");e.exports=function(e,t){if(null==e)return{};var r,o,i=n(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i},e.exports.default=e.exports,e.exports.__esModule=!0},"./node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js":function(e,t){e.exports=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o},e.exports.default=e.exports,e.exports.__esModule=!0},"./node_modules/@babel/runtime/helpers/setPrototypeOf.js":function(e,t){function r(t,n){return e.exports=r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports.default=e.exports,e.exports.__esModule=!0,r(t,n)}e.exports=r,e.exports.default=e.exports,e.exports.__esModule=!0},"./node_modules/@babel/runtime/helpers/slicedToArray.js":function(e,t,r){var n=r("./node_modules/@babel/runtime/helpers/arrayWithHoles.js"),o=r("./node_modules/@babel/runtime/helpers/iterableToArrayLimit.js"),i=r("./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js"),a=r("./node_modules/@babel/runtime/helpers/nonIterableRest.js");e.exports=function(e,t){return n(e)||o(e,t)||i(e,t)||a()},e.exports.default=e.exports,e.exports.__esModule=!0},"./node_modules/@babel/runtime/helpers/toConsumableArray.js":function(e,t,r){var n=r("./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js"),o=r("./node_modules/@babel/runtime/helpers/iterableToArray.js"),i=r("./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js"),a=r("./node_modules/@babel/runtime/helpers/nonIterableSpread.js");e.exports=function(e){return n(e)||o(e)||i(e)||a()},e.exports.default=e.exports,e.exports.__esModule=!0},"./node_modules/@babel/runtime/helpers/typeof.js":function(e,t){function r(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(e.exports=r=function(e){return typeof e},e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=r=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.default=e.exports,e.exports.__esModule=!0),r(t)}e.exports=r,e.exports.default=e.exports,e.exports.__esModule=!0},"./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js":function(e,t,r){var n=r("./node_modules/@babel/runtime/helpers/arrayLikeToArray.js");e.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}},e.exports.default=e.exports,e.exports.__esModule=!0},"./node_modules/asap/browser-raw.js":function(e,t,r){"use strict";(function(t){function r(e){o.length||(n(),!0),o[o.length]=e}e.exports=r;var n,o=[],i=0;function a(){for(;i<o.length;){var e=i;if(i+=1,o[e].call(),i>1024){for(var t=0,r=o.length-i;t<r;t++)o[t]=o[t+i];o.length-=i,i=0}}o.length=0,i=0,!1}var s,c,u,d=void 0!==t?t:self,p=d.MutationObserver||d.WebKitMutationObserver;function l(e){return function(){var t=setTimeout(n,0),r=setInterval(n,50);function n(){clearTimeout(t),clearInterval(r),e()}}}"function"==typeof p?(s=1,c=new p(a),u=document.createTextNode(""),c.observe(u,{characterData:!0}),n=function(){s=-s,u.data=s}):n=l(a),r.requestFlush=n,r.makeRequestCallFromTimer=l}).call(this,r("./node_modules/webpack/buildin/global.js"))},"./node_modules/immutability-helper/index.js":function(e,t,r){"use strict";(function(r){function n(e){return"object"!=typeof e||"toString"in e?e:Object.prototype.toString.call(e).slice(8,-1)}Object.defineProperty(t,"__esModule",{value:!0});var o="object"==typeof r&&!0;function i(e,t){if(!e){if(o)throw new Error("Invariant failed");throw new Error(t())}}t.invariant=i;var a=Object.prototype.hasOwnProperty,s=Array.prototype.splice,c=Object.prototype.toString;function u(e){return c.call(e).slice(8,-1)}var d=Object.assign||function(e,t){return p(t).forEach((function(r){a.call(t,r)&&(e[r]=t[r])})),e},p="function"==typeof Object.getOwnPropertySymbols?function(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.keys(e)};function l(e){return Array.isArray(e)?d(e.constructor(e.length),e):"Map"===u(e)?new Map(e):"Set"===u(e)?new Set(e):e&&"object"==typeof e?d(Object.create(Object.getPrototypeOf(e)),e):e}var f=function(){function e(){this.commands=d({},h),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(e,t){return e===t},this.update.newContext=function(){return(new e).update}}return Object.defineProperty(e.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(e){this.update.isEquals=e},enumerable:!0,configurable:!0}),e.prototype.extend=function(e,t){this.commands[e]=t},e.prototype.update=function(e,t){var r=this,n="function"==typeof t?{$apply:t}:t;Array.isArray(e)&&Array.isArray(n)||i(!Array.isArray(n),(function(){return"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."})),i("object"==typeof n&&null!==n,(function(){return"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the following commands: "+Object.keys(r.commands).join(", ")+"."}));var o=e;return p(n).forEach((function(t){if(a.call(r.commands,t)){var i=e===o;o=r.commands[t](n[t],o,n,e),i&&r.isEquals(o,e)&&(o=e)}else{var s="Map"===u(e)?r.update(e.get(t),n[t]):r.update(e[t],n[t]),c="Map"===u(o)?o.get(t):o[t];r.isEquals(s,c)&&(void 0!==s||a.call(e,t))||(o===e&&(o=l(e)),"Map"===u(o)?o.set(t,s):o[t]=s)}})),o},e}();t.Context=f;var h={$push:function(e,t,r){return v(t,r,"$push"),e.length?t.concat(e):t},$unshift:function(e,t,r){return v(t,r,"$unshift"),e.length?e.concat(t):t},$splice:function(e,t,r,o){return function(e,t){i(Array.isArray(e),(function(){return"Expected $splice target to be an array; got "+n(e)})),y(t.$splice)}(t,r),e.forEach((function(e){y(e),t===o&&e.length&&(t=l(o)),s.apply(t,e)})),t},$set:function(e,t,r){return function(e){i(1===Object.keys(e).length,(function(){return"Cannot have more than one key in an object with $set"}))}(r),e},$toggle:function(e,t){g(e,"$toggle");var r=e.length?l(t):t;return e.forEach((function(e){r[e]=!t[e]})),r},$unset:function(e,t,r,n){return g(e,"$unset"),e.forEach((function(e){Object.hasOwnProperty.call(t,e)&&(t===n&&(t=l(n)),delete t[e])})),t},$add:function(e,t,r,n){return _(t,"$add"),g(e,"$add"),"Map"===u(t)?e.forEach((function(e){var r=e[0],o=e[1];t===n&&t.get(r)!==o&&(t=l(n)),t.set(r,o)})):e.forEach((function(e){t!==n||t.has(e)||(t=l(n)),t.add(e)})),t},$remove:function(e,t,r,n){return _(t,"$remove"),g(e,"$remove"),e.forEach((function(e){t===n&&t.has(e)&&(t=l(n)),t.delete(e)})),t},$merge:function(e,t,r,o){var a,s;return a=t,i((s=e)&&"object"==typeof s,(function(){return"update(): $merge expects a spec of type 'object'; got "+n(s)})),i(a&&"object"==typeof a,(function(){return"update(): $merge expects a target of type 'object'; got "+n(a)})),p(e).forEach((function(r){e[r]!==t[r]&&(t===o&&(t=l(o)),t[r]=e[r])})),t},$apply:function(e,t){var r;return i("function"==typeof(r=e),(function(){return"update(): expected spec of $apply to be a function; got "+n(r)+"."})),e(t)}},m=new f;function v(e,t,r){i(Array.isArray(e),(function(){return"update(): expected target of "+n(r)+" to be an array; got "+n(e)+"."})),g(t[r],r)}function g(e,t){i(Array.isArray(e),(function(){return"update(): expected spec of "+n(t)+" to be an array; got "+n(e)+". Did you forget to wrap your parameter in an array?"}))}function y(e){i(Array.isArray(e),(function(){return"update(): expected spec of $splice to be an array of arrays; got "+n(e)+". Did you forget to wrap your parameters in an array?"}))}function _(e,t){var r=u(e);i("Map"===r||"Set"===r,(function(){return"update(): "+n(t)+" expects a target of type Set or Map; got "+n(r)}))}t.isEquals=m.update.isEquals,t.extend=m.extend,t.default=m.update,t.default.default=e.exports=d(t.default,t)}).call(this,r("./node_modules/process/browser.js"))},"./node_modules/js-logger/src/logger.js":function(e,t,r){var n,o;!function(i){"use strict";var a,s={};s.VERSION="1.6.1";var c={},u=function(e,t){return function(){return t.apply(e,arguments)}},d=function(){var e,t,r=arguments,n=r[0];for(t=1;t<r.length;t++)for(e in r[t])!(e in n)&&r[t].hasOwnProperty(e)&&(n[e]=r[t][e]);return n},p=function(e,t){return{value:e,name:t}};s.TRACE=p(1,"TRACE"),s.DEBUG=p(2,"DEBUG"),s.INFO=p(3,"INFO"),s.TIME=p(4,"TIME"),s.WARN=p(5,"WARN"),s.ERROR=p(8,"ERROR"),s.OFF=p(99,"OFF");var l=function(e){this.context=e,this.setLevel(e.filterLevel),this.log=this.info};l.prototype={setLevel:function(e){e&&"value"in e&&(this.context.filterLevel=e)},getLevel:function(){return this.context.filterLevel},enabledFor:function(e){var t=this.context.filterLevel;return e.value>=t.value},trace:function(){this.invoke(s.TRACE,arguments)},debug:function(){this.invoke(s.DEBUG,arguments)},info:function(){this.invoke(s.INFO,arguments)},warn:function(){this.invoke(s.WARN,arguments)},error:function(){this.invoke(s.ERROR,arguments)},time:function(e){"string"==typeof e&&e.length>0&&this.invoke(s.TIME,[e,"start"])},timeEnd:function(e){"string"==typeof e&&e.length>0&&this.invoke(s.TIME,[e,"end"])},invoke:function(e,t){a&&this.enabledFor(e)&&a(t,d({level:e},this.context))}};var f,h=new l({filterLevel:s.OFF});(f=s).enabledFor=u(h,h.enabledFor),f.trace=u(h,h.trace),f.debug=u(h,h.debug),f.time=u(h,h.time),f.timeEnd=u(h,h.timeEnd),f.info=u(h,h.info),f.warn=u(h,h.warn),f.error=u(h,h.error),f.log=f.info,s.setHandler=function(e){a=e},s.setLevel=function(e){for(var t in h.setLevel(e),c)c.hasOwnProperty(t)&&c[t].setLevel(e)},s.getLevel=function(){return h.getLevel()},s.get=function(e){return c[e]||(c[e]=new l(d({name:e},h.context)))},s.createDefaultHandler=function(e){(e=e||{}).formatter=e.formatter||function(e,t){t.name&&e.unshift("["+t.name+"]")};var t={},r=function(e,t){Function.prototype.apply.call(e,console,t)};return"undefined"==typeof console?function(){}:function(n,o){n=Array.prototype.slice.call(n);var i,a=console.log;o.level===s.TIME?(i=(o.name?"["+o.name+"] ":"")+n[0],"start"===n[1]?console.time?console.time(i):t[i]=(new Date).getTime():console.timeEnd?console.timeEnd(i):r(a,[i+": "+((new Date).getTime()-t[i])+"ms"])):(o.level===s.WARN&&console.warn?a=console.warn:o.level===s.ERROR&&console.error?a=console.error:o.level===s.INFO&&console.info?a=console.info:o.level===s.DEBUG&&console.debug?a=console.debug:o.level===s.TRACE&&console.trace&&(a=console.trace),e.formatter(n,o),r(a,n))}},s.useDefaults=function(e){s.setLevel(e&&e.defaultLevel||s.DEBUG),s.setHandler(s.createDefaultHandler(e))},s.setDefaults=s.useDefaults,void 0===(o="function"==typeof(n=s)?n.call(t,r,t,e):n)||(e.exports=o)}()},"./node_modules/lodash.find/index.js":function(e,t,r){(function(e,r){var n="[object Arguments]",o="[object Map]",i="[object Object]",a="[object Set]",s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,c=/^\w*$/,u=/^\./,d=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,p=/^\s+|\s+$/g,l=/\\(\\)?/g,f=/^[-+]0x[0-9a-f]+$/i,h=/^0b[01]+$/i,m=/^\[object .+?Constructor\]$/,v=/^0o[0-7]+$/i,g=/^(?:0|[1-9]\d*)$/,y={};y["[object Float32Array]"]=y["[object Float64Array]"]=y["[object Int8Array]"]=y["[object Int16Array]"]=y["[object Int32Array]"]=y["[object Uint8Array]"]=y["[object Uint8ClampedArray]"]=y["[object Uint16Array]"]=y["[object Uint32Array]"]=!0,y[n]=y["[object Array]"]=y["[object ArrayBuffer]"]=y["[object Boolean]"]=y["[object DataView]"]=y["[object Date]"]=y["[object Error]"]=y["[object Function]"]=y[o]=y["[object Number]"]=y[i]=y["[object RegExp]"]=y[a]=y["[object String]"]=y["[object WeakMap]"]=!1;var _=parseInt,E="object"==typeof e&&e&&e.Object===Object&&e,S="object"==typeof self&&self&&self.Object===Object&&self,b=E||S||Function("return this")(),T=t&&!t.nodeType&&t,R=T&&"object"==typeof r&&r&&!r.nodeType&&r,C=R&&R.exports===T&&E.process,O=function(){try{return C&&C.binding("util")}catch(e){}}(),w=O&&O.isTypedArray;function A(e,t){for(var r=-1,n=e?e.length:0;++r<n;)if(t(e[r],r,e))return!0;return!1}function I(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function x(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}function k(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}var P,N,D,j=Array.prototype,M=Function.prototype,L=Object.prototype,U=b["__core-js_shared__"],V=(P=/[^.]+$/.exec(U&&U.keys&&U.keys.IE_PROTO||""))?"Symbol(src)_1."+P:"",F=M.toString,G=L.hasOwnProperty,B=L.toString,H=RegExp("^"+F.call(G).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),W=b.Symbol,q=b.Uint8Array,K=L.propertyIsEnumerable,z=j.splice,Y=(N=Object.keys,D=Object,function(e){return N(D(e))}),Q=Math.max,J=Oe(b,"DataView"),$=Oe(b,"Map"),X=Oe(b,"Promise"),Z=Oe(b,"Set"),ee=Oe(b,"WeakMap"),te=Oe(Object,"create"),re=De(J),ne=De($),oe=De(X),ie=De(Z),ae=De(ee),se=W?W.prototype:void 0,ce=se?se.valueOf:void 0,ue=se?se.toString:void 0;function de(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function pe(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function le(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function fe(e){var t=-1,r=e?e.length:0;for(this.__data__=new le;++t<r;)this.add(e[t])}function he(e){this.__data__=new pe(e)}function me(e,t){var r=Fe(e)||Ve(e)?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],n=r.length,o=!!n;for(var i in e)!t&&!G.call(e,i)||o&&("length"==i||Ae(i,n))||r.push(i);return r}function ve(e,t){for(var r=e.length;r--;)if(Ue(e[r][0],t))return r;return-1}function ge(e,t){for(var r=0,n=(t=Ie(t,e)?[t]:Te(t)).length;null!=e&&r<n;)e=e[Ne(t[r++])];return r&&r==n?e:void 0}function ye(e,t){return null!=e&&t in Object(e)}function _e(e,t,r,s,c){return e===t||(null==e||null==t||!We(e)&&!qe(t)?e!=e&&t!=t:function(e,t,r,s,c,u){var d=Fe(e),p=Fe(t),l="[object Array]",f="[object Array]";d||(l=(l=we(e))==n?i:l);p||(f=(f=we(t))==n?i:f);var h=l==i&&!I(e),m=f==i&&!I(t),v=l==f;if(v&&!h)return u||(u=new he),d||ze(e)?Re(e,t,r,s,c,u):function(e,t,r,n,i,s,c){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!n(new q(e),new q(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Ue(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case o:var u=x;case a:var d=2&s;if(u||(u=k),e.size!=t.size&&!d)return!1;var p=c.get(e);if(p)return p==t;s|=1,c.set(e,t);var l=Re(u(e),u(t),n,i,s,c);return c.delete(e),l;case"[object Symbol]":if(ce)return ce.call(e)==ce.call(t)}return!1}(e,t,l,r,s,c,u);if(!(2&c)){var g=h&&G.call(e,"__wrapped__"),y=m&&G.call(t,"__wrapped__");if(g||y){var _=g?e.value():e,E=y?t.value():t;return u||(u=new he),r(_,E,s,c,u)}}if(!v)return!1;return u||(u=new he),function(e,t,r,n,o,i){var a=2&o,s=Ye(e),c=s.length,u=Ye(t).length;if(c!=u&&!a)return!1;var d=c;for(;d--;){var p=s[d];if(!(a?p in t:G.call(t,p)))return!1}var l=i.get(e);if(l&&i.get(t))return l==t;var f=!0;i.set(e,t),i.set(t,e);var h=a;for(;++d<c;){p=s[d];var m=e[p],v=t[p];if(n)var g=a?n(v,m,p,t,e,i):n(m,v,p,e,t,i);if(!(void 0===g?m===v||r(m,v,n,o,i):g)){f=!1;break}h||(h="constructor"==p)}if(f&&!h){var y=e.constructor,_=t.constructor;y==_||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof _&&_ instanceof _||(f=!1)}return i.delete(e),i.delete(t),f}(e,t,r,s,c,u)}(e,t,_e,r,s,c))}function Ee(e){return!(!We(e)||function(e){return!!V&&V in e}(e))&&(Be(e)||I(e)?H:m).test(De(e))}function Se(e){return"function"==typeof e?e:null==e?Qe:"object"==typeof e?Fe(e)?function(e,t){if(Ie(e)&&xe(t))return ke(Ne(e),t);return function(r){var n=function(e,t,r){var n=null==e?void 0:ge(e,t);return void 0===n?r:n}(r,e);return void 0===n&&n===t?function(e,t){return null!=e&&function(e,t,r){t=Ie(t,e)?[t]:Te(t);var n,o=-1,i=t.length;for(;++o<i;){var a=Ne(t[o]);if(!(n=null!=e&&r(e,a)))break;e=e[a]}if(n)return n;return!!(i=e?e.length:0)&&He(i)&&Ae(a,i)&&(Fe(e)||Ve(e))}(e,t,ye)}(r,e):_e(t,n,void 0,3)}}(e[0],e[1]):function(e){var t=function(e){var t=Ye(e),r=t.length;for(;r--;){var n=t[r],o=e[n];t[r]=[n,o,xe(o)]}return t}(e);if(1==t.length&&t[0][2])return ke(t[0][0],t[0][1]);return function(r){return r===e||function(e,t,r,n){var o=r.length,i=o,a=!n;if(null==e)return!i;for(e=Object(e);o--;){var s=r[o];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++o<i;){var c=(s=r[o])[0],u=e[c],d=s[1];if(a&&s[2]){if(void 0===u&&!(c in e))return!1}else{var p=new he;if(n)var l=n(u,d,c,e,t,p);if(!(void 0===l?_e(d,u,n,3,p):l))return!1}}return!0}(r,e,t)}}(e):Ie(t=e)?(r=Ne(t),function(e){return null==e?void 0:e[r]}):function(e){return function(t){return ge(t,e)}}(t);var t,r}function be(e){if(r=(t=e)&&t.constructor,n="function"==typeof r&&r.prototype||L,t!==n)return Y(e);var t,r,n,o=[];for(var i in Object(e))G.call(e,i)&&"constructor"!=i&&o.push(i);return o}function Te(e){return Fe(e)?e:Pe(e)}function Re(e,t,r,n,o,i){var a=2&o,s=e.length,c=t.length;if(s!=c&&!(a&&c>s))return!1;var u=i.get(e);if(u&&i.get(t))return u==t;var d=-1,p=!0,l=1&o?new fe:void 0;for(i.set(e,t),i.set(t,e);++d<s;){var f=e[d],h=t[d];if(n)var m=a?n(h,f,d,t,e,i):n(f,h,d,e,t,i);if(void 0!==m){if(m)continue;p=!1;break}if(l){if(!A(t,(function(e,t){if(!l.has(t)&&(f===e||r(f,e,n,o,i)))return l.add(t)}))){p=!1;break}}else if(f!==h&&!r(f,h,n,o,i)){p=!1;break}}return i.delete(e),i.delete(t),p}function Ce(e,t){var r,n,o=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof t?"string":"hash"]:o.map}function Oe(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return Ee(r)?r:void 0}de.prototype.clear=function(){this.__data__=te?te(null):{}},de.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},de.prototype.get=function(e){var t=this.__data__;if(te){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return G.call(t,e)?t[e]:void 0},de.prototype.has=function(e){var t=this.__data__;return te?void 0!==t[e]:G.call(t,e)},de.prototype.set=function(e,t){return this.__data__[e]=te&&void 0===t?"__lodash_hash_undefined__":t,this},pe.prototype.clear=function(){this.__data__=[]},pe.prototype.delete=function(e){var t=this.__data__,r=ve(t,e);return!(r<0)&&(r==t.length-1?t.pop():z.call(t,r,1),!0)},pe.prototype.get=function(e){var t=this.__data__,r=ve(t,e);return r<0?void 0:t[r][1]},pe.prototype.has=function(e){return ve(this.__data__,e)>-1},pe.prototype.set=function(e,t){var r=this.__data__,n=ve(r,e);return n<0?r.push([e,t]):r[n][1]=t,this},le.prototype.clear=function(){this.__data__={hash:new de,map:new($||pe),string:new de}},le.prototype.delete=function(e){return Ce(this,e).delete(e)},le.prototype.get=function(e){return Ce(this,e).get(e)},le.prototype.has=function(e){return Ce(this,e).has(e)},le.prototype.set=function(e,t){return Ce(this,e).set(e,t),this},fe.prototype.add=fe.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},fe.prototype.has=function(e){return this.__data__.has(e)},he.prototype.clear=function(){this.__data__=new pe},he.prototype.delete=function(e){return this.__data__.delete(e)},he.prototype.get=function(e){return this.__data__.get(e)},he.prototype.has=function(e){return this.__data__.has(e)},he.prototype.set=function(e,t){var r=this.__data__;if(r instanceof pe){var n=r.__data__;if(!$||n.length<199)return n.push([e,t]),this;r=this.__data__=new le(n)}return r.set(e,t),this};var we=function(e){return B.call(e)};function Ae(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||g.test(e))&&e>-1&&e%1==0&&e<t}function Ie(e,t){if(Fe(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!Ke(e))||(c.test(e)||!s.test(e)||null!=t&&e in Object(t))}function xe(e){return e==e&&!We(e)}function ke(e,t){return function(r){return null!=r&&(r[e]===t&&(void 0!==t||e in Object(r)))}}(J&&"[object DataView]"!=we(new J(new ArrayBuffer(1)))||$&&we(new $)!=o||X&&"[object Promise]"!=we(X.resolve())||Z&&we(new Z)!=a||ee&&"[object WeakMap]"!=we(new ee))&&(we=function(e){var t=B.call(e),r=t==i?e.constructor:void 0,n=r?De(r):void 0;if(n)switch(n){case re:return"[object DataView]";case ne:return o;case oe:return"[object Promise]";case ie:return a;case ae:return"[object WeakMap]"}return t});var Pe=Le((function(e){var t;e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if(Ke(e))return ue?ue.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(t);var r=[];return u.test(e)&&r.push(""),e.replace(d,(function(e,t,n,o){r.push(n?o.replace(l,"$1"):t||e)})),r}));function Ne(e){if("string"==typeof e||Ke(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function De(e){if(null!=e){try{return F.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var je,Me=(je=function(e,t,r){var n=e?e.length:0;if(!n)return-1;var o,i,a=null==r?0:(o=function(e){return e?(e=function(e){if("number"==typeof e)return e;if(Ke(e))return NaN;if(We(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=We(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(p,"");var r=h.test(e);return r||v.test(e)?_(e.slice(2),r?2:8):f.test(e)?NaN:+e}(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}(r),i=o%1,o==o?i?o-i:o:0);return a<0&&(a=Q(n+a,0)),function(e,t,r,n){for(var o=e.length,i=r+(n?1:-1);n?i--:++i<o;)if(t(e[i],i,e))return i;return-1}(e,Se(t),a)},function(e,t,r){var n=Object(e);if(!Ge(e)){var o=Se(t);e=Ye(e),t=function(e){return o(n[e],e,n)}}var i=je(e,t,r);return i>-1?n[o?e[i]:i]:void 0});function Le(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=e.apply(this,n);return r.cache=i.set(o,a),a};return r.cache=new(Le.Cache||le),r}function Ue(e,t){return e===t||e!=e&&t!=t}function Ve(e){return function(e){return qe(e)&&Ge(e)}(e)&&G.call(e,"callee")&&(!K.call(e,"callee")||B.call(e)==n)}Le.Cache=le;var Fe=Array.isArray;function Ge(e){return null!=e&&He(e.length)&&!Be(e)}function Be(e){var t=We(e)?B.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}function He(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function We(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function qe(e){return!!e&&"object"==typeof e}function Ke(e){return"symbol"==typeof e||qe(e)&&"[object Symbol]"==B.call(e)}var ze=w?function(e){return function(t){return e(t)}}(w):function(e){return qe(e)&&He(e.length)&&!!y[B.call(e)]};function Ye(e){return Ge(e)?me(e):be(e)}function Qe(e){return e}r.exports=Me}).call(this,r("./node_modules/webpack/buildin/global.js"),r("./node_modules/webpack/buildin/module.js")(e))},"./node_modules/lodash.get/index.js":function(e,t,r){(function(t){var r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/,o=/^\./,i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,s=/^\[object .+?Constructor\]$/,c="object"==typeof t&&t&&t.Object===Object&&t,u="object"==typeof self&&self&&self.Object===Object&&self,d=c||u||Function("return this")();var p,l=Array.prototype,f=Function.prototype,h=Object.prototype,m=d["__core-js_shared__"],v=(p=/[^.]+$/.exec(m&&m.keys&&m.keys.IE_PROTO||""))?"Symbol(src)_1."+p:"",g=f.toString,y=h.hasOwnProperty,_=h.toString,E=RegExp("^"+g.call(y).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),S=d.Symbol,b=l.splice,T=D(d,"Map"),R=D(Object,"create"),C=S?S.prototype:void 0,O=C?C.toString:void 0;function w(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function A(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function I(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function x(e,t){for(var r,n,o=e.length;o--;)if((r=e[o][0])===(n=t)||r!=r&&n!=n)return o;return-1}function k(e,t){for(var o,i=0,a=(t=function(e,t){if(U(e))return!1;var o=typeof e;if("number"==o||"symbol"==o||"boolean"==o||null==e||F(e))return!0;return n.test(e)||!r.test(e)||null!=t&&e in Object(t)}(t,e)?[t]:U(o=t)?o:j(o)).length;null!=e&&i<a;)e=e[M(t[i++])];return i&&i==a?e:void 0}function P(e){return!(!V(e)||(t=e,v&&v in t))&&(function(e){var t=V(e)?_.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?E:s).test(function(e){if(null!=e){try{return g.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e));var t}function N(e,t){var r,n,o=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof t?"string":"hash"]:o.map}function D(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return P(r)?r:void 0}w.prototype.clear=function(){this.__data__=R?R(null):{}},w.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},w.prototype.get=function(e){var t=this.__data__;if(R){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return y.call(t,e)?t[e]:void 0},w.prototype.has=function(e){var t=this.__data__;return R?void 0!==t[e]:y.call(t,e)},w.prototype.set=function(e,t){return this.__data__[e]=R&&void 0===t?"__lodash_hash_undefined__":t,this},A.prototype.clear=function(){this.__data__=[]},A.prototype.delete=function(e){var t=this.__data__,r=x(t,e);return!(r<0)&&(r==t.length-1?t.pop():b.call(t,r,1),!0)},A.prototype.get=function(e){var t=this.__data__,r=x(t,e);return r<0?void 0:t[r][1]},A.prototype.has=function(e){return x(this.__data__,e)>-1},A.prototype.set=function(e,t){var r=this.__data__,n=x(r,e);return n<0?r.push([e,t]):r[n][1]=t,this},I.prototype.clear=function(){this.__data__={hash:new w,map:new(T||A),string:new w}},I.prototype.delete=function(e){return N(this,e).delete(e)},I.prototype.get=function(e){return N(this,e).get(e)},I.prototype.has=function(e){return N(this,e).has(e)},I.prototype.set=function(e,t){return N(this,e).set(e,t),this};var j=L((function(e){var t;e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if(F(e))return O?O.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(t);var r=[];return o.test(e)&&r.push(""),e.replace(i,(function(e,t,n,o){r.push(n?o.replace(a,"$1"):t||e)})),r}));function M(e){if("string"==typeof e||F(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function L(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=e.apply(this,n);return r.cache=i.set(o,a),a};return r.cache=new(L.Cache||I),r}L.Cache=I;var U=Array.isArray;function V(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function F(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==_.call(e)}e.exports=function(e,t,r){var n=null==e?void 0:k(e,t);return void 0===n?r:n}}).call(this,r("./node_modules/webpack/buildin/global.js"))},"./node_modules/lodash.isequal/index.js":function(e,t,r){(function(e,r){var n="[object Arguments]",o="[object Map]",i="[object Object]",a="[object Set]",s=/^\[object .+?Constructor\]$/,c=/^(?:0|[1-9]\d*)$/,u={};u["[object Float32Array]"]=u["[object Float64Array]"]=u["[object Int8Array]"]=u["[object Int16Array]"]=u["[object Int32Array]"]=u["[object Uint8Array]"]=u["[object Uint8ClampedArray]"]=u["[object Uint16Array]"]=u["[object Uint32Array]"]=!0,u[n]=u["[object Array]"]=u["[object ArrayBuffer]"]=u["[object Boolean]"]=u["[object DataView]"]=u["[object Date]"]=u["[object Error]"]=u["[object Function]"]=u[o]=u["[object Number]"]=u[i]=u["[object RegExp]"]=u[a]=u["[object String]"]=u["[object WeakMap]"]=!1;var d="object"==typeof e&&e&&e.Object===Object&&e,p="object"==typeof self&&self&&self.Object===Object&&self,l=d||p||Function("return this")(),f=t&&!t.nodeType&&t,h=f&&"object"==typeof r&&r&&!r.nodeType&&r,m=h&&h.exports===f,v=m&&d.process,g=function(){try{return v&&v.binding&&v.binding("util")}catch(e){}}(),y=g&&g.isTypedArray;function _(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function E(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}function S(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}var b,T,R,C=Array.prototype,O=Function.prototype,w=Object.prototype,A=l["__core-js_shared__"],I=O.toString,x=w.hasOwnProperty,k=(b=/[^.]+$/.exec(A&&A.keys&&A.keys.IE_PROTO||""))?"Symbol(src)_1."+b:"",P=w.toString,N=RegExp("^"+I.call(x).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),D=m?l.Buffer:void 0,j=l.Symbol,M=l.Uint8Array,L=w.propertyIsEnumerable,U=C.splice,V=j?j.toStringTag:void 0,F=Object.getOwnPropertySymbols,G=D?D.isBuffer:void 0,B=(T=Object.keys,R=Object,function(e){return T(R(e))}),H=ge(l,"DataView"),W=ge(l,"Map"),q=ge(l,"Promise"),K=ge(l,"Set"),z=ge(l,"WeakMap"),Y=ge(Object,"create"),Q=Se(H),J=Se(W),$=Se(q),X=Se(K),Z=Se(z),ee=j?j.prototype:void 0,te=ee?ee.valueOf:void 0;function re(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function ne(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function oe(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function ie(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new oe;++t<r;)this.add(e[t])}function ae(e){var t=this.__data__=new ne(e);this.size=t.size}function se(e,t){var r=Re(e),n=!r&&Te(e),o=!r&&!n&&Ce(e),i=!r&&!n&&!o&&xe(e),a=r||n||o||i,s=a?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],c=s.length;for(var u in e)!t&&!x.call(e,u)||a&&("length"==u||o&&("offset"==u||"parent"==u)||i&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Ee(u,c))||s.push(u);return s}function ce(e,t){for(var r=e.length;r--;)if(be(e[r][0],t))return r;return-1}function ue(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":V&&V in Object(e)?function(e){var t=x.call(e,V),r=e[V];try{e[V]=void 0;var n=!0}catch(e){}var o=P.call(e);n&&(t?e[V]=r:delete e[V]);return o}(e):function(e){return P.call(e)}(e)}function de(e){return Ie(e)&&ue(e)==n}function pe(e,t,r,s,c){return e===t||(null==e||null==t||!Ie(e)&&!Ie(t)?e!=e&&t!=t:function(e,t,r,s,c,u){var d=Re(e),p=Re(t),l=d?"[object Array]":_e(e),f=p?"[object Array]":_e(t),h=(l=l==n?i:l)==i,m=(f=f==n?i:f)==i,v=l==f;if(v&&Ce(e)){if(!Ce(t))return!1;d=!0,h=!1}if(v&&!h)return u||(u=new ae),d||xe(e)?he(e,t,r,s,c,u):function(e,t,r,n,i,s,c){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!s(new M(e),new M(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return be(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case o:var u=E;case a:var d=1&n;if(u||(u=S),e.size!=t.size&&!d)return!1;var p=c.get(e);if(p)return p==t;n|=2,c.set(e,t);var l=he(u(e),u(t),n,i,s,c);return c.delete(e),l;case"[object Symbol]":if(te)return te.call(e)==te.call(t)}return!1}(e,t,l,r,s,c,u);if(!(1&r)){var g=h&&x.call(e,"__wrapped__"),y=m&&x.call(t,"__wrapped__");if(g||y){var _=g?e.value():e,b=y?t.value():t;return u||(u=new ae),c(_,b,r,s,u)}}if(!v)return!1;return u||(u=new ae),function(e,t,r,n,o,i){var a=1&r,s=me(e),c=s.length,u=me(t).length;if(c!=u&&!a)return!1;var d=c;for(;d--;){var p=s[d];if(!(a?p in t:x.call(t,p)))return!1}var l=i.get(e);if(l&&i.get(t))return l==t;var f=!0;i.set(e,t),i.set(t,e);var h=a;for(;++d<c;){p=s[d];var m=e[p],v=t[p];if(n)var g=a?n(v,m,p,t,e,i):n(m,v,p,e,t,i);if(!(void 0===g?m===v||o(m,v,r,n,i):g)){f=!1;break}h||(h="constructor"==p)}if(f&&!h){var y=e.constructor,_=t.constructor;y==_||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof _&&_ instanceof _||(f=!1)}return i.delete(e),i.delete(t),f}(e,t,r,s,c,u)}(e,t,r,s,pe,c))}function le(e){return!(!Ae(e)||function(e){return!!k&&k in e}(e))&&(Oe(e)?N:s).test(Se(e))}function fe(e){if(r=(t=e)&&t.constructor,n="function"==typeof r&&r.prototype||w,t!==n)return B(e);var t,r,n,o=[];for(var i in Object(e))x.call(e,i)&&"constructor"!=i&&o.push(i);return o}function he(e,t,r,n,o,i){var a=1&r,s=e.length,c=t.length;if(s!=c&&!(a&&c>s))return!1;var u=i.get(e);if(u&&i.get(t))return u==t;var d=-1,p=!0,l=2&r?new ie:void 0;for(i.set(e,t),i.set(t,e);++d<s;){var f=e[d],h=t[d];if(n)var m=a?n(h,f,d,t,e,i):n(f,h,d,e,t,i);if(void 0!==m){if(m)continue;p=!1;break}if(l){if(!_(t,(function(e,t){if(a=t,!l.has(a)&&(f===e||o(f,e,r,n,i)))return l.push(t);var a}))){p=!1;break}}else if(f!==h&&!o(f,h,r,n,i)){p=!1;break}}return i.delete(e),i.delete(t),p}function me(e){return function(e,t,r){var n=t(e);return Re(e)?n:function(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}(n,r(e))}(e,ke,ye)}function ve(e,t){var r,n,o=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof t?"string":"hash"]:o.map}function ge(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return le(r)?r:void 0}re.prototype.clear=function(){this.__data__=Y?Y(null):{},this.size=0},re.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},re.prototype.get=function(e){var t=this.__data__;if(Y){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return x.call(t,e)?t[e]:void 0},re.prototype.has=function(e){var t=this.__data__;return Y?void 0!==t[e]:x.call(t,e)},re.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Y&&void 0===t?"__lodash_hash_undefined__":t,this},ne.prototype.clear=function(){this.__data__=[],this.size=0},ne.prototype.delete=function(e){var t=this.__data__,r=ce(t,e);return!(r<0)&&(r==t.length-1?t.pop():U.call(t,r,1),--this.size,!0)},ne.prototype.get=function(e){var t=this.__data__,r=ce(t,e);return r<0?void 0:t[r][1]},ne.prototype.has=function(e){return ce(this.__data__,e)>-1},ne.prototype.set=function(e,t){var r=this.__data__,n=ce(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},oe.prototype.clear=function(){this.size=0,this.__data__={hash:new re,map:new(W||ne),string:new re}},oe.prototype.delete=function(e){var t=ve(this,e).delete(e);return this.size-=t?1:0,t},oe.prototype.get=function(e){return ve(this,e).get(e)},oe.prototype.has=function(e){return ve(this,e).has(e)},oe.prototype.set=function(e,t){var r=ve(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},ie.prototype.add=ie.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},ie.prototype.has=function(e){return this.__data__.has(e)},ae.prototype.clear=function(){this.__data__=new ne,this.size=0},ae.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},ae.prototype.get=function(e){return this.__data__.get(e)},ae.prototype.has=function(e){return this.__data__.has(e)},ae.prototype.set=function(e,t){var r=this.__data__;if(r instanceof ne){var n=r.__data__;if(!W||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new oe(n)}return r.set(e,t),this.size=r.size,this};var ye=F?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var r=-1,n=null==e?0:e.length,o=0,i=[];++r<n;){var a=e[r];t(a,r,e)&&(i[o++]=a)}return i}(F(e),(function(t){return L.call(e,t)})))}:function(){return[]},_e=ue;function Ee(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||c.test(e))&&e>-1&&e%1==0&&e<t}function Se(e){if(null!=e){try{return I.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function be(e,t){return e===t||e!=e&&t!=t}(H&&"[object DataView]"!=_e(new H(new ArrayBuffer(1)))||W&&_e(new W)!=o||q&&"[object Promise]"!=_e(q.resolve())||K&&_e(new K)!=a||z&&"[object WeakMap]"!=_e(new z))&&(_e=function(e){var t=ue(e),r=t==i?e.constructor:void 0,n=r?Se(r):"";if(n)switch(n){case Q:return"[object DataView]";case J:return o;case $:return"[object Promise]";case X:return a;case Z:return"[object WeakMap]"}return t});var Te=de(function(){return arguments}())?de:function(e){return Ie(e)&&x.call(e,"callee")&&!L.call(e,"callee")},Re=Array.isArray;var Ce=G||function(){return!1};function Oe(e){if(!Ae(e))return!1;var t=ue(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function we(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function Ae(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Ie(e){return null!=e&&"object"==typeof e}var xe=y?function(e){return function(t){return e(t)}}(y):function(e){return Ie(e)&&we(e.length)&&!!u[ue(e)]};function ke(e){return null!=(t=e)&&we(t.length)&&!Oe(t)?se(e):fe(e);var t}r.exports=function(e,t){return pe(e,t)}}).call(this,r("./node_modules/webpack/buildin/global.js"),r("./node_modules/webpack/buildin/module.js")(e))},"./node_modules/lodash.omit/index.js":function(e,t,r){(function(t){var r=/^\[object .+?Constructor\]$/,n=/^(?:0|[1-9]\d*)$/,o="object"==typeof t&&t&&t.Object===Object&&t,i="object"==typeof self&&self&&self.Object===Object&&self,a=o||i||Function("return this")();function s(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function c(e,t){return!!(e?e.length:0)&&function(e,t,r){if(t!=t)return function(e,t,r,n){var o=e.length,i=r+(n?1:-1);for(;n?i--:++i<o;)if(t(e[i],i,e))return i;return-1}(e,l,r);var n=r-1,o=e.length;for(;++n<o;)if(e[n]===t)return n;return-1}(e,t,0)>-1}function u(e,t,r){for(var n=-1,o=e?e.length:0;++n<o;)if(r(t,e[n]))return!0;return!1}function d(e,t){for(var r=-1,n=e?e.length:0,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}function p(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}function l(e){return e!=e}function f(e,t){return e.has(t)}function h(e,t){return function(r){return e(t(r))}}var m,v=Array.prototype,g=Function.prototype,y=Object.prototype,_=a["__core-js_shared__"],E=(m=/[^.]+$/.exec(_&&_.keys&&_.keys.IE_PROTO||""))?"Symbol(src)_1."+m:"",S=g.toString,b=y.hasOwnProperty,T=y.toString,R=RegExp("^"+S.call(b).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),C=a.Symbol,O=h(Object.getPrototypeOf,Object),w=y.propertyIsEnumerable,A=v.splice,I=C?C.isConcatSpreadable:void 0,x=Object.getOwnPropertySymbols,k=Math.max,P=W(a,"Map"),N=W(Object,"create");function D(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function j(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function M(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function L(e){var t=-1,r=e?e.length:0;for(this.__data__=new M;++t<r;)this.add(e[t])}function U(e,t){var r=$(e)||J(e)?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],n=r.length,o=!!n;for(var i in e)!t&&!b.call(e,i)||o&&("length"==i||Y(i,n))||r.push(i);return r}function V(e,t){for(var r,n,o=e.length;o--;)if((r=e[o][0])===(n=t)||r!=r&&n!=n)return o;return-1}function F(e){return!(!ee(e)||(t=e,E&&E in t))&&(Z(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?R:r).test(function(e){if(null!=e){try{return S.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e));var t}function G(e){if(!ee(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t,r,n,o=(r=(t=e)&&t.constructor,n="function"==typeof r&&r.prototype||y,t===n),i=[];for(var a in e)("constructor"!=a||!o&&b.call(e,a))&&i.push(a);return i}function B(e){return function(e,t,r){var n=t(e);return $(e)?n:p(n,r(e))}(e,re,K)}function H(e,t){var r,n,o=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof t?"string":"hash"]:o.map}function W(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return F(r)?r:void 0}D.prototype.clear=function(){this.__data__=N?N(null):{}},D.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},D.prototype.get=function(e){var t=this.__data__;if(N){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return b.call(t,e)?t[e]:void 0},D.prototype.has=function(e){var t=this.__data__;return N?void 0!==t[e]:b.call(t,e)},D.prototype.set=function(e,t){return this.__data__[e]=N&&void 0===t?"__lodash_hash_undefined__":t,this},j.prototype.clear=function(){this.__data__=[]},j.prototype.delete=function(e){var t=this.__data__,r=V(t,e);return!(r<0)&&(r==t.length-1?t.pop():A.call(t,r,1),!0)},j.prototype.get=function(e){var t=this.__data__,r=V(t,e);return r<0?void 0:t[r][1]},j.prototype.has=function(e){return V(this.__data__,e)>-1},j.prototype.set=function(e,t){var r=this.__data__,n=V(r,e);return n<0?r.push([e,t]):r[n][1]=t,this},M.prototype.clear=function(){this.__data__={hash:new D,map:new(P||j),string:new D}},M.prototype.delete=function(e){return H(this,e).delete(e)},M.prototype.get=function(e){return H(this,e).get(e)},M.prototype.has=function(e){return H(this,e).has(e)},M.prototype.set=function(e,t){return H(this,e).set(e,t),this},L.prototype.add=L.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},L.prototype.has=function(e){return this.__data__.has(e)};var q=x?h(x,Object):ae,K=x?function(e){for(var t=[];e;)p(t,q(e)),e=O(e);return t}:ae;function z(e){return $(e)||J(e)||!!(I&&e&&e[I])}function Y(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||n.test(e))&&e>-1&&e%1==0&&e<t}function Q(e){if("string"==typeof e||function(e){return"symbol"==typeof e||te(e)&&"[object Symbol]"==T.call(e)}(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function J(e){return function(e){return te(e)&&X(e)}(e)&&b.call(e,"callee")&&(!w.call(e,"callee")||"[object Arguments]"==T.call(e))}var $=Array.isArray;function X(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}(e.length)&&!Z(e)}function Z(e){var t=ee(e)?T.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}function ee(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function te(e){return!!e&&"object"==typeof e}function re(e){return X(e)?U(e,!0):G(e)}var ne,oe,ie=(ne=function(e,t){return null==e?{}:(t=d(function e(t,r,n,o,i){var a=-1,s=t.length;for(n||(n=z),i||(i=[]);++a<s;){var c=t[a];r>0&&n(c)?r>1?e(c,r-1,n,o,i):p(i,c):o||(i[i.length]=c)}return i}(t,1),Q),function(e,t){return function(e,t,r){for(var n=-1,o=t.length,i={};++n<o;){var a=t[n],s=e[a];r(s,a)&&(i[a]=s)}return i}(e=Object(e),t,(function(t,r){return r in e}))}(e,function(e,t,r,n){var o,i=-1,a=c,s=!0,p=e.length,l=[],h=t.length;if(!p)return l;r&&(t=d(t,(o=r,function(e){return o(e)}))),n?(a=u,s=!1):t.length>=200&&(a=f,s=!1,t=new L(t));e:for(;++i<p;){var m=e[i],v=r?r(m):m;if(m=n||0!==m?m:0,s&&v==v){for(var g=h;g--;)if(t[g]===v)continue e;l.push(m)}else a(t,v,n)||l.push(m)}return l}(B(e),t)))},oe=k(void 0===oe?ne.length-1:oe,0),function(){for(var e=arguments,t=-1,r=k(e.length-oe,0),n=Array(r);++t<r;)n[t]=e[oe+t];t=-1;for(var o=Array(oe+1);++t<oe;)o[t]=e[t];return o[oe]=n,s(ne,this,o)});function ae(){return[]}e.exports=ie}).call(this,r("./node_modules/webpack/buildin/global.js"))},"./node_modules/lodash/_DataView.js":function(e,t,r){var n=r("./node_modules/lodash/_getNative.js")(r("./node_modules/lodash/_root.js"),"DataView");e.exports=n},"./node_modules/lodash/_Hash.js":function(e,t,r){var n=r("./node_modules/lodash/_hashClear.js"),o=r("./node_modules/lodash/_hashDelete.js"),i=r("./node_modules/lodash/_hashGet.js"),a=r("./node_modules/lodash/_hashHas.js"),s=r("./node_modules/lodash/_hashSet.js");function c(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}c.prototype.clear=n,c.prototype.delete=o,c.prototype.get=i,c.prototype.has=a,c.prototype.set=s,e.exports=c},"./node_modules/lodash/_ListCache.js":function(e,t,r){var n=r("./node_modules/lodash/_listCacheClear.js"),o=r("./node_modules/lodash/_listCacheDelete.js"),i=r("./node_modules/lodash/_listCacheGet.js"),a=r("./node_modules/lodash/_listCacheHas.js"),s=r("./node_modules/lodash/_listCacheSet.js");function c(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}c.prototype.clear=n,c.prototype.delete=o,c.prototype.get=i,c.prototype.has=a,c.prototype.set=s,e.exports=c},"./node_modules/lodash/_Map.js":function(e,t,r){var n=r("./node_modules/lodash/_getNative.js")(r("./node_modules/lodash/_root.js"),"Map");e.exports=n},"./node_modules/lodash/_MapCache.js":function(e,t,r){var n=r("./node_modules/lodash/_mapCacheClear.js"),o=r("./node_modules/lodash/_mapCacheDelete.js"),i=r("./node_modules/lodash/_mapCacheGet.js"),a=r("./node_modules/lodash/_mapCacheHas.js"),s=r("./node_modules/lodash/_mapCacheSet.js");function c(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}c.prototype.clear=n,c.prototype.delete=o,c.prototype.get=i,c.prototype.has=a,c.prototype.set=s,e.exports=c},"./node_modules/lodash/_Promise.js":function(e,t,r){var n=r("./node_modules/lodash/_getNative.js")(r("./node_modules/lodash/_root.js"),"Promise");e.exports=n},"./node_modules/lodash/_Set.js":function(e,t,r){var n=r("./node_modules/lodash/_getNative.js")(r("./node_modules/lodash/_root.js"),"Set");e.exports=n},"./node_modules/lodash/_SetCache.js":function(e,t,r){var n=r("./node_modules/lodash/_MapCache.js"),o=r("./node_modules/lodash/_setCacheAdd.js"),i=r("./node_modules/lodash/_setCacheHas.js");function a(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new n;++t<r;)this.add(e[t])}a.prototype.add=a.prototype.push=o,a.prototype.has=i,e.exports=a},"./node_modules/lodash/_Stack.js":function(e,t,r){var n=r("./node_modules/lodash/_ListCache.js"),o=r("./node_modules/lodash/_stackClear.js"),i=r("./node_modules/lodash/_stackDelete.js"),a=r("./node_modules/lodash/_stackGet.js"),s=r("./node_modules/lodash/_stackHas.js"),c=r("./node_modules/lodash/_stackSet.js");function u(e){var t=this.__data__=new n(e);this.size=t.size}u.prototype.clear=o,u.prototype.delete=i,u.prototype.get=a,u.prototype.has=s,u.prototype.set=c,e.exports=u},"./node_modules/lodash/_Symbol.js":function(e,t,r){var n=r("./node_modules/lodash/_root.js").Symbol;e.exports=n},"./node_modules/lodash/_Uint8Array.js":function(e,t,r){var n=r("./node_modules/lodash/_root.js").Uint8Array;e.exports=n},"./node_modules/lodash/_WeakMap.js":function(e,t,r){var n=r("./node_modules/lodash/_getNative.js")(r("./node_modules/lodash/_root.js"),"WeakMap");e.exports=n},"./node_modules/lodash/_apply.js":function(e,t){e.exports=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}},"./node_modules/lodash/_arrayFilter.js":function(e,t){e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,o=0,i=[];++r<n;){var a=e[r];t(a,r,e)&&(i[o++]=a)}return i}},"./node_modules/lodash/_arrayLikeKeys.js":function(e,t,r){var n=r("./node_modules/lodash/_baseTimes.js"),o=r("./node_modules/lodash/isArguments.js"),i=r("./node_modules/lodash/isArray.js"),a=r("./node_modules/lodash/isBuffer.js"),s=r("./node_modules/lodash/_isIndex.js"),c=r("./node_modules/lodash/isTypedArray.js"),u=Object.prototype.hasOwnProperty;e.exports=function(e,t){var r=i(e),d=!r&&o(e),p=!r&&!d&&a(e),l=!r&&!d&&!p&&c(e),f=r||d||p||l,h=f?n(e.length,String):[],m=h.length;for(var v in e)!t&&!u.call(e,v)||f&&("length"==v||p&&("offset"==v||"parent"==v)||l&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||s(v,m))||h.push(v);return h}},"./node_modules/lodash/_arrayMap.js":function(e,t){e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}},"./node_modules/lodash/_arrayPush.js":function(e,t){e.exports=function(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}},"./node_modules/lodash/_arraySome.js":function(e,t){e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}},"./node_modules/lodash/_assocIndexOf.js":function(e,t,r){var n=r("./node_modules/lodash/eq.js");e.exports=function(e,t){for(var r=e.length;r--;)if(n(e[r][0],t))return r;return-1}},"./node_modules/lodash/_baseEach.js":function(e,t,r){var n=r("./node_modules/lodash/_baseForOwn.js"),o=r("./node_modules/lodash/_createBaseEach.js")(n);e.exports=o},"./node_modules/lodash/_baseFilter.js":function(e,t,r){var n=r("./node_modules/lodash/_baseEach.js");e.exports=function(e,t){var r=[];return n(e,(function(e,n,o){t(e,n,o)&&r.push(e)})),r}},"./node_modules/lodash/_baseFlatten.js":function(e,t,r){var n=r("./node_modules/lodash/_arrayPush.js"),o=r("./node_modules/lodash/_isFlattenable.js");e.exports=function e(t,r,i,a,s){var c=-1,u=t.length;for(i||(i=o),s||(s=[]);++c<u;){var d=t[c];r>0&&i(d)?r>1?e(d,r-1,i,a,s):n(s,d):a||(s[s.length]=d)}return s}},"./node_modules/lodash/_baseFor.js":function(e,t,r){var n=r("./node_modules/lodash/_createBaseFor.js")();e.exports=n},"./node_modules/lodash/_baseForOwn.js":function(e,t,r){var n=r("./node_modules/lodash/_baseFor.js"),o=r("./node_modules/lodash/keys.js");e.exports=function(e,t){return e&&n(e,t,o)}},"./node_modules/lodash/_baseGet.js":function(e,t,r){var n=r("./node_modules/lodash/_castPath.js"),o=r("./node_modules/lodash/_toKey.js");e.exports=function(e,t){for(var r=0,i=(t=n(t,e)).length;null!=e&&r<i;)e=e[o(t[r++])];return r&&r==i?e:void 0}},"./node_modules/lodash/_baseGetAllKeys.js":function(e,t,r){var n=r("./node_modules/lodash/_arrayPush.js"),o=r("./node_modules/lodash/isArray.js");e.exports=function(e,t,r){var i=t(e);return o(e)?i:n(i,r(e))}},"./node_modules/lodash/_baseGetTag.js":function(e,t,r){var n=r("./node_modules/lodash/_Symbol.js"),o=r("./node_modules/lodash/_getRawTag.js"),i=r("./node_modules/lodash/_objectToString.js"),a=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?o(e):i(e)}},"./node_modules/lodash/_baseHasIn.js":function(e,t){e.exports=function(e,t){return null!=e&&t in Object(e)}},"./node_modules/lodash/_baseIsArguments.js":function(e,t,r){var n=r("./node_modules/lodash/_baseGetTag.js"),o=r("./node_modules/lodash/isObjectLike.js");e.exports=function(e){return o(e)&&"[object Arguments]"==n(e)}},"./node_modules/lodash/_baseIsEqual.js":function(e,t,r){var n=r("./node_modules/lodash/_baseIsEqualDeep.js"),o=r("./node_modules/lodash/isObjectLike.js");e.exports=function e(t,r,i,a,s){return t===r||(null==t||null==r||!o(t)&&!o(r)?t!=t&&r!=r:n(t,r,i,a,e,s))}},"./node_modules/lodash/_baseIsEqualDeep.js":function(e,t,r){var n=r("./node_modules/lodash/_Stack.js"),o=r("./node_modules/lodash/_equalArrays.js"),i=r("./node_modules/lodash/_equalByTag.js"),a=r("./node_modules/lodash/_equalObjects.js"),s=r("./node_modules/lodash/_getTag.js"),c=r("./node_modules/lodash/isArray.js"),u=r("./node_modules/lodash/isBuffer.js"),d=r("./node_modules/lodash/isTypedArray.js"),p="[object Object]",l=Object.prototype.hasOwnProperty;e.exports=function(e,t,r,f,h,m){var v=c(e),g=c(t),y=v?"[object Array]":s(e),_=g?"[object Array]":s(t),E=(y="[object Arguments]"==y?p:y)==p,S=(_="[object Arguments]"==_?p:_)==p,b=y==_;if(b&&u(e)){if(!u(t))return!1;v=!0,E=!1}if(b&&!E)return m||(m=new n),v||d(e)?o(e,t,r,f,h,m):i(e,t,y,r,f,h,m);if(!(1&r)){var T=E&&l.call(e,"__wrapped__"),R=S&&l.call(t,"__wrapped__");if(T||R){var C=T?e.value():e,O=R?t.value():t;return m||(m=new n),h(C,O,r,f,m)}}return!!b&&(m||(m=new n),a(e,t,r,f,h,m))}},"./node_modules/lodash/_baseIsMatch.js":function(e,t,r){var n=r("./node_modules/lodash/_Stack.js"),o=r("./node_modules/lodash/_baseIsEqual.js");e.exports=function(e,t,r,i){var a=r.length,s=a,c=!i;if(null==e)return!s;for(e=Object(e);a--;){var u=r[a];if(c&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++a<s;){var d=(u=r[a])[0],p=e[d],l=u[1];if(c&&u[2]){if(void 0===p&&!(d in e))return!1}else{var f=new n;if(i)var h=i(p,l,d,e,t,f);if(!(void 0===h?o(l,p,3,i,f):h))return!1}}return!0}},"./node_modules/lodash/_baseIsNative.js":function(e,t,r){var n=r("./node_modules/lodash/isFunction.js"),o=r("./node_modules/lodash/_isMasked.js"),i=r("./node_modules/lodash/isObject.js"),a=r("./node_modules/lodash/_toSource.js"),s=/^\[object .+?Constructor\]$/,c=Function.prototype,u=Object.prototype,d=c.toString,p=u.hasOwnProperty,l=RegExp("^"+d.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!i(e)||o(e))&&(n(e)?l:s).test(a(e))}},"./node_modules/lodash/_baseIsTypedArray.js":function(e,t,r){var n=r("./node_modules/lodash/_baseGetTag.js"),o=r("./node_modules/lodash/isLength.js"),i=r("./node_modules/lodash/isObjectLike.js"),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return i(e)&&o(e.length)&&!!a[n(e)]}},"./node_modules/lodash/_baseIteratee.js":function(e,t,r){var n=r("./node_modules/lodash/_baseMatches.js"),o=r("./node_modules/lodash/_baseMatchesProperty.js"),i=r("./node_modules/lodash/identity.js"),a=r("./node_modules/lodash/isArray.js"),s=r("./node_modules/lodash/property.js");e.exports=function(e){return"function"==typeof e?e:null==e?i:"object"==typeof e?a(e)?o(e[0],e[1]):n(e):s(e)}},"./node_modules/lodash/_baseKeys.js":function(e,t,r){var n=r("./node_modules/lodash/_isPrototype.js"),o=r("./node_modules/lodash/_nativeKeys.js"),i=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return o(e);var t=[];for(var r in Object(e))i.call(e,r)&&"constructor"!=r&&t.push(r);return t}},"./node_modules/lodash/_baseMap.js":function(e,t,r){var n=r("./node_modules/lodash/_baseEach.js"),o=r("./node_modules/lodash/isArrayLike.js");e.exports=function(e,t){var r=-1,i=o(e)?Array(e.length):[];return n(e,(function(e,n,o){i[++r]=t(e,n,o)})),i}},"./node_modules/lodash/_baseMatches.js":function(e,t,r){var n=r("./node_modules/lodash/_baseIsMatch.js"),o=r("./node_modules/lodash/_getMatchData.js"),i=r("./node_modules/lodash/_matchesStrictComparable.js");e.exports=function(e){var t=o(e);return 1==t.length&&t[0][2]?i(t[0][0],t[0][1]):function(r){return r===e||n(r,e,t)}}},"./node_modules/lodash/_baseMatchesProperty.js":function(e,t,r){var n=r("./node_modules/lodash/_baseIsEqual.js"),o=r("./node_modules/lodash/get.js"),i=r("./node_modules/lodash/hasIn.js"),a=r("./node_modules/lodash/_isKey.js"),s=r("./node_modules/lodash/_isStrictComparable.js"),c=r("./node_modules/lodash/_matchesStrictComparable.js"),u=r("./node_modules/lodash/_toKey.js");e.exports=function(e,t){return a(e)&&s(t)?c(u(e),t):function(r){var a=o(r,e);return void 0===a&&a===t?i(r,e):n(t,a,3)}}},"./node_modules/lodash/_baseOrderBy.js":function(e,t,r){var n=r("./node_modules/lodash/_arrayMap.js"),o=r("./node_modules/lodash/_baseGet.js"),i=r("./node_modules/lodash/_baseIteratee.js"),a=r("./node_modules/lodash/_baseMap.js"),s=r("./node_modules/lodash/_baseSortBy.js"),c=r("./node_modules/lodash/_baseUnary.js"),u=r("./node_modules/lodash/_compareMultiple.js"),d=r("./node_modules/lodash/identity.js"),p=r("./node_modules/lodash/isArray.js");e.exports=function(e,t,r){t=t.length?n(t,(function(e){return p(e)?function(t){return o(t,1===e.length?e[0]:e)}:e})):[d];var l=-1;t=n(t,c(i));var f=a(e,(function(e,r,o){return{criteria:n(t,(function(t){return t(e)})),index:++l,value:e}}));return s(f,(function(e,t){return u(e,t,r)}))}},"./node_modules/lodash/_baseProperty.js":function(e,t){e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},"./node_modules/lodash/_basePropertyDeep.js":function(e,t,r){var n=r("./node_modules/lodash/_baseGet.js");e.exports=function(e){return function(t){return n(t,e)}}},"./node_modules/lodash/_baseRest.js":function(e,t,r){var n=r("./node_modules/lodash/identity.js"),o=r("./node_modules/lodash/_overRest.js"),i=r("./node_modules/lodash/_setToString.js");e.exports=function(e,t){return i(o(e,t,n),e+"")}},"./node_modules/lodash/_baseSetToString.js":function(e,t,r){var n=r("./node_modules/lodash/constant.js"),o=r("./node_modules/lodash/_defineProperty.js"),i=r("./node_modules/lodash/identity.js"),a=o?function(e,t){return o(e,"toString",{configurable:!0,enumerable:!1,value:n(t),writable:!0})}:i;e.exports=a},"./node_modules/lodash/_baseSortBy.js":function(e,t){e.exports=function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}},"./node_modules/lodash/_baseTimes.js":function(e,t){e.exports=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}},"./node_modules/lodash/_baseToString.js":function(e,t,r){var n=r("./node_modules/lodash/_Symbol.js"),o=r("./node_modules/lodash/_arrayMap.js"),i=r("./node_modules/lodash/isArray.js"),a=r("./node_modules/lodash/isSymbol.js"),s=n?n.prototype:void 0,c=s?s.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(i(t))return o(t,e)+"";if(a(t))return c?c.call(t):"";var r=t+"";return"0"==r&&1/t==-1/0?"-0":r}},"./node_modules/lodash/_baseUnary.js":function(e,t){e.exports=function(e){return function(t){return e(t)}}},"./node_modules/lodash/_cacheHas.js":function(e,t){e.exports=function(e,t){return e.has(t)}},"./node_modules/lodash/_castPath.js":function(e,t,r){var n=r("./node_modules/lodash/isArray.js"),o=r("./node_modules/lodash/_isKey.js"),i=r("./node_modules/lodash/_stringToPath.js"),a=r("./node_modules/lodash/toString.js");e.exports=function(e,t){return n(e)?e:o(e,t)?[e]:i(a(e))}},"./node_modules/lodash/_compareAscending.js":function(e,t,r){var n=r("./node_modules/lodash/isSymbol.js");e.exports=function(e,t){if(e!==t){var r=void 0!==e,o=null===e,i=e==e,a=n(e),s=void 0!==t,c=null===t,u=t==t,d=n(t);if(!c&&!d&&!a&&e>t||a&&s&&u&&!c&&!d||o&&s&&u||!r&&u||!i)return 1;if(!o&&!a&&!d&&e<t||d&&r&&i&&!o&&!a||c&&r&&i||!s&&i||!u)return-1}return 0}},"./node_modules/lodash/_compareMultiple.js":function(e,t,r){var n=r("./node_modules/lodash/_compareAscending.js");e.exports=function(e,t,r){for(var o=-1,i=e.criteria,a=t.criteria,s=i.length,c=r.length;++o<s;){var u=n(i[o],a[o]);if(u)return o>=c?u:u*("desc"==r[o]?-1:1)}return e.index-t.index}},"./node_modules/lodash/_coreJsData.js":function(e,t,r){var n=r("./node_modules/lodash/_root.js")["__core-js_shared__"];e.exports=n},"./node_modules/lodash/_createBaseEach.js":function(e,t,r){var n=r("./node_modules/lodash/isArrayLike.js");e.exports=function(e,t){return function(r,o){if(null==r)return r;if(!n(r))return e(r,o);for(var i=r.length,a=t?i:-1,s=Object(r);(t?a--:++a<i)&&!1!==o(s[a],a,s););return r}}},"./node_modules/lodash/_createBaseFor.js":function(e,t){e.exports=function(e){return function(t,r,n){for(var o=-1,i=Object(t),a=n(t),s=a.length;s--;){var c=a[e?s:++o];if(!1===r(i[c],c,i))break}return t}}},"./node_modules/lodash/_defineProperty.js":function(e,t,r){var n=r("./node_modules/lodash/_getNative.js"),o=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=o},"./node_modules/lodash/_equalArrays.js":function(e,t,r){var n=r("./node_modules/lodash/_SetCache.js"),o=r("./node_modules/lodash/_arraySome.js"),i=r("./node_modules/lodash/_cacheHas.js");e.exports=function(e,t,r,a,s,c){var u=1&r,d=e.length,p=t.length;if(d!=p&&!(u&&p>d))return!1;var l=c.get(e),f=c.get(t);if(l&&f)return l==t&&f==e;var h=-1,m=!0,v=2&r?new n:void 0;for(c.set(e,t),c.set(t,e);++h<d;){var g=e[h],y=t[h];if(a)var _=u?a(y,g,h,t,e,c):a(g,y,h,e,t,c);if(void 0!==_){if(_)continue;m=!1;break}if(v){if(!o(t,(function(e,t){if(!i(v,t)&&(g===e||s(g,e,r,a,c)))return v.push(t)}))){m=!1;break}}else if(g!==y&&!s(g,y,r,a,c)){m=!1;break}}return c.delete(e),c.delete(t),m}},"./node_modules/lodash/_equalByTag.js":function(e,t,r){var n=r("./node_modules/lodash/_Symbol.js"),o=r("./node_modules/lodash/_Uint8Array.js"),i=r("./node_modules/lodash/eq.js"),a=r("./node_modules/lodash/_equalArrays.js"),s=r("./node_modules/lodash/_mapToArray.js"),c=r("./node_modules/lodash/_setToArray.js"),u=n?n.prototype:void 0,d=u?u.valueOf:void 0;e.exports=function(e,t,r,n,u,p,l){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!p(new o(e),new o(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return i(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var f=s;case"[object Set]":var h=1&n;if(f||(f=c),e.size!=t.size&&!h)return!1;var m=l.get(e);if(m)return m==t;n|=2,l.set(e,t);var v=a(f(e),f(t),n,u,p,l);return l.delete(e),v;case"[object Symbol]":if(d)return d.call(e)==d.call(t)}return!1}},"./node_modules/lodash/_equalObjects.js":function(e,t,r){var n=r("./node_modules/lodash/_getAllKeys.js"),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,r,i,a,s){var c=1&r,u=n(e),d=u.length;if(d!=n(t).length&&!c)return!1;for(var p=d;p--;){var l=u[p];if(!(c?l in t:o.call(t,l)))return!1}var f=s.get(e),h=s.get(t);if(f&&h)return f==t&&h==e;var m=!0;s.set(e,t),s.set(t,e);for(var v=c;++p<d;){var g=e[l=u[p]],y=t[l];if(i)var _=c?i(y,g,l,t,e,s):i(g,y,l,e,t,s);if(!(void 0===_?g===y||a(g,y,r,i,s):_)){m=!1;break}v||(v="constructor"==l)}if(m&&!v){var E=e.constructor,S=t.constructor;E==S||!("constructor"in e)||!("constructor"in t)||"function"==typeof E&&E instanceof E&&"function"==typeof S&&S instanceof S||(m=!1)}return s.delete(e),s.delete(t),m}},"./node_modules/lodash/_freeGlobal.js":function(e,t,r){(function(t){var r="object"==typeof t&&t&&t.Object===Object&&t;e.exports=r}).call(this,r("./node_modules/webpack/buildin/global.js"))},"./node_modules/lodash/_getAllKeys.js":function(e,t,r){var n=r("./node_modules/lodash/_baseGetAllKeys.js"),o=r("./node_modules/lodash/_getSymbols.js"),i=r("./node_modules/lodash/keys.js");e.exports=function(e){return n(e,i,o)}},"./node_modules/lodash/_getMapData.js":function(e,t,r){var n=r("./node_modules/lodash/_isKeyable.js");e.exports=function(e,t){var r=e.__data__;return n(t)?r["string"==typeof t?"string":"hash"]:r.map}},"./node_modules/lodash/_getMatchData.js":function(e,t,r){var n=r("./node_modules/lodash/_isStrictComparable.js"),o=r("./node_modules/lodash/keys.js");e.exports=function(e){for(var t=o(e),r=t.length;r--;){var i=t[r],a=e[i];t[r]=[i,a,n(a)]}return t}},"./node_modules/lodash/_getNative.js":function(e,t,r){var n=r("./node_modules/lodash/_baseIsNative.js"),o=r("./node_modules/lodash/_getValue.js");e.exports=function(e,t){var r=o(e,t);return n(r)?r:void 0}},"./node_modules/lodash/_getRawTag.js":function(e,t,r){var n=r("./node_modules/lodash/_Symbol.js"),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,s=n?n.toStringTag:void 0;e.exports=function(e){var t=i.call(e,s),r=e[s];try{e[s]=void 0;var n=!0}catch(e){}var o=a.call(e);return n&&(t?e[s]=r:delete e[s]),o}},"./node_modules/lodash/_getSymbols.js":function(e,t,r){var n=r("./node_modules/lodash/_arrayFilter.js"),o=r("./node_modules/lodash/stubArray.js"),i=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(e){return null==e?[]:(e=Object(e),n(a(e),(function(t){return i.call(e,t)})))}:o;e.exports=s},"./node_modules/lodash/_getTag.js":function(e,t,r){var n=r("./node_modules/lodash/_DataView.js"),o=r("./node_modules/lodash/_Map.js"),i=r("./node_modules/lodash/_Promise.js"),a=r("./node_modules/lodash/_Set.js"),s=r("./node_modules/lodash/_WeakMap.js"),c=r("./node_modules/lodash/_baseGetTag.js"),u=r("./node_modules/lodash/_toSource.js"),d=u(n),p=u(o),l=u(i),f=u(a),h=u(s),m=c;(n&&"[object DataView]"!=m(new n(new ArrayBuffer(1)))||o&&"[object Map]"!=m(new o)||i&&"[object Promise]"!=m(i.resolve())||a&&"[object Set]"!=m(new a)||s&&"[object WeakMap]"!=m(new s))&&(m=function(e){var t=c(e),r="[object Object]"==t?e.constructor:void 0,n=r?u(r):"";if(n)switch(n){case d:return"[object DataView]";case p:return"[object Map]";case l:return"[object Promise]";case f:return"[object Set]";case h:return"[object WeakMap]"}return t}),e.exports=m},"./node_modules/lodash/_getValue.js":function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},"./node_modules/lodash/_hasPath.js":function(e,t,r){var n=r("./node_modules/lodash/_castPath.js"),o=r("./node_modules/lodash/isArguments.js"),i=r("./node_modules/lodash/isArray.js"),a=r("./node_modules/lodash/_isIndex.js"),s=r("./node_modules/lodash/isLength.js"),c=r("./node_modules/lodash/_toKey.js");e.exports=function(e,t,r){for(var u=-1,d=(t=n(t,e)).length,p=!1;++u<d;){var l=c(t[u]);if(!(p=null!=e&&r(e,l)))break;e=e[l]}return p||++u!=d?p:!!(d=null==e?0:e.length)&&s(d)&&a(l,d)&&(i(e)||o(e))}},"./node_modules/lodash/_hashClear.js":function(e,t,r){var n=r("./node_modules/lodash/_nativeCreate.js");e.exports=function(){this.__data__=n?n(null):{},this.size=0}},"./node_modules/lodash/_hashDelete.js":function(e,t){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},"./node_modules/lodash/_hashGet.js":function(e,t,r){var n=r("./node_modules/lodash/_nativeCreate.js"),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(n){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return o.call(t,e)?t[e]:void 0}},"./node_modules/lodash/_hashHas.js":function(e,t,r){var n=r("./node_modules/lodash/_nativeCreate.js"),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return n?void 0!==t[e]:o.call(t,e)}},"./node_modules/lodash/_hashSet.js":function(e,t,r){var n=r("./node_modules/lodash/_nativeCreate.js");e.exports=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=n&&void 0===t?"__lodash_hash_undefined__":t,this}},"./node_modules/lodash/_isFlattenable.js":function(e,t,r){var n=r("./node_modules/lodash/_Symbol.js"),o=r("./node_modules/lodash/isArguments.js"),i=r("./node_modules/lodash/isArray.js"),a=n?n.isConcatSpreadable:void 0;e.exports=function(e){return i(e)||o(e)||!!(a&&e&&e[a])}},"./node_modules/lodash/_isIndex.js":function(e,t){var r=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&r.test(e))&&e>-1&&e%1==0&&e<t}},"./node_modules/lodash/_isIterateeCall.js":function(e,t,r){var n=r("./node_modules/lodash/eq.js"),o=r("./node_modules/lodash/isArrayLike.js"),i=r("./node_modules/lodash/_isIndex.js"),a=r("./node_modules/lodash/isObject.js");e.exports=function(e,t,r){if(!a(r))return!1;var s=typeof t;return!!("number"==s?o(r)&&i(t,r.length):"string"==s&&t in r)&&n(r[t],e)}},"./node_modules/lodash/_isKey.js":function(e,t,r){var n=r("./node_modules/lodash/isArray.js"),o=r("./node_modules/lodash/isSymbol.js"),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=function(e,t){if(n(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!o(e))||(a.test(e)||!i.test(e)||null!=t&&e in Object(t))}},"./node_modules/lodash/_isKeyable.js":function(e,t){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},"./node_modules/lodash/_isMasked.js":function(e,t,r){var n,o=r("./node_modules/lodash/_coreJsData.js"),i=(n=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";e.exports=function(e){return!!i&&i in e}},"./node_modules/lodash/_isPrototype.js":function(e,t){var r=Object.prototype;e.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||r)}},"./node_modules/lodash/_isStrictComparable.js":function(e,t,r){var n=r("./node_modules/lodash/isObject.js");e.exports=function(e){return e==e&&!n(e)}},"./node_modules/lodash/_listCacheClear.js":function(e,t){e.exports=function(){this.__data__=[],this.size=0}},"./node_modules/lodash/_listCacheDelete.js":function(e,t,r){var n=r("./node_modules/lodash/_assocIndexOf.js"),o=Array.prototype.splice;e.exports=function(e){var t=this.__data__,r=n(t,e);return!(r<0)&&(r==t.length-1?t.pop():o.call(t,r,1),--this.size,!0)}},"./node_modules/lodash/_listCacheGet.js":function(e,t,r){var n=r("./node_modules/lodash/_assocIndexOf.js");e.exports=function(e){var t=this.__data__,r=n(t,e);return r<0?void 0:t[r][1]}},"./node_modules/lodash/_listCacheHas.js":function(e,t,r){var n=r("./node_modules/lodash/_assocIndexOf.js");e.exports=function(e){return n(this.__data__,e)>-1}},"./node_modules/lodash/_listCacheSet.js":function(e,t,r){var n=r("./node_modules/lodash/_assocIndexOf.js");e.exports=function(e,t){var r=this.__data__,o=n(r,e);return o<0?(++this.size,r.push([e,t])):r[o][1]=t,this}},"./node_modules/lodash/_mapCacheClear.js":function(e,t,r){var n=r("./node_modules/lodash/_Hash.js"),o=r("./node_modules/lodash/_ListCache.js"),i=r("./node_modules/lodash/_Map.js");e.exports=function(){this.size=0,this.__data__={hash:new n,map:new(i||o),string:new n}}},"./node_modules/lodash/_mapCacheDelete.js":function(e,t,r){var n=r("./node_modules/lodash/_getMapData.js");e.exports=function(e){var t=n(this,e).delete(e);return this.size-=t?1:0,t}},"./node_modules/lodash/_mapCacheGet.js":function(e,t,r){var n=r("./node_modules/lodash/_getMapData.js");e.exports=function(e){return n(this,e).get(e)}},"./node_modules/lodash/_mapCacheHas.js":function(e,t,r){var n=r("./node_modules/lodash/_getMapData.js");e.exports=function(e){return n(this,e).has(e)}},"./node_modules/lodash/_mapCacheSet.js":function(e,t,r){var n=r("./node_modules/lodash/_getMapData.js");e.exports=function(e,t){var r=n(this,e),o=r.size;return r.set(e,t),this.size+=r.size==o?0:1,this}},"./node_modules/lodash/_mapToArray.js":function(e,t){e.exports=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}},"./node_modules/lodash/_matchesStrictComparable.js":function(e,t){e.exports=function(e,t){return function(r){return null!=r&&(r[e]===t&&(void 0!==t||e in Object(r)))}}},"./node_modules/lodash/_memoizeCapped.js":function(e,t,r){var n=r("./node_modules/lodash/memoize.js");e.exports=function(e){var t=n(e,(function(e){return 500===r.size&&r.clear(),e})),r=t.cache;return t}},"./node_modules/lodash/_nativeCreate.js":function(e,t,r){var n=r("./node_modules/lodash/_getNative.js")(Object,"create");e.exports=n},"./node_modules/lodash/_nativeKeys.js":function(e,t,r){var n=r("./node_modules/lodash/_overArg.js")(Object.keys,Object);e.exports=n},"./node_modules/lodash/_nodeUtil.js":function(e,t,r){(function(e){var n=r("./node_modules/lodash/_freeGlobal.js"),o=t&&!t.nodeType&&t,i=o&&"object"==typeof e&&e&&!e.nodeType&&e,a=i&&i.exports===o&&n.process,s=function(){try{var e=i&&i.require&&i.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=s}).call(this,r("./node_modules/webpack/buildin/module.js")(e))},"./node_modules/lodash/_objectToString.js":function(e,t){var r=Object.prototype.toString;e.exports=function(e){return r.call(e)}},"./node_modules/lodash/_overArg.js":function(e,t){e.exports=function(e,t){return function(r){return e(t(r))}}},"./node_modules/lodash/_overRest.js":function(e,t,r){var n=r("./node_modules/lodash/_apply.js"),o=Math.max;e.exports=function(e,t,r){return t=o(void 0===t?e.length-1:t,0),function(){for(var i=arguments,a=-1,s=o(i.length-t,0),c=Array(s);++a<s;)c[a]=i[t+a];a=-1;for(var u=Array(t+1);++a<t;)u[a]=i[a];return u[t]=r(c),n(e,this,u)}}},"./node_modules/lodash/_root.js":function(e,t,r){var n=r("./node_modules/lodash/_freeGlobal.js"),o="object"==typeof self&&self&&self.Object===Object&&self,i=n||o||Function("return this")();e.exports=i},"./node_modules/lodash/_setCacheAdd.js":function(e,t){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},"./node_modules/lodash/_setCacheHas.js":function(e,t){e.exports=function(e){return this.__data__.has(e)}},"./node_modules/lodash/_setToArray.js":function(e,t){e.exports=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}},"./node_modules/lodash/_setToString.js":function(e,t,r){var n=r("./node_modules/lodash/_baseSetToString.js"),o=r("./node_modules/lodash/_shortOut.js")(n);e.exports=o},"./node_modules/lodash/_shortOut.js":function(e,t){var r=Date.now;e.exports=function(e){var t=0,n=0;return function(){var o=r(),i=16-(o-n);if(n=o,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}},"./node_modules/lodash/_stackClear.js":function(e,t,r){var n=r("./node_modules/lodash/_ListCache.js");e.exports=function(){this.__data__=new n,this.size=0}},"./node_modules/lodash/_stackDelete.js":function(e,t){e.exports=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}},"./node_modules/lodash/_stackGet.js":function(e,t){e.exports=function(e){return this.__data__.get(e)}},"./node_modules/lodash/_stackHas.js":function(e,t){e.exports=function(e){return this.__data__.has(e)}},"./node_modules/lodash/_stackSet.js":function(e,t,r){var n=r("./node_modules/lodash/_ListCache.js"),o=r("./node_modules/lodash/_Map.js"),i=r("./node_modules/lodash/_MapCache.js");e.exports=function(e,t){var r=this.__data__;if(r instanceof n){var a=r.__data__;if(!o||a.length<199)return a.push([e,t]),this.size=++r.size,this;r=this.__data__=new i(a)}return r.set(e,t),this.size=r.size,this}},"./node_modules/lodash/_stringToPath.js":function(e,t,r){var n=r("./node_modules/lodash/_memoizeCapped.js"),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i=/\\(\\)?/g,a=n((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(o,(function(e,r,n,o){t.push(n?o.replace(i,"$1"):r||e)})),t}));e.exports=a},"./node_modules/lodash/_toKey.js":function(e,t,r){var n=r("./node_modules/lodash/isSymbol.js");e.exports=function(e){if("string"==typeof e||n(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},"./node_modules/lodash/_toSource.js":function(e,t){var r=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return r.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},"./node_modules/lodash/constant.js":function(e,t){e.exports=function(e){return function(){return e}}},"./node_modules/lodash/eq.js":function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}},"./node_modules/lodash/filter.js":function(e,t,r){var n=r("./node_modules/lodash/_arrayFilter.js"),o=r("./node_modules/lodash/_baseFilter.js"),i=r("./node_modules/lodash/_baseIteratee.js"),a=r("./node_modules/lodash/isArray.js");e.exports=function(e,t){return(a(e)?n:o)(e,i(t,3))}},"./node_modules/lodash/get.js":function(e,t,r){var n=r("./node_modules/lodash/_baseGet.js");e.exports=function(e,t,r){var o=null==e?void 0:n(e,t);return void 0===o?r:o}},"./node_modules/lodash/hasIn.js":function(e,t,r){var n=r("./node_modules/lodash/_baseHasIn.js"),o=r("./node_modules/lodash/_hasPath.js");e.exports=function(e,t){return null!=e&&o(e,t,n)}},"./node_modules/lodash/identity.js":function(e,t){e.exports=function(e){return e}},"./node_modules/lodash/isArguments.js":function(e,t,r){var n=r("./node_modules/lodash/_baseIsArguments.js"),o=r("./node_modules/lodash/isObjectLike.js"),i=Object.prototype,a=i.hasOwnProperty,s=i.propertyIsEnumerable,c=n(function(){return arguments}())?n:function(e){return o(e)&&a.call(e,"callee")&&!s.call(e,"callee")};e.exports=c},"./node_modules/lodash/isArray.js":function(e,t){var r=Array.isArray;e.exports=r},"./node_modules/lodash/isArrayLike.js":function(e,t,r){var n=r("./node_modules/lodash/isFunction.js"),o=r("./node_modules/lodash/isLength.js");e.exports=function(e){return null!=e&&o(e.length)&&!n(e)}},"./node_modules/lodash/isBuffer.js":function(e,t,r){(function(e){var n=r("./node_modules/lodash/_root.js"),o=r("./node_modules/lodash/stubFalse.js"),i=t&&!t.nodeType&&t,a=i&&"object"==typeof e&&e&&!e.nodeType&&e,s=a&&a.exports===i?n.Buffer:void 0,c=(s?s.isBuffer:void 0)||o;e.exports=c}).call(this,r("./node_modules/webpack/buildin/module.js")(e))},"./node_modules/lodash/isFunction.js":function(e,t,r){var n=r("./node_modules/lodash/_baseGetTag.js"),o=r("./node_modules/lodash/isObject.js");e.exports=function(e){if(!o(e))return!1;var t=n(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},"./node_modules/lodash/isLength.js":function(e,t){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},"./node_modules/lodash/isObject.js":function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},"./node_modules/lodash/isObjectLike.js":function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},"./node_modules/lodash/isSymbol.js":function(e,t,r){var n=r("./node_modules/lodash/_baseGetTag.js"),o=r("./node_modules/lodash/isObjectLike.js");e.exports=function(e){return"symbol"==typeof e||o(e)&&"[object Symbol]"==n(e)}},"./node_modules/lodash/isTypedArray.js":function(e,t,r){var n=r("./node_modules/lodash/_baseIsTypedArray.js"),o=r("./node_modules/lodash/_baseUnary.js"),i=r("./node_modules/lodash/_nodeUtil.js"),a=i&&i.isTypedArray,s=a?o(a):n;e.exports=s},"./node_modules/lodash/keys.js":function(e,t,r){var n=r("./node_modules/lodash/_arrayLikeKeys.js"),o=r("./node_modules/lodash/_baseKeys.js"),i=r("./node_modules/lodash/isArrayLike.js");e.exports=function(e){return i(e)?n(e):o(e)}},"./node_modules/lodash/memoize.js":function(e,t,r){var n=r("./node_modules/lodash/_MapCache.js");function o(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=e.apply(this,n);return r.cache=i.set(o,a)||i,a};return r.cache=new(o.Cache||n),r}o.Cache=n,e.exports=o},"./node_modules/lodash/negate.js":function(e,t){e.exports=function(e){if("function"!=typeof e)throw new TypeError("Expected a function");return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}},"./node_modules/lodash/orderBy.js":function(e,t,r){var n=r("./node_modules/lodash/_baseOrderBy.js"),o=r("./node_modules/lodash/isArray.js");e.exports=function(e,t,r,i){return null==e?[]:(o(t)||(t=null==t?[]:[t]),o(r=i?void 0:r)||(r=null==r?[]:[r]),n(e,t,r))}},"./node_modules/lodash/property.js":function(e,t,r){var n=r("./node_modules/lodash/_baseProperty.js"),o=r("./node_modules/lodash/_basePropertyDeep.js"),i=r("./node_modules/lodash/_isKey.js"),a=r("./node_modules/lodash/_toKey.js");e.exports=function(e){return i(e)?n(a(e)):o(e)}},"./node_modules/lodash/reject.js":function(e,t,r){var n=r("./node_modules/lodash/_arrayFilter.js"),o=r("./node_modules/lodash/_baseFilter.js"),i=r("./node_modules/lodash/_baseIteratee.js"),a=r("./node_modules/lodash/isArray.js"),s=r("./node_modules/lodash/negate.js");e.exports=function(e,t){return(a(e)?n:o)(e,s(i(t,3)))}},"./node_modules/lodash/sortBy.js":function(e,t,r){var n=r("./node_modules/lodash/_baseFlatten.js"),o=r("./node_modules/lodash/_baseOrderBy.js"),i=r("./node_modules/lodash/_baseRest.js"),a=r("./node_modules/lodash/_isIterateeCall.js"),s=i((function(e,t){if(null==e)return[];var r=t.length;return r>1&&a(e,t[0],t[1])?t=[]:r>2&&a(t[0],t[1],t[2])&&(t=[t[0]]),o(e,n(t,1),[])}));e.exports=s},"./node_modules/lodash/stubArray.js":function(e,t){e.exports=function(){return[]}},"./node_modules/lodash/stubFalse.js":function(e,t){e.exports=function(){return!1}},"./node_modules/lodash/toString.js":function(e,t,r){var n=r("./node_modules/lodash/_baseToString.js");e.exports=function(e){return null==e?"":n(e)}},"./node_modules/object-assign/index.js":function(e,t,r){"use strict";var n=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;function a(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var r,s,c=a(e),u=1;u<arguments.length;u++){for(var d in r=Object(arguments[u]))o.call(r,d)&&(c[d]=r[d]);if(n){s=n(r);for(var p=0;p<s.length;p++)i.call(r,s[p])&&(c[s[p]]=r[s[p]])}}return c}},"./node_modules/performance-now/lib/performance-now.js":function(e,t,r){(function(t){(function(){var r,n,o,i,a,s;"undefined"!=typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:null!=t&&t.hrtime?(e.exports=function(){return(r()-a)/1e6},n=t.hrtime,i=(r=function(){var e;return 1e9*(e=n())[0]+e[1]})(),s=1e9*t.uptime(),a=i-s):Date.now?(e.exports=function(){return Date.now()-o},o=Date.now()):(e.exports=function(){return(new Date).getTime()-o},o=(new Date).getTime())}).call(this)}).call(this,r("./node_modules/process/browser.js"))},"./node_modules/process/browser.js":function(e,t){var r,n,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(e){r=i}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var c,u=[],d=!1,p=-1;function l(){d&&c&&(d=!1,c.length?u=c.concat(u):p=-1,u.length&&f())}function f(){if(!d){var e=s(l);d=!0;for(var t=u.length;t;){for(c=u,u=[];++p<t;)c&&c[p].run();p=-1,t=u.length}c=null,d=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function m(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new h(e,t)),1!==u.length||d||s(f)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},"./node_modules/promise/lib/core.js":function(e,t,r){"use strict";var n=r("./node_modules/asap/browser-raw.js");function o(){}var i=null,a={};function s(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("Promise constructor's argument is not a function");this._U=0,this._V=0,this._W=null,this._X=null,e!==o&&f(e,this)}function c(e,t){for(;3===e._V;)e=e._W;if(s._Y&&s._Y(e),0===e._V)return 0===e._U?(e._U=1,void(e._X=t)):1===e._U?(e._U=2,void(e._X=[e._X,t])):void e._X.push(t);!function(e,t){n((function(){var r=1===e._V?t.onFulfilled:t.onRejected;if(null!==r){var n=function(e,t){try{return e(t)}catch(e){return i=e,a}}(r,e._W);n===a?d(t.promise,i):u(t.promise,n)}else 1===e._V?u(t.promise,e._W):d(t.promise,e._W)}))}(e,t)}function u(e,t){if(t===e)return d(e,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"==typeof t||"function"==typeof t)){var r=function(e){try{return e.then}catch(e){return i=e,a}}(t);if(r===a)return d(e,i);if(r===e.then&&t instanceof s)return e._V=3,e._W=t,void p(e);if("function"==typeof r)return void f(r.bind(t),e)}e._V=1,e._W=t,p(e)}function d(e,t){e._V=2,e._W=t,s._Z&&s._Z(e,t),p(e)}function p(e){if(1===e._U&&(c(e,e._X),e._X=null),2===e._U){for(var t=0;t<e._X.length;t++)c(e,e._X[t]);e._X=null}}function l(e,t,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=r}function f(e,t){var r=!1,n=function(e,t,r){try{e(t,r)}catch(e){return i=e,a}}(e,(function(e){r||(r=!0,u(t,e))}),(function(e){r||(r=!0,d(t,e))}));r||n!==a||(r=!0,d(t,i))}e.exports=s,s._Y=null,s._Z=null,s._0=o,s.prototype.then=function(e,t){if(this.constructor!==s)return function(e,t,r){return new e.constructor((function(n,i){var a=new s(o);a.then(n,i),c(e,new l(t,r,a))}))}(this,e,t);var r=new s(o);return c(this,new l(e,t,r)),r}},"./node_modules/promise/lib/es6-extensions.js":function(e,t,r){"use strict";var n=r("./node_modules/promise/lib/core.js");e.exports=n;var o=d(!0),i=d(!1),a=d(null),s=d(void 0),c=d(0),u=d("");function d(e){var t=new n(n._0);return t._V=1,t._W=e,t}n.resolve=function(e){if(e instanceof n)return e;if(null===e)return a;if(void 0===e)return s;if(!0===e)return o;if(!1===e)return i;if(0===e)return c;if(""===e)return u;if("object"==typeof e||"function"==typeof e)try{var t=e.then;if("function"==typeof t)return new n(t.bind(e))}catch(e){return new n((function(t,r){r(e)}))}return d(e)};var p=function(e){return"function"==typeof Array.from?(p=Array.from,Array.from(e)):(p=function(e){return Array.prototype.slice.call(e)},Array.prototype.slice.call(e))};n.all=function(e){var t=p(e);return new n((function(e,r){if(0===t.length)return e([]);var o=t.length;function i(a,s){if(s&&("object"==typeof s||"function"==typeof s)){if(s instanceof n&&s.then===n.prototype.then){for(;3===s._V;)s=s._W;return 1===s._V?i(a,s._W):(2===s._V&&r(s._W),void s.then((function(e){i(a,e)}),r))}var c=s.then;if("function"==typeof c)return void new n(c.bind(s)).then((function(e){i(a,e)}),r)}t[a]=s,0==--o&&e(t)}for(var a=0;a<t.length;a++)i(a,t[a])}))},n.reject=function(e){return new n((function(t,r){r(e)}))},n.race=function(e){return new n((function(t,r){p(e).forEach((function(e){n.resolve(e).then(t,r)}))}))},n.prototype.catch=function(e){return this.then(null,e)}},"./node_modules/promise/lib/rejection-tracking.js":function(e,t,r){"use strict";var n=r("./node_modules/promise/lib/core.js"),o=[ReferenceError,TypeError,RangeError],i=!1;function a(){i=!1,n._Y=null,n._Z=null}function s(e,t){return t.some((function(t){return e instanceof t}))}t.disable=a,t.enable=function(e){e=e||{},i&&a();i=!0;var t=0,r=0,c={};function u(t){(e.allRejections||s(c[t].error,e.whitelist||o))&&(c[t].displayId=r++,e.onUnhandled?(c[t].logged=!0,e.onUnhandled(c[t].displayId,c[t].error)):(c[t].logged=!0,function(e,t){console.warn("Possible Unhandled Promise Rejection (id: "+e+"):"),((t&&(t.stack||t))+"").split("\n").forEach((function(e){console.warn("  "+e)}))}(c[t].displayId,c[t].error)))}n._Y=function(t){2===t._V&&c[t._1]&&(c[t._1].logged?function(t){c[t].logged&&(e.onHandled?e.onHandled(c[t].displayId,c[t].error):c[t].onUnhandled||(console.warn("Promise Rejection Handled (id: "+c[t].displayId+"):"),console.warn('  This means you can ignore any previous messages of the form "Possible Unhandled Promise Rejection" with id '+c[t].displayId+".")))}(t._1):clearTimeout(c[t._1].timeout),delete c[t._1])},n._Z=function(e,r){0===e._U&&(e._1=t++,c[e._1]={displayId:null,error:r,timeout:setTimeout(u.bind(null,e._1),s(r,o)?100:2e3),logged:!1})}}},"./node_modules/raf/index.js":function(e,t,r){(function(t){for(var n=r("./node_modules/performance-now/lib/performance-now.js"),o="undefined"==typeof window?t:window,i=["moz","webkit"],a="AnimationFrame",s=o["request"+a],c=o["cancel"+a]||o["cancelRequest"+a],u=0;!s&&u<i.length;u++)s=o[i[u]+"Request"+a],c=o[i[u]+"Cancel"+a]||o[i[u]+"CancelRequest"+a];if(!s||!c){var d=0,p=0,l=[];s=function(e){if(0===l.length){var t=n(),r=Math.max(0,1e3/60-(t-d));d=r+t,setTimeout((function(){var e=l.slice(0);l.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(d)}catch(e){setTimeout((function(){throw e}),0)}}),Math.round(r))}return l.push({handle:++p,callback:e,cancelled:!1}),p},c=function(e){for(var t=0;t<l.length;t++)l[t].handle===e&&(l[t].cancelled=!0)}}e.exports=function(e){return s.call(o,e)},e.exports.cancel=function(){c.apply(o,arguments)},e.exports.polyfill=function(e){e||(e=o),e.requestAnimationFrame=s,e.cancelAnimationFrame=c}}).call(this,r("./node_modules/webpack/buildin/global.js"))},"./node_modules/raf/polyfill.js":function(e,t,r){r("./node_modules/raf/index.js").polyfill()},"./node_modules/re-reselect/dist/index.js":function(e,t,r){!function(e,t){"use strict";function r(e){return"string"==typeof e||"number"==typeof e}var n=function(){function e(){this._cache={}}var t=e.prototype;return t.set=function(e,t){this._cache[e]=t},t.get=function(e){return this._cache[e]},t.remove=function(e){delete this._cache[e]},t.clear=function(){this._cache={}},t.isValidCacheKey=function(e){return r(e)},e}(),o=n,i=function(){return!0};function a(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return function(e,n){if("function"==typeof n)throw new Error('[re-reselect] Second argument "options" must be an object. Please use "options.selectorCreator" to provide a custom selectorCreator.');var a={};"function"==typeof e?Object.assign(a,n,{keySelector:e}):Object.assign(a,e);var s=0,c=r.pop(),u=Array.isArray(r[0])?r[0]:[].concat(r);r.push((function(){return s++,c.apply(void 0,arguments)}));var d=a.cacheObject||new o,p=a.selectorCreator||t.createSelector,l=d.isValidCacheKey||i;a.keySelectorCreator&&(a.keySelector=a.keySelectorCreator({keySelector:a.keySelector,inputSelectors:u,resultFunc:c}));var f=function(){var e=a.keySelector.apply(a,arguments);if(l(e)){var t=d.get(e);return void 0===t&&(t=p.apply(void 0,r),d.set(e,t)),t.apply(void 0,arguments)}console.warn('[re-reselect] Invalid cache key "'+e+'" has been returned by keySelector function.')};return f.getMatchingSelector=function(){var e=a.keySelector.apply(a,arguments);return d.get(e)},f.removeMatchingSelector=function(){var e=a.keySelector.apply(a,arguments);d.remove(e)},f.clearCache=function(){d.clear()},f.resultFunc=c,f.dependencies=u,f.cache=d,f.recomputations=function(){return s},f.resetRecomputations=function(){return s=0},f.keySelector=a.keySelector,f}}function s(e){if(void 0===e)throw new Error('Missing the required property "cacheSize".');if(!Number.isInteger(e)||e<=0)throw new Error('The "cacheSize" property must be a positive integer value.')}var c=function(){function e(e){var t=(void 0===e?{}:e).cacheSize;s(t),this._cache={},this._cacheOrdering=[],this._cacheSize=t}var t=e.prototype;return t.set=function(e,t){if(this._cache[e]=t,this._cacheOrdering.push(e),this._cacheOrdering.length>this._cacheSize){var r=this._cacheOrdering[0];this.remove(r)}},t.get=function(e){return this._cache[e]},t.remove=function(e){var t=this._cacheOrdering.indexOf(e);t>-1&&this._cacheOrdering.splice(t,1),delete this._cache[e]},t.clear=function(){this._cache={},this._cacheOrdering=[]},t.isValidCacheKey=function(e){return r(e)},e}(),u=function(){function e(e){var t=(void 0===e?{}:e).cacheSize;s(t),this._cache={},this._cacheOrdering=[],this._cacheSize=t}var t=e.prototype;return t.set=function(e,t){if(this._cache[e]=t,this._registerCacheHit(e),this._cacheOrdering.length>this._cacheSize){var r=this._cacheOrdering[0];this.remove(r)}},t.get=function(e){return this._registerCacheHit(e),this._cache[e]},t.remove=function(e){this._deleteCacheHit(e),delete this._cache[e]},t.clear=function(){this._cache={},this._cacheOrdering=[]},t._registerCacheHit=function(e){this._deleteCacheHit(e),this._cacheOrdering.push(e)},t._deleteCacheHit=function(e){var t=this._cacheOrdering.indexOf(e);t>-1&&this._cacheOrdering.splice(t,1)},t.isValidCacheKey=function(e){return r(e)},e}(),d=function(){function e(){this._cache=new Map}var t=e.prototype;return t.set=function(e,t){this._cache.set(e,t)},t.get=function(e){return this._cache.get(e)},t.remove=function(e){this._cache.delete(e)},t.clear=function(){this._cache.clear()},e}(),p=function(){function e(e){var t=(void 0===e?{}:e).cacheSize;s(t),this._cache=new Map,this._cacheSize=t}var t=e.prototype;return t.set=function(e,t){if(this._cache.set(e,t),this._cache.size>this._cacheSize){var r=this._cache.keys().next().value;this.remove(r)}},t.get=function(e){return this._cache.get(e)},t.remove=function(e){this._cache.delete(e)},t.clear=function(){this._cache.clear()},e}(),l=function(){function e(e){var t=(void 0===e?{}:e).cacheSize;s(t),this._cache=new Map,this._cacheSize=t}var t=e.prototype;return t.set=function(e,t){if(this._cache.set(e,t),this._cache.size>this._cacheSize){var r=this._cache.keys().next().value;this.remove(r)}},t.get=function(e){var t=this._cache.get(e);return this._cache.has(e)&&(this.remove(e),this._cache.set(e,t)),t},t.remove=function(e){this._cache.delete(e)},t.clear=function(){this._cache.clear()},e}();e.FifoCacheObject=c,e.FifoMapCache=p,e.FifoObjectCache=c,e.FlatCacheObject=n,e.FlatMapCache=d,e.FlatObjectCache=n,e.LruCacheObject=l,e.LruMapCache=l,e.LruObjectCache=u,e.createStructuredCachedSelector=function(e){return t.createStructuredSelector(e,a)},e.default=a,Object.defineProperty(e,"__esModule",{value:!0})}(t,r("./node_modules/reselect/es/index.js"))},"./node_modules/redux-orm/node_modules/reselect/lib/index.js":function(e,t,r){"use strict";function n(e,t){return e===t}function o(e,t,r){if(null===t||null===r||t.length!==r.length)return!1;for(var n=t.length,o=0;o<n;o++)if(!e(t[o],r[o]))return!1;return!0}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n,r=null,i=null;return function(){return o(t,r,arguments)||(i=e.apply(null,arguments)),r=arguments,i}}function a(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"==typeof e}))){var r=t.map((function(e){return typeof e})).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+r+"]")}return t}function s(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];var s=0,c=n.pop(),u=a(n),d=e.apply(void 0,[function(){return s++,c.apply(null,arguments)}].concat(r)),p=i((function(){for(var e=[],t=u.length,r=0;r<t;r++)e.push(u[r].apply(null,arguments));return d.apply(null,e)}));return p.resultFunc=c,p.recomputations=function(){return s},p.resetRecomputations=function(){return s=0},p}}t.__esModule=!0,t.defaultMemoize=i,t.createSelectorCreator=s,t.createStructuredSelector=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c;if("object"!=typeof e)throw new Error("createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);var r=Object.keys(e);return t(r.map((function(t){return e[t]})),(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t,n){return e[r[n]]=t,e}),{})}))};var c=t.createSelector=s(i)},"./node_modules/regenerator-runtime/runtime.js":function(e,t,r){var n=function(e){"use strict";var t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var o=t&&t.prototype instanceof p?t:p,i=Object.create(o.prototype),a=new T(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return C()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=E(a,r);if(s){if(s===d)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(e,r,a),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var d={};function p(){}function l(){}function f(){}var h={};s(h,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(R([])));v&&v!==t&&r.call(v,o)&&(h=v);var g=f.prototype=p.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){var n;this._invoke=function(o,i){function a(){return new t((function(n,a){!function n(o,i,a,s){var c=u(e[o],e,i);if("throw"!==c.type){var d=c.arg,p=d.value;return p&&"object"==typeof p&&r.call(p,"__await")?t.resolve(p.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(p).then((function(e){d.value=e,a(d)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}(o,i,n,a)}))}return n=n?n.then(a,a):a()}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,d;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function b(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function R(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return l.prototype=f,s(g,"constructor",f),s(f,"constructor",l),l.displayName=s(f,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===l||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,a,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(_.prototype),s(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new _(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},y(g),s(g,a,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=R,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),b(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;b(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:R(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}(e.exports);try{regeneratorRuntime=n}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},"./node_modules/reselect/es/index.js":function(e,t,r){"use strict";function n(e,t){return e===t}function o(e,t,r){if(null===t||null===r||t.length!==r.length)return!1;for(var n=t.length,o=0;o<n;o++)if(!e(t[o],r[o]))return!1;return!0}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n,r=null,i=null;return function(){return o(t,r,arguments)||(i=e.apply(null,arguments)),r=arguments,i}}function a(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"==typeof e}))){var r=t.map((function(e){return typeof e})).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+r+"]")}return t}function s(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];var i=0,s=n.pop(),c=a(n),u=e.apply(void 0,[function(){return i++,s.apply(null,arguments)}].concat(r)),d=e((function(){for(var e=[],t=c.length,r=0;r<t;r++)e.push(c[r].apply(null,arguments));return u.apply(null,e)}));return d.resultFunc=s,d.dependencies=c,d.recomputations=function(){return i},d.resetRecomputations=function(){return i=0},d}}r.r(t),r.d(t,"defaultMemoize",(function(){return i})),r.d(t,"createSelectorCreator",(function(){return s})),r.d(t,"createSelector",(function(){return c})),r.d(t,"createStructuredSelector",(function(){return u}));var c=s(i);function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c;if("object"!=typeof e)throw new Error("createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);var r=Object.keys(e);return t(r.map((function(t){return e[t]})),(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t,n){return e[r[n]]=t,e}),{})}))}},"./node_modules/rtcpeerconnection-shim/rtcpeerconnection.js":function(e,t,r){"use strict";var n=r("./node_modules/sdp/sdp.js");function o(e,t,r,o,i){var a=n.writeRtpDescription(e.kind,t);if(a+=n.writeIceParameters(e.iceGatherer.getLocalParameters()),a+=n.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===r?"actpass":i||"active"),a+="a=mid:"+e.mid+"\r\n",e.rtpSender&&e.rtpReceiver?a+="a=sendrecv\r\n":e.rtpSender?a+="a=sendonly\r\n":e.rtpReceiver?a+="a=recvonly\r\n":a+="a=inactive\r\n",e.rtpSender){var s=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=s;var c="msid:"+(o?o.id:"-")+" "+s+"\r\n";a+="a="+c,a+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+c,e.sendEncodingParameters[0].rtx&&(a+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+c,a+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return a+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+n.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(a+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+n.localCName+"\r\n"),a}function i(e,t){var r={codecs:[],headerExtensions:[],fecMechanisms:[]},n=function(e,t){e=parseInt(e,10);for(var r=0;r<t.length;r++)if(t[r].payloadType===e||t[r].preferredPayloadType===e)return t[r]},o=function(e,t,r,o){var i=n(e.parameters.apt,r),a=n(t.parameters.apt,o);return i&&a&&i.name.toLowerCase()===a.name.toLowerCase()};return e.codecs.forEach((function(n){for(var i=0;i<t.codecs.length;i++){var a=t.codecs[i];if(n.name.toLowerCase()===a.name.toLowerCase()&&n.clockRate===a.clockRate){if("rtx"===n.name.toLowerCase()&&n.parameters&&a.parameters.apt&&!o(n,a,e.codecs,t.codecs))continue;(a=JSON.parse(JSON.stringify(a))).numChannels=Math.min(n.numChannels,a.numChannels),r.codecs.push(a),a.rtcpFeedback=a.rtcpFeedback.filter((function(e){for(var t=0;t<n.rtcpFeedback.length;t++)if(n.rtcpFeedback[t].type===e.type&&n.rtcpFeedback[t].parameter===e.parameter)return!0;return!1}));break}}})),e.headerExtensions.forEach((function(e){for(var n=0;n<t.headerExtensions.length;n++){var o=t.headerExtensions[n];if(e.uri===o.uri){r.headerExtensions.push(o);break}}})),r}function a(e,t,r){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(r)}function s(e,t){var r=e.getRemoteCandidates().find((function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type}));return r||e.addRemoteCandidate(t),!r}function c(e,t){var r=new Error(t);return r.name=e,r.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],r}e.exports=function(e,t){function r(t,r){r.addTrack(t),r.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:t}))}function u(t,r,n,o){var i=new Event("track");i.track=r,i.receiver=n,i.transceiver={receiver:n},i.streams=o,e.setTimeout((function(){t._dispatchEvent("track",i)}))}var d=function(r){var o=this,i=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach((function(e){o[e]=i[e].bind(i)})),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",r=JSON.parse(JSON.stringify(r||{})),this.usingBundle="max-bundle"===r.bundlePolicy,"negotiate"===r.rtcpMuxPolicy)throw c("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(r.rtcpMuxPolicy||(r.rtcpMuxPolicy="require"),r.iceTransportPolicy){case"all":case"relay":break;default:r.iceTransportPolicy="all"}switch(r.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:r.bundlePolicy="balanced"}if(r.iceServers=function(e,t){var r=!1;return(e=JSON.parse(JSON.stringify(e))).filter((function(e){if(e&&(e.urls||e.url)){var n=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var o="string"==typeof n;return o&&(n=[n]),n=n.filter((function(e){return 0===e.indexOf("turn:")&&-1!==e.indexOf("transport=udp")&&-1===e.indexOf("turn:[")&&!r?(r=!0,!0):0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp")})),delete e.url,e.urls=o?n[0]:n,!!n.length}}))}(r.iceServers||[],t),this._iceGatherers=[],r.iceCandidatePoolSize)for(var a=r.iceCandidatePoolSize;a>0;a--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:r.iceServers,gatherPolicy:r.iceTransportPolicy}));else r.iceCandidatePoolSize=0;this._config=r,this.transceivers=[],this._sdpSessionId=n.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(d.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(d.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),d.prototype.onicecandidate=null,d.prototype.onaddstream=null,d.prototype.ontrack=null,d.prototype.onremovestream=null,d.prototype.onsignalingstatechange=null,d.prototype.oniceconnectionstatechange=null,d.prototype.onconnectionstatechange=null,d.prototype.onicegatheringstatechange=null,d.prototype.onnegotiationneeded=null,d.prototype.ondatachannel=null,d.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"==typeof this["on"+e]&&this["on"+e](t))},d.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},d.prototype.getConfiguration=function(){return this._config},d.prototype.getLocalStreams=function(){return this.localStreams},d.prototype.getRemoteStreams=function(){return this.remoteStreams},d.prototype._createTransceiver=function(e,t){var r=this.transceivers.length>0,n={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&r)n.iceTransport=this.transceivers[0].iceTransport,n.dtlsTransport=this.transceivers[0].dtlsTransport;else{var o=this._createIceAndDtlsTransports();n.iceTransport=o.iceTransport,n.dtlsTransport=o.dtlsTransport}return t||this.transceivers.push(n),n},d.prototype.addTrack=function(t,r){if(this._isClosed)throw c("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var n;if(this.transceivers.find((function(e){return e.track===t})))throw c("InvalidAccessError","Track already exists.");for(var o=0;o<this.transceivers.length;o++)this.transceivers[o].track||this.transceivers[o].kind!==t.kind||(n=this.transceivers[o]);return n||(n=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(r)&&this.localStreams.push(r),n.track=t,n.stream=r,n.rtpSender=new e.RTCRtpSender(t,n.dtlsTransport),n.rtpSender},d.prototype.addStream=function(e){var r=this;if(t>=15025)e.getTracks().forEach((function(t){r.addTrack(t,e)}));else{var n=e.clone();e.getTracks().forEach((function(e,t){var r=n.getTracks()[t];e.addEventListener("enabled",(function(e){r.enabled=e.enabled}))})),n.getTracks().forEach((function(e){r.addTrack(e,n)}))}},d.prototype.removeTrack=function(t){if(this._isClosed)throw c("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var r=this.transceivers.find((function(e){return e.rtpSender===t}));if(!r)throw c("InvalidAccessError","Sender was not created by this connection.");var n=r.stream;r.rtpSender.stop(),r.rtpSender=null,r.track=null,r.stream=null,-1===this.transceivers.map((function(e){return e.stream})).indexOf(n)&&this.localStreams.indexOf(n)>-1&&this.localStreams.splice(this.localStreams.indexOf(n),1),this._maybeFireNegotiationNeeded()},d.prototype.removeStream=function(e){var t=this;e.getTracks().forEach((function(e){var r=t.getSenders().find((function(t){return t.track===e}));r&&t.removeTrack(r)}))},d.prototype.getSenders=function(){return this.transceivers.filter((function(e){return!!e.rtpSender})).map((function(e){return e.rtpSender}))},d.prototype.getReceivers=function(){return this.transceivers.filter((function(e){return!!e.rtpReceiver})).map((function(e){return e.rtpReceiver}))},d.prototype._createIceGatherer=function(t,r){var n=this;if(r&&t>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var o=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(o,"state",{value:"new",writable:!0}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var r=!e.candidate||0===Object.keys(e.candidate).length;o.state=r?"completed":"gathering",null!==n.transceivers[t].bufferedCandidateEvents&&n.transceivers[t].bufferedCandidateEvents.push(e)},o.addEventListener("localcandidate",this.transceivers[t].bufferCandidates),o},d.prototype._gather=function(t,r){var o=this,i=this.transceivers[r].iceGatherer;if(!i.onlocalcandidate){var a=this.transceivers[r].bufferedCandidateEvents;this.transceivers[r].bufferedCandidateEvents=null,i.removeEventListener("localcandidate",this.transceivers[r].bufferCandidates),i.onlocalcandidate=function(e){if(!(o.usingBundle&&r>0)){var a=new Event("icecandidate");a.candidate={sdpMid:t,sdpMLineIndex:r};var s=e.candidate,c=!s||0===Object.keys(s).length;if(c)"new"!==i.state&&"gathering"!==i.state||(i.state="completed");else{"new"===i.state&&(i.state="gathering"),s.component=1,s.ufrag=i.getLocalParameters().usernameFragment;var u=n.writeCandidate(s);a.candidate=Object.assign(a.candidate,n.parseCandidate(u)),a.candidate.candidate=u,a.candidate.toJSON=function(){return{candidate:a.candidate.candidate,sdpMid:a.candidate.sdpMid,sdpMLineIndex:a.candidate.sdpMLineIndex,usernameFragment:a.candidate.usernameFragment}}}var d=n.getMediaSections(o._localDescription.sdp);d[a.candidate.sdpMLineIndex]+=c?"a=end-of-candidates\r\n":"a="+a.candidate.candidate+"\r\n",o._localDescription.sdp=n.getDescription(o._localDescription.sdp)+d.join("");var p=o.transceivers.every((function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state}));"gathering"!==o.iceGatheringState&&(o.iceGatheringState="gathering",o._emitGatheringStateChange()),c||o._dispatchEvent("icecandidate",a),p&&(o._dispatchEvent("icecandidate",new Event("icecandidate")),o.iceGatheringState="complete",o._emitGatheringStateChange())}},e.setTimeout((function(){a.forEach((function(e){i.onlocalcandidate(e)}))}),0)}},d.prototype._createIceAndDtlsTransports=function(){var t=this,r=new e.RTCIceTransport(null);r.onicestatechange=function(){t._updateIceConnectionState(),t._updateConnectionState()};var n=new e.RTCDtlsTransport(r);return n.ondtlsstatechange=function(){t._updateConnectionState()},n.onerror=function(){Object.defineProperty(n,"state",{value:"failed",writable:!0}),t._updateConnectionState()},{iceTransport:r,dtlsTransport:n}},d.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var r=this.transceivers[e].iceTransport;r&&(delete r.onicestatechange,delete this.transceivers[e].iceTransport);var n=this.transceivers[e].dtlsTransport;n&&(delete n.ondtlsstatechange,delete n.onerror,delete this.transceivers[e].dtlsTransport)},d.prototype._transceive=function(e,r,o){var a=i(e.localCapabilities,e.remoteCapabilities);r&&e.rtpSender&&(a.encodings=e.sendEncodingParameters,a.rtcp={cname:n.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(a.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(a)),o&&e.rtpReceiver&&a.codecs.length>0&&("video"===e.kind&&e.recvEncodingParameters&&t<15019&&e.recvEncodingParameters.forEach((function(e){delete e.rtx})),e.recvEncodingParameters.length?a.encodings=e.recvEncodingParameters:a.encodings=[{}],a.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(a.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(a.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(a))},d.prototype.setLocalDescription=function(e){var t,r,o=this;if(-1===["offer","answer"].indexOf(e.type))return Promise.reject(c("TypeError",'Unsupported type "'+e.type+'"'));if(!a("setLocalDescription",e.type,o.signalingState)||o._isClosed)return Promise.reject(c("InvalidStateError","Can not set local "+e.type+" in state "+o.signalingState));if("offer"===e.type)t=n.splitSections(e.sdp),r=t.shift(),t.forEach((function(e,t){var r=n.parseRtpParameters(e);o.transceivers[t].localCapabilities=r})),o.transceivers.forEach((function(e,t){o._gather(e.mid,t)}));else if("answer"===e.type){t=n.splitSections(o._remoteDescription.sdp),r=t.shift();var s=n.matchPrefix(r,"a=ice-lite").length>0;t.forEach((function(e,t){var a=o.transceivers[t],c=a.iceGatherer,u=a.iceTransport,d=a.dtlsTransport,p=a.localCapabilities,l=a.remoteCapabilities;if(!(n.isRejected(e)&&0===n.matchPrefix(e,"a=bundle-only").length)&&!a.rejected){var f=n.getIceParameters(e,r),h=n.getDtlsParameters(e,r);s&&(h.role="server"),o.usingBundle&&0!==t||(o._gather(a.mid,t),"new"===u.state&&u.start(c,f,s?"controlling":"controlled"),"new"===d.state&&d.start(h));var m=i(p,l);o._transceive(a,m.codecs.length>0,!1)}}))}return o._localDescription={type:e.type,sdp:e.sdp},"offer"===e.type?o._updateSignalingState("have-local-offer"):o._updateSignalingState("stable"),Promise.resolve()},d.prototype.setRemoteDescription=function(o){var d=this;if(-1===["offer","answer"].indexOf(o.type))return Promise.reject(c("TypeError",'Unsupported type "'+o.type+'"'));if(!a("setRemoteDescription",o.type,d.signalingState)||d._isClosed)return Promise.reject(c("InvalidStateError","Can not set remote "+o.type+" in state "+d.signalingState));var p={};d.remoteStreams.forEach((function(e){p[e.id]=e}));var l=[],f=n.splitSections(o.sdp),h=f.shift(),m=n.matchPrefix(h,"a=ice-lite").length>0,v=n.matchPrefix(h,"a=group:BUNDLE ").length>0;d.usingBundle=v;var g=n.matchPrefix(h,"a=ice-options:")[0];return d.canTrickleIceCandidates=!!g&&g.substr(14).split(" ").indexOf("trickle")>=0,f.forEach((function(a,c){var u=n.splitLines(a),f=n.getKind(a),g=n.isRejected(a)&&0===n.matchPrefix(a,"a=bundle-only").length,y=u[0].substr(2).split(" ")[2],_=n.getDirection(a,h),E=n.parseMsid(a),S=n.getMid(a)||n.generateIdentifier();if(g||"application"===f&&("DTLS/SCTP"===y||"UDP/DTLS/SCTP"===y))d.transceivers[c]={mid:S,kind:f,protocol:y,rejected:!0};else{var b,T,R,C,O,w,A,I,x;!g&&d.transceivers[c]&&d.transceivers[c].rejected&&(d.transceivers[c]=d._createTransceiver(f,!0));var k,P,N=n.parseRtpParameters(a);g||(k=n.getIceParameters(a,h),(P=n.getDtlsParameters(a,h)).role="client"),A=n.parseRtpEncodingParameters(a);var D=n.parseRtcpParameters(a),j=n.matchPrefix(a,"a=end-of-candidates",h).length>0,M=n.matchPrefix(a,"a=candidate:").map((function(e){return n.parseCandidate(e)})).filter((function(e){return 1===e.component}));if(("offer"===o.type||"answer"===o.type)&&!g&&v&&c>0&&d.transceivers[c]&&(d._disposeIceAndDtlsTransports(c),d.transceivers[c].iceGatherer=d.transceivers[0].iceGatherer,d.transceivers[c].iceTransport=d.transceivers[0].iceTransport,d.transceivers[c].dtlsTransport=d.transceivers[0].dtlsTransport,d.transceivers[c].rtpSender&&d.transceivers[c].rtpSender.setTransport(d.transceivers[0].dtlsTransport),d.transceivers[c].rtpReceiver&&d.transceivers[c].rtpReceiver.setTransport(d.transceivers[0].dtlsTransport)),"offer"!==o.type||g){if("answer"===o.type&&!g){T=(b=d.transceivers[c]).iceGatherer,R=b.iceTransport,C=b.dtlsTransport,O=b.rtpReceiver,w=b.sendEncodingParameters,I=b.localCapabilities,d.transceivers[c].recvEncodingParameters=A,d.transceivers[c].remoteCapabilities=N,d.transceivers[c].rtcpParameters=D,M.length&&"new"===R.state&&(!m&&!j||v&&0!==c?M.forEach((function(e){s(b.iceTransport,e)})):R.setRemoteCandidates(M)),v&&0!==c||("new"===R.state&&R.start(T,k,"controlling"),"new"===C.state&&C.start(P)),!i(b.localCapabilities,b.remoteCapabilities).codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&b.sendEncodingParameters[0].rtx&&delete b.sendEncodingParameters[0].rtx,d._transceive(b,"sendrecv"===_||"recvonly"===_,"sendrecv"===_||"sendonly"===_),!O||"sendrecv"!==_&&"sendonly"!==_?delete b.rtpReceiver:(x=O.track,E?(p[E.stream]||(p[E.stream]=new e.MediaStream),r(x,p[E.stream]),l.push([x,O,p[E.stream]])):(p.default||(p.default=new e.MediaStream),r(x,p.default),l.push([x,O,p.default])))}}else{(b=d.transceivers[c]||d._createTransceiver(f)).mid=S,b.iceGatherer||(b.iceGatherer=d._createIceGatherer(c,v)),M.length&&"new"===b.iceTransport.state&&(!j||v&&0!==c?M.forEach((function(e){s(b.iceTransport,e)})):b.iceTransport.setRemoteCandidates(M)),I=e.RTCRtpReceiver.getCapabilities(f),t<15019&&(I.codecs=I.codecs.filter((function(e){return"rtx"!==e.name}))),w=b.sendEncodingParameters||[{ssrc:1001*(2*c+2)}];var L,U=!1;if("sendrecv"===_||"sendonly"===_){if(U=!b.rtpReceiver,O=b.rtpReceiver||new e.RTCRtpReceiver(b.dtlsTransport,f),U)x=O.track,E&&"-"===E.stream||(E?(p[E.stream]||(p[E.stream]=new e.MediaStream,Object.defineProperty(p[E.stream],"id",{get:function(){return E.stream}})),Object.defineProperty(x,"id",{get:function(){return E.track}}),L=p[E.stream]):(p.default||(p.default=new e.MediaStream),L=p.default)),L&&(r(x,L),b.associatedRemoteMediaStreams.push(L)),l.push([x,O,L])}else b.rtpReceiver&&b.rtpReceiver.track&&(b.associatedRemoteMediaStreams.forEach((function(t){var r=t.getTracks().find((function(e){return e.id===b.rtpReceiver.track.id}));r&&function(t,r){r.removeTrack(t),r.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:t}))}(r,t)})),b.associatedRemoteMediaStreams=[]);b.localCapabilities=I,b.remoteCapabilities=N,b.rtpReceiver=O,b.rtcpParameters=D,b.sendEncodingParameters=w,b.recvEncodingParameters=A,d._transceive(d.transceivers[c],!1,U)}}})),void 0===d._dtlsRole&&(d._dtlsRole="offer"===o.type?"active":"passive"),d._remoteDescription={type:o.type,sdp:o.sdp},"offer"===o.type?d._updateSignalingState("have-remote-offer"):d._updateSignalingState("stable"),Object.keys(p).forEach((function(t){var r=p[t];if(r.getTracks().length){if(-1===d.remoteStreams.indexOf(r)){d.remoteStreams.push(r);var n=new Event("addstream");n.stream=r,e.setTimeout((function(){d._dispatchEvent("addstream",n)}))}l.forEach((function(e){var t=e[0],n=e[1];r.id===e[2].id&&u(d,t,n,[r])}))}})),l.forEach((function(e){e[2]||u(d,e[0],e[1],[])})),e.setTimeout((function(){d&&d.transceivers&&d.transceivers.forEach((function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))}))}),4e3),Promise.resolve()},d.prototype.close=function(){this.transceivers.forEach((function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()})),this._isClosed=!0,this._updateSignalingState("closed")},d.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},d.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout((function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}}),0))},d.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++})),e="new",t.failed>0?e="failed":t.checking>0?e="checking":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0?e="connected":t.completed>0&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var r=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",r)}},d.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)})),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0&&(e="connected"),e!==this.connectionState){this.connectionState=e;var r=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",r)}},d.prototype.createOffer=function(){var r=this;if(r._isClosed)return Promise.reject(c("InvalidStateError","Can not call createOffer after close"));var i=r.transceivers.filter((function(e){return"audio"===e.kind})).length,a=r.transceivers.filter((function(e){return"video"===e.kind})).length,s=arguments[0];if(s){if(s.mandatory||s.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==s.offerToReceiveAudio&&(i=!0===s.offerToReceiveAudio?1:!1===s.offerToReceiveAudio?0:s.offerToReceiveAudio),void 0!==s.offerToReceiveVideo&&(a=!0===s.offerToReceiveVideo?1:!1===s.offerToReceiveVideo?0:s.offerToReceiveVideo)}for(r.transceivers.forEach((function(e){"audio"===e.kind?--i<0&&(e.wantReceive=!1):"video"===e.kind&&--a<0&&(e.wantReceive=!1)}));i>0||a>0;)i>0&&(r._createTransceiver("audio"),i--),a>0&&(r._createTransceiver("video"),a--);var u=n.writeSessionBoilerplate(r._sdpSessionId,r._sdpSessionVersion++);r.transceivers.forEach((function(o,i){var a=o.track,s=o.kind,c=o.mid||n.generateIdentifier();o.mid=c,o.iceGatherer||(o.iceGatherer=r._createIceGatherer(i,r.usingBundle));var u=e.RTCRtpSender.getCapabilities(s);t<15019&&(u.codecs=u.codecs.filter((function(e){return"rtx"!==e.name}))),u.codecs.forEach((function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),o.remoteCapabilities&&o.remoteCapabilities.codecs&&o.remoteCapabilities.codecs.forEach((function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)}))})),u.headerExtensions.forEach((function(e){(o.remoteCapabilities&&o.remoteCapabilities.headerExtensions||[]).forEach((function(t){e.uri===t.uri&&(e.id=t.id)}))}));var d=o.sendEncodingParameters||[{ssrc:1001*(2*i+1)}];a&&t>=15019&&"video"===s&&!d[0].rtx&&(d[0].rtx={ssrc:d[0].ssrc+1}),o.wantReceive&&(o.rtpReceiver=new e.RTCRtpReceiver(o.dtlsTransport,s)),o.localCapabilities=u,o.sendEncodingParameters=d})),"max-compat"!==r._config.bundlePolicy&&(u+="a=group:BUNDLE "+r.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),u+="a=ice-options:trickle\r\n",r.transceivers.forEach((function(e,t){u+=o(e,e.localCapabilities,"offer",e.stream,r._dtlsRole),u+="a=rtcp-rsize\r\n",!e.iceGatherer||"new"===r.iceGatheringState||0!==t&&r.usingBundle||(e.iceGatherer.getLocalCandidates().forEach((function(e){e.component=1,u+="a="+n.writeCandidate(e)+"\r\n"})),"completed"===e.iceGatherer.state&&(u+="a=end-of-candidates\r\n"))}));var d=new e.RTCSessionDescription({type:"offer",sdp:u});return Promise.resolve(d)},d.prototype.createAnswer=function(){var r=this;if(r._isClosed)return Promise.reject(c("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==r.signalingState&&"have-local-pranswer"!==r.signalingState)return Promise.reject(c("InvalidStateError","Can not call createAnswer in signalingState "+r.signalingState));var a=n.writeSessionBoilerplate(r._sdpSessionId,r._sdpSessionVersion++);r.usingBundle&&(a+="a=group:BUNDLE "+r.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),a+="a=ice-options:trickle\r\n";var s=n.getMediaSections(r._remoteDescription.sdp).length;r.transceivers.forEach((function(e,n){if(!(n+1>s)){if(e.rejected)return"application"===e.kind?"DTLS/SCTP"===e.protocol?a+="m=application 0 DTLS/SCTP 5000\r\n":a+="m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?a+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(a+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(a+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var c;if(e.stream)"audio"===e.kind?c=e.stream.getAudioTracks()[0]:"video"===e.kind&&(c=e.stream.getVideoTracks()[0]),c&&t>=15019&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1});var u=i(e.localCapabilities,e.remoteCapabilities);!u.codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,a+=o(e,u,"answer",e.stream,r._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(a+="a=rtcp-rsize\r\n")}}));var u=new e.RTCSessionDescription({type:"answer",sdp:a});return Promise.resolve(u)},d.prototype.addIceCandidate=function(e){var t,r=this;return e&&void 0===e.sdpMLineIndex&&!e.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise((function(o,i){if(!r._remoteDescription)return i(c("InvalidStateError","Can not add ICE candidate without a remote description"));if(e&&""!==e.candidate){var a=e.sdpMLineIndex;if(e.sdpMid)for(var u=0;u<r.transceivers.length;u++)if(r.transceivers[u].mid===e.sdpMid){a=u;break}var d=r.transceivers[a];if(!d)return i(c("OperationError","Can not add ICE candidate"));if(d.rejected)return o();var p=Object.keys(e.candidate).length>0?n.parseCandidate(e.candidate):{};if("tcp"===p.protocol&&(0===p.port||9===p.port))return o();if(p.component&&1!==p.component)return o();if((0===a||a>0&&d.iceTransport!==r.transceivers[0].iceTransport)&&!s(d.iceTransport,p))return i(c("OperationError","Can not add ICE candidate"));var l=e.candidate.trim();0===l.indexOf("a=")&&(l=l.substr(2)),(t=n.getMediaSections(r._remoteDescription.sdp))[a]+="a="+(p.type?l:"end-of-candidates")+"\r\n",r._remoteDescription.sdp=n.getDescription(r._remoteDescription.sdp)+t.join("")}else for(var f=0;f<r.transceivers.length&&(r.transceivers[f].rejected||(r.transceivers[f].iceTransport.addRemoteCandidate({}),(t=n.getMediaSections(r._remoteDescription.sdp))[f]+="a=end-of-candidates\r\n",r._remoteDescription.sdp=n.getDescription(r._remoteDescription.sdp)+t.join(""),!r.usingBundle));f++);o()}))},d.prototype.getStats=function(t){if(t&&t instanceof e.MediaStreamTrack){var r=null;if(this.transceivers.forEach((function(e){e.rtpSender&&e.rtpSender.track===t?r=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(r=e.rtpReceiver)})),!r)throw c("InvalidAccessError","Invalid selector.");return r.getStats()}var n=[];return this.transceivers.forEach((function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach((function(t){e[t]&&n.push(e[t].getStats())}))})),Promise.all(n).then((function(e){var t=new Map;return e.forEach((function(e){e.forEach((function(e){t.set(e.id,e)}))})),t}))};["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach((function(t){var r=e[t];if(r&&r.prototype&&r.prototype.getStats){var n=r.prototype.getStats;r.prototype.getStats=function(){return n.apply(this).then((function(e){var t=new Map;return Object.keys(e).forEach((function(r){var n;e[r].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(n=e[r]).type]||n.type,t.set(r,e[r])})),t}))}}}));var p=["createOffer","createAnswer"];return p.forEach((function(e){var t=d.prototype[e];d.prototype[e]=function(){var e=arguments;return"function"==typeof e[0]||"function"==typeof e[1]?t.apply(this,[arguments[2]]).then((function(t){"function"==typeof e[0]&&e[0].apply(null,[t])}),(function(t){"function"==typeof e[1]&&e[1].apply(null,[t])})):t.apply(this,arguments)}})),(p=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach((function(e){var t=d.prototype[e];d.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]||"function"==typeof e[2]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)}),(function(t){"function"==typeof e[2]&&e[2].apply(null,[t])})):t.apply(this,arguments)}})),["getStats"].forEach((function(e){var t=d.prototype[e];d.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)})):t.apply(this,arguments)}})),d}},"./node_modules/sdp/sdp.js":function(e,t,r){"use strict";var n={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};n.localCName=n.generateIdentifier(),n.splitLines=function(e){return e.trim().split("\n").map((function(e){return e.trim()}))},n.splitSections=function(e){return e.split("\nm=").map((function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"}))},n.getDescription=function(e){var t=n.splitSections(e);return t&&t[0]},n.getMediaSections=function(e){var t=n.splitSections(e);return t.shift(),t},n.matchPrefix=function(e,t){return n.splitLines(e).filter((function(e){return 0===e.indexOf(t)}))},n.parseCandidate=function(e){for(var t,r={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},n=8;n<t.length;n+=2)switch(t[n]){case"raddr":r.relatedAddress=t[n+1];break;case"rport":r.relatedPort=parseInt(t[n+1],10);break;case"tcptype":r.tcpType=t[n+1];break;case"ufrag":r.ufrag=t[n+1],r.usernameFragment=t[n+1];break;default:r[t[n]]=t[n+1]}return r},n.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var r=e.type;return t.push("typ"),t.push(r),"host"!==r&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},n.parseIceOptions=function(e){return e.substr(14).split(" ")},n.parseRtpMap=function(e){var t=e.substr(9).split(" "),r={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),r.name=t[0],r.clockRate=parseInt(t[1],10),r.channels=3===t.length?parseInt(t[2],10):1,r.numChannels=r.channels,r},n.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var r=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==r?"/"+r:"")+"\r\n"},n.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},n.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},n.parseFmtp=function(e){for(var t,r={},n=e.substr(e.indexOf(" ")+1).split(";"),o=0;o<n.length;o++)r[(t=n[o].trim().split("="))[0].trim()]=t[1];return r},n.writeFmtp=function(e){var t="",r=e.payloadType;if(void 0!==e.preferredPayloadType&&(r=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var n=[];Object.keys(e.parameters).forEach((function(t){e.parameters[t]?n.push(t+"="+e.parameters[t]):n.push(t)})),t+="a=fmtp:"+r+" "+n.join(";")+"\r\n"}return t},n.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},n.writeRtcpFb=function(e){var t="",r=e.payloadType;return void 0!==e.preferredPayloadType&&(r=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((function(e){t+="a=rtcp-fb:"+r+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},n.parseSsrcMedia=function(e){var t=e.indexOf(" "),r={ssrc:parseInt(e.substr(7,t-7),10)},n=e.indexOf(":",t);return n>-1?(r.attribute=e.substr(t+1,n-t-1),r.value=e.substr(n+1)):r.attribute=e.substr(t+1),r},n.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((function(e){return parseInt(e,10)}))}},n.getMid=function(e){var t=n.matchPrefix(e,"a=mid:")[0];if(t)return t.substr(6)},n.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},n.getDtlsParameters=function(e,t){return{role:"auto",fingerprints:n.matchPrefix(e+t,"a=fingerprint:").map(n.parseFingerprint)}},n.writeDtlsParameters=function(e,t){var r="a=setup:"+t+"\r\n";return e.fingerprints.forEach((function(e){r+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),r},n.parseCryptoLine=function(e){var t=e.substr(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},n.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"==typeof e.keyParams?n.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},n.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;var t=e.substr(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},n.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},n.getCryptoParameters=function(e,t){return n.matchPrefix(e+t,"a=crypto:").map(n.parseCryptoLine)},n.getIceParameters=function(e,t){var r=n.matchPrefix(e+t,"a=ice-ufrag:")[0],o=n.matchPrefix(e+t,"a=ice-pwd:")[0];return r&&o?{usernameFragment:r.substr(12),password:o.substr(10)}:null},n.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},n.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=n.splitLines(e)[0].split(" "),o=3;o<r.length;o++){var i=r[o],a=n.matchPrefix(e,"a=rtpmap:"+i+" ")[0];if(a){var s=n.parseRtpMap(a),c=n.matchPrefix(e,"a=fmtp:"+i+" ");switch(s.parameters=c.length?n.parseFmtp(c[0]):{},s.rtcpFeedback=n.matchPrefix(e,"a=rtcp-fb:"+i+" ").map(n.parseRtcpFb),t.codecs.push(s),s.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(s.name.toUpperCase())}}}return n.matchPrefix(e,"a=extmap:").forEach((function(e){t.headerExtensions.push(n.parseExtmap(e))})),t},n.writeRtpDescription=function(e,t){var r="";r+="m="+e+" ",r+=t.codecs.length>0?"9":"0",r+=" UDP/TLS/RTP/SAVPF ",r+=t.codecs.map((function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(" ")+"\r\n",r+="c=IN IP4 0.0.0.0\r\n",r+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach((function(e){r+=n.writeRtpMap(e),r+=n.writeFmtp(e),r+=n.writeRtcpFb(e)}));var o=0;return t.codecs.forEach((function(e){e.maxptime>o&&(o=e.maxptime)})),o>0&&(r+="a=maxptime:"+o+"\r\n"),r+="a=rtcp-mux\r\n",t.headerExtensions&&t.headerExtensions.forEach((function(e){r+=n.writeExtmap(e)})),r},n.parseRtpEncodingParameters=function(e){var t,r=[],o=n.parseRtpParameters(e),i=-1!==o.fecMechanisms.indexOf("RED"),a=-1!==o.fecMechanisms.indexOf("ULPFEC"),s=n.matchPrefix(e,"a=ssrc:").map((function(e){return n.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute})),c=s.length>0&&s[0].ssrc,u=n.matchPrefix(e,"a=ssrc-group:FID").map((function(e){return e.substr(17).split(" ").map((function(e){return parseInt(e,10)}))}));u.length>0&&u[0].length>1&&u[0][0]===c&&(t=u[0][1]),o.codecs.forEach((function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var n={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10)};c&&t&&(n.rtx={ssrc:t}),r.push(n),i&&((n=JSON.parse(JSON.stringify(n))).fec={ssrc:c,mechanism:a?"red+ulpfec":"red"},r.push(n))}})),0===r.length&&c&&r.push({ssrc:c});var d=n.matchPrefix(e,"b=");return d.length&&(d=0===d[0].indexOf("b=TIAS:")?parseInt(d[0].substr(7),10):0===d[0].indexOf("b=AS:")?1e3*parseInt(d[0].substr(5),10)*.95-16e3:void 0,r.forEach((function(e){e.maxBitrate=d}))),r},n.parseRtcpParameters=function(e){var t={},r=n.matchPrefix(e,"a=ssrc:").map((function(e){return n.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute}))[0];r&&(t.cname=r.value,t.ssrc=r.ssrc);var o=n.matchPrefix(e,"a=rtcp-rsize");t.reducedSize=o.length>0,t.compound=0===o.length;var i=n.matchPrefix(e,"a=rtcp-mux");return t.mux=i.length>0,t},n.parseMsid=function(e){var t,r=n.matchPrefix(e,"a=msid:");if(1===r.length)return{stream:(t=r[0].substr(7).split(" "))[0],track:t[1]};var o=n.matchPrefix(e,"a=ssrc:").map((function(e){return n.parseSsrcMedia(e)})).filter((function(e){return"msid"===e.attribute}));return o.length>0?{stream:(t=o[0].value.split(" "))[0],track:t[1]}:void 0},n.parseSctpDescription=function(e){var t,r=n.parseMLine(e),o=n.matchPrefix(e,"a=max-message-size:");o.length>0&&(t=parseInt(o[0].substr(19),10)),isNaN(t)&&(t=65536);var i=n.matchPrefix(e,"a=sctp-port:");if(i.length>0)return{port:parseInt(i[0].substr(12),10),protocol:r.fmt,maxMessageSize:t};if(n.matchPrefix(e,"a=sctpmap:").length>0){var a=n.matchPrefix(e,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(a[0],10),protocol:a[1],maxMessageSize:t}}},n.writeSctpDescription=function(e,t){var r=[];return r="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&r.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),r.join("")},n.generateSessionId=function(){return Math.random().toString().substr(2,21)},n.writeSessionBoilerplate=function(e,t,r){var o=void 0!==t?t:2;return"v=0\r\no="+(r||"thisisadapterortc")+" "+(e||n.generateSessionId())+" "+o+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},n.writeMediaSection=function(e,t,r,o){var i=n.writeRtpDescription(e.kind,t);if(i+=n.writeIceParameters(e.iceGatherer.getLocalParameters()),i+=n.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===r?"actpass":"active"),i+="a=mid:"+e.mid+"\r\n",e.direction?i+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?i+="a=sendrecv\r\n":e.rtpSender?i+="a=sendonly\r\n":e.rtpReceiver?i+="a=recvonly\r\n":i+="a=inactive\r\n",e.rtpSender){var a="msid:"+o.id+" "+e.rtpSender.track.id+"\r\n";i+="a="+a,i+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+a,e.sendEncodingParameters[0].rtx&&(i+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+a,i+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return i+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+n.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(i+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+n.localCName+"\r\n"),i},n.getDirection=function(e,t){for(var r=n.splitLines(e),o=0;o<r.length;o++)switch(r[o]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[o].substr(2)}return t?n.getDirection(t):"sendrecv"},n.getKind=function(e){return n.splitLines(e)[0].split(" ")[0].substr(2)},n.isRejected=function(e){return"0"===e.split(" ",2)[1]},n.parseMLine=function(e){var t=n.splitLines(e)[0].substr(2).split(" ");return{kind:t[0],port:parseInt(t[1],10),protocol:t[2],fmt:t.slice(3).join(" ")}},n.parseOLine=function(e){var t=n.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:t[0],sessionId:t[1],sessionVersion:parseInt(t[2],10),netType:t[3],addressType:t[4],address:t[5]}},n.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var t=n.splitLines(e),r=0;r<t.length;r++)if(t[r].length<2||"="!==t[r].charAt(1))return!1;return!0},e.exports=n},"./node_modules/webpack/buildin/global.js":function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},"./node_modules/webpack/buildin/module.js":function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},"./node_modules/whatwg-fetch/fetch.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Headers",(function(){return h})),r.d(t,"Request",(function(){return S})),r.d(t,"Response",(function(){return T})),r.d(t,"DOMException",(function(){return C})),r.d(t,"fetch",(function(){return O}));var n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==n&&n,o="URLSearchParams"in n,i="Symbol"in n&&"iterator"in Symbol,a="FileReader"in n&&"Blob"in n&&function(){try{return new Blob,!0}catch(e){return!1}}(),s="FormData"in n,c="ArrayBuffer"in n;if(c)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(e){return e&&u.indexOf(Object.prototype.toString.call(e))>-1};function p(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function l(e){return"string"!=typeof e&&(e=String(e)),e}function f(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return i&&(t[Symbol.iterator]=function(){return t}),t}function h(e){this.map={},e instanceof h?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function m(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function v(e){return new Promise((function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}}))}function g(e){var t=new FileReader,r=v(t);return t.readAsArrayBuffer(e),r}function y(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function _(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:a&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:s&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:o&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():c&&a&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=y(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c&&(ArrayBuffer.prototype.isPrototypeOf(e)||d(e))?this._bodyArrayBuffer=y(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):o&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a&&(this.blob=function(){var e=m(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=m(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}return this.blob().then(g)}),this.text=function(){var e,t,r,n=m(this);if(n)return n;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,r=v(t),t.readAsText(e),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},s&&(this.formData=function(){return this.text().then(b)}),this.json=function(){return this.text().then(JSON.parse)},this}h.prototype.append=function(e,t){e=p(e),t=l(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},h.prototype.delete=function(e){delete this.map[p(e)]},h.prototype.get=function(e){return e=p(e),this.has(e)?this.map[e]:null},h.prototype.has=function(e){return this.map.hasOwnProperty(p(e))},h.prototype.set=function(e,t){this.map[p(e)]=l(t)},h.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},h.prototype.keys=function(){var e=[];return this.forEach((function(t,r){e.push(r)})),f(e)},h.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),f(e)},h.prototype.entries=function(){var e=[];return this.forEach((function(t,r){e.push([r,t])})),f(e)},i&&(h.prototype[Symbol.iterator]=h.prototype.entries);var E=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function S(e,t){if(!(this instanceof S))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var r,n,o=(t=t||{}).body;if(e instanceof S){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new h(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,o||null==e._bodyInit||(o=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new h(t.headers)),this.method=(r=t.method||this.method||"GET",n=r.toUpperCase(),E.indexOf(n)>-1?n:r),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(o),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var i=/([?&])_=[^&]*/;if(i.test(this.url))this.url=this.url.replace(i,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function b(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(o))}})),t}function T(e,t){if(!(this instanceof T))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new h(t.headers),this.url=t.url||"",this._initBody(e)}S.prototype.clone=function(){return new S(this,{body:this._bodyInit})},_.call(S.prototype),_.call(T.prototype),T.prototype.clone=function(){return new T(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new h(this.headers),url:this.url})},T.error=function(){var e=new T(null,{status:0,statusText:""});return e.type="error",e};var R=[301,302,303,307,308];T.redirect=function(e,t){if(-1===R.indexOf(t))throw new RangeError("Invalid status code");return new T(null,{status:t,headers:{location:e}})};var C=n.DOMException;try{new C}catch(e){(C=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack}).prototype=Object.create(Error.prototype),C.prototype.constructor=C}function O(e,t){return new Promise((function(r,o){var i=new S(e,t);if(i.signal&&i.signal.aborted)return o(new C("Aborted","AbortError"));var s=new XMLHttpRequest;function u(){s.abort()}s.onload=function(){var e,t,n={status:s.status,statusText:s.statusText,headers:(e=s.getAllResponseHeaders()||"",t=new h,e.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var r=e.split(":"),n=r.shift().trim();if(n){var o=r.join(":").trim();t.append(n,o)}})),t)};n.url="responseURL"in s?s.responseURL:n.headers.get("X-Request-URL");var o="response"in s?s.response:s.responseText;setTimeout((function(){r(new T(o,n))}),0)},s.onerror=function(){setTimeout((function(){o(new TypeError("Network request failed"))}),0)},s.ontimeout=function(){setTimeout((function(){o(new TypeError("Network request failed"))}),0)},s.onabort=function(){setTimeout((function(){o(new C("Aborted","AbortError"))}),0)},s.open(i.method,function(e){try{return""===e&&n.location.href?n.location.href:e}catch(t){return e}}(i.url),!0),"include"===i.credentials?s.withCredentials=!0:"omit"===i.credentials&&(s.withCredentials=!1),"responseType"in s&&(a?s.responseType="blob":c&&i.headers.get("Content-Type")&&-1!==i.headers.get("Content-Type").indexOf("application/octet-stream")&&(s.responseType="arraybuffer")),!t||"object"!=typeof t.headers||t.headers instanceof h?i.headers.forEach((function(e,t){s.setRequestHeader(t,e)})):Object.getOwnPropertyNames(t.headers).forEach((function(e){s.setRequestHeader(e,l(t.headers[e]))})),i.signal&&(i.signal.addEventListener("abort",u),s.onreadystatechange=function(){4===s.readyState&&i.signal.removeEventListener("abort",u)}),s.send(void 0===i._bodyInit?null:i._bodyInit)}))}O.polyfill=!0,n.fetch||(n.fetch=O,n.Headers=h,n.Request=S,n.Response=T)},"./package.json":function(e){e.exports=JSON.parse('{"name":"teevid","version":"6.1.2","description":"","main":"middleware/app.js","author":"","license":"Copyright (c) 2014 CloudAYI, Inc. All Rights Reserved.","dependencies":{"@babel/core":"^7.6.4","@babel/runtime":"^7.6.3","@capaj/react-select-timezone":"^2.0.1","@date-io/moment":"^1.3.13","@fortawesome/fontawesome-free":"^5.14.0","@fortawesome/fontawesome-svg-core":"^1.2.25","@fortawesome/free-solid-svg-icons":"^5.11.2","@fortawesome/react-fontawesome":"^0.1.6","@fullcalendar/bootstrap":"^5.3.0","@fullcalendar/core":"^5.3.0","@fullcalendar/daygrid":"^5.3.0","@fullcalendar/interaction":"^5.3.0","@fullcalendar/list":"^5.3.0","@fullcalendar/react":"^5.3.0","@fullcalendar/timegrid":"^5.4.0","@material-ui/core":"^4.5.1","@material-ui/icons":"^4.5.1","@material-ui/lab":"^4.0.0-alpha.29","@material-ui/pickers":"^3.2.10","@peermetrics/webrtc-stats":"^3.1.1","ace-builds":"^1.4.12","animejs":"^3.1.0","apidoc":"^0.17.6","autoprefixer":"^9.6.5","babel-eslint":"^10.0.3","babel-jest":"^24.9.0","babel-loader":"^8.0.6","babel-preset-env":"^1.7.0","babel-preset-react-app":"^9.0.2","base-64":"^0.1.0","bcrypt":"^3.0.6","body-parser":"^1.19.0","bootstrap":"^4.5.2","bowser":"^2.7.0","btoa":"^1.2.1","case-sensitive-paths-webpack-plugin":"^2.2.0","chalk":"^2.4.2","chart.js":"^2.7.2","classnames":"^2.2.5","connected-react-router":"^6.5.2","cpu-stat":"^2.0.1","css-element-queries":"^1.2.1","css-loader":"^3.2.0","decode-tiff":"^0.2.1","detectrtc":"^1.3.6","documentation":"^12.1.2","domhandler":"^3.0.0","dotenv":"^8.1.0","drachtio-srf":"^4.4.18","email-templates":"^6.0.3","eslint":"^6.5.1","eslint-config-react-app":"^5.0.2","eslint-loader":"^3.0.2","eslint-plugin-flowtype":"^4.3.0","eslint-plugin-import":"^2.18.2","eslint-plugin-jsx-a11y":"^6.2.3","eslint-plugin-react":"^7.16.0","eslint-plugin-react-hooks":"^2.1.2","express":"^4.17.1","express-useragent":"^1.0.13","fabric":"^4.2.0","file-loader":"^4.2.0","file-type":"^12.3.0","fs-extra":"^8.1.0","fullcalendar":"^5.3.0","gaugeJS":"^1.3.7","geoip-lite":"^1.4.2","gif-engine-js":"^1.0.1","git-revision-webpack-plugin":"^3.0.3","google-translate":"^2.3.0","google-translate-api":"^2.3.0","gsap":"^2.1.3","hark":"^1.2.3","hex-rgb":"^4.2.0","history":"^4.10.1","html-webpack-plugin":"^4.0.0-beta.8","ibm-watson":"^5.5.0","image-decode":"^1.2.2","immutability-helper":"^3.0.1","interactjs":"^1.7.0","is-electron":"^2.2.0","javascript-obfuscator":"^0.21.0","js-logger":"^1.6.1","json-refs":"^3.0.13","jsonschema":"^1.2.5","jsonwebtoken":"^8.5.1","jszip":"^3.2.2","l20n":"^6.0.0","leaflet":"^1.5.1","libxmljs":"^0.19.7","loaders.css":"^0.1.2","lodash":"^4.17.21","lodash.clonedeep":"^4.5.0","lodash.compact":"^3.0.1","lodash.debounce":"^4.0.8","lodash.difference":"^4.5.0","lodash.filter":"^4.6.0","lodash.find":"^4.6.0","lodash.findindex":"^4.6.0","lodash.flatten":"^4.4.0","lodash.flattendeep":"^4.4.0","lodash.flow":"^3.5.0","lodash.foreach":"^4.5.0","lodash.get":"^4.4.2","lodash.includes":"^4.3.0","lodash.isarray":"^4.0.0","lodash.isequal":"^4.5.0","lodash.isobject":"^3.0.2","lodash.map":"^4.6.0","lodash.memoize":"^4.1.2","lodash.merge":"^4.6.2","lodash.omit":"^4.5.0","lodash.sortby":"^4.7.0","lodash.throttle":"^4.1.1","lodash.toarray":"^4.4.0","lodash.uniq":"^4.5.0","lodash.values":"^4.3.0","log4js":"^5.2.2","material-ui-color-picker":"3.2.0","md5":"^2.2.1","mediaelement":"^4.2.14","microsoft-cognitiveservices-speech-sdk":"^1.15.0","migrate-mongo":"^8.1.4","mini-css-extract-plugin":"^0.8.0","moment":"^2.27.0","moment-duration-format":"^2.3.2","moment-timezone":"^0.5.26","mongodb":"^3.3.2","mongoose":"^5.7.5","ms":"^2.1.2","multer":"^1.4.2","node-fetch":"^2.6.1","node-mailjet":"^3.2.1","node-sass":"^4.14.1","normalizr":"^3.4.1","object-assign":"4.1.1","pngjs":"^3.4.0","postcss-flexbugs-fixes":"^4.1.0","postcss-loader":"^3.0.0","promise":"^8.0.1","prop-types":"^15.6.0","psl":"^1.8.0","raf":"^3.4.0","raw-loader":"^3.1.0","react":"^16.10.2","react-ace":"^9.1.3","react-chartjs-2":"^2.7.4","react-contenteditable":"^3.2.6","react-dev-utils":"^9.1.0","react-dnd":"^9.4.0","react-dnd-html5-backend":"^9.4.0","react-dom":"^16.10.2","react-draggable":"^4.0.3","react-dropzone":"^10.1.10","react-event-listener":"^0.6.6","react-facebook-login":"^4.1.1","react-favicon":"0.0.17","react-grid-layout":"^0.16.2","react-helmet":"^5.2.1","react-hls-player":"^3.0.1","react-l20n-u":"^0.2.0","react-leaflet":"^2.0.1","react-loaders":"^3.0.1","react-player":"^1.15.3","react-redux":"^7.1.1","react-resizable":"^1.7.5","react-router":"^5.1.2","react-router-dom":"^5.1.2","react-scripts":"2.0.3","react-select":"^3.0.8","react-svg-loader":"^3.0.3","react-timezone-select":"^0.8.4","react-transition-group":"^4.3.0","react-youtube":"^7.9.0","redux":"^4.0.4","redux-form":"^8.3.7","redux-notifications":"^4.0.1","redux-orm":"^0.16.2","redux-saga":"^1.1.1","redux-thunk":"^2.2.0","request-promise-native":"^1.0.4","reselect":"^4.0.0","rgb-hex":"^3.0.0","sass-loader":"^8.0.0","sharp":"^0.27.2","standardized-audio-context":"^25.1.6","style-loader":"^1.0.0","svgo":"^1.3.2","sw-precache-webpack-plugin":"^0.11.5","swagger-node-express":"^2.1.3","swagger-ui-express":"^4.1.2","systeminformation":"^4.14.12","typedoc-plugin-external-module-name":"^2.0.0","typedoc-plugin-internal-external":"^2.0.2","typeface-roboto":"0.0.75","uniqid":"^5.0.3","urijs":"^1.19.1","url-loader":"^2.2.0","uuid":"^3.3.3","watson-speech":"^0.38.1","webpack":"^4.41.1","webpack-bundle-analyzer":"^3.9.0","webpack-cli":"^3.3.9","webpack-dev-server":"^3.11.0","webpack-manifest-plugin":"^2.2.0","webpack-shell-plugin":"^0.5.0","webrtc-adapter":"^7.7.1","webrtc-utilities":"^1.0.10","whatwg-fetch":"^3.0.0","worker-loader":"^2.0.0","ws":"^7.4.6","youdao-translate":"^1.0.0","youtube-thumbnail":"^1.3.0"},"scripts":{"start":"nodemon","start:ui":"NODE_ENV=development webpack-dev-server --config ./config/webpack.config.dev.js","start:mw":"sh -c ./node_modules/.bin/nodemon app.js","start:docker":"sh scripts/docker/dockerStart.sh licode_dev","clean":"find ./uploads/ -maxdepth 2 -type f -delete","sdk:import":"cp middleware/public/libs/sdk.js ui/src/lib/sdk.js","cleanup":"sh scripts/cleanup.sh","build":"sh -c \'npm run build:mw && npm run build:ui\'","build:mw":"sh scripts/middleware/build.sh","build:dev":"sh -c \'sh scripts/middleware/buildDev.sh && npm run build:ui\'","build:ui":"node scripts/ui/build.js","build:swagger":"node doc/swagger/buildJson.js","build:sdk":"NODE_ENV=production RLC=true webpack --config ./sdk/webpack.config.js","test":"jest","test:ui":"jest","test:mw":"mocha -t 5000 -b --exit ./middleware/test/","test:watch:ui":"jest --watch","test:coverage:ui":"jest -- --coverage","posttest_":"./node_modules/.bin/eslint ./ui/**","lint:ui":"eslint ui/src --ext .jsx --ext .js ","lint:fix:ui":"eslint ./ui/src --ext .jsx --ext .js --fix --quiet","unused_exports":"NODE_ENV=development find-unused-exports --module-glob \'ui/src/**/**/**/**/**/**/**/*.+(js|jsx)\' --resolve-file-extensions jsx,js --resolve-index-files","deadfile":"deadfile ./ui/src/index.js --exclude uploads public images styles fonts docs middleware sdk logs doc cert chat config build scripts react-editor","update:packages":"rm -rf node_modules && npm update --save-dev && npm update --save","migrate":"migrate-mongo up","build:doc":"node_modules/.bin/jsdoc --configure ./jsdoc.json --verbose","docs":"jsdoc -c ./uijsdoc.json"},"devDependencies":{"@babel/preset-env":"^7.14.9","@welldone-software/why-did-you-render":"^4.0.3","chai":"^4.2.0","chai-http":"^4.3.0","deadfile":"^1.2.2","enzyme":"^3.10.0","enzyme-adapter-react-16":"^1.14.0","enzyme-to-json":"^3.4.0","find-unused-exports":"^1.1.0","git-revision-webpack-plugin":"^3.0.3","jest":"^24.9.0","jsdoc":"^3.6.7","jsdom":"^15.1.1","mocha":"^8.1.1","nodemon":"^1.19.2","prettier-eslint":"^9.0.1","react-hot-loader":"^4.12.14","react-test-renderer":"^16.9.0","redux-mock-store":"^1.5.3","redux-saga-test-plan":"^4.0.0-rc.3","regenerator-runtime":"^0.13.9","sinon":"^7.5.0","terser-webpack-plugin":"^2.1.2","tui-jsdoc-template":"^1.2.2"}}')},"./sdk/index.js":function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"shimGetUserMedia",(function(){return Zi})),r.d(n,"shimGetDisplayMedia",(function(){return ea})),r.d(n,"shimMediaStream",(function(){return ta})),r.d(n,"shimOnTrack",(function(){return ra})),r.d(n,"shimGetSendersWithDtmf",(function(){return na})),r.d(n,"shimGetStats",(function(){return oa})),r.d(n,"shimSenderReceiverGetStats",(function(){return ia})),r.d(n,"shimAddTrackRemoveTrackWithNative",(function(){return aa})),r.d(n,"shimAddTrackRemoveTrack",(function(){return sa})),r.d(n,"shimPeerConnection",(function(){return ca})),r.d(n,"fixNegotiationNeeded",(function(){return ua}));var o={};r.r(o),r.d(o,"shimGetUserMedia",(function(){return la})),r.d(o,"shimGetDisplayMedia",(function(){return fa})),r.d(o,"shimPeerConnection",(function(){return ha})),r.d(o,"shimReplaceTrack",(function(){return ma}));var i={};r.r(i),r.d(i,"shimGetUserMedia",(function(){return va})),r.d(i,"shimGetDisplayMedia",(function(){return ga})),r.d(i,"shimOnTrack",(function(){return ya})),r.d(i,"shimPeerConnection",(function(){return _a})),r.d(i,"shimSenderGetStats",(function(){return Ea})),r.d(i,"shimReceiverGetStats",(function(){return Sa})),r.d(i,"shimRemoveStream",(function(){return ba})),r.d(i,"shimRTCDataChannel",(function(){return Ta})),r.d(i,"shimAddTransceiver",(function(){return Ra})),r.d(i,"shimGetParameters",(function(){return Ca})),r.d(i,"shimCreateOffer",(function(){return Oa})),r.d(i,"shimCreateAnswer",(function(){return wa}));var a={};r.r(a),r.d(a,"shimLocalStreamsAPI",(function(){return Aa})),r.d(a,"shimRemoteStreamsAPI",(function(){return Ia})),r.d(a,"shimCallbacksAPI",(function(){return xa})),r.d(a,"shimGetUserMedia",(function(){return ka})),r.d(a,"shimConstraints",(function(){return Pa})),r.d(a,"shimRTCIceServerUrls",(function(){return Na})),r.d(a,"shimTrackEventTransceiver",(function(){return Da})),r.d(a,"shimCreateOfferLegacy",(function(){return ja})),r.d(a,"shimAudioContext",(function(){return Ma}));var s={};r.r(s),r.d(s,"shimRTCIceCandidate",(function(){return Va})),r.d(s,"shimMaxMessageSize",(function(){return Fa})),r.d(s,"shimSendThrowTypeError",(function(){return Ga})),r.d(s,"shimConnectionState",(function(){return Ba})),r.d(s,"removeExtmapAllowMixed",(function(){return Ha})),r.d(s,"shimAddIceCandidateNullOrEmpty",(function(){return Wa}));var c={GENERAL_ERROR:"teevid/error",GENERAL_WARNING:"teevid/warning",GENERAL_INFO:"teevid/info",SET_GLOBAL_CONFIGS:"teevid/api/global_config",SET_ADMIN_PORTAL:"teevid/api/admin_portal",SET_ADMIN_SOCKET:"teevid/api/admin_socket",PARTICIPANT_STATS:"teevid/api/participant_stats",DELETE_FROM_ROOM:"teevid/api/delete_from_room",ROOM_CLOSE:"teevid/api/room_close",LICENSE_GET:"teevid/api/license_get",LICENSE_SUCCESS:"teevid/api/license_success",LICENSE_ERROR:"teevid/api/license_error",LICENSE_UPDATE:"teevid/api/license_update",LICENSE_UPDATE_SUCCESS:"teevid/api/license_update_success",LICENSE_UPDATE_ERROR:"teevid/api/license_update_error",SERVERS_GET:"teevid/api/servers_get",SERVERS_SUCCESS:"teevid/api/servers_success",SERVERS_ERROR:"teevid/api/servers/error",LIVE_MEETINGS_GET:"teevid/api/live_meetings_get",LIVE_MEETINGS_SUCCESS:"teevid/api/live_meetings_success",LIVE_MEETINGS_ERROR:"teevid/api/live_meetings_error",RECORDS_FETCH:"teevid/api/records",RECORDS_FETCH_SUCCESS:"teevid/api/records_success",RECORD_UPDATE:"teevid/api/record_update",RECORD_UPDATED_SUCCESS:"teevid/api/records_updated_success",RECORD_REMOVE:"teevid/api/record_remove",RECORD_REMOVED_SUCCESS:"teevid/api/records_removed_success",STORYBOARD_FETCH_ALL:"teevid/api/storyboard_all",STORYBOARD_SUCCESS_ALL:"teevid/api/storyboard_success_all",STORYBOARD_LOAD_PROGRESS:"teevid/api/storyboard_load_progress",STORYBOARD_LOAD_PROGRESS_ERROR:"teevid/api/storyboard_load_progress_error",STORYBOARD_FETCH:"teevid/api/storyboard_fetch",STORYBOARD_FETCH_SUCCESS:"teevid/api/storyboard_fetch_success",STORYBOARD_UPDATE:"teevid/api/storyboard_update",STORYBOARD_CREATE:"teevid/api/storyboard_create",STORYBOARD_REMOVE:"teevid/api/storyboard_remove",STORYBOARD_REMOVED:"teevid/api/storyboard_removed",STORYBOARD_SUCCESS:"teevid/api/storyboard_success",STORYBOARD_ERROR:"teevid/api/storyboard_error",STORYBOARD_SCENE_CREATE:"teevid/api/storyboard_scene_create",STORYBOARD_SCENE_CREATE_SUCCESS:"teevid/api/storyboard_scene_create_success",STORYBOARD_SCENE_CREATE_ERROR:"teevid/api/storyboard_scene_create_error",REFRESH_MEDIA_DEVICES:"teevid/media/devices_refresh",REFRESH_CURRENT_MEDIA_DEVICES:"teevid/media/devices_refresh_current",SET_MEDIA_DEVICES:"teevid/media/devices_set",SET_CURRENT_MEDIA_DEVICES:"teevid/media/devices_set_current",USERS_FETCH_ALL:"teevid/api/users_all",USERS_SUCCESS_ALL:"teevid/api/users_success_all",USER_CREATE:"teevid/api/users_create",USER_EDIT:"teevid/api/users_edit",USER_CREATE_SUCCESS:"teevid/api/users_create_success",USER_EDIT_SUCCESS:"teevid/api/users_edit_success",USER_CREATE_ERROR:"teevid/api/users_create_error",USER_EDIT_ERROR:"teevid/api/users_edit_error",USER_CHANGE_PASSWORD:"teevid/api/users_change_password",USER_DELETE:"teevid/api/users_delete",USER_DELETE_SUCCESS:"teevid/api/users_delete_success",USER_DELETE_ERROR:"teevid/api/users_delete_error",USERS_ERROR:"teevid/api/users_error",ROOM_FETCH_ALL:"teevid/api/room_all",ROOM_SUCCESS_ALL:"teevid/api/room_success_all",ROOM_CREATE:"teevid/api/room_create",ROOM_CREATE_SUCCESS:"teevid/api/room_create_success",ROOM_CREATE_ERROR:"teevid/api/room_create_error",ROOM_EDIT:"teevid/api/room_edit",ROOM_EDIT_SUCCESS:"teevid/api/room_edit_success",ROOM_EDIT_ERROR:"teevid/api/room_edit_error",ROOM_DELETE:"teevid/api/room_delete",ROOM_DELETE_SUCCESS:"teevid/api/room_delete_success",ROOM_DELETE_ERROR:"teevid/api/room_delete_error",ROOM_ERROR:"teevid/api/room_error",SERVER_STATUS:"server-status",GET_TERMINATED_MEETINGS:"teevid/api/terminated_meetings",GET_TERMINATED_MEETINGS_SUCCESS:"teevid/api/terminated_meetings_success",GET_TERMINATED_MEETINGS_ERROR:"teevid/api/terminated_meetings_error",GET_TERMINATED_EVENTS:"teevid/api/terminated_events",GET_TERMINATED_EVENTS_SUCCESS:"teevid/api/terminated_events_success",GET_TERMINATED_EVENTS_ERROR:"teevid/api/terminated_events_error",GET_TERMINATED_PARTICIPANTS:"teevid/api/terminated_participants",GET_TERMINATED_PARTICIPANTS_SUCCESS:"teevid/api/terminated_participants_success",GET_TERMINATED_PARTICIPANTS_ERROR:"teevid/api/terminated_participants_error",GET_TERMINATED_MEETING_PARTICIPANTS:"teevid/api/terminated_meeting_participants",GET_TERMINATED_MEETING_PARTICIPANTS_SUCCESS:"teevid/api/terminated_meeting_participants_success",GET_TERMINATED_MEETING_PARTICIPANTS_ERROR:"teevid/api/terminated_meeting_participants_error",CLEAR_TERMINATED_MEETING_PARTICIPANTS:"teevid/api/terminated_meeting_participants_clear",MCU_FETCH_ALL:"teevid/api/mcu_all",MCU_SUCCESS_ALL:"teevid/api/mcu_all_success",MCU_START:"teevid/api/mcu_start",MCU_RESTART:"teevid/api/mcu_restart",MCU_START_SUCCESS:"teevid/api/mcu_start_success",MCU_START_ERROR:"teevid/api/mcu_start_error",MCU_REMOVE:"teevid/api/mcu_remove",MCU_REMOVE_SUCCESS:"teevid/api/mcu_remove_success",MCU_STOP:"teevid/api/mcu_stop",MCU_STOP_SUCCESS:"teevid/api/mcu_stop_success",MCU_KILL:"teevid/api/mcu_kill",MCU_KILL_SUCCESS:"teevid/api/mcu_kill_success",MCU_STATS:"teevid/api/mcu_stats",MS_FETCH_ALL:"teevid/api/media_servers_all",MS_SUCCESS_ALL:"teevid/api/media_servers_success_all",MS_ADD:"teevid/api/media_servers_add",MS_ADD_SUCCESS:"teevid/api/media_servers_add_success",MS_REMOVE:"teevid/api/media_servers_remove",MS_REMOVE_SUCCESS:"teevid/api/media_servers_remove_success",KURENTO_FETCH_ALL:"teevid/api/kurento_servers_all",KURENTO_SUCCESS_ALL:"teevid/api/kurento_servers_success_all",KURENTO_RESTART:"teevid/api/kurento_restart",KURENTO_RESTARTED_SUCCESS:"teevid/api/kurento_restarted_success",KURENTO_RESET:"teevid/api/kurento_reset",KURENTO_RESETED_SUCCESS:"teevid/api/kurento_reseted_success",REQUEST_EVENTS:"app/webevents/reqest_events",REQUEST_EVENTS_SUCCESS:"app/webevents/REQUEST_EVENTS_SUCCESS",REQUEST_EVENT:"app/webevents/request_event",REQUEST_EVENT_SUCCESS:"app/webevents/request_event_success",CREATE_EVENT:"app/webevents/create_event",CREATE_EVENT_SUCCESS:"app/webevents/create_event_success",UPDATE_EVENT:"app/webevents/update_event",UPDATE_EVENT_SUCCESS:"app/webevents/update_event_success",DELETE_EVENT:"app/webevents/delete_event",DELETE_EVENT_SUCCESS:"app/webevents/delete_event_success",NOOP:"noop"},u="server-status",d="stats-update",p="mcu-instance-list",l={UPDATE_TOKEN:"teevid/token/update",SET_SERVER_URL:"teevid/server_url/set",LOGIN:"teevid/login",LOGIN_SUCCESS:"teevid/login/sucess",LOGIN_ERROR:"teevid/login/error",LOGOUT:"teevid/logout",USER_REFRESH_PROFILE:"teevid/user_profile/refresh",USER_EDIT_PROFILE:"teevid/user_profile/edit",USER_EDIT_PROFILE_ERROR:"teevid/user_profile/edit_error",USER_SET_PROFILE:"teevid/user_profile/set",SET_EVENT_ROOM:"teevid/set_event_room",ACCESS_PIN_ERROR:"teevid/access_pin_error",MODERATOR_PIN_ERROR:"teevid/moderator_pin_error",PANELIST_PIN_ERROR:"teevid/panelist_pin_error",ATTENDEE_PIN_ERROR:"teevid/attendee_pin_error",OWNER_PIN_ERROR:"teevid/owner_pin_error"},f=r("./node_modules/immutability-helper/index.js"),h=r.n(f),m=r("./middleware/commons/enums.js"),v=r("./node_modules/lodash.get/index.js"),g=r.n(v);function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){E(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var S={adminSocket:null,isAdminPortal:!1,users:[],license:{},servers:[],mcus:[],mediaServers:[],kurentoServers:[],liveMeetings:{},terminatedMeetings:[],terminatedEvents:[],terminatedParticipants:[],terminatedMeetingParticipants:[],serverUrl:"",storyboards:[],storyboard:null,rooms:[],globalConfigs:{},audioDevices:[],videoDevices:[],audioOutputDevices:[],currentDevices:{video:null,audio:null,audioOutput:null},percents:0,isReportLoading:!1},b=function(e){var t={};return e.forEach((function(e){t[e._id]=e.value})),t.streaming_domain||window&&window.location&&window.location.hostname&&(t.streaming_domain=window.location.hostname),t},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0,r=t.type,n=t.payload;switch(r){case l.LOGOUT:return Object.assign({},e,{adminSocket:null,isAdminPortal:!1,users:[],servers:[],liveMeetings:{}});case c.SET_MEDIA_DEVICES:return Object.assign({},e,{audioDevices:n.audio,videoDevices:n.video,audioOutputDevices:n.audioOutput});case c.SET_CURRENT_MEDIA_DEVICES:return Object.assign({},e,{currentDevices:_({},n)});case c.SET_ADMIN_PORTAL:return Object.assign({},e,{isAdminPortal:n});case c.SET_ADMIN_SOCKET:return Object.assign({},e,{adminSocket:n});case c.SET_GLOBAL_CONFIGS:return Object.assign({},e,{globalConfigs:b(n)});case c.LICENSE_SUCCESS:case c.LICENSE_UPDATE_SUCCESS:return Object.assign({},e,{license:n});case c.LIVE_MEETINGS_SUCCESS:return Object.assign({},e,{liveMeetings:n});case c.SERVERS_SUCCESS:return Object.assign({},e,{servers:n});case c.LICENSE_ERROR:return Object.assign({},e,{license:{}});case c.STORYBOARD_FETCH_SUCCESS:return Object.assign({},e,{storyboard:n});case c.STORYBOARD_SUCCESS_ALL:return Object.assign({},e,{storyboards:n});case c.STORYBOARD_LOAD_PROGRESS:return Object.assign({},e,{percents:n});case c.USERS_SUCCESS_ALL:return Object.assign({},e,{users:n});case c.ROOM_SUCCESS_ALL:return Object.assign({},e,{rooms:n});case c.MCU_SUCCESS_ALL:case c.MCU_STATS:return Object.assign({},e,{mcus:n});case c.MS_SUCCESS_ALL:return Object.assign({},e,{mediaServers:n});case c.KURENTO_SUCCESS_ALL:return Object.assign({},e,{kurentoServers:n});case c.SERVER_STATUS:return Object.assign({},e,{liveMeetings:n});case c.PARTICIPANT_STATS:var o={};for(var i in n.stats)if(e.liveMeetings[n.roomId]){var a=Object.assign({},g()(e,"liveMeetings.".concat(n.roomId,".currentParticipants.").concat(i),{}),g()(n,"stats.".concat(i)));o[i]=a}else e.liveMeetings[n.roomId]={currentParticipants:{}};return Object.assign({},h()(e,{liveMeetings:E({},n.roomId,{currentParticipants:{$merge:o}})}));case c.GET_TERMINATED_MEETINGS:return Object.assign({},e,{isReportLoading:!0});case c.GET_TERMINATED_MEETINGS_SUCCESS:return Object.assign({},e,{terminatedMeetings:n,isReportLoading:!1});case c.GET_TERMINATED_PARTICIPANTS:return Object.assign({},e,{isReportLoading:!0});case c.GET_TERMINATED_PARTICIPANTS_SUCCESS:return Object.assign({},e,{terminatedParticipants:n,isReportLoading:!1});case c.GET_TERMINATED_MEETING_PARTICIPANTS:return Object.assign({},e,{isReportLoading:!0});case c.GET_TERMINATED_MEETING_PARTICIPANTS_SUCCESS:return Object.assign({},e,{terminatedMeetingParticipants:n,isReportLoading:!1});case c.CLEAR_TERMINATED_MEETING_PARTICIPANTS:return Object.assign({},e,{terminatedMeetingParticipants:[]});case c.GET_TERMINATED_EVENTS:return Object.assign({},e,{isReportLoading:!0});case c.GET_TERMINATED_EVENTS_SUCCESS:return Object.assign({},e,{terminatedEvents:n,isReportLoading:!1});default:return e}},R=function(e){return"@@redux-saga/"+e},C=R("CANCEL_PROMISE"),O=R("CHANNEL_END"),w=R("IO"),A=R("MULTICAST"),I=R("SELF_CANCELLATION"),x=R("TASK"),k=R("TASK_CANCEL"),P=R("TERMINATE"),N=R("LOCATION"),D=r("./node_modules/@babel/runtime/helpers/esm/extends.js"),j=function(e){return null==e},M=function(e){return null!=e},L=function(e){return"function"==typeof e},U=function(e){return"string"==typeof e},V=Array.isArray,F=function(e){return e&&L(e.then)},G=function(e){return e&&L(e.next)&&L(e.throw)},B=function e(t){return t&&(U(t)||q(t)||L(t)||V(t)&&t.every(e))},H=function(e){return e&&L(e.take)&&L(e.close)},W=function(e){return L(e)&&e.hasOwnProperty("toString")},q=function(e){return Boolean(e)&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype};var K=function(e,t){var r;void 0===t&&(t=!0);var n=new Promise((function(n){r=setTimeout(n,e,t)}));return n[C]=function(){clearTimeout(r)},n},z=function(e){return function(){return e}}(!0),Y=function(){};var Q=function(e){return e};"function"==typeof Symbol&&Symbol.asyncIterator&&Symbol.asyncIterator;var J=function(e,t){Object(D.a)(e,t),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach((function(r){e[r]=t[r]}))};function $(e,t){var r=e.indexOf(t);r>=0&&e.splice(r,1)}function X(e){var t=!1;return function(){t||(t=!0,e())}}var Z=function(e){throw e},ee=function(e){return{value:e,done:!0}};function te(e,t,r){void 0===t&&(t=Z),void 0===r&&(r="iterator");var n={meta:{name:r},next:e,throw:t,return:ee,isSagaIterator:!0};return"undefined"!=typeof Symbol&&(n[Symbol.iterator]=function(){return n}),n}var re=function(e){return Array.apply(null,new Array(e))},ne=function(e){return e===P},oe=function(e){return e===k},ie=function(e){return ne(e)||oe(e)};function ae(e,t){var r=Object.keys(e),n=r.length;var o,i=0,a=V(e)?re(n):{},s={};return r.forEach((function(e){var r=function(r,s){o||(s||ie(r)?(t.cancel(),t(r,s)):(a[e]=r,++i===n&&(o=!0,t(a))))};r.cancel=Y,s[e]=r})),t.cancel=function(){o||(o=!0,r.forEach((function(e){return s[e].cancel()})))},s}function se(e){return{name:e.name||"anonymous",location:ce(e)}}function ce(e){return e[N]}var ue={isEmpty:z,put:Y,take:Y};function de(e,t){void 0===e&&(e=10);var r=new Array(e),n=0,o=0,i=0,a=function(t){r[o]=t,o=(o+1)%e,n++},s=function(){if(0!=n){var t=r[i];return r[i]=null,n--,i=(i+1)%e,t}},c=function(){for(var e=[];n;)e.push(s());return e};return{isEmpty:function(){return 0==n},put:function(s){var u;if(n<e)a(s);else switch(t){case 1:throw new Error("Channel's Buffer overflow!");case 3:r[o]=s,i=o=(o+1)%e;break;case 4:u=2*e,r=c(),n=r.length,o=r.length,i=0,r.length=u,e=u,a(s)}},take:s,flush:c}}var pe=function(){return ue},le=function(e){return de(e,4)},fe=function(e,t){var r;return(r={})[w]=!0,r.combinator=!1,r.type=e,r.payload=t,r};function he(e,t){return void 0===e&&(e="*"),B(e)?fe("TAKE",{pattern:e}):H(r=e)&&r[A]&&M(t)&&B(t)?fe("TAKE",{channel:e,pattern:t}):H(e)?fe("TAKE",{channel:e}):void 0;var r}function me(e,t){return j(t)&&(t=e,e=void 0),fe("PUT",{channel:e,action:t})}function ve(e){var t=fe("ALL",e);return t.combinator=!0,t}function ge(e,t){var r,n=null;return L(e)?r=e:(V(e)?(n=e[0],r=e[1]):(n=e.context,r=e.fn),n&&U(r)&&L(n[r])&&(r=n[r])),{context:n,fn:r,args:t}}function ye(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return fe("CALL",ge(e,r))}function _e(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return fe("FORK",ge(e,r))}function Ee(e){return void 0===e&&(e=I),fe("CANCEL",e)}function Se(e){void 0===e&&(e=Q);for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return fe("SELECT",{selector:e,args:r})}var be=ye.bind(null,K),Te=function(e){return{done:!0,value:e}},Re={};function Ce(e){return H(e)?"channel":W(e)?String(e):L(e)?e.name:String(e)}function Oe(e,t,r){var n,o,i,a=t;function s(t,r){if(a===Re)return Te(t);if(r&&!o)throw a=Re,r;n&&n(t);var s=r?e[o](r):e[a]();return a=s.nextState,i=s.effect,n=s.stateUpdater,o=s.errorState,a===Re?Te(t):i}return te(s,(function(e){return s(null,e)}),r)}function we(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];var i,a={done:!1,value:he(e)},s=function(e){return{done:!1,value:_e.apply(void 0,[t].concat(n,[e]))}},c=function(e){return i=e};return Oe({q1:function(){return{nextState:"q2",effect:a,stateUpdater:c}},q2:function(){return{nextState:"q1",effect:s(i)}}},"q1","takeEvery("+Ce(e)+", "+t.name+")")}function Ae(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];var i,a,s={done:!1,value:he(e)},c=function(e){return{done:!1,value:_e.apply(void 0,[t].concat(n,[e]))}},u=function(e){return{done:!1,value:Ee(e)}},d=function(e){return i=e},p=function(e){return a=e};return Oe({q1:function(){return{nextState:"q2",effect:s,stateUpdater:p}},q2:function(){return i?{nextState:"q3",effect:u(i)}:{nextState:"q1",effect:c(a),stateUpdater:d}},q3:function(){return{nextState:"q1",effect:c(a),stateUpdater:d}}},"q1","takeLatest("+Ce(e)+", "+t.name+")")}function Ie(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];return _e.apply(void 0,[we,e,t].concat(n))}function xe(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];return _e.apply(void 0,[Ae,e,t].concat(n))}r("./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js");function ke(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}"function"==typeof Symbol&&Symbol.observable;var Pe=function(){return Math.random().toString(36).substring(7).split("").join(".")},Ne={INIT:"@@redux/INIT"+Pe(),REPLACE:"@@redux/REPLACE"+Pe(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Pe()}};function De(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++){var o=t[n];0,"function"==typeof e[o]&&(r[o]=e[o])}var i,a=Object.keys(r);try{!function(e){Object.keys(e).forEach((function(t){var r=e[t];if(void 0===r(void 0,{type:Ne.INIT}))throw new Error(ke(12));if(void 0===r(void 0,{type:Ne.PROBE_UNKNOWN_ACTION()}))throw new Error(ke(13))}))}(r)}catch(e){i=e}return function(e,t){if(void 0===e&&(e={}),i)throw i;for(var n=!1,o={},s=0;s<a.length;s++){var c=a[s],u=r[c],d=e[c],p=u(d,t);if(void 0===p){t&&t.type;throw new Error(ke(14))}o[c]=p,n=n||p!==d}return(n=n||a.length!==Object.keys(e).length)?o:e}}function je(e,t){return function(){return t(e.apply(this,arguments))}}function Me(e,t){if("function"==typeof e)return je(e,t);if("object"!=typeof e||null===e)throw new Error(ke(16));var r={};for(var n in e){var o=e[n];"function"==typeof o&&(r[n]=je(o,t))}return r}function Le(){var e={};return e.promise=new Promise((function(t,r){e.resolve=t,e.reject=r})),e}var Ue=Le,Ve=[],Fe=0;function Ge(e){try{We(),e()}finally{qe()}}function Be(e){Ve.push(e),Fe||(We(),Ke())}function He(e){try{return We(),e()}finally{Ke()}}function We(){Fe++}function qe(){Fe--}function Ke(){var e;for(qe();!Fe&&void 0!==(e=Ve.shift());)Ge(e)}var ze=function(e){return function(t){return e.some((function(e){return Xe(e)(t)}))}},Ye=function(e){return function(t){return e(t)}},Qe=function(e){return function(t){return t.type===String(e)}},Je=function(e){return function(t){return t.type===e}},$e=function(){return z};function Xe(e){var t="*"===e?$e:U(e)?Qe:V(e)?ze:W(e)?Qe:L(e)?Ye:q(e)?Je:null;if(null===t)throw new Error("invalid pattern: "+e);return t(e)}var Ze={type:O},et=function(e){return e&&e.type===O};function tt(e){void 0===e&&(e=le());var t=!1,r=[];return{take:function(n){t&&e.isEmpty()?n(Ze):e.isEmpty()?(r.push(n),n.cancel=function(){$(r,n)}):n(e.take())},put:function(n){if(!t){if(0===r.length)return e.put(n);r.shift()(n)}},flush:function(r){t&&e.isEmpty()?r(Ze):r(e.flush())},close:function(){if(!t){t=!0;var e=r;r=[];for(var n=0,o=e.length;n<o;n++){(0,e[n])(Ze)}}}}}function rt(e,t){void 0===t&&(t=pe());var r,n=!1,o=tt(t),i=function(){n||(n=!0,L(r)&&r(),o.close())};return r=X(r=e((function(e){et(e)?i():o.put(e)}))),n&&r(),{take:o.take,flush:o.flush,close:i}}function nt(e,t){var r=e[C];L(r)&&(t.cancel=r),e.then(t,(function(e){t(e,!0)}))}var ot,it=0,at=function(){return++it};function st(e){e.isRunning()&&e.cancel()}var ct=((ot={}).TAKE=function(e,t,r){var n=t.channel,o=void 0===n?e.channel:n,i=t.pattern,a=t.maybe,s=function(e){e instanceof Error?r(e,!0):!et(e)||a?r(e):r(P)};try{o.take(s,M(i)?Xe(i):null)}catch(e){return void r(e,!0)}r.cancel=s.cancel},ot.PUT=function(e,t,r){var n=t.channel,o=t.action,i=t.resolve;Be((function(){var t;try{t=(n?n.put:e.dispatch)(o)}catch(e){return void r(e,!0)}i&&F(t)?nt(t,r):r(t)}))},ot.ALL=function(e,t,r,n){var o=n.digestEffect,i=it,a=Object.keys(t);if(0!==a.length){var s=ae(t,r);a.forEach((function(e){o(t[e],i,s[e],e)}))}else r(V(t)?[]:{})},ot.RACE=function(e,t,r,n){var o=n.digestEffect,i=it,a=Object.keys(t),s=V(t)?re(a.length):{},c={},u=!1;a.forEach((function(e){var t=function(t,n){u||(n||ie(t)?(r.cancel(),r(t,n)):(r.cancel(),u=!0,s[e]=t,r(s)))};t.cancel=Y,c[e]=t})),r.cancel=function(){u||(u=!0,a.forEach((function(e){return c[e].cancel()})))},a.forEach((function(e){u||o(t[e],i,c[e],e)}))},ot.CALL=function(e,t,r,n){var o=t.context,i=t.fn,a=t.args,s=n.task;try{var c=i.apply(o,a);if(F(c))return void nt(c,r);if(G(c))return void vt(e,c,s.context,it,se(i),!1,r);r(c)}catch(e){r(e,!0)}},ot.CPS=function(e,t,r){var n=t.context,o=t.fn,i=t.args;try{var a=function(e,t){j(e)?r(t):r(e,!0)};o.apply(n,i.concat(a)),a.cancel&&(r.cancel=a.cancel)}catch(e){r(e,!0)}},ot.FORK=function(e,t,r,n){var o=t.context,i=t.fn,a=t.args,s=t.detached,c=n.task,u=function(e){var t=e.context,r=e.fn,n=e.args;try{var o=r.apply(t,n);if(G(o))return o;var i=!1;return te((function(e){return i?{value:e,done:!0}:(i=!0,{value:o,done:!F(o)})}))}catch(e){return te((function(){throw e}))}}({context:o,fn:i,args:a}),d=function(e,t){return e.isSagaIterator?{name:e.meta.name}:se(t)}(u,i);He((function(){var t=vt(e,u,c.context,it,d,s,void 0);s?r(t):t.isRunning()?(c.queue.addTask(t),r(t)):t.isAborted()?c.queue.abort(t.error()):r(t)}))},ot.JOIN=function(e,t,r,n){var o=n.task,i=function(e,t){if(e.isRunning()){var r={task:o,cb:t};t.cancel=function(){e.isRunning()&&$(e.joiners,r)},e.joiners.push(r)}else e.isAborted()?t(e.error(),!0):t(e.result())};if(V(t)){if(0===t.length)return void r([]);var a=ae(t,r);t.forEach((function(e,t){i(e,a[t])}))}else i(t,r)},ot.CANCEL=function(e,t,r,n){var o=n.task;t===I?st(o):V(t)?t.forEach(st):st(t),r()},ot.SELECT=function(e,t,r){var n=t.selector,o=t.args;try{r(n.apply(void 0,[e.getState()].concat(o)))}catch(e){r(e,!0)}},ot.ACTION_CHANNEL=function(e,t,r){var n=t.pattern,o=tt(t.buffer),i=Xe(n),a=function t(r){et(r)||e.channel.take(t,i),o.put(r)},s=o.close;o.close=function(){a.cancel(),s()},e.channel.take(a,i),r(o)},ot.CANCELLED=function(e,t,r,n){r(n.task.isCancelled())},ot.FLUSH=function(e,t,r){t.flush(r)},ot.GET_CONTEXT=function(e,t,r,n){r(n.task.context[t])},ot.SET_CONTEXT=function(e,t,r,n){var o=n.task;J(o.context,t),r()},ot);function ut(e,t){return e+"?"+t}function dt(e){var t=e.name,r=e.location;return r?t+"  "+ut(r.fileName,r.lineNumber):t}var pt=null,lt=[],ft=function(){pt=null,lt.length=0},ht=function(){var e,t,r,n,o,i=lt[0],a=lt.slice(1),s=i.crashedEffect?function(e){var t=ce(e);return t?t.code+"  "+ut(t.fileName,t.lineNumber):""}(i.crashedEffect):null;return["The above error occurred in task "+dt(i.meta)+(s?" \n when executing effect "+s:"")].concat(a.map((function(e){return"    created by "+dt(e.meta)})),[(e=lt,t=function(e){return e.cancelledTasks},r=e,o=(n=[]).concat.apply(n,r.map(t)),o.length?["Tasks cancelled due to error:"].concat(o).join("\n"):"")]).join("\n")};function mt(e,t,r,n,o,i,a){var s;void 0===a&&(a=Y);var c,u,d=0,p=null,l=[],f=Object.create(r),h=function(e,t,r){var n,o=[],i=!1;function a(e){t(),c(),r(e,!0)}function s(t){o.push(t),t.cont=function(s,c){i||($(o,t),t.cont=Y,c?a(s):(t===e&&(n=s),o.length||(i=!0,r(n))))}}function c(){i||(i=!0,o.forEach((function(e){e.cont=Y,e.cancel()})),o=[])}return s(e),{addTask:s,cancelAll:c,abort:a,getTasks:function(){return o}}}(t,(function(){l.push.apply(l,h.getTasks().map((function(e){return e.meta.name})))}),m);function m(t,r){if(r){if(d=2,(i={meta:o,cancelledTasks:l}).crashedEffect=pt,lt.push(i),v.isRoot){var n=ht();ft(),e.onError(t,{sagaStack:n})}u=t,p&&p.reject(t)}else t===k?d=1:1!==d&&(d=3),c=t,p&&p.resolve(t);var i;v.cont(t,r),v.joiners.forEach((function(e){e.cb(t,r)})),v.joiners=null}var v=((s={})[x]=!0,s.id=n,s.meta=o,s.isRoot=i,s.context=f,s.joiners=[],s.queue=h,s.cancel=function(){0===d&&(d=1,h.cancelAll(),m(k,!1))},s.cont=a,s.end=m,s.setContext=function(e){J(f,e)},s.toPromise=function(){return p||(p=Ue(),2===d?p.reject(u):0!==d&&p.resolve(c)),p.promise},s.isRunning=function(){return 0===d},s.isCancelled=function(){return 1===d||0===d&&1===t.status},s.isAborted=function(){return 2===d},s.result=function(){return c},s.error=function(){return u},s);return v}function vt(e,t,r,n,o,i,a){var s=e.finalizeRunEffect((function(t,r,n){if(F(t))nt(t,n);else if(G(t))vt(e,t,u.context,r,o,!1,n);else if(t&&t[w]){(0,ct[t.type])(e,t.payload,n,d)}else n(t)}));p.cancel=Y;var c={meta:o,cancel:function(){0===c.status&&(c.status=1,p(k))},status:0},u=mt(e,c,r,n,o,i,a),d={task:u,digestEffect:l};return a&&(a.cancel=u.cancel),p(),u;function p(e,r){try{var o;r?(o=t.throw(e),ft()):oe(e)?(c.status=1,p.cancel(),o=L(t.return)?t.return(k):{done:!0,value:k}):o=ne(e)?L(t.return)?t.return():{done:!0}:t.next(e),o.done?(1!==c.status&&(c.status=3),c.cont(o.value)):l(o.value,n,p)}catch(e){if(1===c.status)throw e;c.status=2,c.cont(e,!0)}}function l(t,r,n,o){void 0===o&&(o="");var i,a=at();function c(r,o){i||(i=!0,n.cancel=Y,e.sagaMonitor&&(o?e.sagaMonitor.effectRejected(a,r):e.sagaMonitor.effectResolved(a,r)),o&&function(e){pt=e}(t),n(r,o))}e.sagaMonitor&&e.sagaMonitor.effectTriggered({effectId:a,parentEffectId:r,label:o,effect:t}),c.cancel=Y,n.cancel=function(){i||(i=!0,c.cancel(),c.cancel=Y,e.sagaMonitor&&e.sagaMonitor.effectCancelled(a))},s(t,a,c)}}var gt={SDK_ACTIVATION:"teevid/meeting/voice_activation",SDK_ORDER_UPDATE:"teevid/meeting/order_update",INIT_MEETING:"teevid/meeting/init",SET_CONNECTION_STATE:"teevid/connection/state/set",SET_ACCESS_PIN_REQ:"teevid/connection/access_pin/require",MODERATION_SERVER_READY:"teevid/moderation/ready",STATS_ROOM:"teevid/meeting/stats",STATS_PARTICIPANT:"teevid/meeting/participant_stats",MODERATION_MESSAGE_RECEIVED:"teevid/moderation/message",MODERATION_MESSAGE_ERROR:"teevid/moderation/message/error",MODERATION_SOCKET_CREATED:"teevid/moderation/socket/created",MODERATION_SOCKET_CLOSED:"teevid/moderation/socket/closed",MODERATION_SOCKET_OPENED:"teevid/moderation/socket/opened",MODERATION_SOCKET_ERROR:"teevid/moderation/socket/error",CREATE_PARTICIPANT_SUCCESS:"teevid/participant/success",CREATE_PARTICIPANT_ERROR:"teevid/participant/error",SDK_CONNECT_MODERATION:"teevid/connection/moderation",SDK_INIT_MEETING_DATA:"teevid/connection/init_data",SDK_JOIN_REQUEST:"teevid/connection/join_req",SDK_JOIN_ACCEPTED:"teevid/connection/join_acc",SDK_JOIN_REJECTED:"teevid/connection/join_rejected",SDK_CREATE_CONNECTION:"teevid/connection/create",CREATE_CONNECTION_SUCCESS:"teevid/connection/create/success",CREATE_CONNECTION_ERROR:"teevid/connection/create/error",CONNECT:"teevid/connection/connect",CONNECTION_SUCCESS:"teevid/connection/connect/success",CONNECTION_ERROR:"teevid/connection/connect/error",CONNECTION_EVENT:"teevid/connection/event",CONNECTION_READY:"teevid/connection/ready",SET_CURRENT_ROOM:"teevid/meeting/room/set",ROOM_READY:"teevid/meeting/room/ready",CONNECTION_CANCEL:"teevid/connection/cancel",CONNECTION_DISCONNECT:"teevid/connection/disconnect",CONNECTION_DISCONNECTED:"teevid/connection/disconnected",STATUS_UPDATE:"teevid/connection/status_update",UPDATE_PARTICIPANT_STATUS:"teevid/connnections/update_participant_status",SET_STREAMING_STATE:"teevid/streaming/state",CLEAN_STREAMING_STATE:"teevid/streaming/clean-state",STREAMING_START:"teevid/streaming/start",STREAMING_STOP:"teevid/streaming/stop",SDK_SET_LOCAL_STREAM:"teevid/local_stream/added",CONNECTION_STREAM_ADDED:"teevid/stream/added",CONNECTION_STREAM_REMOVED:"teevid/stream/removed",CONNECTION_LOCAL_STREAM_REMOVED:"teevid/local_stream/removed",CONNECTION_STREAM_SUBSCRIBED:"teevid/stream/subscribed",CONNECTION_STOP_SHARING:"teevid/sharing/stopped",CONNECTION_START_SHARING:"teevid/sharing/started",CONNECTION_ADD_PARTICIPANT:"teevid/participant/add",CONNECTION_ADD_PARTICIPANT_STREAM:"teevid/participant/stream/add",CONNECTION_PARTICIPANT_REMOVED:"teevid/participant/removed",KICK_PARTICIPANT:"teevid/participant/kick",PARTICIPANT_AVATAR_GET:"teevid/participant/avatar_get",PARTICIPANT_AVATAR_SET:"teevid/participant/avatar_set",PARTICIPANT_NAME_CHANGED:"teevid/participant/change_name",NOOP:"noop",SET_MEETING_STATE:"teevid/meeting/set",MEETING_CHANGE_MODE:"teevid/meeting/change_mode",MEETING_CHANGE_LAYOUT:"teevid/meeting/change_layout",MEETING_LAYOUT_MODE:"teevid/meeting/change_layout_mode",MEETING_SEND_LAYOUT:"teevid/meeting/send_layout",MEETING_SLIDE_NUMBER:"teevid/meeting/slide_number",MEETING_SLIDE_CHANGED:"teevid/meeting/slide_number_changed",ROOM_CONNECTED:"teevid/meeting/room/connected",MUTE_STREAM:"teevid/connection/stream/mute",MUTE_UPDATED:"teevid/connection/stream/mute_updated",MUTE_ALL:"teevid/meeting/mute",MUTE_AUDIO:"teevid/meeting/mute_audio",MUTE_VIDEO:"teevid/meeting/mute_video",REMOTE_MUTE:"teevid/meeting/remote_mute",UNMUTE_REQUEST_SENT:"teevid/meeting/um_request_sent",UNMUTE_RESPONSE:"teevid/meeting/um_response",MODERATOR_UNMUTE_REQUEST:"teevid/meeting/moderator_um_request",MODERATOR_UNMUTE_RESPONSE:"teevid/meeting/moderator_um_response",SET_MUTE_STATE:"teevid/meeting/set_mute_state",REQUEST_OWNER_PIN:"teevid/meeting/request_owner_pin",ROLE_CHANGED:"teevid/participant/role_changed",OWNER_PIN_SUCCESS:"teevid/participant/owner-pin-success",OWNER_PIN_FAILED:"teevid/participant/owner-pin-failed",SET_LECTURE_LAYOUT:"teevid/meeting/set_lecture_layout",SET_LAYOUT_MODE:"teevid/meeting/set_layout_mode",UPDATE_LAYOUT_GEOMETRY:"teevid/meeting/update_layout_geometry",UPDATE_LAYOUT_PARTICIPANTS:"teevid/meeting/update_layout_participants",UPDATE_PANEL_LAYOUT_PARTICIPANTS:"teevid/meeting/update_panel_layout_participants",MEETING_SET_MODE:"teevid/meeting/mode",SELECT_FOR_LECTURE:"teevid/meeting/select_for_lecture",SELECT_FOR_PANEL_MODE:"teevid/meeting/select_for_panel_mode",REQUEST_MODERATED_ACTION:"teevid/meeting/request_moderated_action",SET_OWNER_PIN:"teevid/meeting/set_owner_pin",SDK_MESSAGE:"teevid/moderation/sdk_message",MW_MESSAGE:"teevid/moderation/mw_message",RAISE_HAND_REQ:"teevid/meeting/raise_hand",RAISE_HAND_UPDATE:"teevid/meeting/raise_hand/update",RAISE_HAND_RES:"teevid/meeting/raise_hand/response",RAISE_HAND_RES_RECEIVED:"teevid/meeting/response_received",SET_SIP_STATE:"teevid/meeting/sip_state",SEND_SIP_STATE:"teevid/meeting/send_sip_state",SEND_MESSAGE:"teevid/meeting/send_message",SEND_MESSAGE_TO_VIEWERS:"teevid/meeting/send_message_to_viewers",SEND_TRANSCRIPT:"teevid/meeting/send_transcript",ADD_CHAT_MESSAGE:"teevid/meeting/add_chat_message",ADD_TRANSCRIPT_MESSAGE:"teevid/meeting/add_transcript_message",TURN_ON_SUBTITLES:"teevid/meeting/turn_on_subtitles",RECEIVE_SUBTITLES_REQUEST:"teevid/meeting/receive_subtitles_request",UPDATE_TRANSCRIPT:"teevid/meeting/update_transcript_configs",SHARE_TRANSCRIPT:"teevid/meeting/share_transcript",RECEIVE_TRANSCRIPT:"teevid/meeting/receive_transcript",SCREEN_SHARE_STARTED:"teevid/screen_share/started",SCREEN_SHARE_STOPPED:"teevid/screen_share/stopped",SCREEN_SHARE_SET_REMOTE:"teevid/screen_share/set_remote",RECEIVED_REQUEST_TO_PARTICIPATE:"teevid/meeting/received_request_to_participate",BFM_ON_PAUSE:"teevid/meeting/bfm_on_pause",SET_BFM_PAUSE_STATE:"teevid/meeting/set_bfm_pause_state",SDK_CREATE_LOCAL_STREAM:"teevid/meeting/stream_create",SDK_CLOSE_LOCAL_STREAM:"teevid/meeting/stream_close",RECORDING_START:"teevid/recording/start",RECORDING_START_SUCCESS:"teevid/recording/start_success",RECORDING_STOP:"teevid/recording/stop",RECORDING_STOP_SUCCESS:"teevid/recording/stop_success",RECORDING_STATUS:"teevid/recording/status",RECORDING_ERROR:"teevid/recording/error",RECORDING_FILESLIST:"teevid/recording/fileslist",RECORDING_FILE_REMOVE:"teevid/recording/file_remove",RECORDING_SET_STATE:"teevid/recording/state",RECORDING_SET_STATE_REMOTE:"teevid/recording/remote_state",GET_USER_RECORDINGS_SIZE:"teevid/recordings/get/user/size",SET_USER_RECORDINGS_SIZE:"teevid/recordings/set/user/size",SET_GATEWAY_STATE:"teevid/recordings/set/gateway_state",SDK__STB_SHARE:"teevid/meeting/share_storyboard_sdk",SDK_MEETING_STB_SHARE:"teevid/meeting/set_share_storyboard",SDK__SET_SPOTLIGHT_STREAMS:"teevid/meeting/set_spotlight_streams",SDK_MEETING_ADD_TO_SPOTLIGHT:"teevid/meeting/add_to_spotlight",SDK_MEETING_REMOVE_FROM_SPOTLIGHT:"teevid/meeting/remove_from_spotlight",SDK_MEETING_SHARE_EVENT_LAYOUT:"teevid/meeting/set_share_event_layout",SDK__RECEIVE_VIEWER_QUESTION:"teevid/meeting/receive_viewer_question",SDK__SET_VIEWERS_COUNT:"teevid/meeting/set_viewers_count",SDK_MEETING_SET_ACTIVE_SLOT:"teevid/meeting/choose_active_slot",SDK__SET_ACTIVE_SLOT:"teevid/meeting/save_active_slot",SDK_MEETING_SET_SHARED_STREAM_SLOT:"teevid/meeting/choose_shared_stream_slot",SDK__SET_SHARED_STREAM_SLOT:"teevid/meeting/save_shared_stream_slot",SDK_SET_CREDENTIAL_REQUIREMENTS:"teevid/meeting/cred_requirements",SDK_VERIFY_PERSON:"teevid/meeting/verify_person",SDK_VERIFY_PERSON_OK:"teevid/meeting/verify_person/success",SDK_RESET_PERSON_VERIFICATION:"teevid/meeting/reset_person_verification",SDK_TIMELINE_ADD:"app/timeline/add_event"},yt="audio",_t="video",Et={MODERATOR:"Moderator",PARTICIPANT:"Participant"},St=function(e){return e.teevid.meeting.connectionState},bt=function(e){return e.teevid.meeting.participant},Tt=function(e){return e.teevid.user.profile},Rt=function(e){return g()(e,"teevid.meeting.participant.status.devices",{audio:0,video:0})},Ct=function(e){return e.teevid.meeting.streams},Ot=function(e){return e.teevid.meeting.remoteParticipants},wt=function(e){return e.teevid.meeting.room},At=function(e){return e.teevid.meeting.roomOptions},It=function(e){return e.teevid.user.serverUrl},xt=function(e){return e.teevid.meeting.connection},kt=function(e){return g()(e,"teevid.meeting.moderationSocket",null)},Pt=function(e){return g()(e,"teevid.chat.chatSocket",null)},Nt=function(e){return e.teevid.meeting.participantToken},Dt=function(e){return e.teevid.user.userToken},jt=function(e){return e.teevid.meeting.sipCallState},Mt=function(e){return{token:e.teevid.user.userToken,serverUrl:e.teevid.user.serverUrl}},Lt=function(e){return{storyboard:e.teevid.api.storyboard,slideNumber:e.teevid.meeting.slideNumber}},Ut=function(e){return{room:e.teevid.meeting.room,globalConfigs:e.teevid.api.globalConfigs,lectureLayout:e.teevid.meeting.lectureLayout,layoutMode:e.teevid.meeting.layoutMode,selectedForLecture:e.teevid.meeting.selectedForLecture}},Vt=function(e){return{mode:e.teevid.meeting.mode,lecturerId:e.teevid.meeting.lecturerId,storyboardId:e.teevid.meeting.storyboardId,slideNumber:e.teevid.meeting.slideNumber,lectureLayout:e.teevid.meeting.lectureLayout,selectedForLecture:e.teevid.meeting.selectedForLecture,layoutMode:e.teevid.meeting.layoutMode,room:e.teevid.meeting.room}},Ft=function(e){return{lectureLayout:e.teevid.meeting.lectureLayout,layoutMode:e.teevid.meeting.layoutMode,selectedForLecture:e.teevid.meeting.selectedForLecture}},Gt=function(e,t){return g()(e,"teevid.meeting.remoteParticipants.".concat(t))},Bt=function(e,t){var r;return(r=e.teevid.meeting.participant._id===t?e.teevid.meeting.participant:e.teevid.meeting.remoteParticipants[t])&&r.streams&&r.streams.mediaStreamId&&e.teevid.meeting.streams&&e.teevid.meeting.streams[r.streams.mediaStreamId]?e.teevid.meeting.streams[r.streams.mediaStreamId]:null},Ht=function(e){return{token:e.teevid.meeting.participantToken,serverUrl:e.teevid.user.serverUrl,mSocket:e.teevid.meeting.moderationSocket}},Wt=function(e){return g()(e,"teevid.chatData.Conversation.itemsById",{})},qt={setAdminPortal:function(e){return{type:c.SET_ADMIN_PORTAL,payload:e}},adminSocket:function(e){return{type:c.SET_ADMIN_SOCKET,payload:e}},serverStatus:function(e){return{type:c.SERVER_STATUS,payload:e}},participantStats:function(e){return{type:c.PARTICIPANT_STATS,payload:e}},deleteParticipantFromRoom:function(e,t){return{type:c.DELETE_FROM_ROOM,roomId:e,participantId:t}},closeRoom:function(e){return{type:c.ROOM_CLOSE,roomId:e}},setGlobalConfig:function(e){return{type:c.SET_GLOBAL_CONFIGS,payload:e}},licenseGet:function(){return{type:c.LICENSE_GET}},licenseSuccess:function(e){return{type:c.LICENSE_SUCCESS,payload:e}},licenseError:function(e){return{type:c.LICENSE_ERROR,payload:e}},licenseUpdate:function(e){return{type:c.LICENSE_UPDATE,license:e}},licenseUpdateSuccess:function(e){return{type:c.LICENSE_UPDATE_SUCCESS,payload:e}},licenseUpdateError:function(e){return{type:c.LICENSE_UPDATE_ERROR,error:e}},serversGet:function(){return{type:c.SERVERS_GET}},serversSuccess:function(e){return{type:c.SERVERS_SUCCESS,payload:e}},serversError:function(){return{type:c.SERVERS_ERROR}},liveMeetingsGet:function(){return{type:c.LIVE_MEETINGS_GET}},liveMeetingsSuccess:function(e){return{type:c.LIVE_MEETINGS_SUCCESS,payload:e}},liveMeetingsError:function(){return{type:c.LIVE_MEETINGS_ERROR}},recordsFetch:function(e){return{type:c.RECORDS_FETCH,payload:e}},recordsFetchSuccess:function(e){return{type:c.RECORDS_FETCH_SUCCESS,payload:e}},recordUpdate:function(e){var t=e.recordId,r=e.update;return{type:c.RECORD_UPDATE,payload:{recordId:t,update:r}}},recordUpdatedSuccess:function(e){return{type:c.RECORD_UPDATED_SUCCESS,payload:e}},recordRemove:function(e){var t=e.recordId,r=e.roomId;return{type:c.RECORD_REMOVE,payload:{recordId:t,roomId:r}}},recordRemovedSuccess:function(e){return{type:c.RECORD_REMOVED_SUCCESS,payload:e}},storyboardFetch:function(e){return{type:c.STORYBOARD_FETCH,stbId:e}},storyboardFetchSuccess:function(e){return{type:c.STORYBOARD_FETCH_SUCCESS,payload:e}},storyboardFetchAll:function(){return{type:c.STORYBOARD_FETCH_ALL}},storyboardSuccessAll:function(e){return{type:c.STORYBOARD_SUCCESS_ALL,payload:e}},storyboardLoadProgress:function(e){return{type:c.STORYBOARD_LOAD_PROGRESS,payload:e}},storyboardLoadProgressError:function(e){return{type:c.STORYBOARD_LOAD_PROGRESS_ERROR,payload:e}},storyboardError:function(e){return{type:c.STORYBOARD_ERROR,payload:e}},storyboardSceneCreate:function(e,t){return{type:c.STORYBOARD_SCENE_CREATE,stbId:e,scene:t}},storyboardSceneCreateSuccess:function(e){return{type:c.STORYBOARD_SCENE_CREATE_SUCCESS,result:e}},storyboardSceneCreateError:function(e){return{type:c.STORYBOARD_SCENE_CREATE_ERROR,error:e}},usersFetchAll:function(){return{type:c.USERS_FETCH_ALL}},usersSuccessAll:function(e){return{type:c.USERS_SUCCESS_ALL,payload:e}},userCreate:function(e){return{type:c.USER_CREATE,data:e}},userEdit:function(e,t){return{type:c.USER_EDIT,id:e,data:t}},userCreateSuccess:function(e){return{type:c.USER_CREATE_SUCCESS}},userEditSuccess:function(e){return{type:c.USER_EDIT_SUCCESS}},userCreateError:function(e){return{type:c.USER_CREATE_ERROR,error:e}},userEditError:function(e){return{type:c.USER_EDIT_ERROR,error:e}},userChangePassword:function(e){return{type:c.USER_CHANGE_PASSWORD,data:e}},userDelete:function(e){return{type:c.USER_DELETE,name:e}},userDeleteSuccess:function(e){return{type:c.USER_DELETE_SUCCESS}},userDeleteError:function(e){return{type:c.USER_DELETE_ERROR,error:e}},usersError:function(){return{type:c.USERS_ERROR}},roomsFetchAll:function(){return{type:c.ROOM_FETCH_ALL}},roomsSuccessAll:function(e){return{type:c.ROOM_SUCCESS_ALL,payload:e}},roomCreate:function(e){return{type:c.ROOM_CREATE,data:e}},roomCreateSuccess:function(e){return{type:c.ROOM_CREATE_SUCCESS}},roomCreateError:function(e){return{type:c.ROOM_CREATE_ERROR,error:e}},roomEdit:function(e,t){return{type:c.ROOM_EDIT,id:e,data:t}},roomEditSuccess:function(){return{type:c.ROOM_EDIT_SUCCESS}},roomEditError:function(e){return{type:c.ROOM_EDIT_ERROR,error:e}},roomDelete:function(e){return{type:c.ROOM_DELETE,name:e}},roomDeleteSuccess:function(e){return{type:c.ROOM_DELETE_SUCCESS}},roomDeleteError:function(e){return{type:c.ROOM_DELETE_ERROR,error:e}},roomsError:function(){return{type:c.ROOM_ERROR}},noop:function(){return{type:c.NOOP}},refreshMediaDevices:function(){return{type:c.REFRESH_MEDIA_DEVICES}},refreshCurrentMediaDevices:function(e){return{type:c.REFRESH_CURRENT_MEDIA_DEVICES,payload:e}},setMediaDevices:function(e){return{type:c.SET_MEDIA_DEVICES,payload:e}},setCurrentMediaDevices:function(e){return{type:c.SET_CURRENT_MEDIA_DEVICES,payload:e}},generalError:function(e){return{type:c.GENERAL_ERROR,payload:e}},generalWarning:function(e){return{type:c.GENERAL_WARNING,payload:e}},generalInfo:function(e){return{type:c.GENERAL_INFO,payload:e}},getTerminatedMeetings:function(e){return{type:c.GET_TERMINATED_MEETINGS,data:e}},getTerminatedMeetingsSuccess:function(e){return{type:c.GET_TERMINATED_MEETINGS_SUCCESS,payload:e}},getTerminatedMeetingsError:function(e){return{type:c.GET_TERMINATED_MEETINGS_ERROR,payload:e}},getTerminatedEvents:function(e){return{type:c.GET_TERMINATED_EVENTS,data:e}},getTerminatedEventsSuccess:function(e){return{type:c.GET_TERMINATED_EVENTS_SUCCESS,payload:e}},getTerminatedEventsError:function(e){return{type:c.GET_TERMINATED_EVENTS_ERROR,message:e}},getTerminatedParticipants:function(e){return{type:c.GET_TERMINATED_PARTICIPANTS,data:e}},getTerminatedParticipantsSuccess:function(e){return{type:c.GET_TERMINATED_PARTICIPANTS_SUCCESS,payload:e}},getTerminatedParticipantsError:function(e){return{type:c.GET_TERMINATED_PARTICIPANTS_ERROR,payload:e}},getTerminatedMeetingParticipants:function(e){return{type:c.GET_TERMINATED_MEETING_PARTICIPANTS,payload:e}},getTerminatedMeetingParticipantsSuccess:function(e){return{type:c.GET_TERMINATED_MEETING_PARTICIPANTS_SUCCESS,payload:e}},getTerminatedMeetingParticipantsError:function(e){return{type:c.GET_TERMINATED_MEETING_PARTICIPANTS_ERROR,data:e}},clearTerminatedMeetingParticipants:function(){return{type:c.CLEAR_TERMINATED_MEETING_PARTICIPANTS}},mcuFetchAll:function(){return{type:c.MCU_FETCH_ALL}},mcuSuccessAll:function(e){return{type:c.MCU_SUCCESS_ALL,payload:e}},mcuStart:function(e){return{type:c.MCU_START,id:e}},mcuRestart:function(e){return{type:c.MCU_RESTART,id:e}},mcuStartSuccess:function(e){return{type:c.MCU_START_SUCCESS,payload:e}},mcuRemove:function(e){return{type:c.MCU_REMOVE,id:e}},mcuRemoveSuccess:function(e){return{type:c.MCU_REMOVE_SUCCESS,data:e}},mcuStop:function(e){return{type:c.MCU_STOP,id:e}},mcuStopSuccess:function(e){return{type:c.MCU_STOP_SUCCESS,data:e}},mcuKill:function(e){return{type:c.MCU_KILL,id:e}},mcuKillSuccess:function(e){return{type:c.MCU_KILL_SUCCESS,data:e}},mcuStats:function(e){return{type:c.MCU_STATS,payload:e}},msFetchAll:function(){return{type:c.MS_FETCH_ALL}},msSuccessAll:function(e){return{type:c.MS_SUCCESS_ALL,payload:e}},msAdd:function(e){return{type:c.MS_ADD,data:e}},msAddSuccess:function(){return{type:c.MS_ADD_SUCCESS}},msRemove:function(e){return{type:c.MS_REMOVE,id:e}},msRemoveSuccess:function(){return{type:c.MS_REMOVE_SUCCESS}},kurentoFetchAll:function(){return{type:c.KURENTO_FETCH_ALL}},kurentoSuccessAll:function(e){return{type:c.KURENTO_SUCCESS_ALL,payload:e}},kurentoRestart:function(e){return{type:c.KURENTO_RESTART,payload:e}},kurentoRestartedSuccess:function(e){return{type:c.KURENTO_RESTARTED_SUCCESS,payload:e}},kurentoReset:function(e){return{type:c.KURENTO_RESET,payload:e}},kurentoResetedSuccess:function(e){return{type:c.KURENTO_RESETED_SUCCESS,payload:e}},requestEvents:function(){return{type:c.REQUEST_EVENTS}},requestEventsSuccess:function(e){return{type:c.REQUEST_EVENTS_SUCCESS,payload:e}},requestEvent:function(e){return{type:c.REQUEST_EVENT,payload:e}},requestEventSuccess:function(e){return{type:c.REQUEST_EVENT_SUCCESS,payload:e}},createEvent:function(e){return{type:c.CREATE_EVENT,payload:e}},createEventSuccess:function(e){return{type:c.CREATE_EVENT_SUCCESS,payload:e}},updateEvent:function(e,t){return{type:c.UPDATE_EVENT,payload:{eventId:e,update:t}}},updateEventSuccess:function(e){return{type:c.UPDATE_EVENT_SUCCESS,payload:e}},deleteEvent:function(e){return{type:c.DELETE_EVENT,payload:e}},deleteEventSuccess:function(e){return{type:c.DELETE_EVENT_SUCCESS,payload:e}}},Kt=r("./middleware/commons/messageTypes.js"),zt={type:m.EventTypes.WEB,token:"",data:{method:"noop",params:{}}},Yt=function(e,t){return Wr(e,Kt.ClientMethods.C_TIMELINE_EVENT,{eventData:t})},Qt=function(e,t){return Wr(e,Kt.ClientMethods.C_BYE,{reason:t})},Jt=function(e,t){return Wr(null,Kt.ClientMethods.C_PERSON_VERIFY,{credentials:t})},$t=function(e,t){return Wr(e,Kt.ClientMethods.C_VIEWER_VERIFY,{credentials:t})},Xt=function(e,t){return Wr(e,Kt.ClientMethods.C_START_EVENT,{data:t})},Zt=function(e){return Wr(e,Kt.ClientMethods.C_STOP_EVENT)},er=function(e,t){return Wr(e,Kt.ClientMethods.C_SET_ACTIVE_SPEAKER_SLOT,{index:t})},tr=function(e,t){return Wr(e,Kt.ClientMethods.C_SET_SHARED_SCREEN_SLOT,{index:t})},rr=function(e,t,r,n,o){return Wr(e,Kt.ClientMethods.C_REQ_JOIN,{userName:t,avatar:r,credentials:n,forceVerify:o})},nr=function(e,t){return Object.assign({},zt,{token:e,data:{method:Kt.ClientMethods.STATS,params:{stats:t}}})},or=function(e,t,r,n,o){return Object.assign({},zt,{token:e,data:{method:Kt.ClientMethods.SIP_CALL_STATE,params:{sipUri:t,room:r,state:n,isEncrypted:o}}})},ir=function(e,t){return Object.assign({},zt,{token:e,data:{method:Kt.ClientMethods.KICK_PARTICIPANT,params:{streamId:t}}})},ar=function(e,t,r){return Object.assign({},zt,{token:e,data:{method:Kt.ClientMethods.KICK_PARTICIPANT,params:{roomId:t,participantId:r}}})},sr=function(e,t){return Object.assign({},zt,{token:e,data:{method:Kt.ClientMethods.ROOM_CLOSE,params:{roomId:t}}})},cr=function(e,t){return Object.assign({},zt,{token:e,data:{method:Kt.ClientMethods.PARTICIPANT_PUBLISHED,params:{streamId:t}}})},ur=function(e,t){return Object.assign({},zt,{token:e,data:{method:Kt.ClientMethods.PARTICIPANT_SHARES,params:{streamId:t}}})},dr=function(e,t){return Object.assign({},zt,{token:e,data:{method:Kt.ClientMethods.OWNER_PIN_ENTER,params:{pin:t}}})},pr=function(e,t,r){return Object.assign({},zt,{token:e,data:{method:Kt.ClientMethods.PARTICIPANT_NAME_CHANGED,params:{participantId:t,name:r}}})},lr=function(e,t,r,n){return Object.assign({},zt,{token:e,data:{method:Kt.ClientMethods.MUTE,params:{senderId:t,participantId:r,state:n}}})},fr=function(e,t){return Object.assign({},zt,{token:e,data:{method:Kt.ClientMethods.MUTE_UPDATE,params:{state:t}}})},hr=function(e,t){return Object.assign({},zt,{token:e,data:{method:Kt.ClientMethods.RAISE_HAND_REQ,params:{state:t}}})},mr=function(e,t){return Object.assign({},zt,{token:e,data:{method:Kt.ClientMethods.RAISE_HAND_RES,params:{participantId:t,accepted:!1}}})},vr=function(e,t){return Object.assign({},zt,{token:e,data:{method:Kt.ClientMethods.RAISE_HAND_RES,params:{participantId:t,accepted:!0}}})},gr=function(e,t,r){return Object.assign({},zt,{token:e,data:{method:Kt.ClientMethods.PARTICIPANT_READY,params:{devices:t.status.devices,meetingState:r}}})},yr=function(e,t){return Object.assign({},zt,{token:e,data:{method:Kt.ClientMethods.STATUS_UPDATE,params:t}})},_r=function(e,t){return Object.assign({},zt,{token:e,data:{method:Kt.ClientMethods.LECTURE_SLIDE_NUMBER,params:{number:t}}})},Er=function(e,t){return Object.assign({},zt,{token:e,data:{method:Kt.ClientMethods.LECTURE_LAYOUT,params:t}})},Sr=function(e,t){return Object.assign({},zt,{token:e,data:{method:Kt.ClientMethods.CHAT,params:t}})},br=function(e,t){return Object.assign({},zt,{token:e,data:{method:Kt.ClientMethods.MESSAGE_TO_VIEWERS,params:t}})},Tr=function(e,t){return Object.assign({},zt,{token:e,data:{method:Kt.ClientMethods.SEND_TRANSCRIPT,params:t}})},Rr=function(e,t){return Object.assign({},zt,{token:e,data:{method:Kt.ClientMethods.SHARE_TRANSCRIPT,params:t}})},Cr=function(e,t){return Object.assign({},zt,{token:e,data:{method:Kt.ClientMethods.TURN_ON_SUBTITLES,params:t}})},Or=function(e,t){return Object.assign({},zt,{token:e,data:{method:Kt.ClientMethods.RECORDING_STATE,params:t}})},wr=function(e,t,r,n){return Wr(e,Kt.ClientMethods.UNMUTE_REQUEST,{senderId:t,participantId:r,state:n})},Ar=function(e,t){return Object.assign({},zt,{token:e,data:{method:Kt.ClientMethods.GET_ROLE,params:{userToken:t}}})},Ir=function(e,t,r,n){return Object.assign({},zt,{token:e,data:{method:Kt.ClientMethods.UNMUTE_RESPONSE,params:{senderId:t,participantId:r,state:n}}})},xr=function(e,t){return Object.assign({},zt,{token:e,data:{method:Kt.ClientMethods.LEAVE_PLAYBACK_PAGE,params:t}})},kr=function(e,t){return Object.assign({},zt,{token:e,data:{method:Kt.ClientMethods.SEND_REQUEST_TO_PARTICIPATE,params:t}})},Pr=function(e,t){return Object.assign({},zt,{token:e,data:{method:Kt.ClientMethods.ACCEPT_REQUEST_TO_PARTICIPATE,params:{id:t}}})},Nr=function(e,t){return Object.assign({},zt,{token:e,data:{method:Kt.ClientMethods.REJECT_REQUEST_TO_PARTICIPATE,params:{id:t}}})},Dr=function(e,t){return Object.assign({},zt,{token:e,data:{method:Kt.ClientMethods.BFM_ON_PAUSE,params:t}})},jr=function(e,t,r){return Object.assign({},zt,{token:e,data:{method:Kt.ClientMethods.VOICE_ACTIVATION,params:{participantId:t,reorder:r}}})},Mr=function(e,t,r){return Object.assign({},zt,{token:e,data:{method:Kt.ClientMethods.C_STORYBOARD_SHARE,params:{storyboardId:t,lecturerId:r}}})},Lr=function(e,t){return Object.assign({},zt,{token:e,data:{method:Kt.ClientMethods.C_SET_SPOTLIGHT_STREAMS,params:{selectedForLecture:t}}})},Ur=function(e,t,r){return Wr(e,Kt.ClientMethods.C_EVENT_POLL_EDIT,{pollId:t,update:r})},Vr=function(e,t,r){return Wr(e,Kt.ClientMethods.C_EVENT_POLL_VOTE,{pollId:t,optionName:r})},Fr=function(e,t){return Wr(e,Kt.ClientMethods.C_EVENT_POLL_START,{pollId:t})},Gr=function(e,t){return Wr(e,Kt.ClientMethods.C_EVENT_POLL_END,{pollId:t})},Br=function(e,t){return Wr(e,Kt.ClientMethods.C_SHARE_EVENT_LAYOUT,{state:t})},Hr=function(e,t){return Wr(e,Kt.ClientMethods.C_VIEWER_ASK_QUESTION,{question:t})},Wr=function(e,t,r){return{type:m.EventTypes.WEB,token:e,data:{method:t,params:r}}},qr=regeneratorRuntime.mark(Yr),Kr=regeneratorRuntime.mark(Jr),zr=regeneratorRuntime.mark($r);function Yr(e){var t,r,n,o,i,a=arguments;return regeneratorRuntime.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Se(kt);case 2:return t=s.sent,s.next=5,Se(Nt);case 5:for(r=s.sent,n=a.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=a[i];if(!t||1!==t.readyState){s.next=9;break}return s.abrupt("return",t.send(JSON.stringify(e.apply(void 0,[r].concat(o)))));case 9:return s.abrupt("return");case 10:case"end":return s.stop()}}),qr)}var Qr=function(e,t,r,n,o){var i={method:r.toUpperCase(),headers:{Accept:"application/json","cache-control":"no-store"}};if("/accesstokens"===n){var a=window.btoa("".concat(o.username,":").concat(o.password));i.headers.Authorization="Basic ".concat(a)}else t&&(i.headers.Authorization="Bearer ".concat(t));return-1!==["post","put","patch"].indexOf(r.toLowerCase())&&o&&(i.body=JSON.stringify(o),i.headers["Content-Type"]="application/json"),fetch("https://".concat(e,"/api/v1").concat(n),i).then((function(e){if(204===e.status)return{};var r=e.json().catch((function(e){return TeeVidSdk.log.error("Error calling ".concat(n,": ").concat(e)),{}}));if(e.status>=200&&e.status<300){var o=t;return e.headers.get("Authorization")&&(o=e.headers.get("Authorization").replace(/^Bearer /,"")),r.then((function(e){return{payload:e,token:o}}))}return 401===e.status?r.then((function(t){var r={code:e.status,type:t.type||t.name||"",message:t.message||t.type,details:t.details||""},n=t.message.split("\n");throw n.length>1&&(t.details=t.details||t.message,t.message=n[0]),r})):r.then((function(t){var r=t.message||e.statusText;throw{code:e.status,message:r}}))}))};function Jr(e,t,r){var n,o,i,a;return regeneratorRuntime.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Se(Mt);case 2:return n=s.sent,o=n.token,i=n.serverUrl,s.next=7,Qr(i,o,e,t,r);case 7:return a=s.sent,s.abrupt("return",a);case 9:case"end":return s.stop()}}),Kr)}function $r(e,t,r){var n,o,i,a,s;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Se(Ht);case 2:return n=c.sent,o=n.token,i=n.serverUrl,c.next=7,Qr(i,o,e,t,r);case 7:return a=c.sent,s=a.payload,c.abrupt("return",s);case 10:case"end":return c.stop()}}),zr)}function Xr(e){var t=e.play;e.play=function(){e.hasAudio()||e.hasVideo()||e.hasScreen()?(t.apply(e,arguments),e.player.bar&&(e.player.bar.link.setAttribute("href","http://teevid.com/"),e.player.bar.logo.setAttribute("alt",""),e.player.bar.logo.setAttribute("src","assets/cayilogo.png"))):console.warn("Stream",e.getID(),"does not have media channels")},e.show=e.play,e.isPublished=function(){return e.stream&&e.getID()&&"local"!==e.getID()}}var Zr=function(e){if(!e||!e.player||!e.player.video.videoWidth&&!e.player.video.videoHeight)return null;var t,r,n=e.player.video,o=n.videoWidth,i=n.videoHeight,a=document.createElement("canvas"),s=a.getContext("2d");return o>i?(a.width=i,a.height=i,s.drawImage(n,(o-i)/2,0,i,i,0,0,i,i)):(a.width=o,a.height=o,s.drawImage(n,0,(i-o)/2,o,o,0,0,o,o)),t=a.toDataURL("image/png"),r={maxWidth:50,maxHeight:50},new Promise((function(e){var n=r.maxWidth,o=r.maxHeight,i=new Image;i.src=t,i.onload=function(){var t=document.createElement("canvas"),r=n,a=o,s=i.width,c=i.height;s>c?s>r&&(c*=r/s,s=r):c>a&&(s*=a/c,c=a),t.width=s,t.height=c,t.getContext("2d").drawImage(i,0,0,s,c),e(t.toDataURL())}}))},en=function(){if(navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices)return navigator.mediaDevices.enumerateDevices().then((function(e){return{audio:e.filter((function(e){return"audioinput"===e.kind})),video:e.filter((function(e){return"videoinput"===e.kind})),audioOutput:e.filter((function(e){return"audiooutput"===e.kind}))}}))},tn=function(e){return rn(e)&&nn(e)},rn=function(e){return!e||!e.status||e.status.devices.audio!==m.Mute.UNMUTED},nn=function(e){return!e||!e.status||e.status.devices.video!==m.Mute.UNMUTED},on=regeneratorRuntime.mark(Dn),an=regeneratorRuntime.mark(jn),sn=regeneratorRuntime.mark(Mn),cn=regeneratorRuntime.mark(Ln),un=regeneratorRuntime.mark(Un),dn=regeneratorRuntime.mark(Vn),pn=regeneratorRuntime.mark(Fn),ln=regeneratorRuntime.mark(Gn),fn=regeneratorRuntime.mark(Bn),hn=regeneratorRuntime.mark(Hn),mn=regeneratorRuntime.mark(Wn),vn=regeneratorRuntime.mark(qn),gn=regeneratorRuntime.mark(Kn),yn=regeneratorRuntime.mark(zn),_n=regeneratorRuntime.mark(Yn),En=regeneratorRuntime.mark(Qn),Sn=regeneratorRuntime.mark(Jn),bn=regeneratorRuntime.mark($n),Tn=regeneratorRuntime.mark(Xn),Rn=regeneratorRuntime.mark(Zn),Cn=regeneratorRuntime.mark(eo),On=regeneratorRuntime.mark(to),wn=regeneratorRuntime.mark(no),An=regeneratorRuntime.mark(oo),In=regeneratorRuntime.mark(io),xn=regeneratorRuntime.mark(ao),kn=regeneratorRuntime.mark(so),Pn=regeneratorRuntime.mark(co),Nn=regeneratorRuntime.mark(uo);function Dn(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(c.LICENSE_GET,regeneratorRuntime.mark((function e(t){var r,n,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=null,e.next=4,Se(Mt);case 4:if(n=e.sent,!(o=n.token)){e.next=10;break}r=o,e.next=13;break;case 10:return e.next=12,Se(Nt);case 12:r=e.sent;case 13:if(!r){e.next=19;break}return e.next=16,TeeVidSdk.license.get();case 16:return i=e.sent,e.next=19,me(qt.licenseSuccess(i));case 19:e.next=25;break;case 21:return e.prev=21,e.t0=e.catch(0),e.next=25,me(qt.licenseError(e.t0));case 25:return void(e.next=27);case 27:case"end":return e.stop()}}),e,null,[[0,21]])})));case 2:return e.next=4,Ie(c.LICENSE_ERROR,regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me(qt.generalError(t.error));case 2:case"end":return e.stop()}}),e)})));case 4:return e.next=6,Ie(c.LICENSE_UPDATE,regeneratorRuntime.mark((function e(t){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.license,e.prev=1,e.next=4,Se(Mt);case 4:if(n=e.sent,!n.token){e.next=12;break}return e.next=9,TeeVidSdk.license.update(r);case 9:return o=e.sent,e.next=12,me(qt.licenseUpdateSuccess(o));case 12:e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(1),e.next=18,me(qt.generalError(e.t0));case 18:return void(e.next=20);case 20:case"end":return e.stop()}}),e,null,[[1,14]])})));case 6:case"end":return e.stop()}}),on)}function jn(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(l.LOGIN_SUCCESS,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me(qt.licenseGet());case 2:return e.next=4,me(qt.storyboardFetchAll());case 4:case"end":return e.stop()}}),e)})));case 2:case"end":return e.stop()}}),an)}function Mn(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(c.USERS_FETCH_ALL,Ln);case 2:return e.next=4,Ie(c.USER_CREATE,Un);case 4:return e.next=6,Ie(c.USER_EDIT,Vn);case 6:return e.next=8,Ie(c.USER_DELETE,Fn);case 8:case"end":return e.stop()}}),sn)}function Ln(){var e,t;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Se(Mt);case 3:if(e=r.sent,!e.token){r.next=11;break}return r.next=8,TeeVidSdk.users.list();case 8:return t=r.sent,r.next=11,me(qt.usersSuccessAll(t));case 11:r.next=17;break;case 13:return r.prev=13,r.t0=r.catch(0),r.next=17,me(qt.usersError(r.t0));case 17:case"end":return r.stop()}}),cn,null,[[0,13]])}function Un(e){var t,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.data,n.prev=1,n.next=4,Se(Mt);case 4:if(r=n.sent,!r.token){n.next=12;break}return n.next=9,TeeVidSdk.users.create(t);case 9:return n.sent,n.next=12,me(qt.userCreateSuccess());case 12:n.next=18;break;case 14:return n.prev=14,n.t0=n.catch(1),n.next=18,me(qt.userCreateError(n.t0));case 18:case"end":return n.stop()}}),un,null,[[1,14]])}function Vn(e){var t,r,n;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.id,r=e.data,o.prev=1,o.next=4,Se(Mt);case 4:if(n=o.sent,!n.token){o.next=12;break}return o.next=9,TeeVidSdk.users.edit(t,r);case 9:return o.sent,o.next=12,me(qt.userEditSuccess());case 12:o.next=18;break;case 14:return o.prev=14,o.t0=o.catch(1),o.next=18,me(qt.userEditError(o.t0));case 18:case"end":return o.stop()}}),dn,null,[[1,14]])}function Fn(e){var t,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.name,n.prev=1,n.next=4,Se(Mt);case 4:if(r=n.sent,!r.token){n.next=11;break}return n.next=9,TeeVidSdk.users.remove(t);case 9:return n.next=11,me(qt.userDeleteSuccess());case 11:n.next=17;break;case 13:return n.prev=13,n.t0=n.catch(1),n.next=17,me(qt.userDeleteError(n.t0));case 17:case"end":return n.stop()}}),pn,null,[[1,13]])}function Gn(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(c.ROOM_FETCH_ALL,Bn);case 2:return e.next=4,Ie(c.ROOM_CREATE,Hn);case 4:return e.next=6,Ie(c.ROOM_EDIT,Wn);case 6:return e.next=8,Ie(c.ROOM_DELETE,qn);case 8:case"end":return e.stop()}}),ln)}function Bn(){var e,t;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Se(Mt);case 3:if(e=r.sent,!e.token){r.next=11;break}return r.next=8,TeeVidSdk.rooms.list();case 8:return t=r.sent,r.next=11,me(qt.roomsSuccessAll(t));case 11:r.next=17;break;case 13:return r.prev=13,r.t0=r.catch(0),r.next=17,me(qt.roomsError(r.t0));case 17:case"end":return r.stop()}}),fn,null,[[0,13]])}function Hn(e){var t,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.data,n.prev=1,n.next=4,Se(Mt);case 4:if(r=n.sent,!r.token){n.next=11;break}return n.next=9,TeeVidSdk.rooms.create(t);case 9:return n.next=11,me(qt.roomCreateSuccess());case 11:n.next=17;break;case 13:return n.prev=13,n.t0=n.catch(1),n.next=17,me(qt.generalError(n.t0));case 17:case"end":return n.stop()}}),hn,null,[[1,13]])}function Wn(e){var t,r,n;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.id,r=e.data,o.prev=1,o.next=4,Se(Mt);case 4:if(n=o.sent,!n.token){o.next=11;break}return o.next=9,TeeVidSdk.rooms.edit(t,r);case 9:return o.next=11,me(qt.roomEditSuccess());case 11:o.next=17;break;case 13:return o.prev=13,o.t0=o.catch(1),o.next=17,me(qt.generalError(o.t0));case 17:case"end":return o.stop()}}),mn,null,[[1,13]])}function qn(e){var t,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.name,n.prev=1,n.next=4,Se(Mt);case 4:if(r=n.sent,!r.token){n.next=11;break}return n.next=9,TeeVidSdk.rooms.remove(t);case 9:return n.next=11,me(qt.roomDeleteSuccess());case 11:n.next=17;break;case 13:return n.prev=13,n.t0=n.catch(1),n.next=17,me(qt.roomDeleteError(n.t0));case 17:case"end":return n.stop()}}),vn,null,[[1,13]])}function Kn(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(c.STORYBOARD_FETCH_ALL,Yn);case 2:return e.next=4,Ie(c.STORYBOARD_FETCH,zn);case 4:return e.next=6,Ie(c.STORYBOARD_SCENE_CREATE,Qn);case 6:return e.next=8,Ie(c.STORYBOARD_LOAD_PROGRESS,Jn);case 8:case"end":return e.stop()}}),gn)}function zn(e){var t,r,n,o,i,a,s,c;return regeneratorRuntime.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.stbId,u.prev=1,u.next=4,Se(Mt);case 4:return r=u.sent,n=r.token,o=r.serverUrl,u.next=9,Se(Nt);case 9:if(i=u.sent,!(a=n||i)){u.next=18;break}return u.next=14,Qr(o,a,"get","/storyboard/".concat(t));case 14:return s=u.sent,c=s.payload,u.next=18,me(qt.storyboardFetchSuccess(c));case 18:u.next=24;break;case 20:return u.prev=20,u.t0=u.catch(1),u.next=24,me(qt.storyboardError(u.t0));case 24:case"end":return u.stop()}}),yn,null,[[1,20]])}function Yn(){var e,t,r,n,o,i,a,s,c;return regeneratorRuntime.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,u.next=3,Se(Mt);case 3:return e=u.sent,t=e.token,r=e.serverUrl,u.next=8,Se(Tt);case 8:return n=u.sent,o=n.name,u.next=12,Se(Nt);case 12:if(i=u.sent,!(a=t||i)){u.next=21;break}return u.next=17,Qr(r,a,"get","/storyboard?owner=".concat(o));case 17:return s=u.sent,c=s.payload,u.next=21,me(qt.storyboardSuccessAll(c));case 21:u.next=27;break;case 23:return u.prev=23,u.t0=u.catch(0),u.next=27,me(qt.storyboardError(u.t0));case 27:case"end":return u.stop()}}),_n,null,[[0,23]])}function Qn(e){var t,r,n,o;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.stbId,r=e.scene,i.prev=1,i.next=4,Se(Mt);case 4:if(n=i.sent,!n.token){i.next=12;break}return i.next=9,TeeVidSdk.storyboards.sceneCreate(t,r);case 9:return o=i.sent,i.next=12,me(qt.storyboardSceneCreateSuccess(o));case 12:i.next=18;break;case 14:return i.prev=14,i.t0=i.catch(1),i.next=18,me(qt.storyboardSceneCreateError(i.t0));case 18:case"end":return i.stop()}}),En,null,[[1,14]])}function Jn(e){var t;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t=e.percents,r.prev=1,!t){r.next=5;break}return r.next=5,me(qt.storyboardLoadProgress(t));case 5:r.next=11;break;case 7:return r.prev=7,r.t0=r.catch(1),r.next=11,me(qt.storyboardLoadProgressError(r.t0));case 11:case"end":return r.stop()}}),Sn,null,[[1,7]])}function $n(){var e,t;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Se(Mt);case 3:if(e=r.sent,!e.token){r.next=11;break}return r.next=8,TeeVidSdk.system.servers();case 8:return t=r.sent,r.next=11,me(qt.serversSuccess(t));case 11:r.next=17;break;case 13:return r.prev=13,r.t0=r.catch(0),r.next=17,me(qt.serversError(r.t0));case 17:case"end":return r.stop()}}),bn,null,[[0,13]])}function Xn(){var e,t;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Se(Mt);case 3:if(e=r.sent,!e.token){r.next=11;break}return r.next=8,TeeVidSdk.system.liveMeetings();case 8:return t=r.sent,r.next=11,me(qt.liveMeetingsSuccess(t));case 11:r.next=17;break;case 13:return r.prev=13,r.t0=r.catch(0),r.next=17,me(qt.liveMeetingsError(r.t0));case 17:case"end":return r.stop()}}),Tn,null,[[0,13]])}function Zn(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(c.SERVERS_GET,$n);case 2:return e.next=4,Ie(c.LIVE_MEETINGS_GET,Xn);case 4:case"end":return e.stop()}}),Rn)}function eo(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(c.SET_ADMIN_PORTAL,regeneratorRuntime.mark((function e(t){var r,n,o,i,a,s,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.payload){e.next=18;break}return e.next=4,Se(Mt);case 4:return r=e.sent,n=r.token,e.next=8,Se(It);case 8:return o=e.sent,i="wss://".concat(o,"/socket/moderation?token=").concat(encodeURIComponent(n)),a=new WebSocket(i),s=ro(a),e.next=14,me(qt.adminSocket(a));case 14:return e.next=16,_e(no,s);case 16:e.next=24;break;case 18:return e.next=20,Se((function(e){return e.teevid.api.adminSocket}));case 20:return(c=e.sent)&&1===c.readyState&&c.close(1e3),e.next=24,me(qt.adminSocket(null));case 24:case"end":return e.stop()}}),e)})));case 2:return e.next=4,Ie(c.DELETE_FROM_ROOM,regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.roomId,n=t.participantId,e.next=3,to(ar,r,n);case 3:case"end":return e.stop()}}),e)})));case 4:return e.next=6,Ie(c.ROOM_CLOSE,regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.roomId,e.next=3,to(sr,r);case 3:case"end":return e.stop()}}),e)})));case 6:case"end":return e.stop()}}),Cn)}function to(e){var t,r,n,o,i,a,s,c=arguments;return regeneratorRuntime.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,Se((function(e){return e.teevid.api.adminSocket}));case 2:return t=u.sent,u.next=5,Se(Mt);case 5:if(r=u.sent,n=r.token,t&&1===t.readyState&&e&&"function"==typeof e){for(o=c.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=c[a];s=e.apply(void 0,[n].concat(i)),t.send(JSON.stringify(s))}case 8:case"end":return u.stop()}}),On)}function ro(e){return rt((function(t){return e.onerror=function(e){t(e)},e.onmessage=function(r){var n=r.data;"_"===n?e.send(n):(n=JSON.parse(n),t(n))},function(){e.close(1e3)}}))}function no(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ie(e,regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&"middleware"===t.type){e.next=3;break}return TeeVidSdk.log.error("Missing or malformed message",t),e.abrupt("return");case 3:r=g()(t,"data.params",{}),n=qt.noop(),e.t0=t.data.method,e.next=e.t0===u?8:e.t0===p?10:e.t0===d?12:14;break;case 8:return n=qt.serverStatus(r.status),e.abrupt("break",15);case 10:return n=qt.mcuStats(r.instances),e.abrupt("break",15);case 12:return n=qt.participantStats(r),e.abrupt("break",15);case 14:return e.abrupt("break",15);case 15:return e.next=17,me(n);case 17:case"end":return e.stop()}}),e)})));case 2:case"end":return t.stop()}}),wn)}function oo(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(c.REFRESH_MEDIA_DEVICES,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,en();case 2:if(!(t=e.sent)){e.next=8;break}return e.next=6,me(qt.setMediaDevices(t));case 6:e.next=10;break;case 8:return e.next=10,me(qt.setMediaDevices({audio:[],video:[],audioOutput:[]}));case 10:case"end":return e.stop()}}),e)})));case 2:case"end":return e.stop()}}),An)}function io(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(c.GET_TERMINATED_MEETINGS,regeneratorRuntime.mark((function e(t){var r,n,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.data,e.next=3,Se(Mt);case 3:if(n=e.sent,o=n.token,e.prev=5,!o){e.next=12;break}return e.next=9,TeeVidSdk.reports.meetings(r);case 9:return i=e.sent,e.next=12,me(qt.getTerminatedMeetingsSuccess(i));case 12:e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(5),e.next=18,me(qt.getTerminatedMeetingsError(e.t0));case 18:case"end":return e.stop()}}),e,null,[[5,14]])})));case 2:return e.next=4,Ie(c.GET_TERMINATED_EVENTS,regeneratorRuntime.mark((function e(t){var r,n,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.data,e.next=3,Se(Mt);case 3:if(n=e.sent,o=n.token,e.prev=5,!o){e.next=12;break}return e.next=9,TeeVidSdk.reports.events(r);case 9:return i=e.sent,e.next=12,me(qt.getTerminatedEventsSuccess(i));case 12:e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(5),e.next=18,me(qt.getTerminatedEventsError(e.t0));case 18:case"end":return e.stop()}}),e,null,[[5,14]])})));case 4:return e.next=6,Ie(c.GET_TERMINATED_PARTICIPANTS,regeneratorRuntime.mark((function e(t){var r,n,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.data,e.next=3,Se(Mt);case 3:if(n=e.sent,o=n.token,e.prev=5,!o){e.next=12;break}return e.next=9,TeeVidSdk.reports.participants(r);case 9:return i=e.sent,e.next=12,me(qt.getTerminatedParticipantsSuccess(i));case 12:e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(5),e.next=18,me(qt.getTerminatedParticipantsError(e.t0));case 18:case"end":return e.stop()}}),e,null,[[5,14]])})));case 6:return e.next=8,Ie(c.GET_TERMINATED_MEETING_PARTICIPANTS,regeneratorRuntime.mark((function e(t){var r,n,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,e.next=3,Se(Mt);case 3:if(n=e.sent,o=n.token,e.prev=5,!o){e.next=12;break}return e.next=9,TeeVidSdk.reports.meetingParticipants(r);case 9:return i=e.sent,e.next=12,me(qt.getTerminatedMeetingParticipantsSuccess(i));case 12:e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(5),e.next=18,me(qt.getTerminatedMeetingParticipantsError(e.t0));case 18:case"end":return e.stop()}}),e,null,[[5,14]])})));case 8:case"end":return e.stop()}}),In)}function ao(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(c.MS_FETCH_ALL,regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Se(Mt);case 3:if(t=e.sent,!t.token){e.next=11;break}return e.next=8,TeeVidSdk.mediaServers.list();case 8:return r=e.sent,e.next=11,me(qt.msSuccessAll(r));case 11:e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(0),e.next=17,me(qt.generalError(e.t0));case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));case 2:return e.next=4,Ie(c.MS_ADD,regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.data,e.prev=1,e.next=4,Se(Mt);case 4:if(n=e.sent,!n.token){e.next=11;break}return e.next=9,TeeVidSdk.mediaServers.add(r);case 9:return e.next=11,me(qt.msAddSuccess());case 11:e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(1),e.next=17,me(qt.generalError(e.t0));case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));case 4:return e.next=6,Ie(c.MS_REMOVE,regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,e.prev=1,e.next=4,Se(Mt);case 4:if(n=e.sent,!n.token){e.next=11;break}return e.next=9,TeeVidSdk.mediaServers.remove(r);case 9:return e.next=11,me(qt.msRemoveSuccess());case 11:e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(1),e.next=17,me(qt.generalError(e.t0));case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));case 6:case"end":return e.stop()}}),xn)}function so(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(c.MCU_FETCH_ALL,regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Se(Mt);case 3:if(t=e.sent,!t.token){e.next=11;break}return e.next=8,TeeVidSdk.mcu.list();case 8:return r=e.sent,e.next=11,me(qt.mcuSuccessAll(r));case 11:e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(0),e.next=17,me(qt.generalError(e.t0));case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));case 2:return e.next=4,Ie(c.MCU_START,regeneratorRuntime.mark((function e(t){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,e.prev=1,e.next=4,Se(Mt);case 4:if(n=e.sent,!n.token){e.next=12;break}return e.next=9,TeeVidSdk.mcu.start(r);case 9:return o=e.sent,e.next=12,me(qt.mcuStartSuccess(o));case 12:e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(1),e.next=18,me(qt.generalError(e.t0));case 18:case"end":return e.stop()}}),e,null,[[1,14]])})));case 4:return e.next=6,Ie(c.MCU_STOP,regeneratorRuntime.mark((function e(t){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,e.prev=1,e.next=4,Se(Mt);case 4:if(n=e.sent,!n.token){e.next=12;break}return e.next=9,TeeVidSdk.mcu.stop(r);case 9:return o=e.sent,e.next=12,me(qt.mcuStopSuccess(o));case 12:e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(1),e.next=18,me(qt.generalError(e.t0));case 18:case"end":return e.stop()}}),e,null,[[1,14]])})));case 6:return e.next=8,Ie(c.MCU_KILL,regeneratorRuntime.mark((function e(t){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,e.prev=1,e.next=4,Se(Mt);case 4:if(n=e.sent,!n.token){e.next=12;break}return e.next=9,TeeVidSdk.mcu.kill(r);case 9:return o=e.sent,e.next=12,me(qt.mcuKillSuccess(o));case 12:e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(1),e.next=18,me(qt.generalError(e.t0));case 18:case"end":return e.stop()}}),e,null,[[1,14]])})));case 8:return e.next=10,Ie(c.MCU_RESTART,regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,e.prev=1,e.next=4,Se(Mt);case 4:if(n=e.sent,!n.token){e.next=9;break}return e.next=9,TeeVidSdk.mcu.restart(r);case 9:e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(1),e.next=15,me(qt.generalError(e.t0));case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));case 10:return e.next=12,Ie(c.MCU_REMOVE,regeneratorRuntime.mark((function e(t){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,e.prev=1,e.next=4,Se(Mt);case 4:if(n=e.sent,!n.token){e.next=12;break}return e.next=9,TeeVidSdk.mcu.remove(r);case 9:return o=e.sent,e.next=12,me(qt.mcuRemoveSuccess(o));case 12:e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(1),e.next=18,me(qt.generalError(e.t0));case 18:case"end":return e.stop()}}),e,null,[[1,14]])})));case 12:case"end":return e.stop()}}),kn)}function co(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(c.KURENTO_FETCH_ALL,regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Se(Mt);case 3:if(t=e.sent,!t.token){e.next=11;break}return e.next=8,TeeVidSdk.kurentoServers.list();case 8:return r=e.sent,e.next=11,me(qt.kurentoSuccessAll(r));case 11:e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(0),e.next=17,me(qt.generalError(e.t0));case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));case 2:return e.next=4,Ie(c.KURENTO_RESTART,regeneratorRuntime.mark((function e(t){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,e.prev=1,e.next=4,Se(Mt);case 4:if(n=e.sent,!n.token){e.next=12;break}return e.next=9,TeeVidSdk.kurentoServers.restart(r);case 9:return o=e.sent,e.next=12,me(qt.kurentoRestartedSuccess(o));case 12:e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(1),e.next=18,me(qt.generalError(e.t0));case 18:case"end":return e.stop()}}),e,null,[[1,14]])})));case 4:return e.next=6,Ie(c.KURENTO_RESET,regeneratorRuntime.mark((function e(t){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,e.prev=1,e.next=4,Se(Mt);case 4:if(n=e.sent,!n.token){e.next=12;break}return e.next=9,TeeVidSdk.kurentoServers.reset(r);case 9:return o=e.sent,e.next=12,me(qt.kurentoResetedSuccess(o));case 12:e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(1),e.next=18,me(qt.generalError(e.t0));case 18:case"end":return e.stop()}}),e,null,[[1,14]])})));case 6:case"end":return e.stop()}}),Pn)}function uo(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve([Dn(),jn(),Kn(),oo(),Mn(),Gn(),io(),Zn(),eo(),so(),ao(),co()]);case 2:case"end":return e.stop()}}),Nn)}var po={userToken:localStorage.getItem("authToken")||"",serverUrl:"",profile:null,eventRoom:null},lo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:po,t=arguments.length>1?arguments[1]:void 0,r=t.type,n=t.payload;switch(r){case l.LOGOUT:return localStorage.clear(),Object.assign({},e,{userToken:"",profile:null});case l.USER_SET_PROFILE:return localStorage.setItem("currentTheme",n.theme),Object.assign({},e,{profile:n});case l.SET_SERVER_URL:return Object.assign({},e,{serverUrl:n});case l.UPDATE_TOKEN:return localStorage.setItem("authToken",n),Object.assign({},e,{userToken:n});case l.LOGIN_SUCCESS:return localStorage.setItem("currentTheme",n.theme),localStorage.setItem("authToken",n.token),Object.assign({},e,{profile:n.profile,userToken:n.token});case l.LOGIN_ERROR:return localStorage.removeItem("authToken"),Object.assign({},e,{profile:null,userToken:""});case l.STORYBOARD_SUCCESS_ALL:return Object.assign({},e,{storyboards:n});case l.SET_EVENT_ROOM:return Object.assign({},e,{eventRoom:n});default:return e}},fo={setServerUrl:function(e){return{type:l.SET_SERVER_URL,payload:e}},updateToken:function(e){return{type:l.UPDATE_TOKEN,payload:e}},login:function(e,t){return{type:l.LOGIN,payload:{username:e,password:t}}},loginSuccess:function(e,t){return{type:l.LOGIN_SUCCESS,payload:{profile:e,token:t}}},setProfile:function(e){return{type:l.USER_SET_PROFILE,payload:e}},refreshProfile:function(){return{type:l.USER_REFRESH_PROFILE}},loginError:function(e,t){return{type:l.LOGIN_ERROR,payload:e,noRedirect:t}},logout:function(){return{type:l.LOGOUT}},editProfile:function(e){return{type:l.USER_EDIT_PROFILE,profile:e}},editProfileError:function(e){return{type:l.USER_EDIT_PROFILE_ERROR,error:e}},setEventRoom:function(e){return{type:l.SET_EVENT_ROOM,payload:e}},accessPinError:function(e){return{type:l.ACCESS_PIN_ERROR,payload:e}},moderatorPinError:function(e){return{type:l.MODERATOR_PIN_ERROR,payload:e}},panelistPinError:function(e){return{type:l.PANELIST_PIN_ERROR,payload:e}},attendeePinError:function(e){return{type:l.ATTENDEE_PIN_ERROR,payload:e}},ownerPinErr:function(e){return{type:l.OWNER_PIN_ERROR,payload:e}}},ho=regeneratorRuntime.mark(go),mo=regeneratorRuntime.mark(yo),vo=regeneratorRuntime.mark(_o);function go(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(l.LOGIN,regeneratorRuntime.mark((function e(t){var r,n,o,i,a,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.payload,n=r.username,o=r.password,n&&o){e.next=4;break}return e.next=4,me(fo.loginError({status:403,message:"bad-credentials"}));case 4:return e.prev=4,e.next=7,Jr("post","/accesstokens",{username:n,password:o});case 7:return i=e.sent,a=i.payload,s=i.token,e.next=12,me(fo.loginSuccess(a,s));case 12:e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(4),e.next=18,me(fo.loginError(e.t0));case 18:case"end":return e.stop()}}),e,null,[[4,14]])})));case 2:case"end":return e.stop()}}),ho)}function yo(e){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(l.USER_REFRESH_PROFILE,regeneratorRuntime.mark((function e(){var t,r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Se(Mt);case 3:if(t=e.sent,!t.token){e.next=12;break}return e.next=8,Jr("get","/users/me");case 8:return r=e.sent,n=r.payload,e.next=12,me(fo.setProfile(n));case 12:e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(0),e.next=18,me(fo.loginError(e.t0));case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));case 2:return e.next=4,Ie(l.USER_EDIT_PROFILE,regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.profile,e.prev=1,e.next=4,Se(Mt);case 4:if(n=e.sent,!n.token){e.next=11;break}return e.next=9,Jr("patch","/users/me",r);case 9:return e.next=11,me(fo.refreshProfile());case 11:e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(1),e.next=17,me(fo.editProfileError(e.t0));case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));case 4:case"end":return e.stop()}}),mo)}function _o(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve([go(),yo()]);case 2:case"end":return e.stop()}}),vo)}var Eo=Object.freeze({RECEIVE_STREAMING_STATUS:"teevid/viewer/receive-streaming-status",SEND_REQUEST_TO_PARTICIPATE:"teevid/viewer/send-request-to-participate",VIEWER_LEAVES_PLAYBACK_PAGE:"teevid/viewer/leaves_playback_page",REQUEST_TO_PARTICIPATE:"teevid/viewer/request-to-participate",REQUEST_TO_PARTICIPATE_ACCEPTED:"teevid/viewer/request-accepted",REQUEST_TO_PARTICIPATE_REJECTED:"teevid/viewer/request-rejected",OPEN_VIEWER_CHANNEL:"teevid/viewer/open-channel",CLOSE_VIEWER_CHANNEL:"teevid/viewer/close-channel",VIEWER_CHANNEL_OPENED:"teevid/viewer/channel-opened",VIEWER_CHANNEL_CLOSED:"teevid/viewer/channel-closed",REQUEST_TO_PARTICIPATE_SENT:"teevid/viewer/request-to-participate-sent",ACCEPT_REQUEST_TO_PARTICIPATE:"teevid/viewer/accept-request-to-participate",REJECT_REQUEST_TO_PARTICIPATE:"teevid/viewer/reject-request-to-participate",CLEAR_REQUEST_DATA:"teevid/viewer/clear-request-data",JOIN_TO_MEETING:"teevid/viewer/join-to-meeting",SET_VIEWER_MEETING_STATE:"teevid/viewer/set-meeting-state",SET_RECEIVED_STREAMING_STATE:"teevid/viewer/set-received-meeting-state",RECEIVE_STREAMING_STATE:"teevid/viewer/receive_streaming_state",MODERATOR_MESSAGE_RECEIVED:"teevid/viewer/moderator_message_received",NOOP:"noop",SDK_VIEWER_ASK_QUESTION:"teevid/viewer/sdk_ask_a_question",SDK_VIEWER_INIT_MEETING_DATA:"teevid/viewer/init_meeting_data",CLIENT_VERIFY_VIEWER_PASS:"teevid/viewer/verify_viewer_pass",SDK_SET_VERIFICATION_RESULT:"teevid/viewer/set_verification_result",SET_VIEWER_NAME:"teevid/viewer/set_viewer_name"});function So(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function bo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?So(Object(r),!0).forEach((function(t){To(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):So(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function To(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ro={guestToken:"",roomId:"",room:null,serverUrl:"",name:"",moderationSocket:null,sent:null,reason:"",accepted:null,participant:null,streamingState:m.StreamingStates.STOPPED,verified:!1,wrongPass:!1,token:"",conversationId:""},Co=function(e,t){var r=e;for(var n in t)n!==m.SystemServicesNames.YOUTUBE&&n!==m.SystemServicesNames.FACEBOOK&&(r=t[n].state);return r},Oo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ro,t=arguments.length>1?arguments[1]:void 0,r=t.type,n=t.payload;switch(r){case Eo.OPEN_VIEWER_CHANNEL:return Object.assign({},e,{roomId:n.roomId});case Eo.REQUEST_TO_PARTICIPATE:return bo(bo({},e),{},{accepted:null,name:n.username});case Eo.VIEWER_CHANNEL_OPENED:return Object.assign({},e,{moderationSocket:n});case Eo.CLEAR_REQUEST_DATA:return Object.assign({},e,{sent:null,reason:"",accepted:null});case Eo.SET_VIEWER_MEETING_STATE:var o=Co(e.streamingState,n.state.streamingState);return Object.assign({},e,n.state,{streamingState:o});case Eo.SET_RECEIVED_STREAMING_STATE:return Object.assign({},e,{streamingState:n.streamingState,room:Object.assign({},e.room,n.room)});case Eo.SDK_SET_VERIFICATION_RESULT:return Object.assign({},e,{verified:n.verified,wrongPass:!n.verified});case Eo.SET_VIEWER_NAME:return Object.assign({},e,{name:n});case Eo.REQUEST_TO_PARTICIPATE_SENT:case Eo.REQUEST_TO_PARTICIPATE_ACCEPTED:case Eo.REQUEST_TO_PARTICIPATE_REJECTED:case Eo.SDK_VIEWER_INIT_MEETING_DATA:var i=Co(e.streamingState,n.streamingState);return Object.assign({},e,n,{streamingState:i});default:return e}},wo=function(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return{type:"@@router/CALL_HISTORY_METHOD",payload:{method:e,args:r}}}},Ao=wo("push"),Io=(wo("replace"),wo("go"),wo("goBack"),wo("goForward"),Object.freeze({requestToParticipate:function(e){return{type:Eo.REQUEST_TO_PARTICIPATE,payload:e}},viewerLeavesPlaybackPage:function(e){return{type:Eo.VIEWER_LEAVES_PLAYBACK_PAGE,payload:e}},acceptRequestToParticipate:function(e){var t=e.id,r=e.name;return{type:Eo.ACCEPT_REQUEST_TO_PARTICIPATE,payload:{id:t,name:r}}},requestToParticipateAccepted:function(e){var t=e.id,r=e.token,n=e.accepted;return{type:Eo.REQUEST_TO_PARTICIPATE_ACCEPTED,payload:{id:t,token:r,accepted:n}}},rejectRequestToParticipate:function(e){return{type:Eo.REJECT_REQUEST_TO_PARTICIPATE,payload:{id:e}}},requestToParticipateRejected:function(e){return{type:Eo.REQUEST_TO_PARTICIPATE_REJECTED,payload:e}},noop:function(){return{type:Eo.NOOP}},closeViewerChannel:function(e){return{type:Eo.CLOSE_VIEWER_CHANNEL,payload:e}},openViewerChannel:function(e){return{type:Eo.OPEN_VIEWER_CHANNEL,payload:e}},viewerChannelOpened:function(e){return{type:Eo.VIEWER_CHANNEL_OPENED,payload:e}},viewerChannelClosed:function(){return{type:Eo.VIEWER_CHANNEL_CLOSED}},requestToParticipateSent:function(e){return{type:Eo.REQUEST_TO_PARTICIPATE_SENT,payload:e}},clearRequestData:function(){return{type:Eo.CLEAR_REQUEST_DATA}},joinToMeeting:function(){return{type:Eo.JOIN_TO_MEETING}},receiveStreamingStatus:function(e){return{type:Eo.RECEIVE_STREAMING_STATUS,payload:e}},moderatorMessageReceived:function(e){return{type:Eo.MODERATOR_MESSAGE_RECEIVED,payload:e}},setViewerMeetingState:function(e){return{type:Eo.SET_VIEWER_MEETING_STATE,payload:e}},receiveStreamingState:function(e){return{type:Eo.RECEIVE_STREAMING_STATE,payload:e}},setReceivedStreamingState:function(e){return{type:Eo.SET_RECEIVED_STREAMING_STATE,payload:e}},askQuestion:function(e){return{type:Eo.SDK_VIEWER_ASK_QUESTION,payload:e}},_initMeetingData:function(e){return{type:Eo.SDK_VIEWER_INIT_MEETING_DATA,payload:e}},verifiViewerPass:function(e){return{type:Eo.CLIENT_VERIFY_VIEWER_PASS,payload:e}},_setVerificationResult:function(e){return{type:Eo.SDK_SET_VERIFICATION_RESULT,payload:e}},setViewerName:function(e){return{type:Eo.SET_VIEWER_NAME,payload:e}}})),xo={setCurrentRoom:function(e){return{type:gt.SET_CURRENT_ROOM,payload:e}},roomStats:function(e){return{type:gt.STATS_ROOM,payload:e}},setCredentialRequirements:function(e){return{type:gt.SDK_SET_CREDENTIAL_REQUIREMENTS,payload:e}},participantCreated:function(e){return{type:gt.CREATE_PARTICIPANT_SUCCESS,payload:e}},participantCreationError:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{type:gt.CREATE_PARTICIPANT_ERROR,payload:{error:e,state:t}}},addParticipant:function(e){return{type:gt.CONNECTION_ADD_PARTICIPANT,payload:e}},addParticipantStream:function(e){return{type:gt.CONNECTION_ADD_PARTICIPANT_STREAM,payload:e}},removeParticipant:function(e){return{type:gt.CONNECTION_PARTICIPANT_REMOVED,payload:e}},kickParticipant:function(e,t){return{type:gt.KICK_PARTICIPANT,roomId:e,participantId:t}},connectToModeration:function(e){return{type:gt.SDK_CONNECT_MODERATION,payload:e}},verifyPerson:function(e){return{type:gt.SDK_VERIFY_PERSON,payload:e}},personVerified:function(e){return{type:gt.SDK_VERIFY_PERSON_OK,payload:e}},resetPersonVerification:function(){return{type:gt.SDK_RESET_PERSON_VERIFICATION}},setPreJoin:function(e,t,r){return{type:gt.SDK_INIT_MEETING_DATA,payload:{person:e,room:t,event:r}}},requestJoin:function(e,t,r,n){return{type:gt.SDK_JOIN_REQUEST,payload:{userName:e,avatar:t,credentials:r,forceVerify:n}}},joinAccepted:function(e,t,r){return{type:gt.SDK_JOIN_ACCEPTED,payload:{participant:e,room:t,options:r}}},joinRejected:function(e){return{type:gt.SDK_JOIN_REJECTED,payload:e}},updateStats:function(e){return{type:gt.STATS_PARTICIPANT,payload:e}},connect:function(){return{type:gt.CONNECT}},createConnection:function(e){return{type:gt.SDK_CREATE_CONNECTION,payload:e}},connectionCreated:function(e){return{type:gt.CREATE_CONNECTION_SUCCESS,payload:{connection:e}}},connectionCreationError:function(e){return{type:gt.CREATE_CONNECTION_ERROR,payload:e}},connectionSuccess:function(e){return{type:gt.CONNECTION_SUCCESS,connection:e}},connectionEvent:function(e,t){return{type:gt.CONNECTION_EVENT,payload:{event:e,eventType:t}}},setOwnerPin:function(e){return{type:gt.SET_OWNER_PIN,pin:e}},requestOwnerPin:function(e){return{type:gt.REQUEST_OWNER_PIN,payload:{action:e}}},setConnectionState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return{type:gt.SET_CONNECTION_STATE,payload:e}},setAccessPinRequirement:function(e){return{type:gt.SET_ACCESS_PIN_REQ,payload:e}},connectionReady:function(){return{type:gt.CONNECTION_READY}},moderationSocketCreated:function(e){return{type:gt.MODERATION_SOCKET_CREATED,payload:e}},moderationServerReady:function(){return{type:gt.MODERATION_SERVER_READY}},connectionError:function(e){return{type:gt.CONNECTION_ERROR,payload:e}},connectionRoomReady:function(){return{type:gt.ROOM_READY}},disconnect:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"disconnection";return{type:gt.CONNECTION_DISCONNECT,payload:e}},disconnected:function(){return{type:gt.CONNECTION_DISCONNECTED}},sendSipState:function(e){return{type:gt.SEND_SIP_STATE,payload:e}},setSipState:function(e){return{type:gt.SET_SIP_STATE,payload:e}},participantStatusUpdated:function(e){return{type:gt.STATUS_UPDATE,payload:e}},updateParticipantStatus:function(e){return{type:gt.UPDATE_PARTICIPANT_STATUS,payload:e}},localStreamAdded:function(e){return{type:gt.SDK_SET_LOCAL_STREAM,payload:e}},streamAdded:function(e){return{type:gt.CONNECTION_STREAM_ADDED,payload:e}},streamRemoved:function(e){return{type:gt.CONNECTION_STREAM_REMOVED,payload:e}},streamSubscribed:function(e){return{type:gt.CONNECTION_STREAM_SUBSCRIBED,payload:e}},stopSharing:function(e){return{type:gt.CONNECTION_STOP_SHARING,payload:{participantId:e}}},startSharing:function(){return{type:gt.CONNECTION_START_SHARING}},mMessage:function(e){return{type:gt.MODERATION_MESSAGE_RECEIVED,payload:e}},mMessageError:function(e){return{type:gt.MODERATION_MESSAGE_ERROR,payload:e}},mSocketClosed:function(e){return{type:gt.MODERATION_SOCKET_CLOSED,payload:e}},mSocketError:function(e){return{type:gt.MODERATION_SOCKET_ERROR,payload:e}},noop:function(){return{type:gt.NOOP}},setMeetingState:function(e){return{type:gt.SET_MEETING_STATE,payload:e}},setMeetingLayout:function(e){return{type:gt.MEETING_CHANGE_LAYOUT,payload:e}},setLayoutMode:function(e){return{type:gt.MEETING_LAYOUT_MODE,payload:{layoutMode:e}}},setSlideNumber:function(e){return{type:gt.MEETING_SLIDE_NUMBER,payload:{number:e}}},slideNumberChanged:function(e){return{type:gt.MEETING_SLIDE_CHANGED,payload:{number:e}}},sendMeetingLayout:function(){return{type:gt.MEETING_SEND_LAYOUT}},roomConnected:function(){return{type:gt.ROOM_CONNECTED}},themesSuccessAll:function(e){return{type:gt.THEMES_SUCCESS_ALL,themes:e}},themesFetchAll:function(){return{type:gt.THEMES_FETCH}},raiseHandRequest:function(e){return{type:gt.RAISE_HAND_REQ,payload:e}},raiseHandUpdate:function(e){return{type:gt.RAISE_HAND_UPDATE,payload:e}},raiseHandResponse:function(e,t){return{type:gt.RAISE_HAND_RES,payload:{accepted:e,id:t}}},raiseHandResponseReceived:function(e,t){return{type:gt.RAISE_HAND_RES_RECEIVED,payload:e,data:t}},setStreamingState:function(e,t){return{type:gt.SET_STREAMING_STATE,payload:{state:e,message:t}}},cleanStreamingState:function(){return{type:gt.CLEAN_STREAMING_STATE}},startStreaming:function(e){return{type:gt.STREAMING_START,payload:e}},stopStreaming:function(e){var t=e.service,r=e.outputid,n=e.serviceid;return{type:gt.STREAMING_STOP,payload:{service:t,outputid:r,serviceid:n}}},setSharingStream:function(e){return{type:gt.SCREEN_SHARE_STARTED,payload:e}},setRemoteScreenStream:function(e,t){return{type:gt.SCREEN_SHARE_SET_REMOTE,payload:{streamId:e,participantId:t}}},removeSharingStream:function(e){return{type:gt.SCREEN_SHARE_STOPPED,payload:e}},getAvatar:function(e){return{type:gt.PARTICIPANT_AVATAR_GET,participantId:e}},setAvatar:function(e,t){return{type:gt.PARTICIPANT_AVATAR_SET,payload:{participantId:e,avatar:t}}},roleChanged:function(e,t,r,n){return{type:gt.ROLE_CHANGED,payload:{participantId:e,data:{role:t,isRoomOwner:r,token:n}}}},ownerPinSuccess:function(e,t,r,n){return{type:gt.OWNER_PIN_SUCCESS,payload:{participantId:e,data:{role:t,isRoomOwner:r,token:n}}}},ownerPinFailed:function(e){return{type:gt.OWNER_PIN_FAILED,payload:e}},participantMuteUpdate:function(e,t){return{type:gt.MUTE_UPDATED,payload:{participantId:e,mute:t}}},muteStream:function(){return{type:gt.MUTE_STREAM}},mute:function(e){return{type:gt.MUTE_ALL,state:e}},muteAudio:function(e){return{type:gt.MUTE_AUDIO,state:e}},muteVideo:function(e){return{type:gt.MUTE_VIDEO,state:e}},moderatorUnmuteRequest:function(e,t){return{type:gt.MODERATOR_UNMUTE_REQUEST,payload:{senderId:e,device:t}}},moderatorUnmuteResponse:function(e,t){return{type:gt.MODERATOR_UNMUTE_RESPONSE,payload:{senderId:e,device:t}}},remoteMute:function(e,t){return{type:gt.REMOTE_MUTE,participantId:e,devices:t}},setMuteState:function(e){return{type:gt.SET_MUTE_STATE,payload:e}},unmuteRequestSent:function(e,t){return{type:gt.UNMUTE_REQUEST_SENT,payload:{participantId:e,device:t}}},setParticipantUnmuteRequest:function(e,t){return{type:gt.PARTICIPANT_UNMUTE_REQUEST,senderId:e,request:t}},unmuteResponse:function(e,t){return{type:gt.UNMUTE_RESPONSE,payload:{device:t,senderId:e}}},unmuteRequestAccepted:function(e,t){return{type:gt.UNMUTE_REQUEST_ACCEPTED,participantId:e,request:t}},unmuteRequestDeclined:function(e,t){return{type:gt.UNMUTE_REQUEST_DECLINED,participantId:e,request:t}},setVideoStateIndication:function(e){return{type:gt.MUTE_VIDEO_STATE_INDICATION,state:e}},setAudioStateIndication:function(e){return{type:gt.MUTE_AUDIO_STATE_INDICATION,state:e}},setChatDisabled:function(e){return{type:gt.CHAT_DISABLE,state:e}},setScreenSharing:function(e){return{type:gt.SET_SCREEN_SHARE,state:e}},setAudioDevices:function(e){return{type:gt.SET_AUDIO_DEVICES,devices:e}},setVideoDevices:function(e){return{type:gt.SET_VIDEO_DEVICES,devices:e}},setCurrentDevices:function(e,t){return{type:gt.SET_CURRENT_DEVICES,devices:{video:e,audio:t}}},initMediaDevices:function(e){return{type:gt.INIT_DEVICES,options:e}},sendMessage:function(e){return{type:gt.SEND_MESSAGE,payload:e}},addChatMessage:function(e){return{type:gt.ADD_CHAT_MESSAGE,payload:e}},sendMessageToViewers:function(e){return{type:gt.SEND_MESSAGE_TO_VIEWERS,payload:e}},sendTranscript:function(e){return{type:gt.SEND_TRANSCRIPT,payload:e}},addTranscriptMessage:function(e){return{type:gt.ADD_TRANSCRIPT_MESSAGE,payload:e}},turnOnSubtitles:function(e){return{type:gt.TURN_ON_SUBTITLES,payload:e}},receiveSubtitlesRequest:function(e){return{type:gt.RECEIVE_SUBTITLES_REQUEST,payload:e}},updateTranscript:function(e){return{type:gt.UPDATE_TRANSCRIPT,payload:e}},shareTranscript:function(e){return{type:gt.SHARE_TRANSCRIPT,payload:e}},receiveTranscript:function(e){return{type:gt.RECEIVE_TRANSCRIPT,payload:e}},bfmOnPause:function(e){return{type:gt.BFM_ON_PAUSE,payload:e}},setBfmPauseState:function(e){return{type:gt.SET_BFM_PAUSE_STATE,payload:e}},applyLectureLayout:function(){return{type:gt.MEETING_LECTURE_LAYOUT_APPLY}},setLectureLayout:function(e){return{type:gt.SET_LECTURE_LAYOUT,payload:{lectureLayout:e}}},updateLayoutGeometry:function(e){return{type:gt.UPDATE_LAYOUT_GEOMETRY,payload:{geometry:e}}},updateLayoutParticipants:function(e){return{type:gt.UPDATE_LAYOUT_PARTICIPANTS,payload:{selectedForLecture:e}}},updatePanelLayoutParticipants:function(e){return{type:gt.UPDATE_PANEL_LAYOUT_PARTICIPANTS,payload:{selectedForLecture:e}}},selectForLecture:function(e,t,r){return{type:gt.SELECT_FOR_LECTURE,payload:{participantId:e,tileId:t,previousParticipantId:r}}},selectForPanelMode:function(e){return{type:gt.SELECT_FOR_PANEL_MODE,payload:{selectedForLecture:e}}},setMutedStatus:function(e,t){return{type:gt.PARTICIPANT_MUTED,streamId:e,add:t}},changeParticipantName:function(e,t){return{type:gt.PARTICIPANT_NAME_CHANGED,payload:{participantId:e,name:t}}},setSelectionForLecture:function(e){return{type:gt.MEETING_LECTURE_SET_SELECTION,list:e}},lectureLayoutUpdate:function(e){return{type:gt.MEETING_LECTURE_LAYOUT_UPDATE,action:e}},selectParticipantForLecture:function(e,t){return{type:gt.MEETING_LECTURE_SELECT,id:e,index:t}},updateRole:function(e,t){return{type:gt.PARTICIPANT_ROLE_UPDATE,action:e,pin:t}},updateRoleSuccess:function(){return{type:gt.PARTICIPANT_ROLE_UPDATE_SUCCESS}},setSlide:function(e){return{type:gt.MEETING_SET_SLIDE,slideNumber:e}},setPresenterStream:function(e){return{type:gt.MEETING_SET_PRESENTER_STREAM,streamId:e}},setInitStb:function(e){return{type:gt.MEETING_INIT_STB,payload:e}},setScreenStream:function(e){return{type:gt.MEETING_SET_SCREEN_STREAM,stream:e}},setQoe:function(e,t){return{type:gt.STATS_QOE,participantId:e,qoe:t}},SDKMessage:function(e){return{type:gt.SDK_MESSAGE,payload:e}},MWMessage:function(e){return{type:gt.MW_MESSAGE,payload:e}},receivedRequestToParticipate:function(e){return{type:gt.RECEIVED_REQUEST_TO_PARTICIPATE,payload:e}},voiceActivated:function(e){return{type:gt.SDK_ACTIVATION,payload:e}},orderUpdate:function(e){return{type:gt.SDK_ORDER_UPDATE,payload:e}},createLocalStream:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:gt.SDK_CREATE_LOCAL_STREAM,payload:e}},closeLocalStream:function(){return{type:gt.SDK_CLOSE_LOCAL_STREAM}},recordingStart:function(){return{type:gt.RECORDING_START}},recordingStarted:function(){return{type:gt.RECORDING_START_SUCCESS}},recordingStop:function(){return{type:gt.RECORDING_STOP}},recordingStopped:function(){return{type:gt.RECORDING_STOP_SUCCESS}},recordingFilesList:function(){return{type:gt.RECORDING_FILESLIST}},recordingFileRemove:function(e){return{type:gt.RECORDING_FILE_REMOVE,filename:e}},setRecordingState:function(e){return{type:gt.RECORDING_SET_STATE,payload:e}},setRecordingStateRemote:function(e,t){return{type:gt.RECORDING_SET_STATE_REMOTE,payload:{state:e,message:t}}},getUserRecordingsSize:function(e){return{type:gt.GET_USER_RECORDINGS_SIZE,payload:e}},setUserRecordingsSize:function(e){return{type:gt.SET_USER_RECORDINGS_SIZE,payload:e}},setGatewayState:function(e){return{type:gt.SET_GATEWAY_STATE,payload:e}},_storyboardShare:function(e,t){return{type:gt.SDK__STB_SHARE,payload:{storyboardId:e,lecturerId:t}}},storyboardShare:function(e,t){return{type:gt.SDK_MEETING_STB_SHARE,payload:{storyboardId:e,lecturerId:t}}},_setSpotlightStreams:function(e){return{type:gt.SDK__SET_SPOTLIGHT_STREAMS,payload:{selectedForLecture:e}}},addToSpotlight:function(e){return{type:gt.SDK_MEETING_ADD_TO_SPOTLIGHT,payload:{participantId:e}}},removeFromSpotlight:function(e){return{type:gt.SDK_MEETING_REMOVE_FROM_SPOTLIGHT,payload:{participantId:e}}},shareEventLayout:function(e){return{type:gt.SDK_MEETING_SHARE_EVENT_LAYOUT,payload:{state:e}}},_receiveViewerQuestion:function(e){var t=e.question;return{type:gt.SDK__RECEIVE_VIEWER_QUESTION,payload:{question:t}}},_setViewersCount:function(e){return{type:gt.SDK__SET_VIEWERS_COUNT,payload:e}},setActiveSlot:function(e){return{type:gt.SDK_MEETING_SET_ACTIVE_SLOT,payload:e}},_setActiveSlot:function(e){return{type:gt.SDK__SET_ACTIVE_SLOT,payload:e}},setSharedStreamSlot:function(e){return{type:gt.SDK_MEETING_SET_SHARED_STREAM_SLOT,payload:e}},_setSharedStreamSlot:function(e){return{type:gt.SDK__SET_SHARED_STREAM_SLOT,payload:e}},timelineAdd:function(e,t,r){return{type:gt.SDK_TIMELINE_ADD,payload:{type:e,name:t,data:r}}}},ko={SDK_EVENT_GET:"teevid/event/get",SDK_EVENT_SET:"teevid/event/set",SDK_EVENT_START:"teevid/event/start",SDK_EVENT_STOP:"teevid/event/stop",SDK_EVENT_UPDATE:"teevid/event/update",SDK_EVENT_CLEAR:"teevid/event/clear",SDK_EVENT_GET_POLLS:"teevid/event/get_polls",SDK_EVENT_POLL_VOTE:"teevid/event/poll/vote",SDK_EVENT_POLL_START:"teevid/event/poll/start",SDK_EVENT_POLL_END:"teevid/event/poll/end",SDK_EVENT_POLL_UPDATE:"teevid/event/poll/update",SDK_EVENT_POLL_EDIT:"teevid/event/poll/edit",SDK_EVENT_POLL_REMOVE:"teevid/event/poll/remove",SDK_ADD_POLL_TO_EVENT:"teevid/poll/add_to_event",SDK_DELETE_POLL_FROM_EVENT:"teevid/poll/delete_from_event",SDK_EVENT_RESET_CHAT:"teevid/event/reset_chat"},Po={setCurrentEvent:function(e){return{type:ko.SDK_EVENT_SET,payload:e}},getCurrentEvent:function(e){return{type:ko.SDK_EVENT_GET,payload:e}},updateCurrentEvent:function(e){return{type:ko.SDK_EVENT_UPDATE,payload:e}},clearCurrentEvent:function(){return{type:ko.SDK_EVENT_CLEAR}},refreshPollsData:function(){return{type:ko.SDK_EVENT_GET_POLLS}},startPoll:function(e){return{type:ko.SDK_EVENT_POLL_START,payload:e}},stopPoll:function(e){return{type:ko.SDK_EVENT_POLL_END,payload:e}},editPoll:function(e){return{type:ko.SDK_EVENT_POLL_EDIT,payload:e}},updatePoll:function(e){return{type:ko.SDK_EVENT_POLL_UPDATE,payload:e}},voteInPoll:function(e,t){return{type:ko.SDK_EVENT_POLL_VOTE,payload:{pollId:e,optionName:t}}},removePoll:function(e){return{type:ko.SDK_EVENT_POLL_REMOVE,payload:e}},stopEvent:function(){return{type:ko.SDK_EVENT_STOP}},startEvent:function(e){return{type:ko.SDK_EVENT_START,payload:e}},addPollToEvent:function(e){return{type:ko.SDK_ADD_POLL_TO_EVENT,payload:e}},deletePollFromEvent:function(e){return{type:ko.SDK_DELETE_POLL_FROM_EVENT,payload:e}},resetChat:function(){return{type:ko.SDK_EVENT_RESET_CHAT}}},No=regeneratorRuntime.mark(Qo),Do=regeneratorRuntime.mark($o),jo=regeneratorRuntime.mark(Xo),Mo=regeneratorRuntime.mark(Zo),Lo=regeneratorRuntime.mark(ei),Uo=regeneratorRuntime.mark(ti),Vo=regeneratorRuntime.mark(ri),Fo=regeneratorRuntime.mark(ni),Go=regeneratorRuntime.mark(oi),Bo=regeneratorRuntime.mark(ii),Ho=regeneratorRuntime.mark(ai),Wo=regeneratorRuntime.mark(si),qo=regeneratorRuntime.mark(ci),Ko=regeneratorRuntime.mark(ui),zo=regeneratorRuntime.mark(di),Yo=function(e){return e.teevid.viewer.moderationSocket};function Qo(e){var t,r,n,o,i,a,s=arguments;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Se(Yo);case 2:return t=c.sent,c.next=5,Se(Mt);case 5:for(r=c.sent,n=r.token,o=s.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=s[a];t&&1===t.readyState&&t.send(JSON.stringify(e.apply(void 0,[n].concat(i))));case 9:case"end":return c.stop()}}),No)}function Jo(e){return rt((function(t){return e.onerror=function(e){TeeVidSdk.log.error(e)},e.onmessage=function(r){var n=r.data;n&&"_"===n?e&&1===e.readyState&&e.send(n):(n=JSON.parse(n),t(n))},function(){e.close()}}))}function $o(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(Eo.OPEN_VIEWER_CHANNEL,regeneratorRuntime.mark((function e(t){var r,n,o,i,a,s,c,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload.roomId,e.next=3,Se(It);case 3:return n=e.sent,e.next=6,Se(Dt);case 6:return o=e.sent,e.next=9,Se(Tt);case 9:return i=e.sent,a=!!i,s="wss://".concat(n,"/socket/moderation?token=").concat(encodeURIComponent(o),"&roomId=").concat(r,"&isViewer=true"),(c=new WebSocket(s)).onclose=function(e){a||TeeVidSdk.actions.logout()},u=Jo(c),e.next=17,me(Io.viewerChannelOpened(c));case 17:return e.next=19,Xo(u);case 19:case"end":return e.stop()}}),e)})));case 2:case"end":return e.stop()}}),Do)}function Xo(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ie(Eo.CLOSE_VIEWER_CHANNEL,(function(){e.close()}));case 2:return t.next=4,Ie(e,regeneratorRuntime.mark((function e(t){var r,n,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.data,n=r.method,o=r.params,i=Io.noop(),e.t0=n,e.next=e.t0===Kt.ServerMethods.ACCEPT_REQUEST_TO_PARTICIPATE?5:e.t0===Kt.ServerMethods.REJECT_REQUEST_TO_PARTICIPATE?7:e.t0===Kt.ServerMethods.REQUEST_TO_PARTICIPATE_SENT?9:e.t0===Kt.ServerMethods.SET_STREAMING_STATE?11:e.t0===Kt.ServerMethods.MODERATOR_MESSAGE?13:e.t0===Kt.ServerMethods.MEETING_STATE?15:e.t0===Kt.ServerMethods.S_EVENT_POLL_UPDATE?17:e.t0===Kt.ServerMethods.S_EVENT_UPDATE?19:e.t0===Kt.ServerMethods.S_VIEWER_ADDED?21:e.t0===Kt.ServerMethods.S_VIEWER_VERIFICATION_RESULT?23:25;break;case 5:return i=Io.requestToParticipateAccepted(o),e.abrupt("break",26);case 7:return i=Io.requestToParticipateRejected(o),e.abrupt("break",26);case 9:return i=Io.requestToParticipateSent(o),e.abrupt("break",26);case 11:return i=Io.receiveStreamingState(o),e.abrupt("break",26);case 13:return i=Io.moderatorMessageReceived(o),e.abrupt("break",26);case 15:return i=Io.setViewerMeetingState(o),e.abrupt("break",26);case 17:return i=Po.updatePoll(o),e.abrupt("break",26);case 19:return i=Po.setCurrentEvent(o),e.abrupt("break",26);case 21:return i=Io._initMeetingData(o),e.abrupt("break",26);case 23:return i=Io._setVerificationResult(o),e.abrupt("break",26);case 25:return e.abrupt("break",26);case 26:return e.next=28,me(i);case 28:case"end":return e.stop()}}),e)})));case 4:case"end":return t.stop()}}),jo)}function Zo(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(Eo.REQUEST_TO_PARTICIPATE,regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=t.payload)){e.next=4;break}return e.next=4,Qo(kr,r);case 4:case"end":return e.stop()}}),e)})));case 2:case"end":return e.stop()}}),Mo)}function ei(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(Eo.SDK_VIEWER_ASK_QUESTION,regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=t.payload)){e.next=4;break}return e.next=4,Qo(Hr,r);case 4:case"end":return e.stop()}}),e)})));case 2:case"end":return e.stop()}}),Lo)}function ti(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(Eo.VIEWER_LEAVES_PLAYBACK_PAGE,regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.payload){e.next=4;break}return e.next=4,Qo(xr);case 4:case"end":return e.stop()}}),e)})));case 2:case"end":return e.stop()}}),Uo)}function ri(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(Eo.ACCEPT_REQUEST_TO_PARTICIPATE,regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=t.payload)||!r.id){e.next=4;break}return e.next=4,Yr(Pr,r.id);case 4:case"end":return e.stop()}}),e)})));case 2:case"end":return e.stop()}}),Vo)}function ni(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(Eo.REJECT_REQUEST_TO_PARTICIPATE,regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=t.payload)||!r.id){e.next=4;break}return e.next=4,Yr(Nr,r.id);case 4:case"end":return e.stop()}}),e)})));case 2:case"end":return e.stop()}}),Fo)}function oi(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(Eo.JOIN_TO_MEETING,regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se((function(e){return e.teevid.viewer.token}));case 2:return t=e.sent,e.next=5,Se((function(e){return e.teevid.viewer.name}));case 5:return r=e.sent,e.next=8,me(xo.requestJoin(r,"",{inviteToken:t}));case 8:case"end":return e.stop()}}),e)})));case 2:case"end":return e.stop()}}),Go)}function ii(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(Eo.CLIENT_VERIFY_VIEWER_PASS,regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=t.payload)){e.next=4;break}return e.next=4,Qo($t,r);case 4:case"end":return e.stop()}}),e)})));case 2:case"end":return e.stop()}}),Bo)}function ai(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(Eo.SDK_VIEWER_INIT_MEETING_DATA,regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.payload,r.room,!(n=r.event)){e.next=4;break}return e.next=4,me(Po.setCurrentEvent(n));case 4:case"end":return e.stop()}}),e)})));case 2:case"end":return e.stop()}}),Ho)}function si(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(ko.SDK_EVENT_POLL_VOTE,regeneratorRuntime.mark((function e(t){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,n=r.pollId,o=r.optionName,e.next=3,Qo(Vr,n,o);case 3:case"end":return e.stop()}}),e)})));case 2:case"end":return e.stop()}}),Wo)}function ci(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(ko.SDK_EVENT_SET,regeneratorRuntime.mark((function e(t){var r,n,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,e.next=3,Se((function(e){return e.teevid.viewer}));case 3:if(n=e.sent,o=n.roomId,i=n.moderationSocket,!(o&&i&&r&&r.state===m.EventStates.DONE)){e.next=13;break}return e.next=9,be(9e4);case 9:return e.next=11,me(Ao("/".concat(r._id,"/completed")));case 11:return e.next=13,me(TeeVidSdk.cleanActions.clearCurrentEvent());case 13:case"end":return e.stop()}}),e)})));case 2:case"end":return e.stop()}}),qo)}function ui(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(Eo.RECEIVE_STREAMING_STATE,regeneratorRuntime.mark((function e(t){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,e.next=3,Se((function(e){return e.teevid.viewer.streamingState}));case 3:if(n=e.sent,(o=Co(n,r.newState))===n||n!==m.StreamingStates.IS_STREAMING){e.next=8;break}return e.next=8,be(9e4);case 8:return e.next=10,me(Io.setReceivedStreamingState({streamingState:o,room:r.room}));case 10:case"end":return e.stop()}}),e)})));case 2:case"end":return e.stop()}}),Ko)}function di(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve([$o(),Zo(),ri(),ni(),oi(),ti(),ei(),ii(),ai(),si(),ci(),ui()]);case 2:case"end":return e.stop()}}),zo)}var pi=r("./middleware/commons/constants.js"),li=r("./node_modules/lodash.omit/index.js"),fi=r.n(li),hi=r("./node_modules/lodash.isequal/index.js"),mi=r.n(hi);function vi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function gi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vi(Object(r),!0).forEach((function(t){yi(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function yi(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _i=function(e,t){var r=t.getID(),n={streams:{$unset:[r]}};if(r===g()(e,"participant.streams.mediaStreamId"))n.participant={streams:{mediaStreamId:{$set:null}}};else for(var o in e.remoteParticipants){if(e.remoteParticipants.hasOwnProperty(o))if(g()(e,"remoteParticipants.".concat(o,".streams.mediaStreamId"),"")===r){n.remoteParticipants=yi({},o,{streams:{mediaStreamId:{$set:null}}});break}}return h()(e,n)},Ei=function(e,t){var r={};try{for(var n in t)if(t.hasOwnProperty(n)){var o=gi({},g()(e,"streamStats.".concat(n),{}));o[m.StatNames.QOE]=g()(t,"".concat(n,".qoe"),0),r[n]=o}return h()(e,{streamStats:{$set:r}})}catch(t){return console.error(t),e}},Si=function(e,t){var r={streamStats:{}};try{for(var n in t)if(t.hasOwnProperty(n)){var o=g()(e,"streamStats.".concat(n),null),i=g()(e,"streamStats.".concat(n),{})[m.StatNames.QOE],a=t[n];o&&(a=gi(gi({},o),t[n]),(o[m.StatNames.SCREEN_BW]&&!t[n][m.StatNames.SCREEN_BW]||o[m.StatNames.SCREEN_RES]&&!t[n][m.StatNames.SCREEN_RES])&&(delete a[m.StatNames.SCREEN_BW],delete a[m.StatNames.SCREEN_RES])),i&&(a[m.StatNames.QOE]=i),r.streamStats[n]={$set:a}}return h()(e,r)}catch(t){return console.error(t),e}},bi=function(e,t){var r=null,n={};if(!e.participant)return e;if(t&&(r=t.getID()),null!==r)n.streams=yi({},r,{$set:t});else{var o=g()(e,"participant.streams.mediaStreamId",null);n.streams={$unset:[o]}}return n.localStreamId={$set:r},n.participant={streams:{mediaStreamId:{$set:r}}},h()(e,n)};function Ti(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ri(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ti(Object(r),!0).forEach((function(t){Ci(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ti(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ci(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Oi(e){return function(e){if(Array.isArray(e))return wi(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return wi(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wi(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wi(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ai=function(e){var t;if(e){var r=e.optimized_layout_full_quality,n=e.optimized_layout_threshold;t=Object.assign({},pi.lectureLayouts.default.geometry,{optimized_layout_full_quality:r,optimized_layout_threshold:n})}else t=Object.assign({},pi.lectureLayouts.default.geometry);return{optimizedLayoutFullQuality:t.optimized_layout_full_quality,optimizedLayoutThreshold:t.optimized_layout_threshold}},Ii=function(e,t){var r=t.authorId,n=t.result,o=t.time,i=e.remoteParticipants,a=e.participant;return{author:a&&a._id===r?a:i[r],message:n,time:o}},xi={participantToken:"",participant:null,remoteParticipants:{},recording:{state:m.RecordingStates.STOPPED,error:null},roomOptions:{enabledRecording:!0,enableChat:!1,hasAccessPin:!1,hasOwnerPin:!1,gatewayAvailable:!1},viewersRequests:[],viewersQuestions:[],viewers:0,layoutGeometry:Ai(),room:null,conversationId:"",connectionState:m.ConnectionStates.DISCONNECTED,requiresAccessPin:!1,connection:null,streamStats:{},moderationSocket:null,sipCallState:{state:0,sipUri:""},credentialRequirements:null,streams:{},streamingState:{},isConnected:!1,startTime:0,transcript:[],subtitles:[],subtitlesLangs:[],selectedForLecture:[],lectureLayout:"1_0",layoutMode:m.LayoutModes.AUTO,sharedScreenSlot:-1,activeSpeakerSlot:-1,isPresenter:!1,lecturerId:null,storyboardId:null,slideNumber:0,chatLog:[],mode:m.modes.INTERACTIVE,bfmPaused:!1},ki=function(e,t,r,n,o){var i=e.slice();return!i.filter((function(e){return"stub"!==e})).length&&(i=[r].concat(Oi(i))),i.length===t||(i.length>t&&n.roomType!==m.RoomTypes.EVENT&&o!==m.LayoutModes.MANUAL&&(i=(i=i.filter((function(e){return"stub"!==e}))).slice(0,t)),n.roomType===m.RoomTypes.EVENT&&o===m.LayoutModes.AUTO&&(i=i.filter((function(e){return"stub"!==e})))),i},Pi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xi,t=arguments.length>1?arguments[1]:void 0,r=t.type,n=t.payload;switch(r){case gt.SDK_INIT_MEETING_DATA:var o=n.room;return o&&o.credentialRequirements?Ri(Ri({},e),{},{credentialRequirements:o.credentialRequirements,requiresAccessPin:o.credentialRequirements.accessPin,connectionState:m.ConnectionStates.PRE_CONNECTED}):e;case gt.SDK_SET_CREDENTIAL_REQUIREMENTS:return Ri(Ri({},e),{},{credentialRequirements:n});case gt.SET_SIP_STATE:return h()(e,{sipCallState:{$set:n}});case gt.STATS_PARTICIPANT:return Ei(e,n);case gt.SCREEN_SHARE_SET_REMOTE:return h()(e,{remoteParticipants:Ci({},n.participantId,{streams:{screenStreamId:{$set:n.streamId}}})});case gt.CONNECTION_STOP_SHARING:return e.remoteParticipants[n.participantId]?h()(e,{remoteParticipants:Ci({},n.participantId,{streams:{screenStreamId:{$set:null}}})}):e;case gt.SCREEN_SHARE_STARTED:return h()(e,{participant:{streams:{screenStreamId:{$set:n}}}});case gt.SET_STREAMING_STATE:return Object.assign({},e,{streamingState:Object.assign({},e.streamingState,n.state)});case gt.CLEAN_STREAMING_STATE:return Object.assign({},e,{streamingState:{}});case gt.SET_ACCESS_PIN_REQ:return Object.assign({},e,{requiresAccessPin:n});case gt.SET_CONNECTION_STATE:return Object.assign({},e,{connectionState:n});case gt.STATS_ROOM:return Si(e,n);case gt.CONNECTION_PARTICIPANT_REMOVED:return h()(e,{remoteParticipants:{$unset:[n]}});case gt.CONNECTION_STREAM_REMOVED:return _i(e,n);case gt.CONNECTION_STREAM_SUBSCRIBED:return n.getID()?h()(e,{streams:Ci({},n.getID(),{$set:n})}):e;case gt.CONNECTION_ADD_PARTICIPANT:return h()(e,{remoteParticipants:Ci({},n.participant._id,{$set:n.participant})});case gt.CONNECTION_ADD_PARTICIPANT_STREAM:return e.remoteParticipants[n.participantId]?h()(e,{remoteParticipants:Ci({},n.participantId,{streams:{mediaStreamId:{$set:n.streamId}}})}):e;case gt.SET_MEETING_STATE:return e.room.roomType!==m.RoomTypes.EVENT&&(localStorage.setItem("partName",n.participants[e.participant._id].name),localStorage.setItem("roomId",e.room.id)),Object.assign({},e,n.state,{remoteParticipants:fi()(n.participants,e.participant._id),participant:Object.assign({},e.participant,n.participants[e.participant._id]),roomOptions:Object.assign({},e.roomOptions,n.state.roomOptions)});case gt.MEETING_CHANGE_MODE:return h()(e,{$merge:n.state});case gt.MEETING_CHANGE_LAYOUT:return h()(e,{$merge:n});case gt.ROOM_READY:return Object.assign({},e,{isConnected:!0,connectionState:m.ConnectionStates.CONNECTING});case gt.SDK_SET_LOCAL_STREAM:return bi(e,n);case gt.MODERATION_SOCKET_CREATED:return Object.assign({},e,{moderationSocket:n});case gt.CREATE_CONNECTION_SUCCESS:return Object.assign({},e,{connection:n.connection,connectionState:m.ConnectionStates.CONNECTING});case gt.SDK__STB_SHARE:var i={storyboardId:n.storyboardId,lecturerId:n.lecturerId,layoutGeometry:n.lecturerId?{optimizedLayoutFullQuality:0,optimizedLayoutThreshold:6}:Ai(e.room)};return e.room.roomType===m.RoomTypes.MEETING&&n.storyboardId!==e.storyboardId&&(i.selectedForLecture=[]),Object.assign({},e,i);case gt.SET_LECTURE_LAYOUT:return e.lectureLayout===n.lectureLayout?e:Object.assign({},e,{lectureLayout:n.lectureLayout});case gt.MEETING_LAYOUT_MODE:return e.layoutMode===n.layoutMode?e:Object.assign({},e,{layoutMode:n.layoutMode});case gt.MEETING_SLIDE_CHANGED:case gt.MEETING_SLIDE_NUMBER:return Object.assign({},e,{slideNumber:n.number});case gt.UPDATE_LAYOUT_GEOMETRY:return Object.assign({},e,{layoutGeometry:n.geometry});case gt.UPDATE_LAYOUT_PARTICIPANTS:var a=e.layoutGeometry.optimizedLayoutFullQuality+e.layoutGeometry.optimizedLayoutThreshold,s=e.lecturerId?e.lecturerId:e.participant._id;return Object.assign({},e,{selectedForLecture:ki(n.selectedForLecture||e.selectedForLecture,a,s,e.room,e.layoutMode)});case gt.UPDATE_PANEL_LAYOUT_PARTICIPANTS:return mi()(e.selectedForLecture,n.selectedForLecture)?e:Object.assign({},e,{selectedForLecture:n.selectedForLecture});case gt.MUTE_UPDATED:var c=n.participantId,u=n.mute;return Object.assign({},h()(e,{remoteParticipants:Ci({},c,{status:{devices:{$set:u}}})}));case gt.UNMUTE_REQUEST_SENT:var d=e.remoteParticipants[n.participantId],p=g()(d,"status.unmuteRequest[".concat(n.device,"]"),!1);return d?Object.assign({},h()(e,{remoteParticipants:Ci({},n.participantId,{status:{$merge:{unmuteRequest:Object.assign({},d.status.unmuteRequest||{},Ci({},n.device,!p))}}})})):e;case gt.MODERATOR_UNMUTE_REQUEST:return Object.assign({},h()(e,{participant:{status:{$merge:{unmuteRequest:Object.assign({},e.participant.status.unmuteRequest||{},n.device)}}}}));case gt.MODERATOR_UNMUTE_RESPONSE:var l={};return n.device.hasOwnProperty("audio")&&(l.audio=!1),n.device.hasOwnProperty("video")&&(l.video=!1),Object.assign({},h()(e,{remoteParticipants:Ci({},n.senderId,{status:{unmuteRequest:{$merge:l}}})}));case gt.UNMUTE_RESPONSE:var f={};return n.device.hasOwnProperty("audio")&&(f.audio=!1),n.device.hasOwnProperty("video")&&(f.video=!1),e.participant.status.unmuteRequest?Object.assign({},h()(e,{participant:{status:{unmuteRequest:{$merge:f}}}})):Object.assign({},h()(e,{participant:{status:{$merge:{unmuteRequest:f}}}}));case gt.SET_MUTE_STATE:return Object.assign({},h()(e,{participant:{status:{$set:Object.assign({},e.participant.status,{devices:n})}}}));case gt.STATUS_UPDATE:return e.participant.status?h()(e,{participant:{status:{$merge:n}}}):Object.assign({},e,{participant:Object.assign({},e.participant,{status:n})});case gt.REQUEST_OWNER_PIN:return Object.assign({},e,{requestOwnerPinAction:n.action});case gt.OWNER_PIN_SUCCESS:return e.participant._id===n.participantId?h()(e,{participant:{$merge:n.data},participantToken:{$set:n.data.token}}):Object.assign({},h()(e,{remoteParticipants:Ci({},n.participantId,{$merge:n.data})}));case gt.ROLE_CHANGED:return e.participant._id===n.participantId?h()(e,n.data.token?{participant:{$merge:n.data},participantToken:{$set:n.data.token}}:{participant:{$merge:n.data}}):Object.assign({},h()(e,{remoteParticipants:Ci({},n.participantId,{$merge:n.data})}));case gt.PARTICIPANT_NAME_CHANGED:return e.participant._id===n.participantId?h()(e,{participant:{name:{$set:n.name}}}):Object.assign({},h()(e,{remoteParticipants:Ci({},n.participantId,{name:{$set:n.name}})}));case gt.PARTICIPANT_AVATAR_SET:return e.participant._id===n.participantId?h()(e,{participant:{avatar:{$set:n.avatar}}}):Object.assign({},h()(e,{remoteParticipants:Ci({},n.participantId,{avatar:{$set:n.avatar}})}));case gt.SET_CURRENT_ROOM:return Object.assign({},e,{room:n});case gt.RECORDING_SET_STATE:return Object.assign({},h()(e,{recording:{state:{$set:n}}}));case gt.SET_GATEWAY_STATE:return Object.assign({},h()(e,{roomOptions:{gatewayAvailable:{$set:n}}}));case gt.RECORDING_SET_STATE_REMOTE:return Object.assign({},h()(e,{recording:{$set:n.state}}));case gt.SDK_JOIN_ACCEPTED:return Object.assign({},e,{participant:n.participant,participantToken:g()(n,"participant.token","")});case gt.CONNECTION_DISCONNECTED:return Object.assign({},e,xi);case gt.ADD_CHAT_MESSAGE:case gt.SEND_MESSAGE:return Object.assign({},e,{chatLog:[].concat(e.chatLog,n)});case gt.ADD_TRANSCRIPT_MESSAGE:case gt.SEND_TRANSCRIPT:var v=Ii(e,n);return Object.assign({},e,{transcript:[].concat(e.transcript,v)});case gt.SHARE_TRANSCRIPT:case gt.RECEIVE_TRANSCRIPT:return Di(e,n);case gt.RECEIVE_SUBTITLES_REQUEST:case gt.TURN_ON_SUBTITLES:return e.subtitlesLangs.includes(n.value)?e:Object.assign({},e,{subtitlesLangs:[].concat(e.subtitlesLangs,n.value)});case gt.RAISE_HAND_REQ:case gt.RAISE_HAND_RES_RECEIVED:return Li(e,n);case gt.RAISE_HAND_UPDATE:return Ui(e,n);case gt.SDK__RECEIVE_VIEWER_QUESTION:case gt.RECEIVED_REQUEST_TO_PARTICIPATE:return ji(e,n);case Eo.REJECT_REQUEST_TO_PARTICIPATE:case Eo.ACCEPT_REQUEST_TO_PARTICIPATE:return Mi(e,n);case gt.SET_BFM_PAUSE_STATE:case gt.BFM_ON_PAUSE:return Object.assign({},e,{bfmPaused:n});case gt.SDK_ORDER_UPDATE:return Ni(e,n);case gt.SDK__SET_VIEWERS_COUNT:return Object.assign({},e,{viewers:n});case gt.SDK__SET_ACTIVE_SLOT:return Object.assign({},e,{activeSpeakerSlot:n.index});case gt.SDK__SET_SHARED_STREAM_SLOT:return Object.assign({},e,{sharedScreenSlot:n.index});default:return e}},Ni=function(e,t){var r={};for(var n in t.hasOwnProperty(e.participant._id)&&(r.participant={order:{$set:t[e.participant._id]}}),Object.keys(t).length>1&&(r.remoteParticipants={}),t)e.remoteParticipants.hasOwnProperty(n)&&(r.remoteParticipants[n]={order:{$set:t[n]}});return h()(e,r)},Di=function(e,t){var r=g()(e,"participant._id");if(r){var n=function(e,t,r){var n=t.subtitles,o=t.participantId,i=e.remoteParticipants,a=e.participant.name,s="",c={};if(o===r)c[o]={subtitles:n,name:a},s=a;else{var u=i[o]&&i[o].name;c[o]={subtitles:n,name:u},s=u}return{subtitles:n,name:s,id:o}}(e,t,r);return Object.assign({},e,{subtitles:[].concat(e.subtitles,n)})}return e},ji=function(e,t){var r=e.participant,n=r.role,o=r.isRoomOwner;if("Moderator"===n||o){var i=(new Date).getTime(),a=t.username,s=t.question,c=t.id;if(a){var u=[].concat(e.viewersRequests,{username:a,question:s,time:i,id:c});return Object.assign({},e,{viewersRequests:u})}return Object.assign({},e,{viewersQuestions:[].concat(Oi(e.viewersQuestions),[{question:s}])})}return e},Mi=function(e,t){var r=t.id,n=e.viewersRequests.filter((function(e){return e.id!==r}));return Ri(Ri({},e),{},{viewersRequests:n})},Li=function(e,t){return Object.assign({},e,{participant:Object.assign({},e.participant,{status:Object.assign({},e.participant.status,{handRaised:t})})})},Ui=function(e,t){var r=t.participantId,n=t.state;return Object.assign({},e,{remoteParticipants:Object.assign({},e.remoteParticipants,Ci({},r,Object.assign({},e.remoteParticipants[r],{status:Object.assign({},e.remoteParticipants[r].status,{handRaised:n})})))})},Vi=r("./sdk/libs/erizo.js"),Fi=r.n(Vi);let Gi=!0,Bi=!0;function Hi(e,t,r){const n=e.match(t);return n&&n.length>=r&&parseInt(n[r],10)}function Wi(e,t,r){if(!e.RTCPeerConnection)return;const n=e.RTCPeerConnection.prototype,o=n.addEventListener;n.addEventListener=function(e,n){if(e!==t)return o.apply(this,arguments);const i=e=>{const t=r(e);t&&(n.handleEvent?n.handleEvent(t):n(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(n,i),o.apply(this,[e,i])};const i=n.removeEventListener;n.removeEventListener=function(e,r){if(e!==t||!this._eventMap||!this._eventMap[t])return i.apply(this,arguments);if(!this._eventMap[t].has(r))return i.apply(this,arguments);const n=this._eventMap[t].get(r);return this._eventMap[t].delete(r),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,i.apply(this,[e,n])},Object.defineProperty(n,"on"+t,{get(){return this["_on"+t]},set(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}function qi(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(Gi=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function Ki(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(Bi=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function zi(){if("object"==typeof window){if(Gi)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function Yi(e,t){Bi&&console.warn(e+" is deprecated, please use "+t+" instead.")}function Qi(e){return"[object Object]"===Object.prototype.toString.call(e)}function Ji(e){return Qi(e)?Object.keys(e).reduce((function(t,r){const n=Qi(e[r]),o=n?Ji(e[r]):e[r],i=n&&!Object.keys(o).length;return void 0===o||i?t:Object.assign(t,{[r]:o})}),{}):e}function $i(e,t,r){const n=r?"outbound-rtp":"inbound-rtp",o=new Map;if(null===t)return o;const i=[];return e.forEach(e=>{"track"===e.type&&e.trackIdentifier===t.id&&i.push(e)}),i.forEach(t=>{e.forEach(r=>{r.type===n&&r.trackId===t.id&&function e(t,r,n){r&&!n.has(r.id)&&(n.set(r.id,r),Object.keys(r).forEach(o=>{o.endsWith("Id")?e(t,t.get(r[o]),n):o.endsWith("Ids")&&r[o].forEach(r=>{e(t,t.get(r),n)})}))}(e,r,o)})}),o}const Xi=zi;function Zi(e,t){const r=e&&e.navigator;if(!r.mediaDevices)return;const n=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;const t={};return Object.keys(e).forEach(r=>{if("require"===r||"advanced"===r||"mediaSource"===r)return;const n="object"==typeof e[r]?e[r]:{ideal:e[r]};void 0!==n.exact&&"number"==typeof n.exact&&(n.min=n.max=n.exact);const o=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==n.ideal){t.optional=t.optional||[];let e={};"number"==typeof n.ideal?(e[o("min",r)]=n.ideal,t.optional.push(e),e={},e[o("max",r)]=n.ideal,t.optional.push(e)):(e[o("",r)]=n.ideal,t.optional.push(e))}void 0!==n.exact&&"number"!=typeof n.exact?(t.mandatory=t.mandatory||{},t.mandatory[o("",r)]=n.exact):["min","max"].forEach(e=>{void 0!==n[e]&&(t.mandatory=t.mandatory||{},t.mandatory[o(e,r)]=n[e])})}),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},o=function(e,o){if(t.version>=61)return o(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"==typeof e.audio){const t=function(e,t,r){t in e&&!(r in e)&&(e[r]=e[t],delete e[t])};t((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),t(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=n(e.audio)}if(e&&"object"==typeof e.video){let i=e.video.facingMode;i=i&&("object"==typeof i?i:{ideal:i});const a=t.version<66;if(i&&("user"===i.exact||"environment"===i.exact||"user"===i.ideal||"environment"===i.ideal)&&(!r.mediaDevices.getSupportedConstraints||!r.mediaDevices.getSupportedConstraints().facingMode||a)){let t;if(delete e.video.facingMode,"environment"===i.exact||"environment"===i.ideal?t=["back","rear"]:"user"!==i.exact&&"user"!==i.ideal||(t=["front"]),t)return r.mediaDevices.enumerateDevices().then(r=>{let a=(r=r.filter(e=>"videoinput"===e.kind)).find(e=>t.some(t=>e.label.toLowerCase().includes(t)));return!a&&r.length&&t.includes("back")&&(a=r[r.length-1]),a&&(e.video.deviceId=i.exact?{exact:a.deviceId}:{ideal:a.deviceId}),e.video=n(e.video),Xi("chrome: "+JSON.stringify(e)),o(e)})}e.video=n(e.video)}return Xi("chrome: "+JSON.stringify(e)),o(e)},i=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(r.getUserMedia=function(e,t,n){o(e,e=>{r.webkitGetUserMedia(e,t,e=>{n&&n(i(e))})})}.bind(r),r.mediaDevices.getUserMedia){const e=r.mediaDevices.getUserMedia.bind(r.mediaDevices);r.mediaDevices.getUserMedia=function(t){return o(t,t=>e(t).then(e=>{if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach(e=>{e.stop()}),new DOMException("","NotFoundError");return e},e=>Promise.reject(i(e))))}}}function ea(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(r){return t(r).then(t=>{const n=r.video&&r.video.width,o=r.video&&r.video.height,i=r.video&&r.video.frameRate;return r.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:i||3}},n&&(r.video.mandatory.maxWidth=n),o&&(r.video.mandatory.maxHeight=o),e.navigator.mediaDevices.getUserMedia(r)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}function ta(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function ra(e){if("object"==typeof e&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=t=>{t.stream.addEventListener("addtrack",r=>{let n;n=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(e=>e.track&&e.track.id===r.track.id):{track:r.track};const o=new Event("track");o.track=r.track,o.receiver=n,o.transceiver={receiver:n},o.streams=[t.stream],this.dispatchEvent(o)}),t.stream.getTracks().forEach(r=>{let n;n=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(e=>e.track&&e.track.id===r.id):{track:r};const o=new Event("track");o.track=r,o.receiver=n,o.transceiver={receiver:n},o.streams=[t.stream],this.dispatchEvent(o)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else Wi(e,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function na(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const r=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){let o=r.apply(this,arguments);return o||(o=t(this,e),this._senders.push(o)),o};const n=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){n.apply(this,arguments);const t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._senders=this._senders||[],r.apply(this,[e]),e.getTracks().forEach(e=>{this._senders.push(t(this,e))})};const n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._senders=this._senders||[],n.apply(this,[e]),e.getTracks().forEach(e=>{const t=this._senders.find(t=>t.track===e);t&&this._senders.splice(this._senders.indexOf(t),1)})}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function oa(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,r,n]=arguments;if(arguments.length>0&&"function"==typeof e)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof e))return t.apply(this,[]);const o=function(e){const t={};return e.result().forEach(e=>{const r={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach(t=>{r[t]=e.stat(t)}),t[r.id]=r}),t},i=function(e){return new Map(Object.keys(e).map(t=>[t,e[t]]))};if(arguments.length>=2){const n=function(e){r(i(o(e)))};return t.apply(this,[n,e])}return new Promise((e,r)=>{t.apply(this,[function(t){e(i(o(t)))},r])}).then(r,n)}}function ia(e){if(!("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e});const r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=r.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){const e=this;return this._pc.getStats().then(t=>$i(t,e.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e}),Wi(e,"track",e=>(e.receiver._pc=e.srcElement,e)),e.RTCRtpReceiver.prototype.getStats=function(){const e=this;return this._pc.getStats().then(t=>$i(t,e.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype)||!("getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const e=arguments[0];let t,r,n;return this.getSenders().forEach(r=>{r.track===e&&(t?n=!0:t=r)}),this.getReceivers().forEach(t=>(t.track===e&&(r?n=!0:r=t),t.track===e)),n||t&&r?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():r?r.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function aa(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(e=>this._shimmedLocalStreams[e][0])};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){if(!r)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const n=t.apply(this,arguments);return this._shimmedLocalStreams[r.id]?-1===this._shimmedLocalStreams[r.id].indexOf(n)&&this._shimmedLocalStreams[r.id].push(n):this._shimmedLocalStreams[r.id]=[r,n],n};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach(e=>{if(this.getSenders().find(t=>t.track===e))throw new DOMException("Track already exists.","InvalidAccessError")});const t=this.getSenders();r.apply(this,arguments);const n=this.getSenders().filter(e=>-1===t.indexOf(e));this._shimmedLocalStreams[e.id]=[e].concat(n)};const n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],n.apply(this,arguments)};const o=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach(t=>{const r=this._shimmedLocalStreams[t].indexOf(e);-1!==r&&this._shimmedLocalStreams[t].splice(r,1),1===this._shimmedLocalStreams[t].length&&delete this._shimmedLocalStreams[t]}),o.apply(this,arguments)}}function sa(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return aa(e);const r=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const e=r.apply(this);return this._reverseStreams=this._reverseStreams||{},e.map(e=>this._reverseStreams[e.id])};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach(e=>{if(this.getSenders().find(t=>t.track===e))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[t.id]){const r=new e.MediaStream(t.getTracks());this._streams[t.id]=r,this._reverseStreams[r.id]=t,t=r}n.apply(this,[t])};const o=e.RTCPeerConnection.prototype.removeStream;function i(e,t){let r=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(t=>{const n=e._reverseStreams[t],o=e._streams[n.id];r=r.replace(new RegExp(o.id,"g"),n.id)}),new RTCSessionDescription({type:t.type,sdp:r})}function a(e,t){let r=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(t=>{const n=e._reverseStreams[t],o=e._streams[n.id];r=r.replace(new RegExp(n.id,"g"),o.id)}),new RTCSessionDescription({type:t.type,sdp:r})}e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},o.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,r){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const n=[].slice.call(arguments,1);if(1!==n.length||!n[0].getTracks().find(e=>e===t))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");const o=this.getSenders().find(e=>e.track===t);if(o)throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const i=this._streams[r.id];if(i)i.addTrack(t),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const n=new e.MediaStream([t]);this._streams[r.id]=n,this._reverseStreams[n.id]=r,this.addStream(n)}return this.getSenders().find(e=>e.track===t)},["createOffer","createAnswer"].forEach((function(t){const r=e.RTCPeerConnection.prototype[t],n={[t](){const e=arguments;return arguments.length&&"function"==typeof arguments[0]?r.apply(this,[t=>{const r=i(this,t);e[0].apply(null,[r])},t=>{e[1]&&e[1].apply(null,t)},arguments[2]]):r.apply(this,arguments).then(e=>i(this,e))}};e.RTCPeerConnection.prototype[t]=n[t]}));const s=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=a(this,arguments[0]),s.apply(this,arguments)):s.apply(this,arguments)};const c=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const e=c.get.apply(this);return""===e.type?e:i(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(e._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let t;this._streams=this._streams||{},Object.keys(this._streams).forEach(r=>{this._streams[r].getTracks().find(t=>e.track===t)&&(t=this._streams[r])}),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function ca(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const r=e.RTCPeerConnection.prototype[t],n={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=n[t]}))}function ua(e,t){Wi(e,"negotiationneeded",e=>{const r=e.target;if(!(t.version<72||r.getConfiguration&&"plan-b"===r.getConfiguration().sdpSemantics)||"stable"===r.signalingState)return e})}var da=r("./node_modules/rtcpeerconnection-shim/rtcpeerconnection.js"),pa=r.n(da);function la(e){const t=e&&e.navigator,r=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return r(e).catch(e=>Promise.reject(function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString(){return this.name}}}(e)))}}function fa(e){"getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}function ha(e,t){if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){const t=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set(e){t.set.call(this,e);const r=new Event("enabled");r.enabled=e,this.dispatchEvent(r)}})}e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)&&Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);const r=pa()(e,t.version);e.RTCPeerConnection=function(e){return e&&e.iceServers&&(e.iceServers=function(e,t){let r=!1;return(e=JSON.parse(JSON.stringify(e))).filter(e=>{if(e&&(e.urls||e.url)){let t=e.urls||e.url;e.url&&!e.urls&&Yi("RTCIceServer.url","RTCIceServer.urls");const n="string"==typeof t;return n&&(t=[t]),t=t.filter(e=>{if(0===e.indexOf("stun:"))return!1;const t=e.startsWith("turn")&&!e.startsWith("turn:[")&&e.includes("transport=udp");return t&&!r?(r=!0,!0):t&&!r}),delete e.url,e.urls=n?t[0]:t,!!t.length}})}(e.iceServers,t.version),zi("ICE servers after filtering:",e.iceServers)),new r(e)},e.RTCPeerConnection.prototype=r.prototype}function ma(e){e.RTCRtpSender&&!("replaceTrack"in e.RTCRtpSender.prototype)&&(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}function va(e,t){const r=e&&e.navigator,n=e&&e.MediaStreamTrack;if(r.getUserMedia=function(e,t,n){Yi("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),r.mediaDevices.getUserMedia(e).then(t,n)},!(t.version>55&&"autoGainControl"in r.mediaDevices.getSupportedConstraints())){const e=function(e,t,r){t in e&&!(r in e)&&(e[r]=e[t],delete e[t])},t=r.mediaDevices.getUserMedia.bind(r.mediaDevices);if(r.mediaDevices.getUserMedia=function(r){return"object"==typeof r&&"object"==typeof r.audio&&(r=JSON.parse(JSON.stringify(r)),e(r.audio,"autoGainControl","mozAutoGainControl"),e(r.audio,"noiseSuppression","mozNoiseSuppression")),t(r)},n&&n.prototype.getSettings){const t=n.prototype.getSettings;n.prototype.getSettings=function(){const r=t.apply(this,arguments);return e(r,"mozAutoGainControl","autoGainControl"),e(r,"mozNoiseSuppression","noiseSuppression"),r}}if(n&&n.prototype.applyConstraints){const t=n.prototype.applyConstraints;n.prototype.applyConstraints=function(r){return"audio"===this.kind&&"object"==typeof r&&(r=JSON.parse(JSON.stringify(r)),e(r,"autoGainControl","mozAutoGainControl"),e(r,"noiseSuppression","mozNoiseSuppression")),t.apply(this,[r])}}}}function ga(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(r){if(!r||!r.video){const e=new DOMException("getDisplayMedia without video constraints is undefined");return e.name="NotFoundError",e.code=8,Promise.reject(e)}return!0===r.video?r.video={mediaSource:t}:r.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(r)})}function ya(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function _a(e,t){if("object"!=typeof e||!e.RTCPeerConnection&&!e.mozRTCPeerConnection)return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const r=e.RTCPeerConnection.prototype[t],n={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=n[t]}));const r={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},n=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,o,i]=arguments;return n.apply(this,[e||null]).then(e=>{if(t.version<53&&!o)try{e.forEach(e=>{e.type=r[e.type]||e.type})}catch(t){if("TypeError"!==t.name)throw t;e.forEach((t,n)=>{e.set(n,Object.assign({},t,{type:r[t.type]||t.type}))})}return e}).then(o,i)}}function Ea(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e});const r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=r.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function Sa(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e}),Wi(e,"track",e=>(e.receiver._pc=e.srcElement,e)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function ba(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){Yi("removeStream","removeTrack"),this.getSenders().forEach(t=>{t.track&&e.getTracks().includes(t.track)&&this.removeTrack(t)})})}function Ta(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function Ra(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const e=arguments[1],r=e&&"sendEncodings"in e;r&&e.sendEncodings.forEach(e=>{if("rid"in e){if(!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.")}if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const n=t.apply(this,arguments);if(r){const{sender:t}=n,r=t.getParameters();(!("encodings"in r)||1===r.encodings.length&&0===Object.keys(r.encodings[0]).length)&&(r.encodings=e.sendEncodings,t.sendEncodings=e.sendEncodings,this.setParametersPromises.push(t.setParameters(r).then(()=>{delete t.sendEncodings}).catch(()=>{delete t.sendEncodings})))}return n})}function Ca(e){if("object"!=typeof e||!e.RTCRtpSender)return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}function Oa(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function wa(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function Aa(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach(r=>t.call(this,r,e)),e.getVideoTracks().forEach(r=>t.call(this,r,e))},e.RTCPeerConnection.prototype.addTrack=function(e,...r){return r&&r.forEach(e=>{this._localStreams?this._localStreams.includes(e)||this._localStreams.push(e):this._localStreams=[e]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);const t=this._localStreams.indexOf(e);if(-1===t)return;this._localStreams.splice(t,1);const r=e.getTracks();this.getSenders().forEach(e=>{r.includes(e.track)&&this.removeTrack(e)})})}}function Ia(e){if("object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(e){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=e=>{e.streams.forEach(e=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(e))return;this._remoteStreams.push(e);const t=new Event("addstream");t.stream=e,this.dispatchEvent(t)})})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach(t=>{if(e._remoteStreams||(e._remoteStreams=[]),e._remoteStreams.indexOf(t)>=0)return;e._remoteStreams.push(t);const r=new Event("addstream");r.stream=t,e.dispatchEvent(r)})}),t.apply(e,arguments)}}}function xa(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,r=t.createOffer,n=t.createAnswer,o=t.setLocalDescription,i=t.setRemoteDescription,a=t.addIceCandidate;t.createOffer=function(e,t){const n=arguments.length>=2?arguments[2]:arguments[0],o=r.apply(this,[n]);return t?(o.then(e,t),Promise.resolve()):o},t.createAnswer=function(e,t){const r=arguments.length>=2?arguments[2]:arguments[0],o=n.apply(this,[r]);return t?(o.then(e,t),Promise.resolve()):o};let s=function(e,t,r){const n=o.apply(this,[e]);return r?(n.then(t,r),Promise.resolve()):n};t.setLocalDescription=s,s=function(e,t,r){const n=i.apply(this,[e]);return r?(n.then(t,r),Promise.resolve()):n},t.setRemoteDescription=s,s=function(e,t,r){const n=a.apply(this,[e]);return r?(n.then(t,r),Promise.resolve()):n},t.addIceCandidate=s}function ka(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const e=t.mediaDevices,r=e.getUserMedia.bind(e);t.mediaDevices.getUserMedia=e=>r(Pa(e))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,r,n){t.mediaDevices.getUserMedia(e).then(r,n)}.bind(t))}function Pa(e){return e&&void 0!==e.video?Object.assign({},e,{video:Ji(e.video)}):e}function Na(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,r){if(e&&e.iceServers){const t=[];for(let r=0;r<e.iceServers.length;r++){let n=e.iceServers[r];!n.hasOwnProperty("urls")&&n.hasOwnProperty("url")?(Yi("RTCIceServer.url","RTCIceServer.urls"),n=JSON.parse(JSON.stringify(n)),n.urls=n.url,delete n.url,t.push(n)):t.push(e.iceServers[r])}e.iceServers=t}return new t(e,r)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:()=>t.generateCertificate})}function Da(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function ja(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);const t=this.getTransceivers().find(e=>"audio"===e.receiver.track.kind);!1===e.offerToReceiveAudio&&t?"sendrecv"===t.direction?t.setDirection?t.setDirection("sendonly"):t.direction="sendonly":"recvonly"===t.direction&&(t.setDirection?t.setDirection("inactive"):t.direction="inactive"):!0!==e.offerToReceiveAudio||t||this.addTransceiver("audio"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);const r=this.getTransceivers().find(e=>"video"===e.receiver.track.kind);!1===e.offerToReceiveVideo&&r?"sendrecv"===r.direction?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":"recvonly"===r.direction&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):!0!==e.offerToReceiveVideo||r||this.addTransceiver("video")}return t.apply(this,arguments)}}function Ma(e){"object"!=typeof e||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var La=r("./node_modules/sdp/sdp.js"),Ua=r.n(La);function Va(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"==typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){const r=new t(e),n=Ua.a.parseCandidate(e.candidate),o=Object.assign(r,n);return o.toJSON=function(){return{candidate:o.candidate,sdpMid:o.sdpMid,sdpMLineIndex:o.sdpMLineIndex,usernameFragment:o.usernameFragment}},o}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,Wi(e,"icecandidate",t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t))}function Fa(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return void 0===this._sctp?null:this._sctp}});const r=function(e){if(!e||!e.sdp)return!1;const t=Ua.a.splitSections(e.sdp);return t.shift(),t.some(e=>{const t=Ua.a.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")})},n=function(e){const t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;const r=parseInt(t[1],10);return r!=r?-1:r},o=function(e){let r=65536;return"firefox"===t.browser&&(r=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),r},i=function(e,r){let n=65536;"firefox"===t.browser&&57===t.version&&(n=65535);const o=Ua.a.matchPrefix(e.sdp,"a=max-message-size:");return o.length>0?n=parseInt(o[0].substr(19),10):"firefox"===t.browser&&-1!==r&&(n=2147483637),n},a=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){const{sdpSemantics:e}=this.getConfiguration();"plan-b"===e&&Object.defineProperty(this,"sctp",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(r(arguments[0])){const e=n(arguments[0]),t=o(e),r=i(arguments[0],e);let a;a=0===t&&0===r?Number.POSITIVE_INFINITY:0===t||0===r?Math.max(t,r):Math.min(t,r);const s={};Object.defineProperty(s,"maxMessageSize",{get:()=>a}),this._sctp=s}return a.apply(this,arguments)}}function Ga(e){if(!e.RTCPeerConnection||!("createDataChannel"in e.RTCPeerConnection.prototype))return;function t(e,t){const r=e.send;e.send=function(){const n=arguments[0],o=n.length||n.size||n.byteLength;if("open"===e.readyState&&t.sctp&&o>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return r.apply(e,arguments)}}const r=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const e=r.apply(this,arguments);return t(e,this),e},Wi(e,"datachannel",e=>(t(e.channel,e.target),e))}function Ba(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(e=>{const r=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=e=>{const t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;const r=new Event("connectionstatechange",e);t.dispatchEvent(r)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function Ha(e,t){if(!e.RTCPeerConnection)return;if("chrome"===t.browser&&t.version>=71)return;if("safari"===t.browser&&t.version>=605)return;const r=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){const r=t.sdp.split("\n").filter(e=>"a=extmap-allow-mixed"!==e.trim()).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:r}):t.sdp=r}return r.apply(this,arguments)}}function Wa(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const r=e.RTCPeerConnection.prototype.addIceCandidate;r&&0!==r.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():r.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}var qa=function({window:e}={},t={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0}){const r=zi,c=function(e){const t={browser:null,version:null};if(void 0===e||!e.navigator)return t.browser="Not a browser.",t;const{navigator:r}=e;if(r.mozGetUserMedia)t.browser="firefox",t.version=Hi(r.userAgent,/Firefox\/(\d+)\./,1);else if(r.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)t.browser="chrome",t.version=Hi(r.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(r.mediaDevices&&r.userAgent.match(/Edge\/(\d+).(\d+)$/))t.browser="edge",t.version=Hi(r.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!r.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=Hi(r.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}(e),u={browserDetails:c,commonShim:s,extractVersion:Hi,disableLog:qi,disableWarnings:Ki};switch(c.browser){case"chrome":if(!n||!ca||!t.shimChrome)return r("Chrome shim is not included in this adapter release."),u;if(null===c.version)return r("Chrome shim can not determine version, not shimming."),u;r("adapter.js shimming chrome."),u.browserShim=n,Wa(e,c),Zi(e,c),ta(e),ca(e,c),ra(e),sa(e,c),na(e),oa(e),ia(e),ua(e,c),Va(e),Ba(e),Fa(e,c),Ga(e),Ha(e,c);break;case"firefox":if(!i||!_a||!t.shimFirefox)return r("Firefox shim is not included in this adapter release."),u;r("adapter.js shimming firefox."),u.browserShim=i,Wa(e,c),va(e,c),_a(e,c),ya(e),ba(e),Ea(e),Sa(e),Ta(e),Ra(e),Ca(e),Oa(e),wa(e),Va(e),Ba(e),Fa(e,c),Ga(e);break;case"edge":if(!o||!ha||!t.shimEdge)return r("MS edge shim is not included in this adapter release."),u;r("adapter.js shimming edge."),u.browserShim=o,la(e),fa(e),ha(e,c),ma(e),Fa(e,c),Ga(e);break;case"safari":if(!a||!t.shimSafari)return r("Safari shim is not included in this adapter release."),u;r("adapter.js shimming safari."),u.browserShim=a,Wa(e,c),Na(e),ja(e),xa(e),Aa(e),Ia(e),Da(e),ka(e),Ma(e),Va(e),Fa(e,c),Ga(e),Ha(e,c);break;default:r("Unsupported browser!")}return u}({window:"undefined"==typeof window?void 0:window});function Ka(e){return e?(e<1e3?t="bps":e<1e6?(t="kbps",e/=1e3):(t="Mbps",e/=1e6),e.toPrecision(3)+" "+t):"- bps";var t}function za(e){return e/2>=500?1:e/2>=400?2:e/2>=300?3:e/2>=200?4:5}function Ya(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Qa(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ya(Object(r),!0).forEach((function(t){Ja(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ya(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ja(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $a(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function Xa(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){$a(i,n,o,a,s,"next",e)}function s(e){$a(i,n,o,a,s,"throw",e)}a(void 0)}))}}function Za(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function es(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ts=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Za(this,e),this.stream=t,this.isLocal=r,this.isScreen=n,this._prevRawStats={},this._rawStats={},this._stats={},this.getters={}}var t,r,n,o,i,a;return t=e,(r=[{key:"reportToObject",value:function(e){if(!e.entries)return e;var t={};return e.forEach((function(e,r){t[r]=e})),t}},{key:"getNewStats",value:(a=Xa(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.stream&&this.stream.pc){e.next=2;break}throw new Error("invalid stream");case 2:return e.next=4,this.stream.pc.peerConnection.getStats(null);case 4:return t=e.sent,e.abrupt("return",t);case 6:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"getStats",value:(i=Xa(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._prevRawStats=this._rawStats,e.t0=this,e.next=4,this.getNewStats();case 4:return e.t1=e.sent,t=e.t0.parseStats.call(e.t0,e.t1),this.isLocal?this._rawStats=this.flattenLocalStats(t):this._rawStats=this.flattenRemoteStats(t),this._prevStats=this._stats,this._stats=this.getFormattedStats(this._rawStats,this._prevRawStats),this.onStats&&"function"==typeof this.onStats&&this.onStats(this._prevStats,this._stats),e.abrupt("return",{prevStats:this._prevStats,stats:this._stats});case 11:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"parseStats",value:function(e){var t={audio:[],video:[],media:{video:{},audio:{}},connection:{},candidates:{local:[],remote:[]}},r=this.isLocal?"outbound":"inbound";return e.forEach((function(n){switch(n.type){case"media-source":t.media[n.kind]=n;break;case"".concat(r,"-rtp"):var o={},i=n.mediaType||n.kind,a={};if(!["audio","video"].includes(i))if(n.id.includes("Video"))i="video";else{if(!n.id.includes("Audio"))return;i="audio"}if(n.remoteId?o=e.get(n.remoteId):n.trackId&&(o=e.get(n.trackId)),n.codecId){var s=e.get(n.codecId);s&&(a.clockRate=s.clockRate,a.mimeType=s.mimeType,a.payloadType=s.payloadType)}if(!t.connection.id&&n.transportId){var c=e.get(n.transportId);if(c&&c.selectedCandidatePairId){var u=e.get(c.selectedCandidatePairId);t.connection=function(e,t){if(!e||!t)return{};var r=Qa({},e);if(r.localCandidateId){var n=t.get(r.localCandidateId);r.local=Qa({},n)}if(r.remoteCandidateId){var o=t.get(r.remoteCandidateId);r.remote=Qa({},o)}return r}(u,e)}}t[i].push(Qa(Qa(Qa({},n),o),a));break;case"ice-server":t.iceServer=n;break;case"remote-candidate":t.candidates.remote.push(n);break;case"local-candidate":t.candidates.local.push(n)}})),t}},{key:"flattenRemoteStats",value:function(e){return{audio:e.audio.length>0?e.audio[0]:{},video:e.video.length>0?e.video[0]:{},connection:e.connection,candidates:e.candidates}}},{key:"flattenLocalStats",value:function(e){var t,r="";if(this._prevRawStats.fec||this._prevRawStats.bwEstimation)t=this._prevRawStats.fec,r=this._prevRawStats.bwEstimation;else{var n=g()(this.stream,"pc.peerConnection.currentRemoteDescription.sdp","");n&&(t=n.includes("ulpfec"),r=n.includes("transport-cc")?"TRANSPORT-CC":"REMB")}var o={audio:e.audio.length>0?e.audio[0]:{},video:os(e.video),connection:e.connection,media:e.media,candidates:e.candidates};return t&&(o.fec=t),r&&(o.bwEstimation=r),o}},{key:"getVResolution",value:function(e){var t={raw:{height:0,width:0,fps:0},formatted:""};return this.isLocal?(t.raw.height=g()(e,"media.video.height",0),t.raw.width=g()(e,"media.video.width",0),t.raw.fps=g()(e,"media.video.framesPerSecond",0),t.formatted="".concat(g()(e,"media.video.height",0),"p").concat(g()(e,"media.video.framesPerSecond",0)),t):(t.raw.height=g()(e,"video.frameHeight",0),t.raw.width=g()(e,"video.frameWidth",0),t.raw.fps=g()(e,"video.framesPerSecond",0),t.formatted="".concat(g()(e,"video.frameHeight",0),"p").concat(g()(e,"video.framesPerSecond",0)),t)}},{key:"getCandidateType",value:function(e){return"srflx"===e?"STUN":"relay"===e?"TURN":"none"}},{key:"getFormattedStats",value:function(e,t){var r,n,o=this.isScreen?m.StatNames.SCREEN_RES:m.StatNames.VIDEO_RES,i=this.isScreen?m.StatNames.SCREEN_BW:m.StatNames.VIDEO_BW,a=this.isLocal?"bytesSent":"bytesReceived",s=this.isLocal?"packetsSent":"packetsReceived",c=ns(e.video,t.video,s),u=this.getVResolution(e),d=g()(e,"connection.local.candidateType"),p=(Ja(r={},m.StatNames.RTT,{raw:1e3*e.video.roundTripTime,formatted:(n=1e3*e.video.roundTripTime,n||0===n?parseFloat(n).toFixed(0)+" ms":"")}),Ja(r,m.StatNames.QOE,{raw:za(1e3*e.video.roundTripTime),formatted:za(1e3*e.video.roundTripTime)}),Ja(r,m.StatNames.STUN_TURN,{raw:d,formatted:this.getCandidateType(d)}),Ja(r,m.StatNames.PROTOCOL,{raw:"",formatted:g()(e,"connection.local.protocol","")}),Ja(r,"stats-packets-lost",{raw:e.video.packetsLost,formatted:e.video.packetsLost}),Ja(r,m.StatNames.PACKET_LOSS_RATE,{raw:c,formatted:this.formatPercent(c)}),Ja(r,m.StatNames.SIM_LAYERS,{formatted:this.stream.simulcastLayers,raw:this.stream.simulcastLayers}),Ja(r,"stats-video-delay",{raw:0,formatted:0}),Ja(r,o,{raw:u.raw,formatted:u.formatted}),Ja(r,m.StatNames.VIDEO_CODEC,{raw:rs(e.video),formatted:rs(e.video)}),Ja(r,"stats-audio-delay",{raw:0,formatted:0}),Ja(r,m.StatNames.AUDIO_CODEC,{raw:rs(e.audio),formatted:rs(e.audio)}),Ja(r,m.StatNames.FEC,{raw:e.fec,formatted:e.fec?"on":"off"}),Ja(r,m.StatNames.BW_ESTIMATION,{raw:e.bwEstimation,formatted:e.bwEstimation}),r),l=is(e.audio,t.audio,a),f=is(e.video,t.video,a);return 0!==l&&(p[m.StatNames.AUDIO_BW]={raw:l,formatted:Ka(l)}),0!==f&&(p[i]={raw:f,formatted:Ka(f)}),p}},{key:"initStats",value:(o=Xa(regeneratorRuntime.mark((function e(){var t,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getNewStats();case 2:return t=e.sent,e.abrupt("return",new Promise((function(e){setTimeout((function(){r._prevRawStats=t,e(!0)}),500)})));case 4:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"formatField",value:function(e){return"number"==typeof e&&Number.isNaN(e)||void 0===e?"N/A":e}},{key:"formatPercent",value:function(e){return Number.isNaN(e)&&(e=0),"".concat((e*=100).toPrecision(3),"%")}}])&&es(t.prototype,r),n&&es(t,n),e}(),rs=function(e){return(e.mimeType||"").split("/")[1]||"N/A"},ns=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,n=g()(e,r,0),o=g()(t,r,0),i=e.packetsLost,a=t.packetsLost,s=(i-a)/(n-o);return s<0?0:s},os=function(e){return 0===e.length?{}:1===e.length?e[0]:e.reduce((function(e,t){var r=e.frameWidth*e.frameHeight;return t.frameWidth*t.frameHeight>r?t:e}),{frameWidth:0,frameHeight:0})};function is(e,t,r){return 8*function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,n=g()(e,r,null),o=g()(t,r,null),i=e.timestamp-t.timestamp;if(!n||!o||!i)return null;var a=(n-o)/i*1e3;return a}(e,t,r)}var as=ts;function ss(e){return(ss="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cs(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function us(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ds(e,t){return(ds=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ps(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=fs(e);if(t){var o=fs(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return ls(this,r)}}function ls(e,t){return!t||"object"!==ss(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fs(e){return(fs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var hs=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ds(e,t)}(i,e);var t,r,n,o=ps(i);function i(){return cs(this,i),o.apply(this,arguments)}return t=i,(r=[{key:"getVResolution",value:function(e){var t={raw:{height:0,width:0,fps:0},formatted:""};return t.raw.height=g()(e,"video.frameHeight",0),t.raw.width=g()(e,"video.frameWidth",0),t.raw.fps=g()(e,"video.framesPerSecond",0),t.formatted="".concat(g()(e,"video.frameHeight",0),"p").concat(g()(e,"video.framesPerSecond",0)),t}}])&&us(t.prototype,r),n&&us(t,n),i}(as);function ms(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var vs=regeneratorRuntime.mark(Ts),gs=regeneratorRuntime.mark(Rs);function ys(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function _s(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){ys(i,n,o,a,s,"next",e)}function s(e){ys(i,n,o,a,s,"throw",e)}a(void 0)}))}}var Es=qa.browserDetails&&"safari"===qa.browserDetails.browser?hs:as;function Ss(e){return bs.apply(this,arguments)}function bs(){return(bs=_s(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ss._instances||(Ss._instances={}),t){e.next=3;break}return e.abrupt("return",Promise.reject("stream is null"));case 3:if(r=Ss._instances[t.getID()]){e.next=8;break}Ss._instances[t.getID()]=new Es(t,t.local,t.hasScreen()),e.next=15;break;case 8:if(r.stream&&r.stream.pc){e.next=12;break}r.stream=t,e.next=15;break;case 12:if(r._prevRawStats){e.next=15;break}return e.next=15,r.initStats();case 15:if(n={prevStats:null,stats:{}},e.prev=16,!r){e.next=21;break}return e.next=20,r.getStats();case 20:n=e.sent;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(16),"invalid stream"!==e.t0.message&&console.error(e.t0);case 26:return e.abrupt("return",n);case 27:case"end":return e.stop()}}),e,null,[[16,23]])})))).apply(this,arguments)}function Ts(){var e,t,r,n,o,i,a,s,c,u,d,p,l,f,h,m,v,y,_,E,S,b;return regeneratorRuntime.wrap((function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,Se(Ot);case 2:return e=T.sent,T.next=5,Se(Ct);case 5:return t=T.sent,T.next=8,Se(bt);case 8:if(r=T.sent,n={},o=g()(r,"streams.mediaStreamId"),i=g()(r,"streams.screenStreamId"),n[r._id]=[],!o){T.next=35;break}if(a=r.streams.mediaStreamId,!(s=t[a])){T.next=32;break}return T.prev=17,T.next=20,Ss(s);case 20:return c=T.sent,u=c.stats,d=c.prevStats,n[r._id]=u,T.next=26,Rs(d,u);case 26:T.next=32;break;case 28:T.prev=28,T.t0=T.catch(17),console.error("# err",T.t0),n[r._id]={};case 32:return p=Os(n[r._id]),T.next=35,Yr(nr,p);case 35:if(!i){T.next=45;break}if(l=r.streams.screenStreamId,!(f=t[l])){T.next=45;break}return T.next=41,Ss(f).catch((function(e){return console.log("# err",e),{}}));case 41:h=T.sent,m=h.stats,v=m,Object.keys(v).length&&(n[r._id]=Object.assign({},v,m[r._id]));case 45:T.t1=regeneratorRuntime.keys(e);case 46:if((T.t2=T.t1()).done){T.next=65;break}if(y=T.t2.value,_=g()(e,"".concat(y,".streams.mediaStreamId")),!e.hasOwnProperty(y)||!_){T.next=63;break}if(E=t[_],S={},!E){T.next=62;break}return T.prev=53,T.next=56,Ss(E);case 56:b=T.sent,S=b.stats,T.next=62;break;case 60:T.prev=60,T.t3=T.catch(53);case 62:n[y]=S;case 63:T.next=46;break;case 65:return T.next=67,me(xo.roomStats(n));case 67:case"end":return T.stop()}}),vs,null,[[17,28],[53,60]])}function Rs(e,t){var r,n,o,i,a;return regeneratorRuntime.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(!e||!t){s.next=12;break}ms(r={},m.StatNames.PACKET_LOSS_RATE,{thresholds:[.02,.05,.1,.2,.3],evtName:"packetLossAlert"}),ms(r,m.StatNames.PACKETS_LOST,{thresholds:[100,500,1e3,1e4,1e5,1e6,1e7],evtName:"totalPacketLossAlert"}),ms(r,m.StatNames.RTT,{thresholds:[100,300,400,500],evtName:"rttAlert"}),n=r,s.t0=regeneratorRuntime.keys(n);case 3:if((s.t1=s.t0()).done){s.next=12;break}if(o=s.t1.value,i=n[o],!(a=Cs(g()(e,"".concat(o,".raw")),g()(t,"".concat(o,".raw")),i.thresholds)).alert){s.next=10;break}return s.next=10,me(xo.timelineAdd("qoe",i.evtName,{type:a.type,value:a.value}));case 10:s.next=3;break;case 12:case"end":return s.stop()}}),gs)}var Cs=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n={alert:!1,type:"down",value:t};if(!e||!t)return n;for(var o=0,i=0,a=0;a<r.length&&(o=a,!(r[a]>e));a++);for(var s=0;s<r.length&&(i=s,!(r[s]>t));s++);return o!==i&&(n.alert=!0),o<i&&(n.type="up"),n},Os=function(e){return{qoe:e[m.StatNames.QOE],videoResolution:e[m.StatNames.VIDEO_RES],bandwidth:e[m.StatNames.VIDEO_BW],audioCodec:e[m.StatNames.AUDIO_CODEC],videoCodec:e[m.StatNames.VIDEO_CODEC]}},ws="room-connected",As="stream-added",Is="stream-subscribed",xs="stream-removed",ks="room-error",Ps="room-disconnected",Ns=r("./middleware/libs/services/timeline/types.js"),Ds=r.n(Ns);function js(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ms(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?js(Object(r),!0).forEach((function(t){Ls(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):js(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ls(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Us(e){return function(e){if(Array.isArray(e))return Vs(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Vs(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Vs(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vs(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Fs=regeneratorRuntime.mark(wc),Gs=regeneratorRuntime.mark(Ac),Bs=regeneratorRuntime.mark(Ic),Hs=regeneratorRuntime.mark(xc),Ws=regeneratorRuntime.mark(kc),qs=regeneratorRuntime.mark(Pc),Ks=regeneratorRuntime.mark(Nc),zs=regeneratorRuntime.mark(Dc),Ys=regeneratorRuntime.mark(jc),Qs=regeneratorRuntime.mark(Mc),Js=regeneratorRuntime.mark(Lc),$s=regeneratorRuntime.mark(Uc),Xs=regeneratorRuntime.mark(Vc),Zs=regeneratorRuntime.mark(Fc),ec=regeneratorRuntime.mark(Gc),tc=regeneratorRuntime.mark(Bc),rc=regeneratorRuntime.mark(Hc),nc=regeneratorRuntime.mark(Wc),oc=regeneratorRuntime.mark(qc),ic=regeneratorRuntime.mark(Kc),ac=regeneratorRuntime.mark(zc),sc=regeneratorRuntime.mark(Yc),cc=regeneratorRuntime.mark(Qc),uc=regeneratorRuntime.mark(Jc),dc=regeneratorRuntime.mark($c),pc=regeneratorRuntime.mark(Xc),lc=regeneratorRuntime.mark(Zc),fc=regeneratorRuntime.mark(eu),hc=regeneratorRuntime.mark(tu),mc=regeneratorRuntime.mark(ru),vc=regeneratorRuntime.mark(nu),gc=regeneratorRuntime.mark(ou),yc=regeneratorRuntime.mark(iu),_c=regeneratorRuntime.mark(au),Ec=regeneratorRuntime.mark(su),Sc=regeneratorRuntime.mark(cu),bc=regeneratorRuntime.mark(uu),Tc=regeneratorRuntime.mark(du),Rc=regeneratorRuntime.mark(pu),Cc=regeneratorRuntime.mark(lu),Oc=function(e){var t;if(e){var r=e.optimized_layout_full_quality,n=e.optimized_layout_threshold;t=Object.assign({},pi.lectureLayouts.default.geometry,{optimized_layout_full_quality:isNaN(r)?1:parseInt(r),optimized_layout_threshold:isNaN(n)?1:parseInt(n)})}else t=Object.assign({},pi.lectureLayouts.default.geometry);return{optimizedLayoutFullQuality:t.optimized_layout_full_quality,optimizedLayoutThreshold:t.optimized_layout_threshold}};function wc(){var e,t,r,n,o,i,a,s;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Se(Ut);case 2:if(e=c.sent,t=e.room,r=e.lectureLayout,n=e.layoutMode,o=e.selectedForLecture,1,1,i=Object.assign({optimizedLayoutFullQuality:1,optimizedLayoutThreshold:1},Oc(t)),!t||t.roomType!==m.RoomTypes.EVENT){c.next=20;break}if(!r||n!==m.LayoutModes.MANUAL){c.next=15;break}return c.abrupt("return",{optimizedLayoutFullQuality:pi.lectureLayouts[r]?pi.lectureLayouts[r].geometry.optimized_layout_full_quality:i.optimizedLayoutFullQuality,optimizedLayoutThreshold:pi.lectureLayouts[r]?pi.lectureLayouts[r].geometry.optimized_layout_threshold:i.optimizedLayoutThreshold});case 15:return a=o.filter((function(e){return"stub"!==e})).length||1,s=o.includes("screenStream")?"".concat(a,"_1"):"".concat(a,"_0"),c.abrupt("return",{optimizedLayoutFullQuality:pi.lectureLayouts[s]?pi.lectureLayouts[s].geometry.optimized_layout_full_quality:8,optimizedLayoutThreshold:pi.lectureLayouts[s]?pi.lectureLayouts[s].geometry.optimized_layout_threshold:4});case 18:c.next=21;break;case 20:return c.abrupt("return",i);case 21:case"end":return c.stop()}}),Fs)}function Ac(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,wc();case 2:return e=t.sent,t.next=5,me(xo.updateLayoutGeometry(e));case 5:return t.next=7,me(xo.sendMeetingLayout());case 7:case"end":return t.stop()}}),Gs)}function Ic(){var e,t,r,n,o,i;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Se(Ft);case 2:return e=a.sent,t=e.lectureLayout,r=e.layoutMode,n=e.selectedForLecture,o=t,r===m.LayoutModes.AUTO&&(i=n.length,o=n.includes("screenStream")?"".concat(i,"_1"):"".concat(i,"_0")),a.next=10,Yr(Er,{lectureLayout:o,layoutMode:r,selectedForLecture:n});case 10:case"end":return a.stop()}}),Bs)}function xc(e){var t;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,r.next=3,Yr(Br,t);case 3:case"end":return r.stop()}}),Hs)}function kc(e){var t,r,n,o,i,a,s,c,u,d,p,l,f;return regeneratorRuntime.wrap((function(h){for(;;)switch(h.prev=h.next){case 0:return t=e.payload,h.next=3,Se(Vt);case 3:if(r=h.sent,n=r.selectedForLecture,o=r.room,i=r.layoutMode,TeeVidSdk.canModerate){h.next=9;break}return h.abrupt("return");case 9:if(a=t.tileId,s=t.participantId,c=n[a],u=n.indexOf(s),1!==n.filter((function(e){return"stub"!==e})).length||-1!==u||"stub"!==s){h.next=15;break}return h.abrupt("return");case 15:if(i!==m.LayoutModes.AUTO){h.next=28;break}if("stub"!==c){h.next=20;break}return h.abrupt("return");case 20:if("screenStream"!==c){h.next=23;break}h.next=28;break;case 23:if(c!==s){h.next=27;break}return h.abrupt("return");case 27:n.includes(s)||(n[a]=s);case 28:if(i!==m.LayoutModes.MANUAL){h.next=34;break}if(c!==s){h.next=33;break}return h.abrupt("return");case 33:n.includes(s)?(n[a]=s,n[u]=c):n[a]=s;case 34:return h.next=36,me(xo.updateLayoutParticipants(n));case 36:if(g()(o,"roomType")!==m.RoomTypes.EVENT){h.next=56;break}return h.next=39,Se(bt);case 39:return d=h.sent,h.next=42,Se(Gt,s);case 42:if(p=h.sent,l=g()(p,"status.devices",{audio:m.Mute.NO_DEVICE,video:m.Mute.NO_DEVICE}),f={},-1===[m.Mute.MUTED_BY_MODER,m.Mute.MUTED].indexOf(l.audio)){h.next=49;break}return h.next=48,me(xo.unmuteRequestSent(s,"audio"));case 48:f.audio=!0;case 49:if(-1===[m.Mute.MUTED_BY_MODER,m.Mute.MUTED].indexOf(l.video)){h.next=53;break}return h.next=52,me(xo.unmuteRequestSent(s,"video"));case 52:f.video=!0;case 53:if(!Object.keys(f).length){h.next=56;break}return h.next=56,Yr(wr,d._id,s,f);case 56:return h.next=58,me(xo.sendMeetingLayout());case 58:case"end":return h.stop()}}),Ws)}function Pc(e){var t;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload.selectedForLecture,r.next=3,me(xo.updatePanelLayoutParticipants(t));case 3:case"end":return r.stop()}}),qs)}function Nc(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(gt.SDK_MEETING_REMOVE_FROM_SPOTLIGHT,Mc);case 2:return e.next=4,Ie(gt.SDK_MEETING_ADD_TO_SPOTLIGHT,jc);case 4:return e.next=6,Ie(gt.SDK__SET_SPOTLIGHT_STREAMS,Dc);case 6:case"end":return e.stop()}}),Ks)}function Dc(e){var t;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(t=e.payload.selectedForLecture)){r.next=4;break}return r.next=4,me(xo.updatePanelLayoutParticipants(t));case 4:return void(r.next=6);case 6:case"end":return r.stop()}}),zs)}function jc(e){var t,r,n,o;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload.participantId,i.next=3,Se(Vt);case 3:if(4!==(r=i.sent).selectedForLecture.length){i.next=8;break}return void(i.next=7);case 7:return i.abrupt("return",i.sent);case 8:return n=Us(r.selectedForLecture),r.selectedForLecture.length?n=new Set([].concat(Us(r.selectedForLecture),[t])):(o=r.lecturerId,n=new Set([o,t])),i.next=12,Yr(Lr,Us(n));case 12:case"end":return i.stop()}}),Ys)}function Mc(e){var t,r,n;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload.participantId,o.next=3,Se(Vt);case 3:if(!(r=o.sent).selectedForLecture.includes(t)){o.next=9;break}return(n=new Set(r.selectedForLecture)).delete(t),o.next=9,Yr(Lr,Us(n));case 9:return void(o.next=11);case 11:case"end":return o.stop()}}),Qs)}function Lc(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(gt.SDK_MEETING_STB_SHARE,Vc);case 2:return e.next=4,Ie(gt.SDK__STB_SHARE,Uc);case 4:case"end":return e.stop()}}),Js)}function Uc(e){var t,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(t=e.payload.storyboardId)){n.next=10;break}return n.next=4,Se(Lt);case 4:if(!(r=n.sent).storyboard||r.storyboard._id===t||0===r.slidenumber){n.next=8;break}return n.next=8,me(xo.setSlideNumber(0));case 8:return n.next=10,me(qt.storyboardFetch(t));case 10:return void(n.next=12);case 12:case"end":return n.stop()}}),$s)}function Vc(e){var t,r,n;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,r=t.storyboardId,n=t.lecturerId,o.next=3,Yr(Mr,r,n);case 3:case"end":return o.stop()}}),Xs)}function Fc(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,wc();case 2:return e=t.sent,t.next=5,me(xo.updateLayoutGeometry(e));case 5:case"end":return t.stop()}}),Zs)}function Gc(e){var t;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload.number,r.next=3,Yr(_r,t);case 3:case"end":return r.stop()}}),ec)}function Bc(e){var t;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,r.next=3,Yr(er,t);case 3:case"end":return r.stop()}}),tc)}function Hc(e){var t;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,r.next=3,Yr(tr,t);case 3:case"end":return r.stop()}}),rc)}function Wc(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xe(gt.SET_LECTURE_LAYOUT,Ac);case 2:return e.next=4,xe(gt.MEETING_LAYOUT_MODE,Ac);case 4:return e.next=6,xe(gt.SDK_JOIN_ACCEPTED,Ac);case 6:return e.next=8,xe(gt.SDK_MEETING_SET_ACTIVE_SLOT,Bc);case 8:return e.next=10,xe(gt.SDK_MEETING_SET_SHARED_STREAM_SLOT,Hc);case 10:return e.next=12,xe(gt.MEETING_CHANGE_LAYOUT,Fc);case 12:return e.next=14,xe(gt.CREATE_PARTICIPANT_SUCCESS,Fc);case 14:return e.next=16,xe(gt.SDK_MEETING_SHARE_EVENT_LAYOUT,xc);case 16:return e.next=18,xe(gt.SELECT_FOR_LECTURE,kc);case 18:return e.next=20,xe(gt.SELECT_FOR_PANEL_MODE,Pc);case 20:return e.next=22,xe(gt.MEETING_SEND_LAYOUT,Ic);case 22:return e.next=24,xe(gt.MEETING_SLIDE_NUMBER,Gc);case 24:case"end":return e.stop()}}),nc)}function qc(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(gt.MUTE_ALL,regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.state,e.next=3,Se(bt);case 3:if(!e.sent){e.next=16;break}return e.next=7,Se(Rt);case 7:return n=e.sent,r.hasOwnProperty("audio")&&(n.audio=r.audio),r.hasOwnProperty("video")&&(n.video=r.video),e.next=12,me(xo.setMuteState(n));case 12:return e.next=14,me(xo.muteStream());case 14:return e.next=16,Yr(fr,n);case 16:case"end":return e.stop()}}),e)})));case 2:return e.next=4,Ie(gt.MUTE_AUDIO,regeneratorRuntime.mark((function e(t){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.state,e.next=3,Se(Rt);case 3:return n=e.sent,o="number"==typeof r?Object.assign({},n,{audio:r}):Object.assign({},n,r),e.next=7,me(xo.mute(o));case 7:case"end":return e.stop()}}),e)})));case 4:return e.next=6,Ie(gt.MUTE_VIDEO,regeneratorRuntime.mark((function e(t){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.state,e.next=3,Se(Rt);case 3:return n=e.sent,o="number"==typeof r?Object.assign({},n,{video:r}):Object.assign({},n,r),e.next=7,me(xo.mute(o));case 7:case"end":return e.stop()}}),e)})));case 6:return e.next=8,Ie(gt.REMOTE_MUTE,regeneratorRuntime.mark((function e(t){var r,n,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.participantId,n=t.devices,e.next=3,Se(bt);case 3:if(o=e.sent,!(n.hasOwnProperty("audio")&&n.audio!==m.Mute.UNMUTED||n.hasOwnProperty("video")&&n.video!==m.Mute.UNMUTED)){e.next=9;break}return e.next=7,Yr(lr,o._id,r,n);case 7:e.next=15;break;case 9:if(!(n.hasOwnProperty("audio")&&n.audio===m.Mute.UNMUTED||n.hasOwnProperty("video")&&n.video===m.Mute.UNMUTED)){e.next=15;break}return i=[Yr(wr,o._id,r,n)],n.hasOwnProperty("audio")&&i.push(me(xo.unmuteRequestSent(r,"audio"))),n.hasOwnProperty("video")&&i.push(me(xo.unmuteRequestSent(r,"video"))),e.next=15,ve(i);case 15:case"end":return e.stop()}}),e)})));case 8:return e.next=10,Ie(gt.UNMUTE_RESPONSE,regeneratorRuntime.mark((function e(t){var r,n,o,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,n=r.device,o=r.senderId,e.next=3,Se(bt);case 3:return i=e.sent,a=i.status.devices,n.hasOwnProperty(yt)&&n[yt]&&(a.audio=m.Mute.UNMUTED),n.hasOwnProperty(_t)&&n[_t]&&(a.video=m.Mute.UNMUTED),e.next=9,me(xo.mute(a));case 9:return e.next=11,Yr(Ir,o,i._id,n);case 11:case"end":return e.stop()}}),e)})));case 10:case"end":return e.stop()}}),oc)}function Kc(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xe(gt.MUTE_STREAM,regeneratorRuntime.mark((function e(){var t,r,n,o,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se(bt);case 2:if(!(t=e.sent)){e.next=18;break}if(r=TeeVidSdk.localStream,n=tn(t),!r){e.next=10;break}try{o=rn(t),i=nn(t),r.hasAudio()&&r.muteAudio(o),r.hasVideo()&&r.stream&&r.stream.getVideoTracks().forEach((function(e){e.enabled=!i}))}catch(e){console.warn(e)}e.next=18;break;case 10:if(r||n){e.next=18;break}return e.next=13,Se((function(e){return e.teevid.meeting}));case 13:if(a=e.sent,a.connectionState===m.ConnectionStates.CONNECTING){e.next=18;break}return e.next=18,me(xo.createLocalStream());case 18:case"end":return e.stop()}}),e)})));case 2:case"end":return e.stop()}}),ic)}function zc(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(gt.SEND_MESSAGE,regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=t.payload)){e.next=4;break}return e.next=4,Yr(Sr,r);case 4:case"end":return e.stop()}}),e)})));case 2:return e.next=4,Ie(gt.SEND_MESSAGE_TO_VIEWERS,regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=t.payload)){e.next=4;break}return e.next=4,Yr(br,r);case 4:case"end":return e.stop()}}),e)})));case 4:case"end":return e.stop()}}),ac)}function Yc(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(gt.SEND_TRANSCRIPT,regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=t.payload)){e.next=4;break}return e.next=4,Yr(Tr,r);case 4:case"end":return e.stop()}}),e)})));case 2:case"end":return e.stop()}}),sc)}function Qc(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(gt.SHARE_TRANSCRIPT,regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=t.payload)){e.next=4;break}return e.next=4,Yr(Rr,r);case 4:case"end":return e.stop()}}),e)})));case 2:case"end":return e.stop()}}),cc)}function Jc(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(gt.BFM_ON_PAUSE,regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,e.next=3,Yr(Dr,r);case 3:case"end":return e.stop()}}),e)})));case 2:case"end":return e.stop()}}),uc)}function $c(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(gt.TURN_ON_SUBTITLES,regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=t.payload)){e.next=4;break}return e.next=4,Yr(Cr,r);case 4:case"end":return e.stop()}}),e)})));case 2:case"end":return e.stop()}}),dc)}function Xc(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(gt.STATUS_UPDATE,regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=t.payload)){e.next=4;break}return e.next=4,Yr(yr,r);case 4:case"end":return e.stop()}}),e)})));case 2:case"end":return e.stop()}}),pc)}function Zc(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(l.LOGIN_SUCCESS,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se(Mt);case 2:return t=e.sent,e.next=5,Yr(Ar,t.token);case 5:case"end":return e.stop()}}),e)})));case 2:return e.next=4,Ie(l.LOGOUT,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yr(Ar,null);case 2:case"end":return e.stop()}}),e)})));case 4:return e.next=6,Ie(gt.SET_OWNER_PIN,regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.pin,e.next=3,Yr(dr,r);case 3:case"end":return e.stop()}}),e)})));case 6:return e.next=8,Ie(gt.PARTICIPANT_NAME_CHANGED,regeneratorRuntime.mark((function e(t){var r,n,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,n=r.participantId,o=r.name,e.next=3,Se(bt);case 3:if(i=e.sent,!n||i._id!==n){e.next=7;break}return e.next=7,Yr(pr,n,o);case 7:case"end":return e.stop()}}),e)})));case 8:return e.next=10,Ie(gt.KICK_PARTICIPANT,regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.roomId,n=t.participantId,e.next=3,Yr(ar,r,n);case 3:case"end":return e.stop()}}),e)})));case 10:case"end":return e.stop()}}),lc)}function eu(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(gt.SDK_SET_LOCAL_STREAM,regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=t.payload)){e.next=10;break}return e.next=4,me(xo.muteStream());case 4:return e.next=6,Yr(cr,r.getID());case 6:return e.next=8,tu(r);case 8:e.next=12;break;case 10:return e.next=12,Yr(cr,null);case 12:case"end":return e.stop()}}),e)})));case 2:case"end":return e.stop()}}),fc)}function tu(e){var t,r,n,o,i,a;return regeneratorRuntime.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(!e){s.next=23;break}return t={},s.prev=2,r=new as(e,!0,!1),s.next=6,r.initStats();case 6:return s.next=8,r.getStats();case 8:n=s.sent,o=n.stats,i=r._rawStats,a=g()(e,"pc.peerConnection.currentRemoteDescription.sdp",""),t={audioCodec:o["stats-audio-codec"].formatted,videoCodec:o["stats-video-codec"].formatted,simulcastLayers:o["stats-simulcast-layers"].formatted,connection:{connectionProtocol:o["stats-protocol"].formatted,iceServers:o["stats-stun-turn"].formatted,ip:g()(i,"connection.local.ip",""),networkType:g()(i,"connection.local.networkType",""),port:g()(i,"connection.local.port",""),candidateType:g()(i,"connection.local.candidateType","")},iceCandidates:Ms({},i.candidates),sdp:{offer:g()(e,"pc.peerConnection.currentLocalDescription.sdp",""),answer:a}},s.next=19;break;case 15:return s.prev=15,s.t0=s.catch(2),s.next=19,me(xo.timelineAdd("debug","uiError",s.t0));case 19:return s.prev=19,s.next=22,me(xo.timelineAdd("debug","mediaPublished",t));case 22:return s.finish(19);case 23:case"end":return s.stop()}}),hc,null,[[2,15,19,23]])}function ru(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(gt.RAISE_HAND_REQ,regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,e.next=3,Yr(hr,!!r);case 3:case"end":return e.stop()}}),e)})));case 2:case"end":return e.stop()}}),mc)}function nu(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(gt.RAISE_HAND_RES,regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=t.payload).accepted){e.next=9;break}return e.next=4,Se(bt);case 4:return n=e.sent,e.next=7,ve([Yr(vr,r.id),Yr(lr,n._id,r.id,{audio:m.Mute.UNMUTED,video:m.Mute.UNMUTED})]);case 7:e.next=11;break;case 9:return e.next=11,Yr(mr,r.id);case 11:case"end":return e.stop()}}),e)})));case 2:case"end":return e.stop()}}),vc)}function ou(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(gt.SCREEN_SHARE_STARTED,regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=t.payload)){e.next=4;break}return e.next=4,me(xo.muteStream());case 4:return e.next=6,Yr(ur,r);case 6:case"end":return e.stop()}}),e)})));case 2:case"end":return e.stop()}}),gc)}function iu(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(gt.SEND_SIP_STATE,au);case 2:case"end":return e.stop()}}),yc)}function au(e){var t,r,n,o,i;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,r=t.sipUri,n=t.room,o=t.state,i=t.isEncrypted,a.next=3,me(xo.setSipState({sipUri:r,room:n,state:o}));case 3:return a.next=5,Yr(or,r,n,o,i);case 5:case"end":return a.stop()}}),_c)}function su(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(gt.PARTICIPANT_AVATAR_GET,regeneratorRuntime.mark((function e(t){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.participantId,e.next=3,Se(Bt,r);case 3:if(!((n=e.sent)&&g()(n,"player.video.videoWidth")&&g()(n,"player.video.videoHeight"))){e.next=11;break}return e.next=7,Zr(n);case 7:if(!(o=e.sent)){e.next=11;break}return e.next=11,me(xo.setAvatar(r,o));case 11:case"end":return e.stop()}}),e)})));case 2:case"end":return e.stop()}}),Ec)}function cu(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ie(e,regeneratorRuntime.mark((function e(t){var r,n,o,i,a,s,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&"web"===t.type){e.next=3;break}return TeeVidSdk.log.error("Missing or malformed message",t),e.abrupt("return");case 3:r=xo.noop(),n=g()(t,"data.params",{}),e.t0=t.data.method,e.next=e.t0===Kt.ServerMethods.S_PERSON_VERIFICATION_OK?8:e.t0===Kt.ServerMethods.S_INIT_DATA?10:e.t0===Kt.ServerMethods.S_RES_JOIN_ACCEPED?12:e.t0===Kt.ServerMethods.S_RES_JOIN_REJECTED?14:e.t0===Kt.ServerMethods.S_STORYBOARD_SHARE?16:e.t0===Kt.ServerMethods.S_SET_SPOTLIGHT_STREAMS?18:e.t0===Kt.ServerMethods.READY?20:e.t0===Kt.ServerMethods.MEETING_STATE?22:e.t0===Kt.ServerMethods.RECORDING_STATE?24:e.t0===Kt.ServerMethods.LECTURE_LAYOUT?26:e.t0===Kt.ServerMethods.LECTURE_SLIDE_NUMBER?28:e.t0===Kt.ServerMethods.PARTICIPANT_ADDED?30:e.t0===Kt.ServerMethods.PARTICIPANT_PUBLISHED?32:e.t0===Kt.ServerMethods.PARTICIPANT_NAME_CHANGED?34:e.t0===Kt.ServerMethods.PARTICIPANT_REMOVED?36:e.t0===Kt.ServerMethods.DISCONNECT?38:e.t0===Kt.ServerMethods.MUTE_UPDATE?40:e.t0===Kt.ServerMethods.MUTE?49:e.t0===Kt.ServerMethods.UNMUTE_REQUEST?52:e.t0===Kt.ServerMethods.UNMUTE_RESPONSE?57:e.t0===Kt.ServerMethods.OWNER_PIN_SUCCESS?59:e.t0===Kt.ServerMethods.OWNER_PIN_FAILED?61:e.t0===Kt.ServerMethods.ROLE_CHANGED?63:e.t0===Kt.ServerMethods.CHAT?65:e.t0===Kt.ServerMethods.SEND_TRANSCRIPT?70:e.t0===Kt.ServerMethods.SHARE_TRANSCRIPT?75:e.t0===Kt.ServerMethods.TURN_ON_SUBTITLES?80:e.t0===Kt.ServerMethods.STATUS_UPDATE?85:e.t0===Kt.ServerMethods.RAISE_HAND_UPDATE?90:e.t0===Kt.ServerMethods.RAISE_HAND_RES?95:e.t0===Kt.ServerMethods.STREAMING_STATE?97:e.t0===Kt.ServerMethods.PARTICIPANT_SHARES?99:e.t0===Kt.ServerMethods.SHARING_STOP?101:e.t0===Kt.ServerMethods.STATS_UPDATE?103:e.t0===Kt.ServerMethods.RECEIVE_REQUEST_TO_PARTICIPATE?105:e.t0===Kt.ServerMethods.SIP_CALL_STATE?107:e.t0===Kt.ServerMethods.BFM_ON_PAUSE?111:e.t0===Kt.ServerMethods.GATEWAY_AVAILABLE?113:e.t0===Kt.ServerMethods.LAYOUT_ORDER_UPDATE?115:e.t0===Kt.ServerMethods.MW_NOTIFICATION?117:e.t0===Kt.ServerMethods.S_EVENT_POLL_UPDATE?119:e.t0===Kt.ServerMethods.S_EVENT_UPDATE?121:e.t0===Kt.ServerMethods.S_SET_VIEWERS_COUNT?123:e.t0===Kt.ServerMethods.S_VIEWER_ASK_QUESTION?125:e.t0===Kt.ServerMethods.S_SET_ACTIVE_SPEAKER_SLOT?127:e.t0===Kt.ServerMethods.S_SET_SHARED_SCREEN_SLOT?129:e.t0===Kt.ServerMethods.S_RESET_EVENT_CHAT?131:133;break;case 8:return r=xo.personVerified(n),e.abrupt("break",134);case 10:return r=xo.setPreJoin(n.person,n.room,n.event),e.abrupt("break",134);case 12:return r=xo.joinAccepted(n.participantData,n.meetingData,n.options),e.abrupt("break",134);case 14:return r=xo.joinRejected(n.reason),e.abrupt("break",134);case 16:return r=xo._storyboardShare(t.data.params.storyboardId,t.data.params.lecturerId),e.abrupt("break",134);case 18:return r=xo._setSpotlightStreams(t.data.params.selectedForLecture),e.abrupt("break",134);case 20:return r=xo.moderationServerReady(),e.abrupt("break",134);case 22:return r=xo.setMeetingState(n),e.abrupt("break",134);case 24:return r=xo.setRecordingStateRemote(t.data.params.newState,t.data.params.message),e.abrupt("break",134);case 26:return r=xo.setMeetingLayout(t.data.params),e.abrupt("break",134);case 28:return r=xo.slideNumberChanged(t.data.params.number),e.abrupt("break",134);case 30:return r=xo.addParticipant(t.data.params),e.abrupt("break",134);case 32:return r=xo.addParticipantStream(n),e.abrupt("break",134);case 34:return r=xo.changeParticipantName(t.data.params.participantId,t.data.params.name),e.abrupt("break",134);case 36:return r=xo.removeParticipant(t.data.params.participantId),e.abrupt("break",134);case 38:return r=xo.disconnect("kick"),e.abrupt("break",134);case 40:return e.next=42,Se(bt);case 42:if(e.sent._id===t.data.params.participantId){e.next=48;break}return e.next=46,Se(Gt,t.data.params.participantId);case 46:e.sent&&(r=xo.participantMuteUpdate(t.data.params.participantId,t.data.params.mute));case 48:return e.abrupt("break",134);case 49:return(o=t.data.params.state).hasOwnProperty("audio")&&o.hasOwnProperty("video")?r=xo.mute(o):o.hasOwnProperty("audio")?r=xo.muteAudio(o.audio):o.hasOwnProperty("video")&&(r=xo.muteVideo(o.video)),e.abrupt("break",134);case 52:return i={},t.data.params.state.hasOwnProperty("audio")&&(i.audio=!!t.data.params.state.audio),t.data.params.state.hasOwnProperty("video")&&(i.video=!!t.data.params.state.video),Object.keys(i).length&&(r=xo.moderatorUnmuteRequest(t.data.params.senderId,i)),e.abrupt("break",134);case 57:return r=xo.moderatorUnmuteResponse(t.data.params.senderId,t.data.params.state),e.abrupt("break",134);case 59:return r=xo.ownerPinSuccess(t.data.params.participantId,t.data.params.role,t.data.params.isRoomOwner,t.data.params.token),e.abrupt("break",134);case 61:return r=xo.ownerPinFailed(t.data.params),e.abrupt("break",134);case 63:return r=xo.roleChanged(t.data.params.participantId,t.data.params.role,t.data.params.isRoomOwner,t.data.params.token),e.abrupt("break",134);case 65:return e.next=67,Se(bt);case 67:return e.sent._id!==t.data.params.authorId&&(r=xo.addChatMessage(t.data.params)),e.abrupt("break",134);case 70:return e.next=72,Se(bt);case 72:return(a=e.sent)&&a._id!==t.data.params.authorId&&(r=xo.addTranscriptMessage(t.data.params)),e.abrupt("break",134);case 75:return e.next=77,Se(bt);case 77:return(s=e.sent)&&s._id!==t.data.params.participantId&&(r=xo.receiveTranscript(t.data.params)),e.abrupt("break",134);case 80:return e.next=82,Se(bt);case 82:return(c=e.sent)&&c._id!==t.data.params.participantId&&(r=xo.receiveSubtitlesRequest(t.data.params)),e.abrupt("break",134);case 85:return e.next=87,Se(bt);case 87:return e.sent._id!==t.data.params.participantId&&(r=xo.updateParticipantStatus(t.data.params)),e.abrupt("break",134);case 90:return e.next=92,Se(bt);case 92:return e.sent._id!==t.data.params.participantId&&(r=xo.raiseHandUpdate(t.data.params)),e.abrupt("break",134);case 95:return r=xo.raiseHandResponseReceived(!1,t.data.params),e.abrupt("break",134);case 97:return r=xo.setStreamingState(t.data.params.newState,t.data.params.message),e.abrupt("break",134);case 99:return r=xo.setRemoteScreenStream(t.data.params.streamId,t.data.params.participantId),e.abrupt("break",134);case 101:return r=xo.stopSharing(n.participantId),e.abrupt("break",134);case 103:return r=xo.updateStats(t.data.params.stats),e.abrupt("break",134);case 105:return r=xo.receivedRequestToParticipate(n),e.abrupt("break",134);case 107:return e.next=109,uu(t.data.params);case 109:return r=e.sent,e.abrupt("break",134);case 111:return r=xo.setBfmPauseState(t.data.params),e.abrupt("break",134);case 113:return r=xo.setGatewayState(t.data.params.state),e.abrupt("break",134);case 115:return r=xo.orderUpdate(t.data.params.order),e.abrupt("break",134);case 117:return r=xo.MWMessage(t.data.params),e.abrupt("break",134);case 119:return r=Po.updatePoll(t.data.params),e.abrupt("break",134);case 121:return r=Po.setCurrentEvent(n),e.abrupt("break",134);case 123:return r=xo._setViewersCount(n),e.abrupt("break",134);case 125:return r=xo._receiveViewerQuestion(n),e.abrupt("break",134);case 127:return r=xo._setActiveSlot(n),e.abrupt("break",134);case 129:return r=xo._setSharedStreamSlot(n),e.abrupt("break",134);case 131:return r=Po.resetChat(),e.abrupt("break",134);case 133:return e.abrupt("break",134);case 134:return e.next=136,me(r);case 136:case"end":return e.stop()}}),e)})));case 2:case"end":return t.stop()}}),Sc)}function uu(e){var t,r,n,o,i,a;return regeneratorRuntime.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.sipUri,r=e.state,n=e.message,s.next=3,Se(jt);case 3:if(o=s.sent,i=o.sipUri,a=i&&0===i.indexOf("tel:"),i=a?i.substring(4):i,t===i){s.next=9;break}return s.abrupt("return",xo.noop());case 9:if(r!==m.CallStates.ACCEPTED){s.next=12;break}return s.next=12,me(qt.generalInfo("sip-call-accepted"));case 12:if(r!==m.CallStates.REJECTED){s.next=20;break}if(!n){s.next=18;break}return s.next=16,me(qt.generalWarning({message:"sip-call-rejected-ext",args:{message:n}}));case 16:s.next=20;break;case 18:return s.next=20,me(qt.generalWarning("sip-call-rejected"));case 20:return s.abrupt("return",xo.setSipState(e));case 21:case"end":return s.stop()}}),bc)}function du(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xe(gt.SDK_ACTIVATION,regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,e.next=3,Se(bt);case 3:if(!(n=e.sent)){e.next=7;break}return e.next=7,Yr(jr,n._id,r);case 7:return e.next=9,be(500);case 9:case"end":return e.stop()}}),e)})));case 2:case"end":return e.stop()}}),Tc)}function pu(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(gt.SDK_TIMELINE_ADD,regeneratorRuntime.mark((function e(t){var r,n,o,i,a,s,c,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,n=r.type,o=r.name,i=r.data,e.next=3,Se(bt);case 3:if(!(a=e.sent)){e.next=14;break}if(s=Ds.a[n]){e.next=8;break}return e.abrupt("return");case 8:if(c=s[o]){e.next=11;break}return e.abrupt("return");case 11:return u=c(Ns.actors.participant(a),i),e.next=14,Yr(Yt,u);case 14:case"end":return e.stop()}}),e)})));case 2:case"end":return e.stop()}}),Rc)}function lu(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve([du(),ou(),eu(),Wc(),qc(),Zc(),zc(),Yc(),Qc(),$c(),ru(),nu(),su(),iu(),Jc(),Xc(),Lc(),Nc(),pu()]);case 2:case"end":return e.stop()}}),Cc)}function fu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function hu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fu(Object(r),!0).forEach((function(t){mu(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fu(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function mu(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var vu=regeneratorRuntime.mark(ku),gu=regeneratorRuntime.mark(Pu),yu=regeneratorRuntime.mark(Nu),_u=regeneratorRuntime.mark(Du),Eu=regeneratorRuntime.mark(ju),Su=regeneratorRuntime.mark(Mu),bu=regeneratorRuntime.mark(Lu),Tu=regeneratorRuntime.mark(Uu),Ru=regeneratorRuntime.mark(Vu),Cu=regeneratorRuntime.mark(Fu),Ou=regeneratorRuntime.mark(Bu),wu=regeneratorRuntime.mark(Wu),Au=regeneratorRuntime.mark(qu),Iu=null,xu=null;function ku(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=null,t.next=3,Ie(gt.SDK_CONNECT_MODERATION,regeneratorRuntime.mark((function t(r){var n,o,i,a,s,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.payload,t.next=3,ye(Qr,TeeVidSdk.serverUrl,null,"get","/system/configurations/public");case 3:return o=t.sent,t.next=6,me(qt.setGlobalConfig(o.payload));case 6:return t.next=8,Se(Dt);case 8:return i=t.sent,t.next=11,Se(It);case 11:if(a=t.sent,s="wss://".concat(a,"/socket/moderation?room=").concat(encodeURIComponent(n),"&token=").concat(encodeURIComponent(i),"&cef=").concat(encodeURIComponent(window.navigator.userAgent&&window.navigator.userAgent.includes("teevid_cef"))),e){t.next=22;break}return(c=new WebSocket(s)).onclose=function(e){4e3===e.code?TeeVidSdk.actions.disconnect("kick"):TeeVidSdk.actions.disconnect()},e=Gu(c),t.next=19,me(xo.moderationSocketCreated(c));case 19:return t.next=21,_e(cu,e);case 21:xu=t.sent;case 22:case"end":return t.stop()}}),t)})));case 3:return t.next=5,Ie([gt.CONNECTION_DISCONNECT,gt.CONNECTION_DISCONNECTED],regeneratorRuntime.mark((function t(r){var n,o,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.type,o=r.payload,!e){t.next=8;break}return i=o&&"string"==typeof o?o:n,t.next=5,Yr(Qt,i);case 5:return t.next=7,e.close();case 7:e=null;case 8:if(!xu){t.next=12;break}return t.next=11,xu.cancel();case 11:xu=null;case 12:try{AndroidJSInterface&&AndroidJSInterface.disconnect()}catch(e){}case 13:case"end":return t.stop()}}),t)})));case 5:case"end":return t.stop()}}),vu)}function Pu(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(gt.SET_MEETING_STATE,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me(xo.connectionReady());case 2:case"end":return e.stop()}}),e)})));case 2:case"end":return e.stop()}}),gu)}function Nu(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xe(gt.SDK_JOIN_REQUEST,regeneratorRuntime.mark((function e(t){var r,n,o,i,a,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,n=r.userName,o=r.avatar,i=r.credentials,a=r.forceVerify,e.next=3,Se(St);case 3:if((s=e.sent)!==m.ConnectionStates.CONNECTED){e.next=6;break}return e.abrupt("return",Ee());case 6:if(s!==m.ConnectionStates.DISCONNECTED){e.next=9;break}return e.next=9,he(gt.SDK_INIT_MEETING_DATA);case 9:return e.next=11,me(xo.setConnectionState(m.ConnectionStates.CONNECTING));case 11:return e.next=13,Yr(rr,n,o,i,a);case 13:case"end":return e.stop()}}),e)})));case 2:case"end":return e.stop()}}),yu)}function Du(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(gt.SDK_JOIN_ACCEPTED,regeneratorRuntime.mark((function e(t){var r,n,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,n=r.participant,r.room,e.next=3,Se(St);case 3:if(e.sent===m.ConnectionStates.CONNECTED){e.next=19;break}return e.next=7,me(xo.setCurrentRoom(n.room));case 7:return e.next=9,me(xo.participantCreated(n));case 9:return e.next=11,TeeVidSdk.license.get();case 11:return o=e.sent,e.next=14,me(qt.licenseSuccess(o));case 14:return e.next=16,Se(bt);case 16:return i=e.sent,e.next=19,Yr(gr,i);case 19:case"end":return e.stop()}}),e)})));case 2:case"end":return e.stop()}}),_u)}function ju(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(gt.SDK_JOIN_REJECTED,regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.payload,n=xo.noop(),e.t0=r,e.next=e.t0===m.JoinRejectionReasons.ROOM_FULL?5:e.t0===m.JoinRejectionReasons.WAITING?9:e.t0===m.JoinRejectionReasons.WRONG_PIN?11:e.t0===m.JoinRejectionReasons.WRONG_OWNER_PIN?15:e.t0===m.JoinRejectionReasons.WRONG_MODERATOR_PIN?19:e.t0===m.JoinRejectionReasons.WRONG_PANELIST_PIN?21:e.t0===m.JoinRejectionReasons.WRONG_ATTENDEE_PIN?23:e.t0===m.JoinRejectionReasons.ERROR||e.t0===m.JoinRejectionReasons.NO_PIN?25:29;break;case 5:return n=xo.setConnectionState(m.ConnectionStates.IN_WAITING_SLOT),e.next=8,me(qt.generalError("waiting-for-empty-slot"));case 8:return e.abrupt("break",31);case 9:return n=xo.setConnectionState(m.ConnectionStates.IN_WAITING_ROOM),e.abrupt("break",31);case 11:return n=xo.setConnectionState(m.ConnectionStates.PRE_CONNECTED),e.next=14,me(fo.accessPinError(!0));case 14:return e.abrupt("break",31);case 15:return n=fo.ownerPinErr(!0),e.next=18,me(xo.setConnectionState(m.ConnectionStates.PRE_CONNECTED));case 18:return e.abrupt("break",31);case 19:return n=fo.moderatorPinError(!0),e.abrupt("break",31);case 21:return n=fo.panelistPinError(!0),e.abrupt("break",31);case 23:return n=fo.attendeePinError(!0),e.abrupt("break",31);case 25:return n=xo.setConnectionState(m.ConnectionStates.PRE_CONNECTED),e.next=28,me(qt.generalError({message:r}));case 28:return e.abrupt("break",31);case 29:return n=xo.setConnectionState(m.ConnectionStates.PRE_CONNECTED),e.abrupt("break",31);case 31:return e.next=33,me(n);case 33:case"end":return e.stop()}}),e)})));case 2:case"end":return e.stop()}}),Eu)}function Mu(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=null,t.next=3,Ie(gt.SDK_CREATE_CONNECTION,regeneratorRuntime.mark((function t(r){var n,o,i,a,s,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.payload,o=void 0===n?{}:n,t.next=3,Se(bt);case 3:return i=t.sent,a=hu({token:i.nuveId},o),s=Fi.a.Room(a),c=s.publish,s.publish=function(e,t,r){(t=t||{}).scheme="notify";var n=e.getAttributes()||{};return n.participantId=i._id,n.username=i.name,e.updateLocalAttributes(n),c.apply(s,[e,t,r])},e=Hu(s),t.next=11,_e(Bu,e);case 11:return Iu=t.sent,t.next=14,me(xo.connectionCreated(s));case 14:case"end":return t.stop()}}),t)})));case 3:return t.next=5,Ie([gt.CONNECTION_DISCONNECT,gt.CONNECTION_DISCONNECTED],regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=4;break}return t.next=3,e.close();case 3:e=null;case 4:if(!Iu){t.next=8;break}return t.next=7,Iu.cancel();case 7:Iu=null;case 8:try{AndroidJSInterface&&AndroidJSInterface.disconnect()}catch(e){}case 9:case"end":return t.stop()}}),t)})));case 5:case"end":return t.stop()}}),Su)}function Lu(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(gt.ROOM_CONNECTED,regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se(xt);case 2:return(t=e.sent).remoteStreams.forEach((function(e){e.local||"back_channel"===e.getAttributes().username||(Xr(e),t.subscribe(e,{offerFromErizo:!0}))})),e.next=6,me(xo.connectionRoomReady());case 6:return e.next=8,_e(Uu);case 8:return r=e.sent,e.next=11,he("stop-timer");case 11:return e.next=13,Ee(r);case 13:case"end":return e.stop()}}),e)})));case 2:case"end":return e.stop()}}),bu)}function Uu(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Se(bt);case 3:if(e.sent){e.next=7;break}return e.next=7,me({type:"stop-timer"});case 7:return e.next=9,Ts();case 9:return e.next=11,be(3e3);case 11:e.next=0;break;case 13:case"end":return e.stop()}}),Tu)}function Vu(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(gt.CONNECTION_STREAM_ADDED,regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,e.next=3,Se(xt);case 3:n=e.sent,r.local||"back_channel"===r.getAttributes().username||(Xr(r),n.subscribe(r,{offerFromErizo:!0}));case 5:case"end":return e.stop()}}),e)})));case 2:case"end":return e.stop()}}),Ru)}function Fu(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(gt.CONNECTION_STREAM_REMOVED,regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,e.next=3,Se(bt);case 3:if(n=e.sent,g()(n,"streams.mediaStreamId",null)!==r.getID()){e.next=8;break}return e.next=8,Yr(ir,r.streamID());case 8:case"end":return e.stop()}}),e)})));case 2:case"end":return e.stop()}}),Cu)}function Gu(e,t){return rt((function(r){return e.onerror=function(r){if(TeeVidSdk.log.error("Moderation socket error",r),t.state===m.ConnectionStates.CONNECTED)return e.close(3001)},e.onmessage=function(e){var t=JSON.parse(e.data);r(t)},function(t){Yr(Qt,t),e.close(1e3)}}))}function Bu(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ie(e,regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=xo.noop(),e.t0=t.type,e.next=e.t0===ws?4:e.t0===As?6:e.t0===Is?8:e.t0===xs?10:e.t0===Ps||e.t0===ks?12:14;break;case 4:return r=xo.roomConnected(),e.abrupt("break",15);case 6:return r=xo.streamAdded(t.event.stream),e.abrupt("break",15);case 8:return r=xo.streamSubscribed(t.event.stream),e.abrupt("break",15);case 10:return r=xo.streamRemoved(t.event.stream),e.abrupt("break",15);case 12:return r=xo.disconnected(),e.abrupt("break",15);case 14:return e.abrupt("break",15);case 15:return e.next=17,me(r);case 17:case"end":return e.stop()}}),e)})));case 2:case"end":return t.stop()}}),Ou)}function Hu(e){var t=["room-connected","stream-added","stream-subscribed","stream-removed","room-error","room-disconnected"];return rt((function(r){function n(e,t){r({type:e,event:t})}return t.forEach((function(t){e.addEventListener(t,n.bind(null,t))})),function(){e.disconnect()}}))}function Wu(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(gt.SDK_VERIFY_PERSON,regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,e.next=3,Yr(Jt,r);case 3:case"end":return e.stop()}}),e)})));case 2:case"end":return e.stop()}}),wu)}function qu(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve([Du(),ju(),Mu(),ku(),Pu(),Lu(),Vu(),Fu(),Nu(),Wu()]);case 2:case"end":return e.stop()}}),Au)}function Ku(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var zu=regeneratorRuntime.mark($u),Yu=regeneratorRuntime.mark(Xu),Qu=regeneratorRuntime.mark(Zu),Ju=regeneratorRuntime.mark(ed);function $u(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(gt.STREAMING_START,regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.payload,n=r.streaming||r.sharing,e.prev=2,n){e.next=5;break}throw Error("Streaming data not found");case 5:return e.next=7,Se(At);case 7:if(!e.sent.enabledStreaming){e.next=13;break}return e.next=11,me(xo.timelineAdd("action","streaming","start"));case 11:return e.next=13,ve([me(xo.setStreamingState(Ku({},n.service,{state:m.StreamingStates.INIT}))),ye($r,"POST","/media/start",{streaming:n,room:r.room})]);case 13:e.next=20;break;case 15:return e.prev=15,e.t0=e.catch(2),e.next=19,me(xo.setStreamingState(Ku({},n.service,{state:m.StreamingStates.ERROR,reason:e.t0.message})));case 19:TeeVidSdk.actions.generalError(e.t0);case 20:case"end":return e.stop()}}),e,null,[[2,15]])})));case 2:case"end":return e.stop()}}),zu)}function Xu(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(gt.SET_STREAMING_STATE,regeneratorRuntime.mark((function e(t){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,n=r.state,o=r.message,TeeVidSdk.canModerate&&n===m.StreamingStates.STOPPED&&o&&TeeVidSdk.actions.generalWarning({message:o,delay:1e4}),void(e.next=4);case 4:case"end":return e.stop()}}),e)})));case 2:case"end":return e.stop()}}),Yu)}function Zu(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(gt.STREAMING_STOP,regeneratorRuntime.mark((function e(t){var r,n,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,n=r.service,o=r.outputid,e.prev=1,e.next=4,Se(wt);case 4:return i=e.sent,e.next=7,me(xo.timelineAdd("action","streaming","stop"));case 7:return e.next=9,ve([ye($r,"POST","/media/stop",{room:i.id,outputid:o,serviceid:n}),me(xo.setStreamingState(Ku({},n,{state:m.StreamingStates.STOPPING})))]);case 9:e.next=16;break;case 11:return e.prev=11,e.t0=e.catch(1),TeeVidSdk.log.error(e.t0),e.next=16,me(xo.setStreamingState(Ku({},n,{state:m.StreamingStates.ERROR})));case 16:case"end":return e.stop()}}),e,null,[[1,11]])})));case 2:case"end":return e.stop()}}),Qu)}function ed(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve([Zu(),$u(),Xu()]);case 2:case"end":return e.stop()}}),Ju)}var td=regeneratorRuntime.mark(ad),rd=regeneratorRuntime.mark(sd),nd=regeneratorRuntime.mark(cd),od=regeneratorRuntime.mark(ud),id=regeneratorRuntime.mark(dd);function ad(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(gt.RECORDING_START,regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Se(wt);case 3:return t=e.sent,e.next=6,Se(Tt);case 6:if(r=e.sent){e.next=9;break}throw new Error("You must log in first");case 9:return e.next=11,me(xo.setRecordingState(m.RecordingStates.STARTING));case 11:return e.next=13,me(xo.timelineAdd("action","recording","start"));case 13:return e.next=15,ye($r,"POST","/record/start",{room:t.id,recordOwner:r.name});case 15:e.next=23;break;case 17:return e.prev=17,e.t0=e.catch(0),e.next=21,me(xo.setRecordingState(m.RecordingStates.STOPPED));case 21:return e.next=23,me(qt.generalWarning(e.t0.message));case 23:case"end":return e.stop()}}),e,null,[[0,17]])})));case 2:case"end":return e.stop()}}),td)}function sd(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(gt.RECORDING_START_SUCCESS,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yr(Or,m.RecordingStates.RECORDING);case 2:return e.next=4,me(xo.setRecordingState(m.RecordingStates.RECORDING));case 4:case"end":return e.stop()}}),e)})));case 2:case"end":return e.stop()}}),rd)}function cd(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(gt.RECORDING_STOP,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Se(wt);case 3:return t=e.sent,e.next=6,me(xo.setRecordingState(m.RecordingStates.STOPPING));case 6:return e.next=8,me(xo.timelineAdd("action","recording","stop"));case 8:return e.next=10,ye($r,"POST","/record/stop",{room:t.id});case 10:return e.next=12,me(xo.recordingStopped());case 12:e.next=25;break;case 14:if(e.prev=14,e.t0=e.catch(0),"recording-not-started-error"!==e.t0.message){e.next=21;break}return e.next=19,me(xo.recordingStopped());case 19:e.next=23;break;case 21:return e.next=23,me(xo.setRecordingState(m.RecordingStates.RECORDING));case 23:return e.next=25,me(qt.generalWarning(e.t0.message));case 25:case"end":return e.stop()}}),e,null,[[0,14]])})));case 2:case"end":return e.stop()}}),nd)}function ud(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(gt.RECORDING_SET_STATE_REMOTE,regeneratorRuntime.mark((function e(t){var r,n,o,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.payload,n=r.state,o=r.message,e.prev=1,!TeeVidSdk.canModerate||n.state!==m.RecordingStates.STOPPED){e.next=15;break}return e.next=5,Se(Tt);case 5:if(!(i=e.sent)){e.next=12;break}return e.next=9,TeeVidSdk.recordings.getTotalSize(i.name);case 9:return a=e.sent,e.next=12,me(xo.setUserRecordingsSize(a));case 12:if(!o){e.next=15;break}return e.next=15,me(qt.generalWarning({message:o,delay:1e4}));case 15:e.next=21;break;case 17:return e.prev=17,e.t0=e.catch(1),e.next=21,me(qt.generalWarning(e.t0.message));case 21:case"end":return e.stop()}}),e,null,[[1,17]])})));case 2:case"end":return e.stop()}}),od)}function dd(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve([ad(),cd(),sd(),ud()]);case 2:case"end":return e.stop()}}),id)}var pd=regeneratorRuntime.mark(ld);function ld(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve([qu(),lu(),ed(),dd(),Kc()]);case 2:case"end":return e.stop()}}),pd)}var fd={SDK_CHAT_MESSAGE_OUT:"teevid/chat/message_out",SDK_CHAT_ADD_MESSAGE:"teevid/chat/message_add",SDK_CHAT_INIT:"teevid/chat/init",SDK_CHAT_STOP:"teevid/chat/stop",SDK_CHAT_CREATE_CONVERSATION:"teevid/chat/create_conversation",SDK_CHAT_INCOMING_CONVERSATION:"teevid/chat/add_conversation",SDK_CHAT_UPDATE_CONVERSATION:"teevid/chat/update_conversation",SDK_CHAT_DROP_CONVERSATION:"teevid/chat/drop_conversation",SDK_CHAT_SET_PRESENCE:"teevid/chat/set_presence",SDK_CHAT_REMOTE_USER_UPDATED:"teevid/chat/presence_updated",SDK_CHAT_SET_SOCKET:"teevid/chat/set_socket",SDK_CHAT_GET_CONVERSATION:"teevid/chat/get_conversation",SDK_CHAT_GET_CONVERSATIONS:"teevid/chat/get_conversations",SDK_CHAT_GET_CONVERSATIONS_SUCCESS:"teevid/chat/get_conversations/success",SDK_CHAT_GET_MESSAGES:"teevid/chat/get_messages",SDK_CHAT_GET_MESSAGES_SUCCESS:"teevid/chat/get_messages/success",SDK_CHAT_SERVER_STATE:"teevid/chat/server_state",SDK_CHAT_JOIN_CONVERSATION:"teevid/chat/join_conversation",SDK_CHAT_CONVERSATION_REMOVED:"teevid/chat/conversation_removed",SDK_CHAT_SET_AVATAR:"teevid/chat/set_user_avatar"},hd={chatMessageOut:function(e,t,r){return{type:fd.SDK_CHAT_MESSAGE_OUT,payload:{body:e,conversationId:t,language:r}}},setUserAvatar:function(e,t){return{type:fd.SDK_CHAT_SET_AVATAR,payload:{participantId:e,avatar:t}}},addChatMessage:function(e){return{type:fd.SDK_CHAT_ADD_MESSAGE,payload:e}},initChat:function(){return{type:fd.SDK_CHAT_INIT}},stopChat:function(){return{type:fd.SDK_CHAT_STOP}},createConversation:function(e){return{type:fd.SDK_CHAT_CREATE_CONVERSATION,payload:e}},joinConversation:function(e){return{type:fd.SDK_CHAT_JOIN_CONVERSATION,payload:e}},addConversation:function(e){return{type:fd.SDK_CHAT_INCOMING_CONVERSATION,payload:e}},updateConversation:function(e){return{type:fd.SDK_CHAT_UPDATE_CONVERSATION,payload:e}},getConversation:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{type:fd.SDK_CHAT_GET_CONVERSATION,payload:{conversationId:e,pullMessages:t}}},dropConversation:function(e){return{type:fd.SDK_CHAT_DROP_CONVERSATION,payload:e}},setChatPresence:function(e){return{type:fd.SDK_CHAT_SET_PRESENCE,payload:e}},updateRemoteChatUser:function(e){return{type:fd.SDK_CHAT_REMOTE_USER_UPDATED,payload:e}},setChatSocket:function(e){return{type:fd.SDK_CHAT_SET_SOCKET,payload:e}},getConversationList:function(e){return{type:fd.SDK_CHAT_GET_CONVERSATIONS,payload:e}},getConversationListSuccess:function(e){return{type:fd.SDK_CHAT_GET_CONVERSATIONS_SUCCESS,payload:e}},getChatMessages:function(e,t,r,n,o,i){return{type:fd.SDK_CHAT_GET_MESSAGES,payload:{conversationId:e,from:t,to:r,limit:n,page:o,replace:i}}},getChatMessagesSuccess:function(e,t,r){return{type:fd.SDK_CHAT_GET_MESSAGES_SUCCESS,payload:{conversationId:e,messages:t,replace:r}}},setChatServerState:function(e){return{type:fd.SDK_CHAT_SERVER_STATE,payload:e}},conversationRemoved:function(e){return{type:fd.SDK_CHAT_CONVERSATION_REMOVED,payload:e}}},md="chat-message",vd="chat-new-conversation",gd="chat-set-avatar",yd="chat-join-convesation",_d="chat-drop-conversation",Ed="chat-change-name",Sd=function(e,t){return{type:"chat",data:{method:e,params:t}}},bd=function(e,t,r,n,o){return Sd(md,{body:e,conversationId:t,authorId:r,createdAt:Date.now(),language:n,authorInfo:o})},Td=function(e){return Sd(vd,e)},Rd=function(e,t){return Sd(gd,{participantId:e,avatar:t})},Cd=function(e){return Sd(yd,{conversationId:e})},Od=function(e){return Sd(_d,{conversationId:e})},wd=function(e,t){return Sd(Ed,{newName:e,authorId:t})},Ad=regeneratorRuntime.mark(Zd),Id=regeneratorRuntime.mark(ep),xd=regeneratorRuntime.mark(tp),kd=regeneratorRuntime.mark(rp),Pd=regeneratorRuntime.mark(np),Nd=regeneratorRuntime.mark(op),Dd=regeneratorRuntime.mark(ip),jd=regeneratorRuntime.mark(ap),Md=regeneratorRuntime.mark(sp),Ld=regeneratorRuntime.mark(cp),Ud=regeneratorRuntime.mark(up),Vd=regeneratorRuntime.mark(dp),Fd=regeneratorRuntime.mark(pp),Gd=regeneratorRuntime.mark(lp),Bd=regeneratorRuntime.mark(fp),Hd=regeneratorRuntime.mark(hp),Wd=null,qd="chat-message",Kd="chat-user-status",zd="chat-users-list",Yd="chat-new-conversation",Qd="chat-conv-update",Jd="chat-server-state",$d="chat-conversation-removed";function Xd(e){return rt((function(t){return e.onerror=function(e){TeeVidSdk.log.error("Chat socket error: ",e)},e.onmessage=function(e){var r=JSON.parse(e.data);t(r)},e.onopen=function(e){return t(e)},e.onclose=function(){TeeVidSdk.log.info("Chat socket closed")},function(){return e.close(1e3)}}))}function Zd(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(fd.SDK_CHAT_INIT,regeneratorRuntime.mark((function e(){var t,r,n,o,i,a,s,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Se(Dt);case 3:return t=e.sent,e.next=6,Se(Nt);case 6:return r=e.sent,e.next=9,Se(It);case 9:if(n=e.sent,!(o=t||r)){e.next=21;break}return e.next=14,ye(Qr,n,o,"GET","/token/chat");case 14:return i=e.sent,a="wss://".concat(n,"/chatSocket?token=").concat(encodeURIComponent(i.payload.token)),s=new WebSocket(a),c=Xd(s),e.next=20,_e(op,c);case 20:Wd=e.sent;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(0),console.error("CHAT init Error: ",e.t0);case 26:case"end":return e.stop()}}),e,null,[[0,23]])})));case 2:case"end":return e.stop()}}),Ad)}function ep(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(fd.SDK_CHAT_JOIN_CONVERSATION,regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,n=Cd(r),e.next=4,np(n);case 4:case"end":return e.stop()}}),e)})));case 2:case"end":return e.stop()}}),Id)}function tp(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(fd.SDK_CHAT_STOP,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Wd){e.next=6;break}return e.next=3,Wd.cancel();case 3:return e.next=5,me(hd.setChatSocket(null));case 5:Wd=null;case 6:case"end":return e.stop()}}),e)})));case 2:case"end":return e.stop()}}),xd)}function rp(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(fd.SDK_CHAT_MESSAGE_OUT,regeneratorRuntime.mark((function e(t){var r,n,o,i,a,s,c,u,d,p,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,n=r.body,o=r.conversationId,i=r.language,a="",s={},e.next=5,Se(bt);case 5:return c=e.sent,e.next=8,Se(Tt);case 8:if(!(u=e.sent)){e.next=14;break}a=u.name,s={avatar:u.avatar,name:u.name,displayName:c&&c.name||u.name},e.next=19;break;case 14:if(c){e.next=16;break}throw new Error("No author info for the message");case 16:a=c._id,d=c.avatar,p=c.name,s={avatar:d,name:p,displayName:p};case 19:return l=bd(n,o,a,i,s),e.next=22,np(l);case 22:return e.next=24,me(xo.timelineAdd("action","chat",{conversationId:o}));case 24:case"end":return e.stop()}}),e)})));case 2:case"end":return e.stop()}}),kd)}function np(e){var t;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Se(Pt);case 2:if(!(t=r.sent)||1!==t.readyState){r.next=6;break}return r.next=6,t.send(JSON.stringify(e));case 6:case"end":return r.stop()}}),Pd)}function op(e){var t,r,n,o;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:i.prev=0;case 1:return i.next=4,he(e);case 4:if((t=i.sent)&&"chat"===t.type){i.next=14;break}if(!t||"open"!==t.type){i.next=11;break}return i.next=9,ve([me(hd.setChatSocket(t.currentTarget)),me(hd.getConversationList(!0))]);case 9:i.next=12;break;case 11:TeeVidSdk.log.error("Missing or malformed message");case 12:i.next=37;break;case 14:r=qt.noop(),n=t.data.params,i.t0=t.data.method,i.next=i.t0===qd?19:i.t0===Kd?21:i.t0===zd||i.t0===Jd?23:i.t0===Yd?25:i.t0===Qd?27:i.t0===$d?32:34;break;case 19:return r=hd.addChatMessage(n),i.abrupt("break",35);case 21:return r=hd.updateRemoteChatUser(n),i.abrupt("break",35);case 23:return r=hd.setChatServerState(n),i.abrupt("break",35);case 25:return r=hd.addConversation(n),i.abrupt("break",35);case 27:return i.next=29,Se(Wt);case 29:return o=i.sent,r=o[n._id]?hd.updateConversation(n):hd.addConversation(n),i.abrupt("break",35);case 32:return r=hd.conversationRemoved(n),i.abrupt("break",35);case 34:return i.abrupt("break",35);case 35:return i.next=37,me(r);case 37:i.next=1;break;case 39:i.next=44;break;case 41:i.prev=41,i.t1=i.catch(0),console.log("Chat channel error: ",i.t1);case 44:return i.prev=44,i.next=47,fe("CANCELLED",{});case 47:if(!i.sent){i.next=49;break}e.close();case 49:return i.finish(44);case 50:case"end":return i.stop()}}),Nd,null,[[0,41,44,50]])}function ip(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(fd.SDK_CHAT_GET_CONVERSATIONS,regeneratorRuntime.mark((function e(t){var r,n,o,i,a,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,e.next=3,Se(Tt);case 3:if(!(n=e.sent)){e.next=19;break}return e.next=7,Jr("GET","/conversation/user/".concat(n.name));case 7:return o=e.sent,i=o.payload,e.next=11,me(hd.getConversationListSuccess(i));case 11:if(!r){e.next=19;break}return e.next=14,Se(Wt);case 14:if(a=e.sent,!(s=Object.keys(a).map((function(e){return me(hd.getChatMessages(e,0,Date.now(),null,null,!0))}))).length){e.next=19;break}return e.next=19,ve(s);case 19:case"end":return e.stop()}}),e)})));case 2:case"end":return e.stop()}}),Dd)}function ap(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(fd.SDK_CHAT_GET_CONVERSATION,regeneratorRuntime.mark((function e(t){var r,n,o,i,a,s,c,u,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,n=r.conversationId,o=r.pullMessages,e.next=3,Se(Dt);case 3:return i=e.sent,e.next=6,Se(Nt);case 6:return a=e.sent,e.next=9,Se(It);case 9:if(s=e.sent,!(c=i||a)){e.next=22;break}return e.next=14,ye(Qr,s,c,"GET","/conversation/".concat(n));case 14:if(u=e.sent,!(d=u.payload)){e.next=22;break}return e.next=19,me(hd.updateConversation(d));case 19:if(!o){e.next=22;break}return e.next=22,me(hd.getChatMessages(n,0,Date.now(),50,0,!0));case 22:case"end":return e.stop()}}),e)})));case 2:case"end":return e.stop()}}),jd)}function sp(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(fd.SDK_CHAT_CREATE_CONVERSATION,regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,e.next=3,np(Td(r));case 3:case"end":return e.stop()}}),e)})));case 2:case"end":return e.stop()}}),Md)}function cp(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(fd.SDK_CHAT_INCOMING_CONVERSATION,regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,e.next=3,me(hd.getChatMessages(r._id,0,Date.now(),null,null,!0));case 3:case"end":return e.stop()}}),e)})));case 2:case"end":return e.stop()}}),Ld)}function up(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(fd.SDK_CHAT_GET_MESSAGES,regeneratorRuntime.mark((function e(t){var r,n,o,i,a,s,c,u,d,p,l,f,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,n=r.conversationId,o=r.from,i=r.to,r.limit,r.page,a=r.replace,e.next=3,Se(Dt);case 3:return s=e.sent,e.next=6,Se(Nt);case 6:return c=e.sent,e.next=9,Se(It);case 9:return u=e.sent,d=s||c,p=[],"",n&&p.push("conversationId=".concat(n)),o&&p.push("dateFrom=".concat(o)),i&&p.push("dateTo=".concat(i)),l=p.length?"?".concat(p.join("&")):"",e.next=18,ye(Qr,u,d,"GET","/message".concat(l));case 18:return f=e.sent,h=f.payload,e.next=22,me(hd.getChatMessagesSuccess(h.conversationId,h.messages,a));case 22:case"end":return e.stop()}}),e)})));case 2:case"end":return e.stop()}}),Ud)}function dp(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(fd.SDK_CHAT_DROP_CONVERSATION,regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=t.payload)){e.next=4;break}return e.next=4,np(Od(r));case 4:case"end":return e.stop()}}),e)})));case 2:case"end":return e.stop()}}),Vd)}function pp(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(gt.PARTICIPANT_NAME_CHANGED,regeneratorRuntime.mark((function e(t){var r,n,o,i,a,s,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,n=r.participantId,o=r.name,e.next=4,Se(Tt);case 4:return i=e.sent,e.next=7,Se(bt);case 7:if(a=e.sent){e.next=10;break}return e.abrupt("return");case 10:if(s="",a._id===n){e.next=13;break}return e.abrupt("return");case 13:return s=i?i.name:n,c=wd(o,s),e.next=17,np(c);case 17:case"end":return e.stop()}}),e)})));case 2:case"end":return e.stop()}}),Fd)}function lp(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(fd.SDK_CHAT_SET_AVATAR,regeneratorRuntime.mark((function e(t){var r,n,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,n=r.participantId,o=r.avatar,i=Rd(n,o),e.next=5,np(i);case 5:case"end":return e.stop()}}),e)})));case 2:case"end":return e.stop()}}),Gd)}function fp(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(ko.SDK_EVENT_RESET_CHAT,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se(bt);case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,me(hd.getConversationList(!0));case 7:case"end":return e.stop()}}),e)})));case 2:case"end":return e.stop()}}),Bd)}function hp(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve([Zd(),tp(),rp(),ap(),sp(),ip(),ep(),up(),dp(),cp(),pp(),lp(),fp()]);case 2:case"end":return e.stop()}}),Hd)}function mp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function vp(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mp(Object(r),!0).forEach((function(t){gp(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mp(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function gp(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var yp={chatSocket:null,users:{},connected:!1},_p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yp,t=arguments.length>1?arguments[1]:void 0,r=t.type,n=t.payload;switch(r){case fd.SDK_CHAT_SET_SOCKET:return vp(vp({},e),{},{chatSocket:n,connected:!!n});case fd.SDK_CHAT_STOP:return vp({},yp);case fd.SDK_CHAT_REMOTE_USER_UPDATED:return h()(e,{users:gp({},n.id,{$set:n})});default:return e}};function Ep(e){return function(e){if(Array.isArray(e))return Sp(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Sp(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Sp(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sp(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function bp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Tp(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bp(Object(r),!0).forEach((function(t){Rp(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bp(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Rp(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Cp=regeneratorRuntime.mark(jp),Op=regeneratorRuntime.mark(Mp),wp=regeneratorRuntime.mark(Lp),Ap=regeneratorRuntime.mark(Up),Ip=regeneratorRuntime.mark(Vp),xp=regeneratorRuntime.mark(Fp),kp=regeneratorRuntime.mark(Gp),Pp=regeneratorRuntime.mark(Bp),Np=regeneratorRuntime.mark(Hp),Dp=regeneratorRuntime.mark(Wp);function jp(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(ko.SDK_EVENT_GET,regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,e.prev=1,e.next=4,ye(TeeVidSdk.events.getById,r);case 4:if(!(n=e.sent)){e.next=8;break}return e.next=8,me(Po.setCurrentEvent(n));case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,me(qt.generalError(e.t0.message));case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));case 2:case"end":return e.stop()}}),Cp)}function Mp(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(ko.SDK_EVENT_START,regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,e.next=3,Yr(Xt,r);case 3:case"end":return e.stop()}}),e)})));case 2:case"end":return e.stop()}}),Op)}function Lp(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(ko.SDK_EVENT_STOP,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yr(Zt);case 2:case"end":return e.stop()}}),e)})));case 2:case"end":return e.stop()}}),wp)}function Up(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(ko.SDK_EVENT_POLL_VOTE,regeneratorRuntime.mark((function e(t){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,n=r.pollId,o=r.optionName,e.next=3,Yr(Vr,n,o);case 3:case"end":return e.stop()}}),e)})));case 2:case"end":return e.stop()}}),Ap)}function Vp(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(ko.SDK_EVENT_POLL_START,regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,e.next=3,Yr(Fr,r);case 3:case"end":return e.stop()}}),e)})));case 2:case"end":return e.stop()}}),Ip)}function Fp(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(ko.SDK_EVENT_POLL_EDIT,regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,e.next=3,Yr(Ur,r._id,r);case 3:case"end":return e.stop()}}),e)})));case 2:case"end":return e.stop()}}),xp)}function Gp(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(ko.SDK_EVENT_POLL_END,regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,e.next=3,Yr(Gr,r);case 3:case"end":return e.stop()}}),e)})));case 2:case"end":return e.stop()}}),kp)}function Bp(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(ko.SDK_ADD_POLL_TO_EVENT,regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,e.prev=1,e.next=4,TeeVidSdk.events.createPoll(r);case 4:return n=e.sent,e.next=7,me(Po.updatePoll(n));case 7:e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(1),e.next=13,me(qt.generalError(e.t0.message));case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));case 2:case"end":return e.stop()}}),Pp)}function Hp(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(ko.SDK_DELETE_POLL_FROM_EVENT,regeneratorRuntime.mark((function e(t){var r,n,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,e.prev=1,n=r._id,e.next=5,ye(TeeVidSdk.events.getById,r.eventId);case 5:return o=e.sent,e.next=8,TeeVidSdk.events.removePoll(n);case 8:if(!(i=Tp(Tp({},o),{},{polls:Ep(o.polls.filter((function(e){return e._id!==n})))}))){e.next=12;break}return e.next=12,me(Po.updateCurrentEvent(i));case 12:e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(1),e.next=18,me(qt.generalError(e.t0.message));case 18:case"end":return e.stop()}}),e,null,[[1,14]])})));case 2:case"end":return e.stop()}}),Np)}function Wp(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve([Mp(),Lp(),jp(),Up(),Gp(),Vp(),Fp(),Bp(),Hp()]);case 2:case"end":return e.stop()}}),Dp)}function qp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Kp(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qp(Object(r),!0).forEach((function(t){zp(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qp(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function zp(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Yp={polls:[],_id:null},Qp=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yp,t=arguments.length>1?arguments[1]:void 0,r=t.type,n=t.payload;switch(r){case gt.SDK_INIT_MEETING_DATA:var o=n.room;return o&&o.event?Kp({},o.event):e;case ko.SDK_EVENT_SET:return Kp({},n);case ko.SDK_EVENT_UPDATE:return Kp(Kp({},e),n);case ko.SDK_EVENT_CLEAR:return Kp({},Yp);case ko.SDK_EVENT_POLL_UPDATE:return Jp(e,n);case ko.SDK_EVENT_POLL_REMOVE:return $p(e,n);default:return e}},Jp=function(e,t){if(!e._id)return e;var r=e.polls.filter((function(e){return e._id!==t._id}));return Kp(Kp({},e),{},{polls:[].concat(r,t)})},$p=function(e,t){if(!e._id||!e.polls.length)return e;var r=e.polls.filter((function(e){return e._id!==t}));return Kp(Kp({},e),{},{polls:r})},Xp=r("./node_modules/js-logger/src/logger.js"),Zp=r.n(Xp),el=r("./node_modules/lodash.find/index.js"),tl=r.n(el),rl=r("./package.json"),nl=r("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),ol=r.n(nl),il=r("./node_modules/@babel/runtime/helpers/typeof.js"),al=r.n(il),sl=r("./node_modules/redux-orm/node_modules/reselect/lib/index.js"),cl=r("./node_modules/re-reselect/dist/index.js"),ul=r.n(cl),dl=r("./node_modules/@babel/runtime/helpers/slicedToArray.js"),pl=r.n(dl),ll="REDUX_ORM_UPDATE",fl="REDUX_ORM_DELETE",hl="REDUX_ORM_FILTER",ml="REDUX_ORM_EXCLUDE",vl=Symbol("REDUX_ORM_ALL_INSTANCES"),gl=function(e,t){return void 0===t?vl:t},yl=function(e,t){return e===t},_l=function(e){return e&&"object"===al()(e)&&e.hasOwnProperty("@@_______REDUX_ORM_STATE_FLAG")},El=function(e,t,r){return t.every((function(t,n){return _l(t)&&_l(e[n])||r(t,e[n])}))},Sl=function(e,t,r){var n=e.accessedInstances;return Object.entries(n).every((function(n){var o=pl()(n,2),i=o[0],a=o[1];if(e.ormState[i]===t[i])return!0;var s,c,u=r.getDatabase().describe(i).mapName,d=e.ormState[i][u],p=t[i][u],l=Object.keys(a);return s=d,c=p,l.every((function(e){return s[e]===c[e]}))}))},bl=function(e,t){var r=e.accessedIndexes;return Object.entries(r).every((function(r){var n=pl()(r,2),o=n[0],i=n[1];return Object.entries(i).every((function(r){var n=pl()(r,2),i=n[0];return n[1].every((function(r){return e.ormState[o].indexes[i][r]===t[o].indexes[i][r]}))}))}))},Tl=function(e,t){return e.fullTableScannedModels.every((function(r){return e.ormState[r]===t[r]}))};function Rl(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yl,r=arguments.length>2?arguments[2]:void 0,n={result:null,args:null,ormState:null,fullTableScannedModels:[],accessedInstances:{},accessedIndexes:{}};return function(){for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];var s=i[0],c=i.slice(1),u=Boolean(n.args);if(u&&El(n.args,c,t)&&Tl(n,s)&&bl(n,s)&&Sl(n,s,r))return n.result;var d=r.session(s),p=c.map((function(e){return _l(e)?d:e})),l=e.apply(null,p);return n={args:c,result:l,ormState:s,accessedInstances:d.accessedModelInstances,accessedIndexes:d.accessedIndexes,fullTableScannedModels:d.fullTableScannedModels},l}}var Cl=r("./node_modules/@babel/runtime/helpers/createClass.js"),Ol=r.n(Cl),wl=r("./node_modules/@babel/runtime/helpers/inheritsLoose.js"),Al=r.n(wl),Il=r("./node_modules/@babel/runtime/helpers/defineProperty.js"),xl=r.n(Il);function kl(e){return null!=e&&"object"==typeof e&&!0===e["@@functional/placeholder"]}function Pl(e){return function t(r){return 0===arguments.length||kl(r)?t:e.apply(this,arguments)}}function Nl(e,t){switch(e){case 0:return function(){return t.apply(this,arguments)};case 1:return function(e){return t.apply(this,arguments)};case 2:return function(e,r){return t.apply(this,arguments)};case 3:return function(e,r,n){return t.apply(this,arguments)};case 4:return function(e,r,n,o){return t.apply(this,arguments)};case 5:return function(e,r,n,o,i){return t.apply(this,arguments)};case 6:return function(e,r,n,o,i,a){return t.apply(this,arguments)};case 7:return function(e,r,n,o,i,a,s){return t.apply(this,arguments)};case 8:return function(e,r,n,o,i,a,s,c){return t.apply(this,arguments)};case 9:return function(e,r,n,o,i,a,s,c,u){return t.apply(this,arguments)};case 10:return function(e,r,n,o,i,a,s,c,u,d){return t.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function Dl(e){return function t(r,n){switch(arguments.length){case 0:return t;case 1:return kl(r)?t:Pl((function(t){return e(r,t)}));default:return kl(r)&&kl(n)?t:kl(r)?Pl((function(t){return e(t,n)})):kl(n)?Pl((function(t){return e(r,t)})):e(r,n)}}}var jl=Dl((function(e,t){return 1===e?Pl(t):Nl(e,function e(t,r,n){return function(){for(var o=[],i=0,a=t,s=0;s<r.length||i<arguments.length;){var c;s<r.length&&(!kl(r[s])||i>=arguments.length)?c=r[s]:(c=arguments[i],i+=1),o[s]=c,kl(c)||(a-=1),s+=1}return a<=0?n.apply(this,o):Nl(a,e(t,o,n))}}(e,[],t))})),Ml=Pl((function(e){return jl(e.length,e)})),Ll={"@@functional/placeholder":!0};function Ul(e,t){for(var r in e)e.hasOwnProperty(r)&&t(e[r],r)}function Vl(e,t){return!!t&&e["@@_______immutableOpsOwnerID"]===t}var Fl="function"==typeof Symbol?function(){return Symbol("ownerID")}:function(){return{}};function Gl(e,t){return t&&function(e,t){Object.defineProperty(e,"@@_______immutableOpsOwnerID",{value:t,configurable:!0,enumerable:!1})}(e,t),e}function Bl(e){return e instanceof Array?e:[e]}function Hl(e){return"string"==typeof e?-1===e.indexOf(".")?[e]:e.split("."):e}function Wl(e,t,r){return r[e]=t,r}function ql(e,t,r){var n=Bl(t);return e?n.forEach((function(t){Ul(t,(function(t,n){var o;e&&r.hasOwnProperty(n)?(o="object"===al()(t)?ql(e,[t],r[n]):t,r[n]=o):r[n]=t}))})):Object.assign.apply(Object,[r].concat(ol()(n))),r}var Kl=ql.bind(null,!1),zl=ql.bind(null,!0);function Yl(e,t){return Bl(e).forEach((function(e){delete t[e]})),t}function Ql(e,t,r){return e[r]!==t[r]}function Jl(e,t,r,n){if(Vl(n,t))return ql(e,r,n);var o=Bl(r),i=!1,a=n,s=function(){i||(i=!0,Gl(a=Object.assign({},n),t))};return o.forEach((function(r){Ul(r,(function(o,i){if(e&&n.hasOwnProperty(i)){var c=a[i];if("object"===al()(o)&&!(o instanceof Array)){if(Ql(a,r,i)){var u=Jl(e,t,o,c);u!==c&&(s(),a[i]=u)}return!0}}Ql(a,r,i)&&(s(),a[i]=o)}))})),a}var $l=Jl.bind(null,!0);function Xl(e,t,r,n){if(Vl(n,e))return Wl(t,r,n);if(n[t]===r)return n;var o=function(e){for(var t=new Array(e.length),r=0;r<e.length;r++)t[r]=e[r];return t}(n);return o[t]=r,Gl(o,e),o}function Zl(e,t){for(var r=0,n=0;r<t.length;){e(t[r],n)?r++:t.splice(r,1),n++}return t}function ef(e,t,r,n){var o=Bl(r);return n.splice.apply(n,[e,t].concat(ol()(o))),n}function tf(e,t,r){return ef(e,0,t,r)}function rf(e,t,r,n,o){if(Vl(o,e))return ef(t,r,n,o);var i=Bl(n),a=o.slice();return Gl(a,e),a.splice.apply(a,[t,r].concat(ol()(i))),a}function nf(e,t,r,n){return Vl(n,e)?tf(t,r,n):rf(e,t,0,r,n)}var of={merge:Jl.bind(null,!1),deepMerge:$l,omit:function(e,t,r){if(Vl(r,e))return Yl(t,r);var n=Bl(t).filter((function(e){return r.hasOwnProperty(e)}));if(0===n.length)return r;var o=Object.assign({},r);return n.forEach((function(e){delete o[e]})),Gl(o,e),o},setIn:function(e,t,r,n){var o=Hl(t),i=function(e,t){for(var r=Hl(e),n=t,o=0;o<r.length;o++){var i=n[r[o]];if(o===r.length-1)return i;if("object"!==al()(i))return;n=i}}(o,n);if(r===i)return n;var a,s=o.length,c=a=Vl(n,e)?n:Object.assign(Gl({},e),n);return o.forEach((function(t,n){if(n!==s-1){var i=a[t],c=al()(i);if("object"!==c){if("undefined"===c){var u=Gl({},e);return a[t]=u,void(a=u)}var d="".concat(o[n-1],".").concat(t);throw new Error("A non-object value was encountered when traversing setIn path at ".concat(d,"."))}if(Vl(i,e))a=i;else{var p=Gl({},e);a[t]=Object.assign(p,i),a=p}}else a[t]=r})),c},insert:nf,push:function(e,t,r){return nf(e,r.length,t,r)},filter:function(e,t,r){if(Vl(r,e))return Zl(t,r);var n=r.filter(t);return n.length===r.length?r:(Gl(n,e),n)},splice:rf,set:function(e,t,r,n){if(function(e){return e&&"object"===al()(e)&&"number"==typeof e.length&&e.length>=0&&e.length%1==0}(n))return Xl(e,t,r,n);if(Vl(n,e))return Wl(t,r,n);if(n[t]===r)return n;var o=Object.assign({},n);return Gl(o,e),o[t]=r,o}},af={merge:Kl,deepMerge:zl,omit:Yl,setIn:function(e,t,r){for(var n=Hl(e),o=n.length,i=!1,a=0,s=r,c=n[a];!i;)if(a===o-1)s[c]=t,i=!0;else{var u=al()(s[c]);if("undefined"===u){var d={};Gl(d,null),s[c]=d}else if("object"!==u){var p="".concat(n[a-1],".").concat(c);throw new Error("A non-object value was encountered when traversing setIn path at ".concat(p,"."))}s=s[c],c=n[++a]}return r},insert:tf,push:function(e,t){var r=Bl(e);return t.push.apply(t,ol()(r)),t},filter:Zl,splice:ef,set:Wl};var sf=function(){var e=Object.assign({},of);Ul(e,(function(t,r){e[r]=Ml(t.bind(null,null))}));var t=Object.assign({},af);Ul(t,(function(e,r){t[r]=Ml(e)}));var r=Object.assign({},of);return Ul(r,(function(e,t){r[t]=Ml(e)})),Object.assign(e,{mutable:t,batch:r,batched:function(e,t){var r,n;"function"==typeof e?(n=e,r=Fl()):(r=e,n=t);var o=Object.assign({},of);return Ul(o,(function(e,t){o[t]=Ml(e.bind(null,r))})),n(o)},__:Ll,getBatchToken:Fl})}();function cf(e){return("function"==typeof console.warn?console.warn.bind(console):console.log.bind(console))(e)}function uf(e,t){return e+function(e){return e.charAt(0).toUpperCase()+e.slice(1)}(t)}function df(e){return"from".concat(e,"Id")}function pf(e){return"to".concat(e,"Id")}function lf(e){return function(){var t;return(t=this.getQuerySet())[e].apply(t,arguments)}}function ff(e){return function(){return this.getQuerySet()[e]}}function hf(e,t){var r=t.sharedMethods.slice();!function(e,t){for(var r=e;r!==Function.prototype;)t(r),r=Object.getPrototypeOf(r)}(t,(function(t){for(var n=0;n<r.length;n++){var o=!1,i=r[n],a=Object.getOwnPropertyDescriptor(t.prototype,i);void 0!==a&&(void 0!==a.get?(a.get=ff(i),Object.defineProperty(e,i,a)):e[i]=lf(i),o=!0),o&&r.splice(n--,1)}}))}function mf(e){return null!=e&&"function"==typeof e.getId?e.getId():e}sf.getBatchToken;function vf(e,t){var r=e.type,n=e.payload;if(r!==hl)return!1;if("object"!==al()(n))return!1;if(!n.hasOwnProperty(t))return!1;var o=n[t];return null!==o&&void 0!==o}function gf(e,t){return Object.entries(e).reduce((function(e,r){var n=pl()(r,2),o=n[0],i=n[1];return e[o]=t(i),e}),{})}function yf(e){return e&&"string"!=typeof e?e.modelName:e}var _f=function(){function e(e,t,r,n,o){var i=this;this.schema=e,this.db=t,this.state=r||t.getEmptyState(),this.initialState=this.state,this.withMutations=Boolean(n),this.batchToken=o||Fl(),this.modelData={},this.models=e.getModelClasses(),this.sessionBoundModels=this.models.map((function(e){function t(){return Reflect.construct(e,arguments,t)}return Reflect.setPrototypeOf(t.prototype,e.prototype),Reflect.setPrototypeOf(t,e),Object.defineProperty(i,e.modelName,{get:function(){return t}}),t.connect(i),t}))}var t=e.prototype;return t.getDataForModel=function(e){return this.modelData[e]||(this.modelData[e]={}),this.modelData[e]},t.getModelData=function(){return this.modelData},t.markAccessed=function(e,t){var r=this.getDataForModel(e);r.accessedInstances||(r.accessedInstances={}),t.forEach((function(e){r.accessedInstances[e]=!0}))},t.markFullTableScanned=function(e){this.getDataForModel(e).fullTableScanned=!0},t.markAccessedIndexes=function(e){var t=this;e.forEach((function(e){var r=pl()(e,3),n=r[0],o=r[1],i=r[2],a=t.getDataForModel(n);a.accessedIndexes||(a.accessedIndexes={}),a.accessedIndexes[o]=[].concat(ol()(a.accessedIndexes[o]||[]),[i])}))},t.applyUpdate=function(e){var t=this._getTransaction(e),r=this.db.update(e,t,this.state),n=r.status,o=r.state,i=r.payload;if("SUCCESS"!==n)throw new Error("Applying update failed with status ".concat(n,". Payload: ").concat(i));return this.state=o,i},t.query=function(e){var t=this.db.query(e,this.state);return this._markAccessedByQuery(e,t),t},t._getTransaction=function(e){var t=this.withMutations,r=e.action,n=this.batchToken;return[ll,fl].includes(r)&&(n=Fl()),{batchToken:n,withMutations:t}},t._markAccessedByQuery=function(e,t){var r=e.table,n=e.clauses,o=t.rows,i=this[r].idAttribute,a=new Set(o.map((function(e){return e[i]}))),s=n.some((function(e){return!!vf(e,i)&&(a.add(e.payload[i]),!0)})),c=[],u=this.state[r].indexes;n.forEach((function(e){Object.keys(u).forEach((function(t){if(vf(e,t)){var n=e.payload[t];c.push([r,t,n])}}))})),s?this.markAccessed(r,a):c.length?(this.markAccessed(r,a),this.markAccessedIndexes(c)):this.markFullTableScanned(r)},t.getNextState=function(){return cf("`Session.prototype.getNextState` has been deprecated. Access the `Session.prototype.state` property instead."),this.state},t.reduce=function(){throw new Error("`Session.prototype.reduce` has been removed. The Redux integration API is now decoupled from ORM and Session - see the 0.9 migration guide in the GitHub repo.")},Ol()(e,[{key:"accessedModelInstances",get:function(){return Object.entries(this.getModelData()).reduce((function(e,t){var r=pl()(t,2),n=r[0],o=r[1];return o.accessedInstances&&(e[n]=o.accessedInstances),e}),{})}},{key:"fullTableScannedModels",get:function(){return Object.entries(this.getModelData()).reduce((function(e,t){var r=pl()(t,2),n=r[0];return r[1].fullTableScanned&&e.push(n),e}),[])}},{key:"accessedIndexes",get:function(){return Object.entries(this.getModelData()).reduce((function(e,t){var r=pl()(t,2),n=r[0],o=r[1];return o.accessedIndexes&&(e[n]=o.accessedIndexes),e}),{})}}]),e}();function Ef(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Sf(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ef(Object(r),!0).forEach((function(t){xl()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ef(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var bf=function(){function e(e,t,r){Object.assign(this,{modelClass:e,clauses:t||[]}),this._opts=r}e.addSharedMethod=function(e){this.sharedMethods=this.sharedMethods.concat(e)};var t=e.prototype;return t._new=function(e,t){var r=Sf(Sf({},this._opts),t);return new this.constructor(this.modelClass,e,r)},t.toString=function(){var e=this;this._evaluate();var t=this.rows.map((function(t){var r=t.id;return e.modelClass.withId(r).toString()})).join("\n    - ");return"QuerySet contents:\n    - ".concat(t)},t.toRefArray=function(){return this._evaluate()},t.toModelArray=function(){var e=this.modelClass;return this._evaluate().map((function(t){return new e(t)}))},t.count=function(){return this._evaluate(),this.rows.length},t.exists=function(){return Boolean(this.count())},t.at=function(e){var t=this.modelClass,r=this._evaluate();if(e>=0&&e<r.length)return new t(r[e])},t.first=function(){return this.at(0)},t.last=function(){var e=this._evaluate();return this.at(e.length-1)},t.all=function(){return this._new(this.clauses)},t.filter=function(e){var t="object"===al()(e)?gf(e,mf):e,r={type:hl,payload:t};return this._new(this.clauses.concat(r))},t.exclude=function(e){var t="object"===al()(e)?gf(e,mf):e,r={type:ml,payload:t};return this._new(this.clauses.concat(r))},t._evaluate=function(){if(void 0===this.modelClass.session)throw new Error(["Tried to query the ".concat(this.modelClass.modelName," model's table without a session. "),"Create a session using `session = orm.session()` and use ",'`session["'.concat(this.modelClass.modelName,'"]` for querying instead.')].join(""));if(!this._evaluated){var e=this.modelClass,t=e.session,r={table:e.modelName,clauses:this.clauses};this.rows=t.query(r).rows,this._evaluated=!0}return this.rows},t.orderBy=function(e,t){var r={type:"REDUX_ORM_ORDER_BY",payload:[e,t]};return this._new(this.clauses.concat(r))},t.update=function(e){var t=this.modelClass,r=t.session,n=t.modelName;r.applyUpdate({action:ll,query:{table:n,clauses:this.clauses},payload:e}),this._evaluated=!1},t.delete=function(){var e=this.modelClass,t=e.session,r=e.modelName;this.toModelArray().forEach((function(e){return e._onDelete()})),t.applyUpdate({action:fl,query:{table:r,clauses:this.clauses}}),this._evaluated=!1},t.map=function(){throw new Error("`QuerySet.prototype.map` has been removed. Call `.toModelArray()` or `.toRefArray()` first to map.")},t.forEach=function(){throw new Error("`QuerySet.prototype.forEach` has been removed. Call `.toModelArray()` or `.toRefArray()` first to iterate.")},Ol()(e,[{key:"withModels",get:function(){throw new Error("`QuerySet.prototype.withModels` has been removed. Use `.toModelArray()` or predicate functions that instantiate Models from refs, e.g. `new Model(ref)`.")}},{key:"withRefs",get:function(){cf("`QuerySet.prototype.withRefs` has been deprecated. Query building operates on refs only now.")}}]),e}();bf.sharedMethods=["count","at","all","last","first","filter","exclude","orderBy","update","delete"];var Tf=bf,Rf=r("./node_modules/@babel/runtime/helpers/construct.js"),Cf=r.n(Rf),Of=function(e){function t(){return e.apply(this,arguments)||this}Al()(t,e);var r=t.prototype;return r.installForwardsDescriptor=function(){Object.defineProperty(this.model.prototype,this.fieldName,this.field.createForwardsDescriptor(this.fieldName,this.model,this.toModel,this.throughModel))},r.installForwardsVirtualField=function(){this.model.virtualFields[this.fieldName]=this.field.createForwardsVirtualField(this.fieldName,this.model,this.toModel,this.throughModel)},r.installBackwardsDescriptor=function(){var e,t,r,n;if(Object.getOwnPropertyDescriptor(this.toModel.prototype,this.backwardsFieldName))throw new Error((e=this.model.modelName,t=this.fieldName,r=this.toModel.modelName,n=this.backwardsFieldName,["Reverse field ".concat(n," already defined")," on model ".concat(r,". To fix, set a custom related")," name on ".concat(e,".").concat(t,".")].join("")));Object.defineProperty(this.toModel.prototype,this.backwardsFieldName,this.field.createBackwardsDescriptor(this.fieldName,this.model,this.toModel,this.throughModel))},r.installBackwardsVirtualField=function(){this.toModel.virtualFields[this.backwardsFieldName]=this.field.createBackwardsVirtualField(this.fieldName,this.model,this.toModel,this.throughModel)},t}(function(){function e(e){this.field=e.field,this.fieldName=e.fieldName,this.model=e.model,this.orm=e.orm,this.field.references(this.model)&&(this.field.toModelName="this")}return e.prototype.run=function(){this.installForwardsDescriptor(),this.field.installsForwardsVirtualField&&this.installForwardsVirtualField(),this.field.installsBackwardsDescriptor&&this.installBackwardsDescriptor(),this.field.installsBackwardsVirtualField&&this.installBackwardsVirtualField()},Ol()(e,[{key:"toModel",get:function(){if(void 0===this._toModel){var e=this.field.toModelName;this._toModel=e?"this"===e?this.model:this.orm.get(e):null}return this._toModel}},{key:"throughModel",get:function(){if(void 0===this._throughModel){var e=this.field.getThroughModelName(this.fieldName,this.model);this._throughModel=e?this.orm.get(e):null}return this._throughModel}},{key:"backwardsFieldName",get:function(){return this.field.getBackwardsFieldName(this.model)}}]),e}()),wf=function(){function e(){}var t=e.prototype;return t.getClass=function(){return this.constructor},t.references=function(e){return!1},t.getThroughModelName=function(e,t){return null},Ol()(e,[{key:"installerClass",get:function(){return Of}},{key:"installsForwardsVirtualField",get:function(){return!1}},{key:"installsBackwardsDescriptor",get:function(){return!1}},{key:"installsBackwardsVirtualField",get:function(){return!1}},{key:"index",get:function(){return!1}}]),e}();function Af(e,t){return{get:function(){var r=this.getClass().session[t],n=this._fields[e];return r.withId(n)},set:function(t){this.update(xl()({},e,mf(t)))}}}function If(e,t,r,n,o){return{get:function(){var i=this.getClass().session,a=i[e],s=i[t],c=i[r],u=o?s:a,d=o?a:s,p=o?n.to:n.from,l=o?n.from:n.to,f=this.getId(),h=c.filter(xl()({},p,f)),m=new Set(h.toRefArray().map((function(e){return e[l]}))),v=d.filter((function(e){return m.has(e[d.idAttribute])}));return v.add=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=new Set(t.map(mf)),o=h.filter((function(e){return n.has(e[l])}));if(o.exists()){var i=o.toRefArray().map((function(e){return e[l]}));throw new Error("Tried to add already existing ".concat(d.modelName," id(s) ").concat(i," to the ").concat(u.modelName," instance with id ").concat(f))}n.forEach((function(e){var t;c.create((t={},xl()(t,l,e),xl()(t,p,f),t))}))},v.clear=function(){h.delete()},v.remove=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=new Set(t.map(mf)),o=h.filter((function(e){return n.has(e[l])}));if(o.count()!==n.size){var i=o.toRefArray().map((function(e){return e[l]})),a=ol()(n).filter((function(e){return!i.includes(e)}));throw new Error("Tried to delete non-existing ".concat(d.modelName," id(s) ").concat(a," from the ").concat(u.modelName," instance with id ").concat(f))}o.delete()},v},set:function(){throw new Error("Tried setting a M2M field. Please use the related QuerySet methods add, remove and clear.")}}}var xf=function(e){function t(t){var r;return(r=e.call(this)||this).opts=t||{},r.opts.hasOwnProperty("getDefault")&&(r.getDefault=r.opts.getDefault),r}return Al()(t,e),t.prototype.createForwardsDescriptor=function(e,t){return function(e){return{get:function(){return this._fields[e]},set:function(t){return this.set(e,t)},enumerable:!0,configurable:!0}}(e)},t}(wf),kf=function(e){function t(){var t;if(t=e.call(this)||this,1===arguments.length&&"object"===al()(arguments.length<=0?void 0:arguments[0])){var r=arguments.length<=0?void 0:arguments[0];t.toModelName=yf(r.to),t.relatedName=r.relatedName,t.through=yf(r.through),t.throughFields=r.throughFields,t.as=r.as}else{var n=[yf(arguments.length<=0?void 0:arguments[0]),arguments.length<=1?void 0:arguments[1]];t.toModelName=n[0],t.relatedName=n[1]}return t}Al()(t,e);var r=t.prototype;return r.getBackwardsFieldName=function(e){return this.relatedName||e.modelName.toLowerCase()+"Set"},r.createBackwardsVirtualField=function(e,t,r,n){return new(this.getClass())(t.modelName,e)},r.references=function(e){return this.toModelName===e.modelName},Ol()(t,[{key:"installsBackwardsVirtualField",get:function(){return!0}},{key:"installsBackwardsDescriptor",get:function(){return!0}},{key:"installerClass",get:function(){return function(e){function t(){return e.apply(this,arguments)||this}return Al()(t,e),t.prototype.installForwardsDescriptor=function(){Object.defineProperty(this.model.prototype,this.field.as||this.fieldName,this.field.createForwardsDescriptor(this.fieldName,this.model,this.toModel,this.throughModel))},t}(Of)}}]),t}(wf),Pf=function(e){function t(){return e.apply(this,arguments)||this}Al()(t,e);var r=t.prototype;return r.createForwardsDescriptor=function(e,t,r,n){return Af(e,r.modelName)},r.createBackwardsDescriptor=function(e,t,r,n){return o=e,i=t.modelName,{get:function(){return this.getClass().session[i].filter(xl()({},o,this.getId()))},set:function(){throw new Error("Can't mutate a reverse many-to-one relation.")}};var o,i},Ol()(t,[{key:"index",get:function(){return!0}}]),t}(kf),Nf=function(e){function t(){return e.apply(this,arguments)||this}Al()(t,e);var r=t.prototype;return r.getDefault=function(){return[]},r.getThroughModelName=function(e,t){return this.through||uf(t.modelName,e)},r.createForwardsDescriptor=function(e,t,r,n){return If(t.modelName,r.modelName,n.modelName,this.getThroughFields(e,t,r,n),!1)},r.createBackwardsDescriptor=function(e,t,r,n){return If(t.modelName,r.modelName,n.modelName,this.getThroughFields(e,t,r,n),!0)},r.createBackwardsVirtualField=function(e,t,r,n){return new(this.getClass())({to:t.modelName,relatedName:e,through:n.modelName,throughFields:this.getThroughFields(e,t,r,n)})},r.createForwardsVirtualField=function(e,t,r,n){return new(this.getClass())({to:r.modelName,relatedName:e,through:this.through,throughFields:this.getThroughFields(e,t,r,n),as:this.as})},r.getThroughFields=function(e,t,r,n){if(this.throughFields){var o=pl()(this.throughFields,2),i=o[0],a=o[1],s=n.fields[i];return{to:s.references(r)?i:a,from:s.references(r)?a:i}}if(t.modelName===r.modelName)return{to:pf(r.modelName),from:df(t.modelName)};var c=function(e){return Object.keys(n.fields).find((function(t){return n.fields[t].references(e)}))};return{to:c(r),from:c(t)}},Ol()(t,[{key:"installsForwardsVirtualField",get:function(){return!0}}]),t}(kf),Df=function(e){function t(){return e.apply(this,arguments)||this}Al()(t,e);var r=t.prototype;return r.getBackwardsFieldName=function(e){return this.relatedName||e.modelName.toLowerCase()},r.createForwardsDescriptor=function(e,t,r,n){return function(){return Af.apply(void 0,arguments)}(e,r.modelName)},r.createBackwardsDescriptor=function(e,t,r,n){return o=e,i=t.modelName,{get:function(){return this.getClass().session[i].get(xl()({},o,this.getId()))},set:function(){throw new Error("Can't mutate a reverse one-to-one relation.")}};var o,i},t}(kf);function jf(e){return new xf(e)}function Mf(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Cf()(Pf,t)}function Lf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Uf(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Lf(Object(r),!0).forEach((function(t){xl()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lf(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Vf(e){var t=e.getClass(),r=t.idAttribute;return{table:t.modelName,clauses:[{type:hl,payload:xl()({},r,e.getId())}]}}var Ff=function(){function e(e){this._initFields(e)}var t=e.prototype;return t._initFields=function(e){var t=this,r=Object(e);this._fields=Uf({},r),Object.keys(r).forEach((function(e){e in t||Object.defineProperty(t,e,{get:function(){return t._fields[e]},set:function(r){return t.set(e,r)},configurable:!0,enumerable:!0})}))},e.toString=function(){return"ModelClass: ".concat(this.modelName)},e.options=function(){return{}},e.markAccessed=function(e){if(void 0===this._session)throw new Error(["Tried to mark rows of the ".concat(this.modelName," model as accessed without a session. "),"Create a session using `session = orm.session()` and call ",'`session["'.concat(this.modelName,'"].markAccessed` instead.')].join(""));this.session.markAccessed(this.modelName,e)},e.markFullTableScanned=function(){if(void 0===this._session)throw new Error(["Tried to mark the ".concat(this.modelName," model as full table scanned without a session. "),"Create a session using `session = orm.session()` and call ",'`session["'.concat(this.modelName,'"].markFullTableScanned` instead.')].join(""));this.session.markFullTableScanned(this.modelName)},e.markAccessedIndexes=function(e){var t=this;if(void 0===this._session)throw new Error(["Tried to mark indexes for the ".concat(this.modelName," model as accessed without a session. "),"Create a session using `session = orm.session()` and call ",'`session["'.concat(this.modelName,'"].markAccessedIndexes` instead.')].join(""));this.session.markAccessedIndexes(e.map((function(e){var r=pl()(e,2),n=r[0],o=r[1];return[t.modelName,n,o]})))},e.connect=function(e){if(!(e instanceof _f))throw new Error("A model can only be connected to instances of Session.");this._session=e},e.getQuerySet=function(){return new(0,this.querySetClass)(this)},e.invalidateClassCache=function(){this.isSetUp=void 0,this.virtualFields={}},e.tableOptions=function(){return"function"==typeof this.backend?(cf("`Model.backend` has been deprecated. Please rename to `.options`."),this.backend()):this.backend?(cf("`Model.backend` has been deprecated. Please rename to `.options`."),this.backend):"function"==typeof this.options?this.options():this.options},e.create=function(e){var t=this;if(void 0===this._session)throw new Error(["Tried to create a ".concat(this.modelName," model instance without a session. "),"Create a session using `session = orm.session()` and call ",'`session["'.concat(this.modelName,'"].create` instead.')].join(""));var r=Uf({},e),n={},o=Object.keys(this.fields),i=Object.keys(this.virtualFields);o.forEach((function(o){var i=t.fields[o],a=e.hasOwnProperty(o);if(i instanceof Nf)a&&(n[o]=e[o],i.as||delete r[o]);else if(a){var s=e[o];r[o]=mf(s)}else i.getDefault&&(r[o]=i.getDefault())})),i.forEach((function(o){if(!n.hasOwnProperty(o)){var i=t.virtualFields[o];e.hasOwnProperty(o)&&i instanceof Nf&&(n[o]=e[o],delete r[o])}}));var a=new this(this.session.applyUpdate({action:"REDUX_ORM_CREATE",table:this.modelName,payload:r}));return a._refreshMany2Many(n),a},e.upsert=function(e){if(void 0===this.session)throw new Error(["Tried to upsert a ".concat(this.modelName," model instance without a session. "),"Create a session using `session = orm.session()` and call ",'`session["'.concat(this.modelName,'"].upsert` instead.')].join(""));var t=this.idAttribute;if(e.hasOwnProperty(t)){var r=e[t];if(this.idExists(r)){var n=this.withId(r);return n.update(e),n}}return this.create(e)},e.withId=function(e){return this.get(xl()({},this.idAttribute,e))},e.idExists=function(e){return this.exists(xl()({},this.idAttribute,e))},e.exists=function(e){if(void 0===this.session)throw new Error(["Tried to check if a ".concat(this.modelName," model instance exists without a session. "),"Create a session using `session = orm.session()` and call ",'`session["'.concat(this.modelName,'"].exists` instead.')].join(""));return Boolean(this._findDatabaseRows(e).length)},e.get=function(e){var t=this._findDatabaseRows(e);if(0===t.length)return null;if(t.length>1)throw new Error("Expected to find a single row in `".concat(this.modelName,".get`. Found ").concat(t.length,"."));return new this(t[0])},t.getClass=function(){return this.constructor},t.getId=function(){return this._fields[this.getClass().idAttribute]},e._findDatabaseRows=function(e){var t={table:this.modelName};return e&&(t.clauses=[{type:hl,payload:e}]),this.session.query(t).rows},t.toString=function(){var e=this,t=this.getClass(),r=t.modelName,n=Object.keys(t.fields).map((function(r){if(t.fields[r]instanceof Nf){var n=e[r].toModelArray().map((function(e){return e.getId()}));return"".concat(r,": [").concat(n.join(", "),"]")}var o=e._fields[r];return"".concat(r,": ").concat(o)})).join(", ");return"".concat(r,": {").concat(n,"}")},t.equals=function(e){return t=this._fields,r=e._fields,(n=Object.entries(Object(t))).length===Object.keys(r).length&&n.every((function(e){var t=pl()(e,2),n=t[0],o=t[1];return r.hasOwnProperty(n)&&r[n]===o}));var t,r,n},t.set=function(e,t){this.update(xl()({},e,t))},t.update=function(e){var t=this.getClass();if(void 0===t.session)throw new Error(["Tried to update a ".concat(t.modelName," model instance without a session. "),"You cannot call `.update` on an instance that you did not receive from the database."].join(""));var r=Uf({},e),n=t.fields,o=t.virtualFields,i={};for(var a in r){if(n.hasOwnProperty(a)){var s=n[a];s instanceof Pf||s instanceof Df?r[a]=mf(r[a]):s instanceof Nf&&(i[a]=r[a],s.as||delete r[a])}else if(o.hasOwnProperty(a)){o[a]instanceof Nf&&(i[a]=r[a],delete r[a])}}var c=Uf(Uf({},this._fields),r),u=new t(c);this.equals(u)||(this._initFields(c),t.session.applyUpdate({action:ll,query:Vf(this),payload:r})),this._refreshMany2Many(i)},t.refreshFromState=function(){this._initFields(this.ref)},t.delete=function(){var e=this.getClass();if(void 0===e.session)throw new Error(["Tried to delete a ".concat(e.modelName," model instance without a session. "),"You cannot call `.delete` on an instance that you did not receive from the database."].join(""));this._onDelete(),e.session.applyUpdate({action:fl,query:Vf(this)})},t._refreshMany2Many=function(e){var t=this,r=this.getClass(),n=r.fields,o=r.virtualFields,i=r.modelName;Object.keys(e).forEach((function(a){var s=!n.hasOwnProperty(a),c=o[a],u=e[a];if(!Array.isArray(u))throw new TypeError("Failed to resolve many-to-many relationship: ".concat(i,"[").concat(a,"] must be an array (passed: ").concat(u,")"));var d=u.map(mf),p=ol()(new Set(d));if(d.length!==p.length)throw new Error('Found duplicate id(s) when passing "'.concat(d,'" to ').concat(r.modelName,".").concat(a," value"));var l,f,h=c.through||uf(r.modelName,a),m=r.session[h];if(s){var v=c.throughFields;f=v.from,l=v.to}else{var g=c.throughFields;l=g.from,f=g.to}var y,_,E,S,b,T=m.filter((function(e){return e[l]===t[r.idAttribute]})).toRefArray().map((function(e){return e[f]})),R=(_=d,E=(y=T).filter((function(e){return _.includes(e)})),S=y.filter((function(e){return!E.includes(e)})),b=_.filter((function(e){return!E.includes(e)})),S.length||b.length?{delete:S,add:b}:null);if(R){var C,O,w=R.delete,A=R.add;if(w.length>0)(C=t[c.as||a]).remove.apply(C,ol()(w));if(A.length>0)(O=t[c.as||a]).add.apply(O,ol()(A))}}))},t._onDelete=function(){var e=this.getClass().virtualFields;for(var t in e){var r=e[t];if(r instanceof Nf)this[r.as||t].clear();else if(r instanceof Pf){var n=this[t];n.exists()&&n.update(xl()({},r.relatedName,null))}else r instanceof Df&&null!==this[t]&&(this[t][r.relatedName]=null)}},e.hasId=function(e){return console.warn("`Model.hasId` has been deprecated. Please use `Model.idExists` instead."),this.idExists(e)},t.getNextState=function(){throw new Error("`Model.prototype.getNextState` has been removed. See the 0.9 migration guide on the GitHub repo.")},Ol()(e,[{key:"ref",get:function(){var e=this.getClass();return e._findDatabaseRows(xl()({},e.idAttribute,this.getId()))[0]}}],[{key:"idAttribute",get:function(){if(void 0===this._session)throw new Error(["Tried to get the ".concat(this.modelName," model's id attribute without a session. "),"Create a session using `session = orm.session()` and access ",'`session["'.concat(this.modelName,'"].idAttribute` instead.')].join(""));return this.session.db.describe(this.modelName).idAttribute}},{key:"session",get:function(){return this._session}},{key:"query",get:function(){return this.getQuerySet()}}]),e}();Ff.fields={id:jf()},Ff.virtualFields={},Ff.querySetClass=Tf;var Gf=Ff,Bf=r("./node_modules/lodash/filter.js"),Hf=r.n(Bf),Wf=r("./node_modules/lodash/orderBy.js"),qf=r.n(Wf),Kf=r("./node_modules/lodash/reject.js"),zf=r.n(Kf),Yf=r("./node_modules/lodash/sortBy.js"),Qf=r.n(Yf);function Jf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Jf(Object(r),!0).forEach((function(t){xl()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jf(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Xf={idAttribute:"id",arrName:"items",mapName:"itemsById",fields:{}};var Zf=function(){function e(e){Object.assign(this,Xf,e)}var t=e.prototype;return t.accessId=function(e,t){return e[this.mapName][t]},t.accessIds=function(e,t){var r=e[this.mapName];return t.map((function(e){return r[e]}))},t.idExists=function(e,t){return e[this.mapName].hasOwnProperty(t)},t.accessIdList=function(e){return e[this.arrName]},t.accessList=function(e){return this.accessIds(e,this.accessIdList(e))},t.getMaxId=function(e){return this.getMeta(e,"maxId")},t.setMaxId=function(e,t,r){return this.setMeta(e,t,"maxId",r)},t.nextId=function(e){return e+1},t.getEmptyState=function(){var e,t=this,r=(e={},xl()(e,this.arrName,[]),xl()(e,this.mapName,{}),e),n=Object.keys(this.fields).filter((function(e){return e!==t.idAttribute})).filter((function(e){return t.fields[e].index})).reduce((function(e,t){return $f($f({},e),{},xl()({},t,{}))}),{});return $f($f({},r),{},{indexes:n,meta:{}})},t.setMeta=function(e,t,r,n){var o=e.batchToken;return e.withMutations?sf.mutable.setIn(["meta",r],n,t):sf.batch.setIn(o,["meta",r],n,t)},t.getMeta=function(e,t){return e.meta[t]},t.query=function(e,t){var r=this;if(0===t.length)return this.accessList(e);var n=this.idAttribute;return Qf()(t,(function(e){return vf(e,n)?1:(t=e.type,[hl,ml].includes(t)?2:3);var t})).reduce((function t(o,i){var a=i.type,s=i.payload;if(!o){if(vf(i,n)){var c=s[n],u=Object.keys(s).reduce((function(e,t){return t!==n&&(e[t]=s[t]),e}),{}),d=r.idExists(e,c)?[c]:[];return Object.keys(u).length?t(r.accessIds(e,d),$f($f({},i),{},{payload:u})):r.accessIds(e,d)}if(a===hl&&"object"===al()(s)){var p=Object.entries(e.indexes),l=[],f=[];if(p.forEach((function(e){var t=pl()(e,2),r=t[0],n=t[1];vf(i,r)&&n.hasOwnProperty(s[r])&&(l.push(n[s[r]]),f.push(r))})),l.length){var h=l.pop(),m=l.reduce((function(e,t){var r=new Set(t);return e.filter(Set.prototype.has,r)}),h),v=Object.keys(s).reduce((function(e,t){return f.includes(t)||(e[t]=s[t]),e}),{});return Object.keys(v).length?t(r.accessIds(e,m),$f($f({},i),{},{payload:v})):r.accessIds(e,m)}}return t(r.accessList(e),i)}switch(a){case hl:return Hf()(o,s);case ml:return zf()(o,s);case"REDUX_ORM_ORDER_BY":var g=pl()(s,2),y=g[0],_=g[1];return qf()(o,y,function(e){if(void 0!==e){var t=function(e){return["desc",!1].includes(e)?"desc":"asc"};return Array.isArray(e)?e.map(t):t(e)}}(_));default:return o}}),void 0)},t.insert=function(e,t,r){var n,o,i,a,s,c,u,d=e.batchToken,p=e.withMutations,l=r.hasOwnProperty(this.idAttribute),f=(i=this.getMaxId(t),a=r[this.idAttribute],void 0===(u=i)&&(u=-1),void 0===a?c=s=u+1:(s=Math.max(u+1,a),c=a),[s,c]),h=pl()(f,2),m=h[0],v=h[1];o=this.setMaxId(e,t,m);var g=l?r:sf.batch.set(d,this.idAttribute,v,r),y=Object.keys(o.indexes).filter((function(e){return r.hasOwnProperty(e)&&null!==r[e]})).map((function(e){return[e,r[e]]}));if(p)return sf.mutable.push(v,o[this.arrName]),sf.mutable.set(v,g,o[this.mapName]),y.forEach((function(e){var t=pl()(e,2),r=t[0],n=t[1],i=o.indexes[r];i.hasOwnProperty(n)?sf.mutable.push(v,i[n]):sf.mutable.set(n,[v],i)})),{state:o,created:g};var _=sf.batch.merge(d,y.reduce((function(e,t){var r=pl()(t,2),n=r[0],o=r[1];return e[n]=sf.batch.merge(d,xl()({},o,sf.batch.push(d,v,e[n][o]||[])),e[n]),e}),$f({},o.indexes)),o.indexes);return{state:sf.batch.merge(d,(n={},xl()(n,this.arrName,sf.batch.push(d,v,o[this.arrName])),xl()(n,this.mapName,sf.batch.merge(d,xl()({},v,g),o[this.mapName])),xl()(n,"indexes",_),n),o),created:g}},t.update=function(e,t,r,n){var o,i=this,a=e.batchToken,s=e.withMutations,c=s?sf.mutable.set:sf.batch.set(a),u=Object.keys(t.indexes).filter((function(e){return n.hasOwnProperty(e)})),d=[],p=[],l=r.reduce((function(e,t){var r=u.reduce((function(e,r){return $f($f({},e),{},xl()({},r,t[r]))}),{}),o=function(e){return(s?sf.mutable.merge:sf.batch.merge(a))(n,e)}(t),l=u.reduce((function(e,t){return $f($f({},e),{},xl()({},t,o[t]))}),{}),f=o[i.idAttribute],h=c(f,o,e);return u.forEach((function(e){var t=r[e],n=l[e];t!==n&&(null!=t&&p.push([e,t,f]),null!==n&&d.push([e,n,f]))})),h}),t[this.mapName]),f=t.indexes;return s?(p.forEach((function(e){var t=pl()(e,3),r=t[0],n=t[1],o=t[2],i=f[r][n],a=i.indexOf(o);sf.mutable.splice(a,1,[],i)})),d.forEach((function(e){var t=pl()(e,3),r=t[0],n=t[1],o=t[2];sf.mutable.push(o,f[r][n])}))):(d.length&&(f=sf.batch.merge(a,d.reduce((function(e,t){var r=pl()(t,3),n=r[0],o=r[1],i=r[2];return e[n]=sf.batch.merge(a,xl()({},o,sf.batch.push(a,i,e[n][o]||[])),e[n]),e}),$f({},f)),f)),p.length&&(f=sf.batch.merge(a,p.reduce((function(e,t){var r=pl()(t,3),n=r[0],o=r[1],i=r[2];return e[n]=sf.batch.merge(a,xl()({},o,sf.batch.filter(a,(function(e){return e!==i}),e[n][o])),e[n]),e}),$f({},f)),f))),sf.batch.merge(a,(o={},xl()(o,this.mapName,l),xl()(o,"indexes",f),o),t)},t.delete=function(e,t,r){var n,o=this,i=e.batchToken,a=e.withMutations,s=this.arrName,c=this.mapName,u=t[s],d=r.map((function(e){return e[o.idAttribute]}));if(a)return d.forEach((function(e){var r=u.indexOf(e);sf.mutable.splice(r,1,[],u),sf.mutable.omit(e,t[c])})),Object.values(t.indexes).forEach((function(e){return Object.values(e).forEach((function(e){return d.forEach((function(t){var r=e.indexOf(t);-1!==r&&sf.mutable.splice(r,1,[],e)}))}))})),t;var p=sf.batch.merge(i,Object.entries(t.indexes).reduce((function(e,t){var r=pl()(t,2),n=r[0],o=r[1];return e[n]=sf.batch.merge(i,Object.entries(o).reduce((function(e,t){var r=pl()(t,2),n=r[0],o=r[1];return e[n]=sf.batch.filter(i,(function(e){return!d.includes(e)}),o),e}),$f({},e[n])),e[n]),e}),$f({},t.indexes)),t.indexes);return sf.batch.merge(i,(n={},xl()(n,s,sf.batch.filter(i,(function(e){return!d.includes(e)}),t[s])),xl()(n,c,sf.batch.omit(i,d,t[c])),xl()(n,"indexes",sf.batch.merge(i,p,t.indexes)),n),t)},e}();function eh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function th(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eh(Object(r),!0).forEach((function(t){xl()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eh(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var rh={};function nh(e,t,r){var n=t.table,o=t.clauses;return{rows:e[n].query(r[n],o)}}function oh(e,t,r,n){var o,i,a,s=t.action,c=t.payload;if("REDUX_ORM_CREATE"===s){var u=e[o=t.table],d=n[o],p=u.insert(r,d,c);i=p.state,a=p.created}else{var l=t.query;o=l.table;var f=nh(e,l,n).rows,h=e[o],m=n[o];if(s===ll)i=h.update(r,m,f,c),a=nh(e,l,n).rows;else{if(s!==fl)throw new Error("Database received unknown update type: ".concat(s));i=h.delete(r,m,f),a=f}}return{status:"SUCCESS",state:function(e,t,r,n){var o=r.batchToken;return r.withMutations?(n[e]=t,n):sf.batch.set(o,e,t,n)}(o,i,r,n),payload:a}}Object.defineProperty(rh,"@@_______REDUX_ORM_STATE_FLAG",{enumerable:!0,value:!0});var ih=function(e){var t=e.tables,r=Object.entries(t).reduce((function(e,t){var r=pl()(t,2),n=r[0],o=r[1];return th(th({},e),{},xl()({},n,new Zf(o)))}),{});return{getEmptyState:function(){return Object.entries(r).reduce((function(e,t){var r=pl()(t,2),n=r[0],o=r[1];return th(th({},e),{},xl()({},n,o.getEmptyState()))}),rh)},query:nh.bind(null,r),update:oh.bind(null,r),describe:function(e){return r[e]}}},ah=r("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),sh=r.n(ah),ch=function(){function e(e){var t=e.parent,r=e.orm;this._parent=t,this._orm=r,this.keySelector=gl}return Ol()(e,[{key:"cachePath",get:function(){var e=this._parent?this._parent.cachePath:[];return[].concat(ol()(e),[this.key])}},{key:"orm",get:function(){return this._orm}},{key:"parent",get:function(){return this._parent}}]),e}(),uh=function(e){function t(t){var r,n=t.model,o=sh()(t,["model"]);return(r=e.call(this,o)||this)._model=n,r}return Al()(t,e),Ol()(t,[{key:"resultFunc",get:function(){var e=this;return function(t,r){for(var n=arguments.length,o=new Array(n>2?n-2:0),i=2;i<n;i++)o[i-2]=arguments[i];var a=t[e._model.modelName];return void 0===r?a.all().toModelArray().map((function(r){return e.valueForInstance.apply(e,[r,t].concat(o))})):Array.isArray(r)?r.map((function(r){return e.valueForInstance.apply(e,[a.withId(r),t].concat(o))})):e.valueForInstance.apply(e,[a.withId(r),t].concat(o))}}},{key:"model",get:function(){return this._model}}]),t}(ch);function dh(e,t){return t}var ph=function(e){function t(t){var r,n=t.field,o=t.selector,i=sh()(t,["field","selector"]);return(r=e.call(this,i)||this)._field=n,r._selector=o,r}return Al()(t,e),t.prototype.createResultFunc=function(e){var t=this,r=this._parent.toModel.idAttribute;return function(n){for(var o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];var s=e.apply(void 0,[n].concat(i)),c=dh.apply(void 0,[n].concat(i)),u=function(e){return null===e?null:e.map((function(e){return t._selector(n,e[r])}))};return void 0===c||Array.isArray(c)?s.map(u):u(s)}},Ol()(t,[{key:"selector",get:function(){return this._selector},set:function(e){this._selector=e}},{key:"key",get:function(){return this._selector}}]),t}(uh),lh=function(e){function t(t){var r,n=t.model,o=sh()(t,["model"]);return(r=e.call(this,o)||this)._model=n,r}return Al()(t,e),Ol()(t,[{key:"key",get:function(){return this._model.modelName}},{key:"dependencies",get:function(){return[this._orm,dh]}},{key:"resultFunc",get:function(){var e=this;return function(t,r){var n=t[e._model.modelName];if(void 0===r)return n.all().toRefArray();if(Array.isArray(r))return r.map((function(e){var t=n.withId(e);return t?t.ref:null}));var o=n.withId(r);return o?o.ref:null}}},{key:"model",get:function(){return this._model}}]),t}(ch),fh=function(e){function t(t){var r,n=t.field,o=t.fieldModel,i=t.accessorName,a=t.isVirtual,s=sh()(t,["field","fieldModel","accessorName","isVirtual"]);return(r=e.call(this,s)||this)._field=n,r._fieldModel=o,r._accessorName=i,r._isVirtual=a,r}Al()(t,e);var r=t.prototype;return r.valueForInstance=function(e,t){if(!e)return null;var r;if(this._parent instanceof lh)r=e[this._accessorName];else{var n=t[this._parent.toModelName],o=this._parent.valueForInstance(e,t),i=o?new n(o):null;r=i?i[this._accessorName]:null}return r instanceof Gf?r.ref:r instanceof Tf?r.toRefArray():r},r.map=function(e){if(e instanceof lh)throw this.toModelName===e.model.modelName?new Error("Cannot select models in a `map()` call. If you just want the `".concat(this._accessorName,"` as a ref array then you can simply drop the `map()`. Otherwise make sure you're passing a field selector of the form `").concat(this.toModelName,".<field>` or a custom selector instead.")):new Error("Cannot select `".concat(e.model.modelName,"` models in this `map()` call. Make sure you're passing a field selector of the form `").concat(this.toModelName,".<field>` or a custom selector instead."));if(e instanceof t||e instanceof ph){if(this.toModelName!==e.model.modelName)throw new Error("Cannot select fields of the `".concat(e.model.modelName,"` model in this `map()` call. Make sure you're passing a field selector of the form `").concat(this.toModelName,".<field>` or a custom selector instead."))}else if(!e||"function"!=typeof e||!e.recomputations)throw new Error("`map()` requires a selector as an input. Received: ".concat(JSON.stringify(e)," of type ").concat(al()(e)));if(!(this._field instanceof Pf||this._field instanceof Nf))throw new Error("Cannot map selectors for non-collection fields");return new ph({parent:this,model:this._model,orm:this._orm,field:this._field,selector:e})},Ol()(t,[{key:"key",get:function(){return this._accessorName}},{key:"dependencies",get:function(){return[this._orm,dh]}},{key:"toModelName",get:function(){return"this"===this._field.toModelName?this._fieldModel.modelName:this._field.toModelName}},{key:"toModel",get:function(){return this._orm.getDatabase().describe(this.toModelName)}}]),t}(uh);function hh(e){var t=e.parent,r=e.model,n=e.field,o=e.fieldModel,i=e.accessorName,a=e.orm,s=e.isVirtual,c=new fh({parent:t,model:r,field:n,fieldModel:o,accessorName:i,orm:a,isVirtual:s});if(!(n instanceof kf))return c;if(t instanceof fh&&(t._field instanceof Pf&&t._isVirtual||t._field instanceof Nf))throw new Error("Cannot create a selector for `".concat(t._accessorName,".").concat(i,"` because `").concat(t._accessorName,"` is a collection field."));var u=n.toModelName,d=a.get("this"===u?r.modelName:u);return Object.entries(d.fields).forEach((function(e){var t=pl()(e,2),n=t[0],o=t[1],i=o.as||n;Object.defineProperty(c,i,{get:function(){return hh({parent:c,model:r,fieldModel:d,field:o,accessorName:i,orm:a,isVirtual:!1})}})})),Object.entries(d.virtualFields).forEach((function(e){var t=pl()(e,2),n=t[0],o=t[1],i=o.as||n;c.hasOwnProperty(i)||Object.defineProperty(c,i,{get:function(){return hh({parent:c,model:r,fieldModel:d,field:o,accessorName:i,orm:a,isVirtual:!0})}})})),c}function mh(e){var t=e.model,r=e.orm,n=new lh({parent:null,orm:r,model:t});return Object.entries(t.fields).forEach((function(e){var o=pl()(e,2),i=o[0],a=o[1],s=a.as||i;Object.defineProperty(n,s,{get:function(){return hh({parent:n,model:t,fieldModel:t,field:a,accessorName:s,orm:r,isVirtual:!1})}})})),Object.entries(t.virtualFields).forEach((function(e){var o=pl()(e,2),i=o[0],a=o[1],s=a.as||i;n.hasOwnProperty(s)||Object.defineProperty(n,s,{get:function(){return hh({parent:n,model:t,fieldModel:t,field:a,accessorName:s,orm:r,isVirtual:!0})}})})),n}function vh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function gh(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vh(Object(r),!0).forEach((function(t){xl()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vh(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var yh={createDatabase:ih},_h=["indexes","meta"],Eh=function(e){return _h.includes(e)},Sh=function(){function e(e){var t=gh(gh({},yh),e||{}).createDatabase;this.createDatabase=t,this.registry=[],this.implicitThroughModels=[],this.installedFields={},this.stateSelector=e?e.stateSelector:null}var t=e.prototype;return t.register=function(){for(var e=this,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];r.forEach((function(t){if(void 0===t.modelName)throw new Error("A model was passed that doesn't have a modelName set");t.invalidateClassCache(),e.registerManyToManyModelsFor(t),e.registry.push(t),Object.defineProperty(e,t.modelName,{get:function(){return e._setupModelPrototypes(e.registry),mh({model:t,orm:e})}})}))},t.registerManyToManyModelsFor=function(e){var t=this,r=e.fields,n=e.modelName;Object.entries(r).forEach((function(e){var r=pl()(e,2),o=r[0],i=r[1];if(i instanceof Nf){var a;a="this"===i.toModelName?n:i.toModelName;var s=n===a,c=df(n),u=pf(a);if(i.through){if(s&&!i.throughFields)throw new Error("Self-referencing many-to-many relationship at "+'"'.concat(n,".").concat(o,'" using custom ')+'model "'.concat(i.through,'" has no ')+"throughFields key. Cannot determine which fields reference the instances partaking in the relationship.")}else{var d,p=function(e){function t(){return e.apply(this,arguments)||this}return Al()(t,e),t}(Gf);p.modelName=uf(n,o);var l=s?function(e){function t(){return e.apply(this,arguments)||this}return Al()(t,e),Ol()(t,[{key:"installsBackwardsVirtualField",get:function(){return!1}},{key:"installsBackwardsDescriptor",get:function(){return!1}}]),t}(Pf):Pf;p.fields=(d={id:jf()},xl()(d,c,new l(n)),xl()(d,u,new l(a)),d),p.invalidateClassCache(),t.implicitThroughModels.push(p)}}}))},t.get=function(e){var t=this.registry.concat(this.implicitThroughModels),r=Object.values(t).find((function(t){return t.modelName===e}));if(void 0===r)throw new Error("Did not find model ".concat(e," from registry."));return r},t.getModelClasses=function(){return this._setupModelPrototypes(this.registry),this._setupModelPrototypes(this.implicitThroughModels),this.registry.concat(this.implicitThroughModels)},t.generateSchemaSpec=function(){return{tables:this.getModelClasses().reduce((function(e,t){var r=t.modelName,n=t.tableOptions();return Object.keys(n).filter(Eh).forEach((function(e){throw new Error("Reserved keyword `".concat(e,"` used in ").concat(r,".options."))})),e[r]=gh({fields:gh({},t.fields)},n),e}),{})}},t.getDatabase=function(){return this.db||(this.db=this.createDatabase(this.generateSchemaSpec())),this.db},t.getEmptyState=function(){return this.getDatabase().getEmptyState()},t.session=function(e){return new _f(this,this.getDatabase(),e)},t.mutableSession=function(e){return new _f(this,this.getDatabase(),e,!0)},t._setupModelPrototypes=function(e){var t=this;e.filter((function(e){return!e.isSetUp})).forEach((function(e){var r=e.fields,n=e.modelName,o=e.querySetClass;Object.entries(r).forEach((function(r){var o=pl()(r,2),i=o[0],a=o[1];if(!(a instanceof wf))throw new Error("".concat(n,".").concat(i,' is of type "').concat(al()(a),'" ')+"but must be an instance of Field. Please use the `attr`, `fk`, `oneToOne` and `many` functions to define fields.");t._isFieldInstalled(n,i)||(t._installField(a,i,e),t._setFieldInstalled(n,i))})),hf(e,o),e.isSetUp=!0}))},t._isFieldInstalled=function(e,t){return!!this.installedFields.hasOwnProperty(e)&&!!this.installedFields[e][t]},t._setFieldInstalled=function(e,t){this.installedFields.hasOwnProperty(e)||(this.installedFields[e]={}),this.installedFields[e][t]=!0},t._installField=function(e,t,r){new(0,e.installerClass)({field:e,fieldName:t,model:r,orm:this}).run()},t.withMutations=function(e){return cf("`ORM.prototype.withMutations` has been deprecated. Use `ORM.prototype.mutableSession` instead."),this.mutableSession(e)},t.from=function(e){return cf("`ORM.prototype.from` has been deprecated. Use `ORM.prototype.session` instead."),this.session(e)},t.getDefaultState=function(){return cf("`ORM.prototype.getDefaultState` has been deprecated. Use `ORM.prototype.getEmptyState` instead."),this.getEmptyState()},t.define=function(){throw new Error("`ORM.prototype.define` has been removed. Please define a Model class.")},e}();function bh(e,t){e.sessionBoundModels.forEach((function(r){"function"==typeof r.reducer&&r.reducer(t,r,e)}))}function Th(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bh;return function(r,n){var o=e.session(r||e.getEmptyState());return t(o,n),o.state}}function Rh(e){return e instanceof Sh?e:e instanceof ch&&e._orm}var Ch=new Map,Oh=Symbol.for("REDUX_ORM_SELECTOR");function wh(e){if("function"==typeof e)return e;if(e instanceof Sh)return e.stateSelector;if(e instanceof ph&&(e.selector=wh(e.selector)),e instanceof ch){var t,r=e.orm,n=e.cachePath;Ch.has(r)||Ch.set(r,new Map),t=Ch.get(r);for(var o=0;o<n.length;++o){var i=n[o];t.has(i)||t.set(i,new Map),t=t.get(i)}if(t&&t.has(Oh))return t.get(Oh);var a=function e(t){if(t instanceof ph){var r=e(t.parent);return t.createResultFunc(r)}return ul()(t.dependencies,t.resultFunc)({keySelector:t.keySelector,cacheObject:new cl.FlatMapCache,selectorCreator:Ah})}(e);return t.set(Oh,a),a}throw new Error("Failed to interpret selector argument: ".concat(JSON.stringify(e)," of type ").concat(al()(e)))}function Ah(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!t.length)throw new Error("Cannot create a selector without arguments.");var n=t.pop(),o=Array.isArray(t[0])?t[0]:t,i=o.map(Rh).find(Boolean),a=o.map(wh);if("function"==typeof n){if(!i)throw new Error("Failed to resolve the current ORM database state. Please pass an ORM instance or an ORM selector as an argument to `createSelector()`.");if(!i.stateSelector)throw new Error("Failed to resolve the current ORM database state. Please pass an object to the ORM constructor that specifies a `stateSelector` function.");if("function"!=typeof i.stateSelector)throw new Error("Failed to resolve the current ORM database state. Please pass a function when specifying the ORM's `stateSelector`. Received: ".concat(JSON.stringify(i.stateSelector)," of type ").concat(al()(i.stateSelector)));return Object(sl.createSelectorCreator)(Rl,void 0,i)([i.stateSelector].concat(ol()(a)),n)}if(n instanceof Sh)throw new Error("ORM instances cannot be the result function of selectors. You can access your models in the last function that you pass to `createSelector()`.");return a.length&&console.warn("Your input selectors will be ignored: the passed result function does not require any input."),wh(n)}function Ih(e){return(Ih="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xh(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kh(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ph(e,t,r){return t&&kh(e.prototype,t),r&&kh(e,r),e}function Nh(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Dh(e,t)}function Dh(e,t){return(Dh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function jh(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Lh(e);if(t){var o=Lh(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Mh(this,r)}}function Mh(e,t){return!t||"object"!==Ih(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Lh(e){return(Lh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Uh=function(e){Nh(r,e);var t=jh(r);function r(){return xh(this,r),t.apply(this,arguments)}return Ph(r,null,[{key:"fields",get:function(){return{_id:jf(),owner:jf(),ownerType:jf(),ownerName:jf(),name:jf(),description:jf(),users:jf(),usersInfo:jf(),removedBy:jf()}}},{key:"reducer",value:function(e,t,r){var n=e.type,o=e.payload;switch(n){case fd.SDK_CHAT_STOP:t.all().delete();break;case fd.SDK_CHAT_INCOMING_CONVERSATION:case fd.SDK_CHAT_UPDATE_CONVERSATION:t.upsert(o);break;case fd.SDK_CHAT_GET_CONVERSATIONS_SUCCESS:o.forEach((function(e){t.upsert(e)}));break;case fd.SDK_CHAT_CONVERSATION_REMOVED:var i=t.withId(o);i&&i.delete()}}}]),r}(Gf);Uh.modelName="Conversation",Uh.options={idAttribute:"_id"};var Vh=function(e){Nh(r,e);var t=jh(r);function r(){return xh(this,r),t.apply(this,arguments)}return Ph(r,null,[{key:"fields",get:function(){return{_id:jf(),body:jf(),language:jf(),authorId:jf(),conversationId:Mf({to:"Conversation",as:"conversation",relatedName:"messages"})}}},{key:"reducer",value:function(e,t,r){var n=e.type,o=e.payload;switch(n){case ko.SDK_EVENT_RESET_CHAT:case fd.SDK_CHAT_STOP:t.all().delete();break;case fd.SDK_CHAT_GET_MESSAGES_SUCCESS:o.messages.forEach((function(e){t.upsert(e)}));break;case fd.SDK_CHAT_ADD_MESSAGE:t.create(o)}}}]),r}(Gf);Vh.modelName="Message",Vh.options={idAttribute:"_id"};var Fh=new Sh({stateSelector:function(e){return e.chatData}});Fh.register(Uh,Vh);var Gh=function(e){return{getAll:function(){return e("get","/timelines")},getMeetingTimeline:function(t){return e("get","/timeline/".concat(encodeURIComponent(t)))},remove:function(t){return e("delete","/timeline/".concat(encodeURIComponent(t)))},addEvent:function(t,r){return e("post","/timeline/".concat(encodeURIComponent(t)),r)}}},Bh=function(e,t){return{languages:function(){return t("get","/translator/languages")},translate:function(t,r,n){if(!r||!n)throw Error("400 Bad Request");return e("post","/translator/?from=".concat(encodeURIComponent(t||""),"&to=").concat(encodeURIComponent(r)),{message:n})}}},Hh=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"videoinput";return e.filter((function(e){return e.kind===t}))},Wh=function(e){return{get:function(){return e("get","/systems/configurations/public").then((function(e){var t={};return e.forEach((function(e){return t[e._id]=e.value})),t}))},getMcuVersion:function(){return e("get","/system/version")},listMediaDevices:function(){return navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?navigator.mediaDevices.enumerateDevices().then((function(e){var t=Hh(e,"videoinput");return{audioIn:Hh(e,"audioinput"),videoIn:t,audioOut:Hh(e,"audiooutput")}})):Promise.resolve({audioIn:[],videoIn:[],audioOut:[]})},listVideoInputs:function(){return navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?navigator.mediaDevices.enumerateDevices().then((function(e){return Hh(e,"videoinput")})):Promise.resolve([])},listAudioInputs:function(){return navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?navigator.mediaDevices.enumerateDevices().then((function(e){return Hh(e,"audioinput")})):Promise.resolve([])},listAudioOutputs:function(){return navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?navigator.mediaDevices.enumerateDevices().then((function(e){return Hh(e,"audiooutput")})):Promise.resolve([])}}},qh=function(e){return{guest:function(){return e._call("get","/token/guest",null,!0).then((function(t){var r=t.payload,n=t.token;return e.actions.loginSuccess(r,n),r}))},editProfile:function(t){return e._call("patch","/users/me",t)},saveAll:function(t){return e._call("post","/users/import",t)},refreshProfile:function(){return e._call("get","/users/me").then((function(t){return t&&e.actions.setProfile(t),t}))},setAvatar:function(t){return e._upload("/users/avatar",t)},requestPasswordRecovery:function(t){return e._call("post","/users/password-recovery",{email:t})},resetPassword:function(t,r){return e._call("post","/users/password-reset",{recoveryToken:t,password:r,type:"password-recovery"})},editPersonalRoom:function(t){if(e.profile&&e.profile.room)return e._call("patch","/rooms/my",t);throw Error("You don't have a personal room")}}},Kh=function(e){return{startConversation:function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=e.store.getState().teevid,i=g()(o,"user.profile.name",!1),a=g()(o,"user.profile.name",!1),s=g()(o,"meeting.participant",{}),c=s._id,u=i||c,d=a||s.name;return console.warn("Users:",u,t),e.chat.create({name:r||"Chat",description:n,ownerType:"User",owner:u,ownerName:d,users:[u,t],usersInfo:{}}).then((function(t){return e.actions.createConversation(t),t}))},createChatToken:function(){return e._call("get","/token/chat")},create:function(t){return e._call("post","/conversation",t)},update:function(t,r){return e._call("put","/conversation/".concat(t),r)},remove:function(t){return e._call("delete","/conversation/".concat(t))},getByRoom:function(t){return e._call("get","/conversation/room/".concat(t))},getByUser:function(t){return e._call("get","/conversation/user/".concat(t))},message:function(t){return e._call("post","/message",t)},getMessages:function(t){var r,n=[];return t.conversationId&&n.push("conversationId=".concat(t.conversationId)),t.dateFrom&&n.push("dateFrom=".concat(t.dateFrom)),t.dateTo&&n.push("dateTo=".concat(t.dateTo)),r=n.length?"?".concat(n.join("&")):"",e._call("get","/message".concat(r))},getMessage:function(t){return e._call("get","/message/".concat(t))},deleteMessage:function(t){return e._call("delete","/message/".concat(t))}}},zh=function(e){return{get:function(t){if(!t)throw Error("No SIP Endpoint id specified");return e("get","/sip-endpoints/".concat(encodeURIComponent(t)))},create:function(t){return e("post","/sip-endpoints/create",t)},list:function(){return e("get","/sip-endpoints")},edit:function(t,r){if(!t)throw Error("SipEndpoint does not exist");return e("patch","/sip-endpoints/".concat(encodeURIComponent(t)),r)},remove:function(t){if(!t)throw Error("SIP endoint does not exist");return e("delete","/sip-endpoints/".concat(encodeURIComponent(t)))},removeSeveral:function(t){return e("post","/sip-endpoints/remove",t)}}},Yh=function(e){return{requestStats:function(t){if(!t)throw Error("You have to provide server ID");return e("get","/media/stats/".concat(t))},getServers:function(){return e("get","/media/servers")},getServer:function(t){return e("get","/media/server/".concat(t))},checkStatus:function(t){return e("get","/media/check/".concat(t))},startStreaming:function(t){var r=t.room;if(!r)throw Error("You must provide proper server and room IDs");return e("post","/media/start/".concat(r),t)},stopStreaming:function(t,r,n){if(!t)throw Error("You must provide proper room ID");if(!r)throw Error("You must provide proper output ID");return e("post","/media/stop",{room:t,outputid:r,serviceid:n})},startRecording:function(t,r){if(!t)throw Error("You must provide proper room ID");return e("post","/record/start",{room:t,recordPath:r})},stopRecording:function(t){if(!t)throw Error("You must provide proper room ID");return e("post","/record/stop",{room:t})},callSip:function(t,r){return e("post","/media/call",{room:t,to:r})}}},Qh=function(e){return{list:function(){return e("get","/media/servers")},restart:function(t){return e("put","/media/servers/".concat(t,"/restart"))},reset:function(t){return e("put","/media/servers/".concat(t,"/reset"))}}},Jh=function(e){return{list:function(){return e("get","/system/servers")},add:function(t){return e("post","/system/servers",t)},remove:function(t){return Array.isArray(t)?e("delete","/system/servers/".concat(t.join("&"))):e("delete","/system/servers/".concat(t))}}},$h=function(e){return{list:function(){return e("get","/system/mcu/list")},start:function(t){return e("put","/system/mcu/start/".concat(encodeURIComponent(t)))},stop:function(t){return e("put","/system/mcu/stop/".concat(encodeURIComponent(t)))},kill:function(t){return e("put","/system/mcu/kill/".concat(encodeURIComponent(t)))},restart:function(t){return e("put","/system/mcu/restart/".concat(encodeURIComponent(t)))},remove:function(t){return e("delete","/system/mcu/".concat(encodeURIComponent(t)))}}},Xh=function(e){return{meetings:function(t){return e("get","/meetings?from=".concat(t.from,"&to=").concat(t.to))},events:function(t){return e("get","/events/report?from=".concat(t.from,"&to=").concat(t.to))},participants:function(t){return e("get","/meetings-participants?from=".concat(t.from,"&to=").concat(t.to))},meetingParticipants:function(t){return e("get","/meetings/".concat(t,"/participants"))}}},Zh=function(e){return"/streaming/service/".concat(encodeURIComponent(e))},em=function(e){return{list:function(){return e("get","/streaming/services")},get:function(t){if(!t)throw new Error("To get a service you have to provide service ID");return e("get","/streaming/service/".concat(encodeURIComponent(t)))},create:function(t){return e("post","/streaming/service/create",t)},remove:function(t){if(!t)throw new Error("To remove service you have to provide service ID");return e("delete",Zh(t))},update:function(t){var r=t.serviceId,n=t.update;if(!r)throw new Error("To update service you have to provide service ID");return e("patch",Zh(r),n)},updateRoom:function(t){var r=t.streaming,n=t.sharing,o=t.room;return e("patch","/streaming/room/set",{streaming:r,sharing:n,room:o})}}},tm=function(e,t){return{servers:function(){return e("get","/system/servers")},liveMeetings:function(){return e("get","/live-meetings")},setSystemImage:function(e){var r=e.file,n=e.type;return t("/system/image/".concat(n),r)},getIceServersCredentials:function(){return e("get","/system/ice-servers")}}},rm=function(e){return{get:function(){return e("get","/system/license")},update:function(t){return e("put","/system/license",{license:t})},eventLicenses:function(){return e("get","/system/license/events")}}},nm=function(e){return{list:function(t){if(!t)throw Error("Room does not exist");return e("get","/rooms/".concat(encodeURIComponent(t),"/participants"))},remove:function(t,r){if(!t)throw Error("Room does not exist");if(!r)throw Error("Participant does not exist");if(0===r.indexOf("local_"))throw Error("Paricipant does not exist");return e("delete","/rooms/".concat(encodeURIComponent(t),"/participants/").concat(encodeURIComponent(r)))},deleteAll:function(t){if(!t)throw Error("Room does not exist");return e("delete","/rooms/".concat(encodeURIComponent(t),"/participants"))},updateRole:function(t,r,n){if(!t)throw Error("Room does not exist");if(!r)throw Error("Participant duplicated");if(!n)throw Error("Bad pin");return e("patch","/rooms/".concat(encodeURIComponent(t),"/participants/").concat(encodeURIComponent(r)),{pin:n}).then((function(e){if("Paricipant"===e.role)throw Error("Bad pin");return e.role}))},updateName:function(t,r,n){if(!t)throw Error("Room does not exist");if(!r)throw Error("Participant duplicated");return e("patch","/rooms/".concat(encodeURIComponent(t),"/participants/").concat(encodeURIComponent(r)),{name:n})}}},om=function(e,t){return{get:function(t){return t?e("get","/rooms/".concat(encodeURIComponent(t))):Promise.reject(Error("No room name specified"))},check:function(t){return t?e("get","/rooms/".concat(encodeURIComponent(t),"/check")):Promise.reject(Error("No room name specified"))},getInviteToken:function(e){return e?t("get","/rooms/".concat(encodeURIComponent(e),"/invite_token")).then((function(e){return e.token})):Promise.reject(Error("No room name specified"))},list:function(){return e("get","/rooms")},create:function(t){return e("post","/rooms",t)},edit:function(t,r){if(!t)throw Error("Room does not exist");return e("patch","/rooms/".concat(encodeURIComponent(t)),r)},remove:function(t){if(!t)throw Error("Room does not exist");return e("delete","/rooms/".concat(encodeURIComponent(t)))},importData:function(t){return e("post","/rooms/import",t)},deleteChosen:function(t){return e("post","/rooms/remove",t)}}},im=function(e){return{list:function(){return e._call("get","/storyboard")},get:function(t){if(!t)throw Error("Storyboard does not exist");return e._call("get","/storyboard/".concat(encodeURIComponent(t)))},edit:function(t,r){if(!t)throw Error("Storyboard does not exist");return e._call("post","/storyboard/".concat(encodeURIComponent(t)),r)},clone:function(t){if(!t)throw Error("Storyboard does not exist");return e._call("patch","/storyboard/".concat(encodeURIComponent(t),"/clone"))},cloneScene:function(t,r,n){if(!t)throw Error("Storyboard does not exist");return e._call("patch","/storyboard/".concat(encodeURIComponent(t),"/scenes/").concat(encodeURIComponent(r),"/clone"),n)},remove:function(t){if(!t)throw Error("Storyboard does not exist");return e._call("delete","/storyboard/".concat(encodeURIComponent(t)))},create:function(t){return e._call("post","/storyboard",t)},upload:function(t){return e._upload("/upload",t)},uploadWithProgress:function(t,r,n,o){var i=e.store.getState().teevid.user.serverUrl;if(t){var a=e.prepareUploadOptions(t,o);return new Promise((function(e,t){var o=new XMLHttpRequest;for(var s in o.open("post","https://"+i+n),a.headers||{})o.setRequestHeader(s,a.headers[s]);o.onload=function(){e({body:o.responseText,status:o.status,json:function(){return new Promise((function(e,t){try{e(JSON.parse(o.responseText))}catch(e){t(e)}}))}})},o.onerror=t,o.upload&&r&&(o.upload.onprogress=r),o.send(a.body)}))}return Promise.resolve(!1)},uploadImage:function(t){return e._upload("/upload/image",t)},scenesList:function(t){if(!t)throw Error("Storyboard does not exist");return e._call("get","/storyboard/".concat(encodeURIComponent(t),"/scenes"))},sceneEdit:function(t,r,n){if(!t)throw Error("Storyboard does not exist");if(!r)throw Error("Scene does not exist");return e._call("patch","/storyboard/".concat(encodeURIComponent(t),"/scenes/").concat(encodeURIComponent(r)),n)},sceneRemove:function(t,r){if(!t)throw Error("Storyboard does not exist");if(!r)throw Error("Scene does not exist");return e._call("delete","/storyboard/".concat(encodeURIComponent(t),"/scenes/").concat(encodeURIComponent(r)))},sceneCreate:function(t,r){if(!t)throw Error("Storyboard does not exist");return e._call("post","/storyboard/".concat(encodeURIComponent(t),"/scenes"),r)},export:function(t){if(!t)throw Error("Storyboard does not exist");return e._call("post","/storyboard/".concat(encodeURIComponent(t),"/export"))}}},am=function(e){return{getAll:function(t){return e("get","/recording/".concat(encodeURIComponent(t)))},removeRecord:function(t){return e("delete","/recording/".concat(encodeURIComponent(t)))},updateRecord:function(t){var r=t.recordId,n=t.update;return e("patch","/recording/".concat(encodeURIComponent(r)),n)},getRecordUrl:function(t){return e("get","/record/".concat(encodeURIComponent(t)))},getTotalSize:function(t){return e("get",t?"/recordings/".concat(encodeURIComponent(t),"/size"):"/recordings/size")}}},sm=function(e){return{create:function(t){return e("post","/event",t)},remove:function(t){return e("delete","/event/".concat(encodeURIComponent(t)))},update:function(t){var r=t.eventId,n=t.update;return e("patch","/event/".concat(encodeURIComponent(r)),n)},getMy:function(){return e("get","/event/my")},getAll:function(){return e("GET","/events/all")},getById:function(t){return e("get","/event/".concat(encodeURIComponent(t)))},createPoll:function(t){return e("POST","/poll",t)},removePoll:function(t){return e("DELETE","/poll/".concat(t))},updatePoll:function(t){var r=t._id;return delete t._id,e("PATCH","/poll/".concat(r),t)},getPoll:function(t){return e("GET","/poll/".concat(t))}}},cm=function(e){return{list:function(){return e("get","/users")},create:function(t){return e("post","/users",t)},edit:function(t,r){if(!t)throw Error("User does not exist");return e("patch","/users/".concat(encodeURIComponent(t)),r)},remove:function(t){return e("delete","/users/".concat(encodeURIComponent(t)))},changePassword:function(t){return e("put","/users/".concat(encodeURIComponent(t.name),"/password"),t)},deleteChosen:function(t){return e("post","/users/remove",t)}}},um=function(e,t,r){return"/streaming/".concat(encodeURIComponent(e),"/").concat(encodeURIComponent(r),"/credentials/").concat(encodeURIComponent(t))},dm=function(e){return{save:function(t){var r=t.username,n=t.serviceId,o=t.roomId,i=t.credentials;if(!(r&&n&&o))throw new Error("To save credentials you have to provide user, room and service ID");return e("post",um(r,n,o),i)},get:function(t){var r=t.username,n=t.serviceId,o=t.roomId;if(!(r&&n&&o))throw new Error("To get credentials you have to provide user, room and service ID");return e("get",um(r,n,o))},remove:function(t){var r=t.username,n=t.serviceId,o=t.roomId;if(!(r&&n&&o))throw new Error("To delete credentials you have to provide user, room and service ID");return e("get",um(r,n,o))},getByRoom:function(t){var r=t.username,n=t.roomId;if(!r||!n)throw new Error("To get credentials you have to provide username and room ID");return e("get","/streaming/".concat(encodeURIComponent(r),"/").concat(encodeURIComponent(n),"/credentials"))}}},pm=function(e){return{list:function(){return e("GET","".concat("/streaming/system","/services"))},update:function(t){var r=t.name,n=t.update;return e("PATCH","".concat("/streaming/system","/service/").concat(encodeURIComponent(r)),n)}}};function lm(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function fm(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hm(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var mm=Object.assign({},c,l,gt,Eo,fd,ko),vm=Object.assign({},qt,fo,xo,Io,hd,Po),gm=null,ym="".concat(rl.version,"-").concat("1c1c1dc24a292cec3e7b0f0e60939105dc08a3b5".slice(0,7)),_m=Zp.a.createDefaultHandler({formatter:function(e,t){var r="black";switch(t.level.value){case Zp.a.INFO.value:r="green";break;case Zp.a.WARN.value:r="orange";break;case Zp.a.ERROR.value:r="red";break;case Zp.a.DEBUG.value:r="grey"}e.unshift("%c TeeVid [".concat(t.level.name,"]"),"background: white; color: ".concat(r))}}),Em=new(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;fm(this,e),Fi.a.Logger.setLogLevel(t),this.cleanActions=vm,this.enums=m,this.constants=pi,this.actionTypes=mm,this.orm=Fh,this.createSelector=Ah,Zp.a.useDefaults({defaultLevel:Zp.a.DEBUG}),this.log=Zp.a,this.initialized=!1,this.config={_items:!1}}var t,r,n,o,i;return t=e,(r=[{key:"init",value:(o=regeneratorRuntime.mark((function e(t,r,n){var o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return gm=n,this.store=r,this.actions=Me(vm,r.dispatch),this.actions.setServerUrl(t),this.actions.refreshMediaDevices(),this._initRestApi(),e.next=8,this.verifyDeveloperKey(n);case 8:return e.sent||(delete this.store,delete this.actions,delete window.TeeVidSdk),Zp.a.setHandler((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;if(t.level.value===Zp.a.ERROR.value){var r;e[0]instanceof Error&&(e[0]=null===(r=e[0])||void 0===r?void 0:r.message);var n=JSON.parse(JSON.stringify(e[0]));o.actions.timelineAdd("debug","uiError",n)}_m(e,t)})),e.abrupt("return",Qr(t,null,"get","/system/configurations/public").then((function(e){o.actions.setGlobalConfig(e.payload),o.initialized=!0})));case 12:case"end":return e.stop()}}),e,this)})),i=function(){var e=this,t=arguments;return new Promise((function(r,n){var i=o.apply(e,t);function a(e){lm(i,r,n,a,s,"next",e)}function s(e){lm(i,r,n,a,s,"throw",e)}a(void 0)}))},function(e,t,r){return i.apply(this,arguments)})},{key:"_initRestApi",value:function(){var e=this._call.bind(this),t=this._callAsParticipant.bind(this),r=this._upload.bind(this);this.timelines=Gh(e),this.translator=Bh(e,t),this.configuration=Wh.call(this,e),this.user=qh(this),this.chat=Kh(this),this.sipEndpoints=zh(e),this.media=Yh(e),this.kurentoServers=Qh(e),this.mediaServers=Jh(e),this.mcu=$h(e),this.reports=Xh(e),this.streamingServices=em(e),this.system=tm(e,r),this.license=rm(e),this.participants=nm(e),this.rooms=om(e,t),this.storyboards=im(this),this.recordings=am(e),this.events=sm(e),this.users=cm(e),this.userCredentials=dm(e),this.systemService=pm(e)}},{key:"version",get:function(){return ym}},{key:"localStream",get:function(){var e=this.store.getState().teevid.meeting,t=e.participant,r=e.streams;if(e.connectionState===m.ConnectionStates.DISCONNECTED)return null;var n=g()(t,"streams.mediaStreamId",null);return n?g()(r,n,null):null}},{key:"isLoggedIn",get:function(){if(this.store){var e=this.store.getState();return!!g()(e,"teevid.user.userToken",!1)}return!1}},{key:"presenterStream",get:function(){var e=this.store.getState().teevid.meeting,t=e.lecturerId,r=e.participant,n=e.streams,o=e.remoteParticipants;if(e.connectionState===m.ConnectionStates.DISCONNECTED)return null;if(!t)return null;if(r&&r._id===t)return this.localStream;var i=o[t];if(i){var a=g()(i,"streams.mediaStreamId",null);if(a)return g()(n,a,null)}return null}},{key:"logo",get:function(){var e=this.store.getState().teevid.user.serverUrl;return"https://".concat(e,"/api/v1/system/image/logo")}},{key:"publisherCount",get:function(){var e=this.store.getState().teevid.meeting,t=e.remoteParticipants,r=0;for(var n in t){var o=t[n];g()(o,"streams.mediaStreamId",null)&&r++}return g()(e,"participant.streams.mediaStreamId")&&r++,r}},{key:"canPublish",get:function(){var e=this.store.getState().teevid,t=e.meeting,r=e.api,n=t.isConnected,o=r.globalConfigs;if(!t)return!1;if(!n)return!1;var i=parseInt(o.interactive_max_publisher_count,10)||12;return this.publisherCount<i}},{key:"reducer",get:function(){return De({api:T,user:lo,meeting:Pi,viewer:Oo,chat:_p,event:Qp,chatData:Th(Fh)})}},{key:"saga",get:function(){return regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve([uo(),_o(),ld(),di(),hp(),Wp()]);case 2:case"end":return e.stop()}}),e)}))}},{key:"profile",get:function(){if(this.store){var e=this.store.getState();return g()(e,"teevid.user.profile",null)}return null}},{key:"userToken",get:function(){if(this.store){var e=this.store.getState();return g()(e,"teevid.user.userToken",null)}return null}},{key:"remoteStreams",get:function(){var e=this.store.getState().teevid.meeting.connection,t={};return e&&e.remoteStreams&&e.remoteStreams.forEach((function(e){e.local||(t[e.getID()]=e)})),t}},{key:"canModerate",get:function(){var e=this.store.getState(),t=g()(e,"teevid.meeting.participant.role",null);return-1!==[Et.MODERATOR,Et.OWNER].indexOf(t)}},{key:"isRoomOwner",get:function(){var e=this.store.getState();return g()(e,"teevid.meeting.participant.isRoomOwner",!1)}},{key:"serverUrl",get:function(){return this.store.getState().teevid.user.serverUrl}},{key:"getStream",value:function(e){var t=this.store.getState().teevid.meeting,r=t.remoteParticipants,n=t.streams,o=g()(r,"".concat(e,".streams.mediaStreamId"),null);return o?g()(n,o,null):null}},{key:"generateThumbnail",value:function(e){return Zr(e)}},{key:"getChatAvatar",value:function(e){var t=this.store.getState().teevid,r=t.chat,n=t.meeting,o=r.users[e];if(o&&o.avatar)return o.avatar;var i=tl()(n.remoteParticipants,(function(t){return t.name===e||t._id===e}));if(i)return i.avatar;var a=n.participant;return a._id===e?a.avatar:""}},{key:"customImage",value:function(e){var t=this.store.getState().teevid.user.serverUrl;return"https://".concat(t,"/api/v1/system/image/").concat(e)}},{key:"removeCustomImage",value:function(e){return this._call("delete","/system/image/".concat(e))}},{key:"sendModerationMessage",value:function(e){var t=this.store.getState(),r=g()(t,"teevid.meeting.moderationSocket"),n=g()(t,"teevid.meeting.participantToken");if(!r||!n||1!==r.readyState)throw new Error({message:"error-connect-socket"});e.token=n,r.send(JSON.stringify(e))}},{key:"isCurrentParticipant",value:function(e){return e===g()(this.store.getState(),"teevid.meeting.participant._id",null)}},{key:"hasOwnerPin",value:function(){var e=this.store.getState();return g()(e,"teevid.meeting.roomOptions.hasOwnerPin",!1)}},{key:"Stream",value:function(e,t){var r=Fi.a.UnboundStream(t,e),n=r.getAttributes()||{};return r.updateLocalAttributes(n),Xr(r),r.setAttribute=function(e,t){var n=r.getAttributes()||{};return n[e]!==t&&(n[e]=t,r.setAttributes(n)),n},r}},{key:"verifyDeveloperKey",value:function(){return gm?this._call("get","/sdk-key/verify/"+encodeURIComponent(gm)).then((function(e){return e.valid?Promise.resolve(!0):Promise.reject({message:e.message})})):Promise.reject({message:"error-invalid-sdk-key"})}},{key:"login",value:function(e,t){this.actions.login(e,t)}},{key:"_callAsParticipant",value:function(e,t,r){var n=this.store.getState().teevid.user.serverUrl,o=this.store.getState().teevid.meeting.participantToken;return Qr(n,o,e,t,r).then((function(e){return e.payload}))}},{key:"_call",value:function(e,t,r,n){var o=this,i=this.store.getState().teevid.user,a=i.serverUrl,s=i.userToken;return s||(s=this.store.getState().teevid.meeting.participantToken),Qr(a,s,e,t,r).then((function(e){if(n)return e;if(e.token){var t=function(e){return JSON.parse(atob(e.split(".")[1]))}(e.token);["Participant","Moderator"].includes(t.role)||o.actions.updateToken(e.token)}return e.payload}))}},{key:"prepareUploadOptions",value:function(e,t){var r=new FormData;r.append("file",e),t&&r.append("importType",t);var n={method:"POST",headers:{Accept:"application/json","cache-control":"no-store"},body:r},o=this.store.getState().teevid.user.userToken;return o&&(n.headers.Authorization="Bearer "+o),n}},{key:"_upload",value:function(e,t){var r=this.store.getState().teevid.user.serverUrl;if(t){var n=this.prepareUploadOptions(t);return fetch("https://".concat(r,"/api/v1").concat(e),n)}return Promise.resolve(!1)}}])&&hm(t.prototype,r),n&&hm(t,n),e}());window.TeeVidSdk=Em;t.default=Em},"./sdk/libs/erizo.js":function(e,t,r){(function(t){var r=r||{};r.scope={},r.inherits=function(e,t){function r(){}for(var n in r.prototype=t.prototype,e.superClass_=t.prototype,e.prototype=new r,e.prototype.constructor=e,t)if(Object.defineProperties){var o=Object.getOwnPropertyDescriptor(t,n);o&&Object.defineProperty(e,n,o)}else e[n]=t[n]},r.ASSUME_ES5=!1,r.ASSUME_NO_NATIVE_MAP=!1,r.ASSUME_NO_NATIVE_SET=!1,r.defineProperty=r.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,r){e!=Array.prototype&&e!=Object.prototype&&(e[t]=r.value)},r.getGlobal=function(e){return"undefined"!=typeof window&&window===e?e:void 0!==t&&null!=t?t:e},r.global=r.getGlobal(this),r.SYMBOL_PREFIX="jscomp_symbol_",r.initSymbol=function(){r.initSymbol=function(){},r.global.Symbol||(r.global.Symbol=r.Symbol)},r.symbolCounter_=0,r.Symbol=function(e){return r.SYMBOL_PREFIX+(e||"")+r.symbolCounter_++},r.initSymbolIterator=function(){r.initSymbol();var e=r.global.Symbol.iterator;e||(e=r.global.Symbol.iterator=r.global.Symbol("iterator")),"function"!=typeof Array.prototype[e]&&r.defineProperty(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return r.arrayIterator(this)}}),r.initSymbolIterator=function(){}},r.arrayIterator=function(e){var t=0;return r.iteratorPrototype((function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}))},r.iteratorPrototype=function(e){return r.initSymbolIterator(),(e={next:e})[r.global.Symbol.iterator]=function(){return this},e},r.makeIterator=function(e){r.initSymbolIterator();var t=e[Symbol.iterator];return t?t.call(e):r.arrayIterator(e)},r.arrayFromIterator=function(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r},r.arrayFromIterable=function(e){return e instanceof Array?e:r.arrayFromIterator(r.makeIterator(e))},r.owns=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.polyfill=function(e,t,n,o){if(t){for(n=r.global,e=e.split("."),o=0;o<e.length-1;o++){var i=e[o];i in n||(n[i]={}),n=n[i]}(t=t(o=n[e=e[e.length-1]]))!=o&&null!=t&&r.defineProperty(n,e,{configurable:!0,writable:!0,value:t})}},r.polyfill("WeakMap",(function(e){function t(e){r.owns(e,o)||r.defineProperty(e,o,{value:{}})}function n(e){var r=Object[e];r&&(Object[e]=function(e){return t(e),r(e)})}if(function(){if(!e||!Object.seal)return!1;try{var t=Object.seal({}),r=Object.seal({}),n=new e([[t,2],[r,3]]);return 2==n.get(t)&&3==n.get(r)&&(n.delete(t),n.set(r,4),!n.has(t)&&4==n.get(r))}catch(e){return!1}}())return e;var o="$jscomp_hidden_"+Math.random().toString().substring(2);n("freeze"),n("preventExtensions"),n("seal");var i=0,a=function(e){if(this.id_=(i+=Math.random()+1).toString(),e){r.initSymbol(),r.initSymbolIterator(),e=r.makeIterator(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}};return a.prototype.set=function(e,n){if(t(e),!r.owns(e,o))throw Error("WeakMap key fail: "+e);return e[o][this.id_]=n,this},a.prototype.get=function(e){return r.owns(e,o)?e[o][this.id_]:void 0},a.prototype.has=function(e){return r.owns(e,o)&&r.owns(e[o],this.id_)},a.prototype.delete=function(e){return!(!r.owns(e,o)||!r.owns(e[o],this.id_))&&delete e[o][this.id_]},a}),"es6-impl","es3"),r.MapEntry=function(){},r.polyfill("Map",(function(e){if(!r.ASSUME_NO_NATIVE_MAP&&function(){if(!e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(r.makeIterator([[t,"s"]]));if("s"!=n.get(t)||1!=n.size||n.get({x:4})||n.set({x:4},"t")!=n||2!=n.size)return!1;var o=n.entries(),i=o.next();return!i.done&&i.value[0]==t&&"s"==i.value[1]&&!((i=o.next()).done||4!=i.value[0].x||"t"!=i.value[1]||!o.next().done)}catch(e){return!1}}())return e;r.initSymbol(),r.initSymbolIterator();var t=new WeakMap,n=function(e){if(this.data_={},this.head_=a(),this.size=0,e){e=r.makeIterator(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}};n.prototype.set=function(e,t){var r=o(this,e);return r.list||(r.list=this.data_[r.id]=[]),r.entry?r.entry.value=t:(r.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:e,value:t},r.list.push(r.entry),this.head_.previous.next=r.entry,this.head_.previous=r.entry,this.size++),this},n.prototype.delete=function(e){return!(!(e=o(this,e)).entry||!e.list)&&(e.list.splice(e.index,1),e.list.length||delete this.data_[e.id],e.entry.previous.next=e.entry.next,e.entry.next.previous=e.entry.previous,e.entry.head=null,this.size--,!0)},n.prototype.clear=function(){this.data_={},this.head_=this.head_.previous=a(),this.size=0},n.prototype.has=function(e){return!!o(this,e).entry},n.prototype.get=function(e){return(e=o(this,e).entry)&&e.value},n.prototype.entries=function(){return i(this,(function(e){return[e.key,e.value]}))},n.prototype.keys=function(){return i(this,(function(e){return e.key}))},n.prototype.values=function(){return i(this,(function(e){return e.value}))},n.prototype.forEach=function(e,t){for(var r,n=this.entries();!(r=n.next()).done;)r=r.value,e.call(t,r[1],r[0],this)},n.prototype[Symbol.iterator]=n.prototype.entries;var o=function(e,n){var o=n&&typeof n;"object"==o||"function"==o?t.has(n)?o=t.get(n):(o=""+ ++s,t.set(n,o)):o="p_"+n;var i=e.data_[o];if(i&&r.owns(e.data_,o))for(e=0;e<i.length;e++){var a=i[e];if(n!=n&&a.key!=a.key||n===a.key)return{id:o,list:i,index:e,entry:a}}return{id:o,list:i,index:-1,entry:void 0}},i=function(e,t){var n=e.head_;return r.iteratorPrototype((function(){if(n){for(;n.head!=e.head_;)n=n.previous;for(;n.next!=n.head;)return n=n.next,{done:!1,value:t(n)};n=null}return{done:!0,value:void 0}}))},a=function(){var e={};return e.previous=e.next=e.head=e},s=0;return n}),"es6-impl","es3"),r.polyfill("Array.from",(function(e){return e||function(e,t,n){r.initSymbolIterator(),t=null!=t?t:function(e){return e};var o=[];if("function"==typeof(i=e[Symbol.iterator]))for(e=i.call(e);!(i=e.next()).done;)o.push(t.call(n,i.value));else for(var i=e.length,a=0;a<i;a++)o.push(t.call(n,e[a]));return o}}),"es6-impl","es3"),r.iteratorFromArray=function(e,t){r.initSymbolIterator(),e instanceof String&&(e+="");var n=0,o={next:function(){if(n<e.length){var r=n++;return{value:t(r,e[r]),done:!1}}return o.next=function(){return{done:!0,value:void 0}},o.next()}};return o[Symbol.iterator]=function(){return o},o},r.polyfill("Array.prototype.keys",(function(e){return e||function(){return r.iteratorFromArray(this,(function(e){return e}))}}),"es6-impl","es3"),r.FORCE_POLYFILL_PROMISE=!1,r.polyfill("Promise",(function(e){function t(){this.batch_=null}function n(e){return e instanceof i?e:new i((function(t,r){t(e)}))}if(e&&!r.FORCE_POLYFILL_PROMISE)return e;t.prototype.asyncExecute=function(e){return null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_()),this.batch_.push(e),this},t.prototype.asyncExecuteBatch_=function(){var e=this;this.asyncExecuteFunction((function(){e.executeBatch_()}))};var o=r.global.setTimeout;t.prototype.asyncExecuteFunction=function(e){o(e,0)},t.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var e=this.batch_;this.batch_=[];for(var t=0;t<e.length;++t){var r=e[t];delete e[t];try{r()}catch(e){this.asyncThrow_(e)}}}this.batch_=null},t.prototype.asyncThrow_=function(e){this.asyncExecuteFunction((function(){throw e}))};var i=function(e){this.state_=0,this.result_=void 0,this.onSettledCallbacks_=[];var t=this.createResolveAndReject_();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}};i.prototype.createResolveAndReject_=function(){function e(e){return function(n){r||(r=!0,e.call(t,n))}}var t=this,r=!1;return{resolve:e(this.resolveTo_),reject:e(this.reject_)}},i.prototype.resolveTo_=function(e){if(e===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof i)this.settleSameAsPromise_(e);else{e:switch(typeof e){case"object":var t=null!=e;break e;case"function":t=!0;break e;default:t=!1}t?this.resolveToNonPromiseObj_(e):this.fulfill_(e)}},i.prototype.resolveToNonPromiseObj_=function(e){var t=void 0;try{t=e.then}catch(e){return void this.reject_(e)}"function"==typeof t?this.settleSameAsThenable_(t,e):this.fulfill_(e)},i.prototype.reject_=function(e){this.settle_(2,e)},i.prototype.fulfill_=function(e){this.settle_(1,e)},i.prototype.settle_=function(e,t){if(0!=this.state_)throw Error("Cannot settle("+e+", "+t|"): Promise already settled in state"+this.state_);this.state_=e,this.result_=t,this.executeOnSettledCallbacks_()},i.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var e=this.onSettledCallbacks_,t=0;t<e.length;++t)e[t].call(),e[t]=null;this.onSettledCallbacks_=null}};var a=new t;return i.prototype.settleSameAsPromise_=function(e){var t=this.createResolveAndReject_();e.callWhenSettled_(t.resolve,t.reject)},i.prototype.settleSameAsThenable_=function(e,t){var r=this.createResolveAndReject_();try{e.call(t,r.resolve,r.reject)}catch(e){r.reject(e)}},i.prototype.then=function(e,t){function r(e,t){return"function"==typeof e?function(t){try{n(e(t))}catch(e){o(e)}}:t}var n,o,a=new i((function(e,t){n=e,o=t}));return this.callWhenSettled_(r(e,n),r(t,o)),a},i.prototype.catch=function(e){return this.then(void 0,e)},i.prototype.callWhenSettled_=function(e,t){function r(){switch(n.state_){case 1:e(n.result_);break;case 2:t(n.result_);break;default:throw Error("Unexpected state: "+n.state_)}}var n=this;null==this.onSettledCallbacks_?a.asyncExecute(r):this.onSettledCallbacks_.push((function(){a.asyncExecute(r)}))},i.resolve=n,i.reject=function(e){return new i((function(t,r){r(e)}))},i.race=function(e){return new i((function(t,o){for(var i=r.makeIterator(e),a=i.next();!a.done;a=i.next())n(a.value).callWhenSettled_(t,o)}))},i.all=function(e){var t=r.makeIterator(e),o=t.next();return o.done?n([]):new i((function(e,r){function i(t){return function(r){a[t]=r,0==--s&&e(a)}}var a=[],s=0;do{a.push(void 0),s++,n(o.value).callWhenSettled_(i(a.length-1),r),o=t.next()}while(!o.done)}))},i}),"es6-impl","es3"),r.polyfill("Number.MAX_SAFE_INTEGER",(function(){return 9007199254740991}),"es6-impl","es3"),r.polyfill("Array.prototype.values",(function(e){return e||function(){return r.iteratorFromArray(this,(function(e,t){return t}))}}),"es6","es3"),r.polyfill("Object.assign",(function(e){return e||function(e,t){for(var n=1;n<arguments.length;n++){var o=arguments[n];if(o)for(var i in o)r.owns(o,i)&&(e[i]=o[i])}return e}}),"es6-impl","es3"),r.checkStringArgs=function(e,t,r){if(null==e)throw new TypeError("The 'this' value for String.prototype."+r+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+r+" must not be a regular expression");return e+""},r.polyfill("String.prototype.startsWith",(function(e){return e||function(e,t){var n=r.checkStringArgs(this,e,"startsWith");e+="";var o=n.length,i=e.length;t=Math.max(0,Math.min(0|t,n.length));for(var a=0;a<i&&t<o;)if(n[t++]!=e[a++])return!1;return a>=i}}),"es6-impl","es3"),r.findInternal=function(e,t,r){e instanceof String&&(e=String(e));for(var n=e.length,o=0;o<n;o++){var i=e[o];if(t.call(r,i,o,e))return{i:o,v:i}}return{i:-1,v:void 0}},r.polyfill("Array.prototype.find",(function(e){return e||function(e,t){return r.findInternal(this,e,t).v}}),"es6-impl","es3"),r.polyfill("Object.is",(function(e){return e||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}}),"es6-impl","es3"),r.polyfill("Array.prototype.includes",(function(e){return e||function(e,t){var r=this;r instanceof String&&(r=String(r));var n=r.length;for(t=t||0;t<n;t++)if(r[t]==e||Object.is(r[t],e))return!0;return!1}}),"es7","es3"),r.polyfill("String.prototype.includes",(function(e){return e||function(e,t){return-1!==r.checkStringArgs(this,e,"includes").indexOf(e,t||0)}}),"es6-impl","es3"),r.polyfill("String.prototype.endsWith",(function(e){return e||function(e,t){var n=r.checkStringArgs(this,e,"endsWith");e+="",void 0===t&&(t=n.length),t=Math.max(0,Math.min(0|t,n.length));for(var o=e.length;0<o&&0<t;)if(n[--t]!=e[--o])return!1;return 0>=o}}),"es6-impl","es3"),e.exports=function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=26)}([function(e,t,n){var o=function(){var e="",t=function(e){console.log.apply(console,[].concat(r.arrayFromIterable(e)))},n=function(r,n){for(var i=[],a=1;a<arguments.length;++a)i[a-1]=arguments[a];if(a=e,r===o.DEBUG?a+="DEBUG":r===o.TRACE?a+="TRACE":r===o.INFO?a+="INFO":r===o.WARNING?a+="WARNING":r===o.ERROR&&(a+="ERROR"),i=[a+": "].concat(i),void 0!==o.panel){a="";for(var s=0;s<i.length;s+=1)a+=i[s];o.panel.value=o.panel.value+"\n"+a}else t.apply(o,[i])},i=function(e,t,i,a){for(var s=[],c=3;c<arguments.length;++c)s[c-3]=arguments[c];(void 0===t&&i>=o.logLevel||i>=t)&&n.apply(null,[].concat([i,"("+e+")"],r.arrayFromIterable(s)))},a=function(e){this.name=e};a.prototype.setLogLevel=function(e){this.level=e},a.prototype.debug=function(e){for(var t=[],n=0;n<arguments.length;++n)t[n-0]=arguments[n];i.apply(null,[].concat([this.name,this.level,o.DEBUG],r.arrayFromIterable(t)))},a.prototype.trace=function(e){for(var t=[],n=0;n<arguments.length;++n)t[n-0]=arguments[n];i.apply(null,[].concat([this.name,this.level,o.TRACE],r.arrayFromIterable(t)))},a.prototype.info=function(e){for(var t=[],n=0;n<arguments.length;++n)t[n-0]=arguments[n];i.apply(null,[].concat([this.name,this.level,o.INFO],r.arrayFromIterable(t)))},a.prototype.warning=function(e){for(var t=[],n=0;n<arguments.length;++n)t[n-0]=arguments[n];i.apply(null,[].concat([this.name,this.level,o.WARNING],r.arrayFromIterable(t)))},a.prototype.error=function(e){for(var t=[],n=0;n<arguments.length;++n)t[n-0]=arguments[n];i.apply(null,[].concat([this.name,this.level,o.ERROR],r.arrayFromIterable(t)))};var s=new Map;return{logLevel:0,DEBUG:0,TRACE:1,INFO:2,WARNING:3,ERROR:4,NONE:5,setLogLevel:function(e){var t=e;e>o.NONE?t=o.NONE:e<o.DEBUG&&(t=o.DEBUG),o.logLevel=t},setOutputFunction:function(e){t=e},setLogPrefix:function(t){e=t},module:function(e){if(s.has(e))return s.get(e);var t=new a(e);return s.set(e,t),t}}}();t.a=o},function(e,t,r){r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return i})),r.d(t,"d",(function(){return a})),r.d(t,"e",(function(){return c})),r.d(t,"f",(function(){return u})),r.d(t,"a",(function(){return s}));var n=r(0).a.module("EventDispatcher"),o=function(){var e={},t={};return e.addEventListener=function(e,r){void 0===t[e]&&(t[e]=[]),t[e].push(r)},e.removeEventListener=function(e,r){t[e]&&(-1!==(r=t[e].indexOf(r))&&t[e].splice(r,1))},e.removeAllListeners=function(){t={}},e.dispatchEvent=function(e){if(!e||!e.type)throw Error("Undefined event");for(var r=(r=t[e.type]||[]).slice(0),o=0;o<r.length;o+=1)try{r[o](e)}catch(t){n.info("Error triggering event: "+e.type+", error: "+t)}},e.on=e.addEventListener,e.off=e.removeEventListener,e.emit=e.dispatchEvent,e},i=function(){this.emitter=o()};i.prototype.addEventListener=function(e,t){this.emitter.addEventListener(e,t)},i.prototype.removeEventListener=function(e,t){this.emitter.removeEventListener(e,t)},i.prototype.dispatchEvent=function(e){this.emitter.dispatchEvent(e)},i.prototype.on=function(e,t){this.addEventListener(e,t)},i.prototype.off=function(e,t){this.removeEventListener(e,t)},i.prototype.emit=function(e){this.dispatchEvent(e)};var a=function(e){var t={};return t.type=e.type,t},s=function(e){var t=a(e);return t.stream=e.stream,t.connection=e.connection,t.state=e.state,t.message=e.message,t.wasAbleToConnect=e.wasAbleToConnect,t},c=function(e){var t=a(e);return t.streams=e.streams,t.message=e.message,t},u=function(e){var t=a(e);return t.stream=e.stream,t.msg=e.msg,t.origin=e.origin,t.bandwidth=e.bandwidth,t.attrs=e.attrs,t.wasAbleToConnect=e.wasAbleToConnect,t}},function(e,t,r){var n=r(6)("ACTIVE","PASSIVE","ACTPASS","INACTIVE");n.byValue=function(e){return n[e.toUpperCase()]},n.toString=function(e){switch(e){case n.ACTIVE:return"active";case n.PASSIVE:return"passive";case n.ACTPASS:return"actpass";case n.INACTIVE:return"inactive";default:return null}},n.reverse=function(e){switch(e){case n.ACTIVE:return n.PASSIVE;case n.PASSIVE:return n.ACTIVE;case n.ACTPASS:return n.PASSIVE;case n.INACTIVE:return n.INACTIVE;default:return n.ACTIVE}},e.exports=n},function(e,t,r){var n=r(6)("SEND","RECV");n.byValue=function(e){return n[e.toUpperCase()]},n.toString=function(e){switch(e){case n.SEND:return"send";case n.RECV:return"recv";default:return"unknown"}},n.reverse=function(e){switch(e){case n.SEND:return n.RECV;case n.RECV:default:return n.SEND}},e.exports=n},function(e,t,r){var n=r(6)("SENDRECV","SENDONLY","RECVONLY","INACTIVE");n.byValue=function(e){return n[e.toUpperCase()]},n.toString=function(e){switch(e){case n.SENDRECV:return"sendrecv";case n.SENDONLY:return"sendonly";case n.RECVONLY:return"recvonly";case n.INACTIVE:return"inactive";default:return"unknown"}},n.reverse=function(e){switch(e){case n.SENDRECV:return n.SENDRECV;case n.SENDONLY:return n.RECVONLY;case n.RECVONLY:return n.SENDONLY;case n.INACTIVE:return n.INACTIVE;default:return n.SENDRECV}},e.exports=n},function(e,t,r){var n=r(1);t.a=function(){var e=Object(n.b)({});return e.url="",e}},function(e,t){e.exports=function e(t){for(var n=[],o=0;o<arguments.length;++o)n[o-0]=arguments[o];var i=this;if(!(this instanceof e))return new(Function.prototype.bind.apply(e,[null].concat(Array.prototype.slice.call(n))));Array.from(n).forEach((function(e){r.initSymbol(),i[e]=Symbol.for("LICODE_SEMANTIC_SDP_"+e)}))}},function(e,t,r){t.a=function(){var e={},t={};return e.add=function(e,r){t[e]=r},e.get=function(e){return t[e]},e.has=function(e){return void 0!==t[e]},e.size=function(){return Object.keys(t).length},e.forEach=function(e){for(var r=Object.keys(t),n=0;n<r.length;n+=1){var o=r[n];e(t[o],o)}},e.keys=function(){return Object.keys(t)},e.remove=function(e){delete t[e]},e.clear=function(){t={}},e}},function(e,t,r){(function(e){var n=r(0).a.module("ConnectionHelpers"),o=function(){var t="none";return void 0!==e&&e.exports?t="fake":null!==window.navigator.userAgent.match("Firefox")?t="mozilla":null!==window.navigator.userAgent.match("Chrome")?(t="chrome-stable",null!==window.navigator.userAgent.match("Electron")&&(t="electron")):(null!==window.navigator.userAgent.match("Safari")||null!==window.navigator.userAgent.match("AppleWebKit"))&&(t="safari"),t};t.a={GetUserMedia:function(t,r,i){r=void 0===r?function(){}:r,i=void 0===i?function(){}:i;var a,s=function(e,t,r){navigator.mediaDevices.getUserMedia(e).then(t).catch(r)};t.screen?t.desktopStreamId||t.extensionId?(n.debug("message: Screen access requested using GetUserMedia"),function(){switch(o()){case"electron":n.debug("message: Screen sharing in Electron"),(a={}).video=t.video||{},a.video.mandatory=t.video.mandatory||{},a.video.mandatory.chromeMediaSource="desktop",a.video.mandatory.chromeMediaSourceId=t.desktopStreamId,s(a,r,i);break;case"mozilla":n.debug("message: Screen sharing in Firefox"),a={},void 0!==t.video?(a.video=t.video,a.video.mediaSource||(a.video.mediaSource="window")):a={audio:t.audio,video:{mediaSource:"window"}},s(a,r,i);break;case"chrome-stable":if(n.debug("message: Screen sharing in Chrome"),a={},t.desktopStreamId)a.video=t.video||{mandatory:{}},a.video.mandatory=a.video.mandatory||{},a.video.mandatory.chromeMediaSource="desktop",a.video.mandatory.chromeMediaSourceId=t.desktopStreamId,s(a,r,i);else{var e="okeephmleflklcdebijnponpabbmmgeo";t.extensionId&&(n.debug("message: extensionId supplied, extensionId: "+t.extensionId),e=t.extensionId),n.debug("message: Screen access on chrome stable looking for extension");try{chrome.runtime.sendMessage(e,{getStream:!0},(function(e){void 0===e?(n.error("message: Access to screen denied"),i({code:"Access to screen denied"})):(e=e.streamId,void 0!==t.video.mandatory?(a.video=t.video||{mandatory:{}},a.video.mandatory.chromeMediaSource="desktop",a.video.mandatory.chromeMediaSourceId=e):a={video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e}}},s(a,r,i))}))}catch(e){n.debug("message: Screensharing plugin is not accessible"),i({code:"no_plugin_present"})}}break;default:n.error("message: This browser does not support ScreenSharing")}}()):(n.debug("message: Screen access requested using GetDisplayMedia"),function(e,t,r){navigator.mediaDevices.getDisplayMedia(e).then(t).catch(r)}(t,r,i)):void 0!==e&&e.exports?n.error("message: Video/audio streams not supported in erizofc yet"):(n.debug("message: Calling getUserMedia, config: "+JSON.stringify(t)),s(t,r,i))},getBrowser:o}}).call(t,r(42)(e))},function(e,t,n){var o=n(10),i=n(39),a=n(40),s=n(41);e=n(0);var c=n(1),u=n(7),d=n(8),p=c.c,l=103,f=["high-packet-losses","low-packet-losses","good"],h=e.a.module("ErizoConnection"),m=function(e,t){var r=p.call(this)||this;if(r.stack={},r.erizoId=t,r.streamsMap=Object(u.a)(),l+=1,e.sessionId=l,r.sessionId=l,r.connectionId=e.connectionId,r.disableIceRestart=e.disableIceRestart,r.qualityLevel="good",r.wasAbleToConnect=!1,h.debug("message: Building a new Connection, "+r.toLog()),e.onEnqueueingTimeout=function(e){r.emit(Object(c.a)({type:"connection-failed",connection:r,message:"reason: Timeout in "+e}))},e.streamRemovedListener||(e.streamRemovedListener=function(){}),r.streamRemovedListener=e.streamRemovedListener,r.browser=d.a.getBrowser(),"fake"===r.browser)h.warning("message: Publish/subscribe video/audio streams not supported in erizofc yet, "+r.toLog()),r.stack=Object(s.a)(e);else if("mozilla"===r.browser)h.debug("message: Firefox Stack, "+r.toLog()),r.stack=Object(a.a)(e);else if("safari"===r.browser)h.debug("message: Safari Stack, "+r.toLog()),r.stack=Object(i.a)(e);else{if("chrome-stable"!==r.browser&&"electron"!==r.browser)throw h.error("message: No stack available for this browser, "+r.toLog()),Error("WebRTC stack not available");h.debug("message: Chrome Stable Stack, "+r.toLog()),r.stack=Object(o.a)(e)}return r.stack.updateSpec||(r.stack.updateSpec=function(e,t){t=void 0===t?function(){}:t,h.error("message: Update Configuration not implemented in this browser, "+r.toLog()),t("unimplemented")}),r.stack.setSignallingCallback||(r.stack.setSignallingCallback=function(){h.error("message: setSignallingCallback is not implemented in this stack, "+r.toLog())}),r.stack.peerConnection&&(r.peerConnection=r.stack.peerConnection,r.stack.peerConnection.onaddstream=function(e){r.emit(Object(c.a)({type:"add-stream",stream:e.stream}))},r.stack.peerConnection.onremovestream=function(e){r.emit(Object(c.a)({type:"remove-stream",stream:e.stream})),r.streamRemovedListener(e.stream.id)},r.stack.peerConnection.oniceconnectionstatechange=function(){var e=r.stack.peerConnection.iceConnectionState;-1!==["completed","connected"].indexOf(e)&&(r.wasAbleToConnect=!0),"failed"===e&&r.wasAbleToConnect&&!r.disableIceRestart?(h.warning("message: Restarting ICE, "+r.toLog()),r.stack.restartIce()):r.emit(Object(c.a)({type:"ice-state-change",state:e,wasAbleToConnect:r.wasAbleToConnect}))}),r};r.inherits(m,p),m.prototype.toLog=function(){return"connectionId: "+this.connectionId+", sessionId: "+this.sessionId+", qualityLevel: "+this.qualityLevel+", erizoId: "+this.erizoId},m.prototype.close=function(){h.debug("message: Closing ErizoConnection, "+this.toLog()),this.streamsMap.clear(),this.stack.close()},m.prototype.createOffer=function(e,t){this.stack.createOffer(e,t)},m.prototype.sendOffer=function(){this.stack.sendOffer()},m.prototype.addStream=function(e){h.debug("message: Adding stream to Connection, "+this.toLog()+", "+e.toLog()),this.streamsMap.add(e.getID(),e),e.local&&this.stack.addStream(e.stream)},m.prototype.removeStream=function(e){var t=e.getID();this.streamsMap.has(t)?(this.streamsMap.remove(t),e.local?this.stack.removeStream(e.stream):0===this.streamsMap.size()&&this.streamRemovedListener(e.getLabel())):h.debug("message: Cannot remove stream not in map, "+this.toLog()+", "+e.toLog())},m.prototype.processSignalingMessage=function(e){this.stack.processSignalingMessage(e)},m.prototype.sendSignalingMessage=function(e){this.stack.sendSignalingMessage(e)},m.prototype.setSimulcast=function(e){this.stack.setSimulcast(e)},m.prototype.setVideo=function(e){this.stack.setVideo(e)},m.prototype.setAudio=function(e){this.stack.setAudio(e)},m.prototype.updateSpec=function(e,t,r){this.stack.updateSpec(e,t,r)},m.prototype.updateSimulcastLayersBitrate=function(e){this.stack.updateSimulcastLayersBitrate(e)},m.prototype.updateSimulcastActiveLayers=function(e){this.stack.updateSimulcastActiveLayers(e)},m.prototype.setQualityLevel=function(e){this.qualityLevel=f[e]},m.prototype.getQualityLevel=function(){return{message:this.qualityLevel,index:f.indexOf(this.qualityLevel)}},(n=function(){this.ErizoConnectionsMap=new Map}).prototype.getErizoConnection=function(e){var t;return this.ErizoConnectionsMap.forEach((function(r){Object.keys(r).forEach((function(n){r[n].connectionId===e&&(t=r[n])}))})),t},n.prototype.getOrBuildErizoConnection=function(e,t,r){if(r=void 0!==r&&r,h.debug("message: getOrBuildErizoConnection, erizoId: "+t+", singlePC: "+r),void 0===t)return new m(e);if(r)this.ErizoConnectionsMap.has(t)?r=this.ErizoConnectionsMap.get(t):(r={},this.ErizoConnectionsMap.set(t,r)),r["single-pc"]||(r["single-pc"]=new m(e,t)),r=r["single-pc"];else if(r=new m(e,t),this.ErizoConnectionsMap.has(t))this.ErizoConnectionsMap.get(t)[r.sessionId]=r;else{var n={};n[r.sessionId]=r,this.ErizoConnectionsMap.set(t,n)}return e.simulcast&&r.setSimulcast(e.simulcast),e.video&&r.setVideo(e.video),e.audio&&r.setVideo(e.audio),r},n.prototype.maybeCloseConnection=function(e,t){t=void 0!==t&&t,h.debug("message: Trying to remove connection, "+e.toLog()),(0===e.streamsMap.size()||t)&&(h.debug("message: No streams in connection, "+e.toLog()),void 0!==this.ErizoConnectionsMap.get(e.erizoId)&&this.ErizoConnectionsMap.get(e.erizoId)["single-pc"]&&!t?h.debug("message: Will not remove empty connection, "+e.toLog()+", reason: It is singlePC"):(e.close(),void 0!==this.ErizoConnectionsMap.get(e.erizoId)&&(delete this.ErizoConnectionsMap.get(e.erizoId)["single-pc"],delete this.ErizoConnectionsMap.get(e.erizoId)[e.sessionId])))},t.a=n},function(e,t,r){var n=r(11),o=r(23),i=r(0).a.module("ChromeStableStack");t.a=function(e){i.debug("message: Starting Chrome stable stack, spec: "+JSON.stringify(e));var t=Object(n.a)(e);t.mediaConstraints={offerToReceiveVideo:!0,offerToReceiveAudio:!0},t.enableSimulcast=function(e){var r=e;if(!t.simulcast||null!==r.match(/a=ssrc-group:SIM/g))return r;if(!(e=r.match(/a=ssrc-group:FID ([0-9]*) ([0-9]*)\r?\n/))||0>=e.length)return r;var n=t.simulcast.numSpatialLayers||2,i=parseInt(e[1],10),a=parseInt(e[2],10),s=r.match(new RegExp("a=ssrc:"+e[1]+" cname:(.*)\r?\n"))[1],c=r.match(new RegExp("a=ssrc:"+e[1]+" msid:(.*)\r?\n"))[1],u=r.match(new RegExp("a=ssrc:"+e[1]+" mslabel:(.*)\r?\n"))[1],d=r.match(new RegExp("a=ssrc:"+e[1]+" label:(.*)\r?\n"))[1];r.match(new RegExp("a=ssrc:"+e[1]+".*\r?\n","g")).forEach((function(e){r=r.replace(e,"")})),r.match(new RegExp("a=ssrc:"+e[2]+".*\r?\n","g")).forEach((function(e){r=r.replace(e,"")}));for(var p=[i],l=[a],f=1;f<n;f+=1)p.push(i+1e3*f),l.push(a+1e3*f);for(n=o.a.addSim(p),f=0;f<p.length;f+=1)i=p[f],a=l[f],n+=o.a.addGroup(i,a);for(f=0;f<p.length;f+=1)i=p[f],a=l[f],n+=o.a.addSpatialLayer(s,c,u,d,i,a);return r.replace(e[0],n+"a=x-google-flag:conference\r\n")},t.useHighOpusQuality=function(e){return o.a.useHighOpusQuality(e)};return t.prepareCreateOffer=function(){return Promise.resolve()},t.setSimulcastLayersConfig=function(){i.debug("message: Maybe set simulcast Layers config, simulcast: "+JSON.stringify(t.simulcast)),t.simulcast&&t.simulcast.spatialLayerConfigs&&t.peerConnection.getSenders().forEach((function(e){"video"===e.track.kind&&function(e){if("function"!=typeof e.getParameters||"function"!=typeof e.setParameters)i.warning("message: Cannot set simulcast layers bitrate, reason: get/setParameters not available");else{var r=e.getParameters();Object.keys(t.simulcast.spatialLayerConfigs).forEach((function(e){if(void 0!==r.encodings[e]){i.debug("message: Configure parameters for layer, layer: "+e+", config: "+t.simulcast.spatialLayerConfigs[e]);var n=t.simulcast.spatialLayerConfigs;if(void 0!==r.encodings[e]&&void 0!==n[e]){var o=r;o.encodings[e].maxBitrate=n[e].maxBitrate,void 0!==n[e].active&&(o.encodings[e].active=n[e].active),r=o}}})),e.setParameters(r).then((function(e){i.debug("message: Success setting simulcast layer configs, result: "+e)})).catch((function(e){i.warning("message: Error setting simulcast layer configs, error: "+e)}))}}(e)}))},t.setStartVideoBW=function(r){t.video&&e.startVideoBW&&(i.debug("message: startVideoBW, requested: "+e.startVideoBW),o.a.setParamForCodecs(r,"video","x-google-start-bitrate",e.startVideoBW))},t.setHardMinVideoBW=function(r){t.video&&e.hardMinVideoBW&&(i.debug("message: hardMinVideoBW, requested: "+e.hardMinVideoBW),o.a.setParamForCodecs(r,"video","x-google-min-bitrate",e.hardMinVideoBW))},t}},function(e,t,n){var o=this;e=n(28);var i=n.n(e);e=n(2);var a=n.n(e);e=n(4);var s=n.n(e),c=n(36),u=n(23);e=n(0);var d=n(38),p=e.a.module("BaseStack");t.a=function(e){var t={},n=new d.a(3e4,(function(t){e.onEnqueueingTimeout&&e.onEnqueueingTimeout(t)}));t._queue=n;var l,f,h,m,v=-1,g=[],y=function(e){for(var t=[],n=0;n<arguments.length;++n)t[n-0]=arguments[n];g.push([].concat(["Negotiation:"],r.arrayFromIterable(t)).reduce((function(e,t){return e+" "+t})))};t.getNegotiationLogs=function(){return g.reduce((function(e,t){return e+"'\n'"+t}))},p.debug("message: Starting Base stack, spec: "+JSON.stringify(e)),t.pcConfig={iceServers:[],sdpSemantics:"plan-b"},t.con={},void 0!==e.iceServers&&(t.pcConfig.iceServers=e.iceServers),!0===e.forceTurn&&(t.pcConfig.iceTransportPolicy="relay"),t.tracksToBeNegotiated=0,t.audio=e.audio,t.video=e.video,void 0===t.audio&&(t.audio=!0),void 0===t.video&&(t.video=!0),e.remoteCandidates=[],e.localCandidates=[],e.remoteDescriptionSet=!1,t.mediaConstraints={offerToReceiveVideo:void 0!==t.video&&!1!==t.video,offerToReceiveAudio:void 0!==t.audio&&!1!==t.audio};var _=function(e){t.peerConnectionFsm.error(e)};t.peerConnection=new RTCPeerConnection(t.pcConfig,t.con),t.peerConnection.onnegotiationneeded=function(){if(--t.tracksToBeNegotiated,0===t.tracksToBeNegotiated){y("onnegotiationneeded - createOffer");var e=t.peerConnectionFsm.createOffer(!1);e&&e.catch(_.bind(o))}else 0>t.tracksToBeNegotiated&&p.warning("message: Negative tracks to be negotiated in connection, "+t.tracksToBeNegotiated)};var E=function(){l.sdp=t.enableSimulcast(l.sdp),l.type="answer",h=i.a.SDPInfo.processString(l.sdp),u.a.setMaxBW(h,e);var r=t.remoteSdp.getStreams().size,n=h.getStreams().size,o=s.a.SENDRECV;o=0<r&&0<n?s.a.SENDRECV:0<r&&0===n?s.a.RECVONLY:0===r&&0<n?s.a.SENDONLY:s.a.INACTIVE;h.getMedias().forEach((function(e){e.setDirection(o)})),l.sdp=h.toString(),t.localSdp=h},S=function(){p.debug("message: Before sdp change OFFER, spec: "+l.sdp),l.sdp=t.enableSimulcast(l.sdp),l.type="offer",e.opusHQ&&(l.sdp=t.useHighOpusQuality(l.sdp)),p.debug("message: After sdp change OFFER, spec: "+l.sdp),h=i.a.SDPInfo.processString(l.sdp),u.a.setMaxBW(h,e),h.medias.forEach((function(e){e.getSetup()!==a.a.ACTPASS&&e.setSetup(a.a.ACTPASS)})),l.sdp=h.toString(),t.localSdp=h},b=function(t,r){l=r,S(),e.callback({type:l.type,sdp:l.sdp,receivedSessionVersion:v,config:{maxVideoBW:e.maxVideoBW}})},T=function(r){return l=r,E(),e.callback({type:l.type,sdp:l.sdp,receivedSessionVersion:v,config:{maxVideoBW:e.maxVideoBW}}),p.debug("message: Setting local description, localDesc: "+JSON.stringify(l)),y("processOffer - Local Description",l.type),t.peerConnection.setLocalDescription(l).then((function(){t.setSimulcastLayersConfig()}))};t.enqueuedCalls={negotiationQueue:{createOffer:n.protectFunction((function(e,r){e=void 0!==e&&e,r=void 0!==r&&r,y("queue - createOffer"),n.startEnqueuing("createOffer"),e||r||(t.mediaConstraints={offerToReceiveVideo:!1,offerToReceiveAudio:!1}),(e=t.peerConnectionFsm.createOffer(e))?e.catch(_.bind(o)):(n.stopEnqueuing(),n.nextInQueue())})),processOffer:n.protectFunction((function(e){y("queue - processOffer"),n.startEnqueuing("processOffer"),(e=t.peerConnectionFsm.processOffer(e))?e.catch(_.bind(o)):(n.stopEnqueuing(),n.nextInQueue())})),negotiateMaxBW:n.protectFunction((function(e,r){y("queue - negotiateMaxBW"),(e=t.peerConnectionFsm.negotiateMaxBW(e,r))?e.catch(_.bind(o)):n.nextInQueue()})),processNewCandidate:n.protectFunction((function(r){y("queue - processNewCandidate");try{var i="object"==typeof r.candidate?r.candidate:JSON.parse(r.candidate);if("end"===i.candidate)n.nextInQueue();else{i.candidate=i.candidate.replace(/a=/g,""),i.sdpMLineIndex=parseInt(i.sdpMLineIndex,10);var a=new RTCIceCandidate(i);e.remoteDescriptionSet?(n.startEnqueuing("processNewCandidate"),t.peerConnectionFsm.addIceCandidate(a).catch(_.bind(o))):e.remoteCandidates.push(a)}}catch(e){p.error("message: Error parsing candidate, candidate: "+r.candidate+", message: "+e.message)}})),addStream:n.protectFunction((function(e){y("queue - addStream"),t._updateTracksToBeNegotiatedFromStream(e),n.startEnqueuing("addStream"),(e=t.peerConnectionFsm.addStream(e))?e.catch(_.bind(o)):(n.stopEnqueuing(),n.nextInQueue())})),removeStream:n.protectFunction((function(e){t._updateTracksToBeNegotiatedFromStream(e),y("queue - removeStream"),n.startEnqueuing("removeStream"),(e=t.peerConnectionFsm.removeStream(e))?e.catch(_.bind(o)):(n.stopEnqueuing(),n.nextInQueue())})),close:n.protectFunction((function(){y("queue - close"),n.startEnqueuing("close");var e=t.peerConnectionFsm.close();e?e.catch(_.bind(o)):(n.stopEnqueuing(),n.nextInQueue())}))}},t.protectedCalls={protectedAddStream:function(e){try{t.peerConnection.addStream(e)}catch(e){setTimeout((function(){n.stopEnqueuing(),n.nextInQueue()}),0)}return Promise.resolve()},protectedRemoveStream:function(e){try{t.peerConnection.removeStream(e),setTimeout((function(){n.stopEnqueuing(),n.nextInQueue()}),0)}catch(e){setTimeout((function(){n.stopEnqueuing(),n.nextInQueue()}),0)}return Promise.resolve()},protectedCreateOffer:function(e){e=void 0!==e&&e,n.startEnqueuing("protectedCreateOffer"),y("Creating offer",t.mediaConstraints);var r=[];return t.prepareCreateOffer(e).then((function(){return t.peerConnection.createOffer(t.mediaConstraints)})).then(b.bind(null,e)).catch((function(e){r.push("in protectedCreateOffer-createOffer, error: "+e)})).then((function(){return 0!==r.length?Promise.reject(r):Promise.resolve()}))},protectedProcessOffer:function(r){p.debug("message: Protected process Offer, message: "+r+", localDesc: "+JSON.stringify(l));var s=(m=i.a.SDPInfo.processString(r.sdp))&&m.origin&&m.origin.sessionVersion;if(v>=s)return p.warning("message: processOffer discarding old sdp, sessionVersion: "+s+", latestSessionVersion: "+v),y("processOffer - dropped"),e.callback({type:"offer-dropped"}),setTimeout((function(){n.stopEnqueuing(),n.nextInQueue()}),0),Promise.resolve();v=s,u.a.setMaxBW(m,e),m.medias.forEach((function(e){e.getSetup()!==a.a.ACTPASS&&e.setSetup(a.a.ACTPASS)})),r.sdp=m.toString(),t.remoteSdp=m;var c=[];return y("processOffer - Remote Description",r.type),t.peerConnection.setRemoteDescription(r).then((function(){e.remoteDescriptionSet=!0,y("processOffer - Create Answer")})).then((function(){return t.peerConnection.createAnswer(t.mediaConstraints)})).catch((function(e){c.push("in: protectedProcessOffer-createAnswer, error: "+e)})).then(T.bind(o)).catch((function(e){c.push("in: protectedProcessOffer-setLocalDescForAnswer, error: "+e)})).then((function(){return y("processOffer - Stop enqueueing"),setTimeout((function(){n.stopEnqueuing(),n.nextInQueue()}),0),0!==c.length?Promise.reject(c):Promise.resolve()}))},protectedProcessAnswer:function(r){var a=(m=i.a.SDPInfo.processString(r.sdp))&&m.origin&&m.origin.sessionVersion;if(v>=a)return p.warning("message: processAnswer discarding old sdp, sessionVersion: "+a+", latestSessionVersion: "+v),y("processAnswer - dropped"),e.callback({type:"answer-dropped"}),setTimeout((function(){n.stopEnqueuing(),n.nextInQueue()}),0),Promise.resolve();v=a,p.debug("message: Set remote and local description"),u.a.setMaxBW(m,e),t.setStartVideoBW(m),t.setHardMinVideoBW(m),r.sdp=m.toString(),S(),y("processAnswer - Local Description",l.type),t.remoteSdp=m,f=r;var s=[];return t.peerConnection.setLocalDescription(l).then((function(){t.setSimulcastLayersConfig(),y("processAnswer - Remote Description",r.type),t.peerConnection.setRemoteDescription(new RTCSessionDescription(r))})).then((function(){for(e.remoteDescriptionSet=!0,p.debug("message: Candidates to be added, size: "+e.remoteCandidates.length);0<e.remoteCandidates.length;)t.peerConnectionFsm.addIceCandidate(e.remoteCandidates.shift()).catch(_.bind(o));for(p.debug("message: Local candidates to send, size: "+e.localCandidates.length);0<e.localCandidates.length;)e.callback({type:"candidate",candidate:e.localCandidates.shift()})})).catch((function(e){y("precessAnswer - error",e),s.push("in: protectedProcessAnswer, error: "+e)})).then((function(){return y("processAnswer - Stop enqueuing"),setTimeout((function(){n.stopEnqueuing(),n.nextInQueue()}),0),0!==s.length?Promise.reject(s):Promise.resolve()}))},protectedNegotiateMaxBW:function(r,o){if(r.Sdp||r.maxAudioBW){n.startEnqueuing("protectedNegotiateMaxBW");var a=[];S(),y("protectedNegotiateBW - Local Description",l.type),t.peerConnection.setLocalDescription(l).then((function(){return t.setSimulcastLayersConfig(),m=i.a.SDPInfo.processString(f.sdp),u.a.setMaxBW(m,e),f.sdp=m.toString(),t.remoteSdp=m,y("protectedNegotiateBW - Remote Description",f.type),t.peerConnection.setRemoteDescription(new RTCSessionDescription(f))})).then((function(){e.remoteDescriptionSet=!0,e.callback({type:"offer-noanswer",sdp:l.sdp,receivedSessionVersion:v})})).catch((function(e){o("error","updateSpec"),a.push("in: protectedNegotiateMaxBW error: "+e)})).then((function(){return setTimeout((function(){n.stopEnqueuing(),n.nextInQueue()}),0),0!==a.length?Promise.reject(a):Promise.resolve()}))}},protectedAddIceCandidate:function(e){var r=[];return t.peerConnection.addIceCandidate(e).catch((function(e){r.push("in: protectedAddIceCandidate, error: "+e)})).then((function(){return setTimeout((function(){n.stopEnqueuing(),n.nextInQueue()}),0),0!==r.length?Promise.reject(r):Promise.resolve()}))},protectedClose:function(){return t.peerConnection.close(),setTimeout((function(){n.stopEnqueuing(),n.nextInQueue()}),0),Promise.resolve()}},t.peerConnection.onicecandidate=function(t){(t=t.candidate)?(t={sdpMLineIndex:t.sdpMLineIndex,sdpMid:t.sdpMid,candidate:t.candidate}).candidate.match(/a=/)||(t.candidate="a="+t.candidate):(p.debug("message: Gathered all candidates and sending END candidate"),t={sdpMLineIndex:-1,sdpMid:"end",candidate:"end"}),e.remoteDescriptionSet?e.callback({type:"candidate",candidate:t,receivedSessionVersion:v}):(e.localCandidates.push(t),p.debug("message: Storing candidates, size: "+e.localCandidates.length))},t._updateTracksToBeNegotiatedFromStream=function(e){t.tracksToBeNegotiated+=e.getTracks().length},t.setStartVideoBW=function(e){return p.error("message: startVideoBW not implemented for this browser"),e},t.setHardMinVideoBW=function(e){return p.error("message: hardMinVideoBw not implemented for this browser"),e},t.enableSimulcast=function(e){return p.error("message: Simulcast not implemented"),e},t.useHighOpusQuality=function(e){return p.error("message: useHighOpusQuality not implemented"),e};var R=function(e,r,n){n=void 0===n?function(){return!0}:n,t.simulcast&&(Object.keys(r).forEach((function(o){var i=r[o];t.simulcast.spatialLayerConfigs||(t.simulcast.spatialLayerConfigs={}),t.simulcast.spatialLayerConfigs[o]||(t.simulcast.spatialLayerConfigs[o]={}),n(i)&&(t.simulcast.spatialLayerConfigs[o][e]=i)})),t.setSimulcastLayersConfig())};return t.updateSimulcastLayersBitrate=function(e){R("maxBitrate",e)},t.updateSimulcastActiveLayers=function(e){R("active",e,(function(e){return!0===e||!1===e}))},t.setSimulcastLayersConfig=function(){p.error("message: Simulcast not implemented")},t.setSimulcast=function(e){t.simulcast=e},t.setVideo=function(e){t.video=e},t.setAudio=function(e){t.audio=e},t.updateSpec=function(r,n,o){o=void 0===o?function(){}:o;var i=e.p2p&&r.maxVideoBW,a=!e.p2p&&r.maxVideoBW;r.maxVideoBW&&(p.debug("message: Maxvideo Requested, value: "+r.maxVideoBW+", limit: "+e.limitMaxVideoBW),r.maxVideoBW>e.limitMaxVideoBW&&(r.maxVideoBW=e.limitMaxVideoBW),e.maxVideoBW=r.maxVideoBW,p.debug("message: Maxvideo Result, value: "+r.maxVideoBW+", limit: "+e.limitMaxVideoBW)),r.maxAudioBW&&(p.debug("message: Maxaudio Requested, value: "+r.maxAudioBW),r.maxAudioBW>e.limitMaxAudioBW&&(r.maxAudioBW=e.limitMaxAudioBW),p.debug("message: Maxaudio Result, value: "+r.maxAudioBW),e.maxAudioBW=r.maxAudioBW),(i||r.maxAudioBW)&&t.enqueuedCalls.negotiationQueue.negotiateMaxBW(r,o),(a||r.minVideoBW||void 0!==r.slideShowMode||void 0!==r.muteStream||void 0!==r.qualityLayer||void 0!==r.slideShowBelowLayer||void 0!==r.video)&&(p.debug("message: Configuration changed, maxVideoBW: "+r.maxVideoBW+", minVideoBW: "+r.minVideoBW+", slideShowMode: "+r.slideShowMode+", muteStream: "+JSON.stringify(r.muteStream)+", videoConstraints: "+JSON.stringify(r.video)+", slideShowBelowMinLayer: "+r.slideShowBelowLayer),e.callback({type:"updatestream",config:r},n))},t.createOffer=t.enqueuedCalls.negotiationQueue.createOffer,t.sendOffer=t.enqueuedCalls.negotiationQueue.createOffer.bind(null,!0,!0),t.addStream=t.enqueuedCalls.negotiationQueue.addStream,t.removeStream=t.enqueuedCalls.negotiationQueue.removeStream,t.close=t.enqueuedCalls.negotiationQueue.close,t.processSignalingMessage=function(e){y("processSignalingMessage, type: ",e.type),"offer"===e.type?t.enqueuedCalls.negotiationQueue.processOffer(e):"answer"===e.type?t.peerConnectionFsm.processAnswer(e):"candidate"===e.type?t.enqueuedCalls.negotiationQueue.processNewCandidate(e):"error"===e.type&&p.error("message: Received error signaling message, state: "+e.previousType+", isEnqueuing: "+n.isEnqueueing())},t.restartIce=function(){t.peerConnection.restartIce(),t.peerConnection.onnegotiationneeded()},t.peerConnectionFsm=new c.a(t.protectedCalls),t}},function(e,t){var r=e.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:"username sessionId sessionVersion netType ipVer address".split(" "),format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w\/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-\.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return null!=e.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%d trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return null!=e.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))? (\S*)(?: (\S*))?/,names:["value","direction","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+" %s"+(e.config?" %s":"")}},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return null!=e.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:"foundation component transport priority ip port type raddr rport tcptype generation network-id network-cost".split(" "),format:function(e){var t="candidate:%s %d %s %d %s %d typ %s"+(null!=e.raddr?" raddr %s rport %d":"%v%v");return t+=null!=e.tcptype?" tcptype %s":"%v",null!=e.generation&&(t+=" generation %d"),(t+=null!=e["network-id"]?" network-id %d":"%v")+(null!=e["network-cost"]?" network-cost %d":"%v")}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var t="ssrc:%d";return null!=e.attribute&&(t+=" %s",null!=e.value&&(t+=":%s")),t}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_\/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return null!=e.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:/^imageattr:(\d+|\*)[\s\t]+(send|recv)[\s\t]+(\*|\[\S+\](?:[\s\t]+\[\S+\])*)(?:[\s\t]+(recv|send)[\s\t]+(\*|\[\S+\](?:[\s\t]+\[\S+\])*))?/,names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:/^simulcast:(send|recv) ([a-zA-Z0-9\-_~;,]+)(?:\s?(send|recv) ([a-zA-Z0-9\-_~;,]+))?$/,names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{push:"invalid",names:["value"]}]};Object.keys(r).forEach((function(e){r[e].forEach((function(e){e.reg||(e.reg=/(.*)/),e.format||(e.format="%s")}))}))},function(e,t){var r=function(e,t,r,n,o,i,a,s,c,u){this.foundation=e,this.componentId=t,this.transport=r,this.priority=n,this.address=o,this.port=i,this.type=a,this.generation=s,this.relAddr=c,this.relPort=u};r.prototype.clone=function(){return new r(this.foundation,this.componentId,this.transport,this.priority,this.address,this.port,this.type,this.generation,this.relAddr,this.relPort)},r.prototype.plain=function(){var e={foundation:this.foundation,componentId:this.componentId,transport:this.transport,priority:this.priority,address:this.address,port:this.port,type:this.type,generation:this.generation};return this.relAddr&&(e.relAddr=this.relAddr),this.relPort&&(e.relPort=this.relPort),e},r.prototype.getFoundation=function(){return this.foundation},r.prototype.getComponentId=function(){return this.componentId},r.prototype.getTransport=function(){return this.transport},r.prototype.getPriority=function(){return this.priority},r.prototype.getAddress=function(){return this.address},r.prototype.getPort=function(){return this.port},r.prototype.getType=function(){return this.type},r.prototype.getGeneration=function(){return this.generation},r.prototype.getRelAddr=function(){return this.relAddr},r.prototype.getRelPort=function(){return this.relPort},e.exports=r},function(e,t){var r=function(e,t,r,n,o,i){this.codec=e,this.type=t,this.rate=r,this.encoding=n,this.params=o||{},this.feedback=i||[]};r.prototype.clone=function(){var e=new r(this.codec,this.type,this.rate,this.encoding,this.params,this.feedback);return this.rtx&&e.setRTX(this.rtx),e},r.prototype.plain=function(){return{codec:this.codec,type:this.type,rate:this.rate,encoding:this.encoding,params:this.params,feedback:this.feedback}},r.prototype.setRTX=function(e){this.rtx=e},r.prototype.getType=function(){return this.type},r.prototype.setType=function(e){this.type=e},r.prototype.getCodec=function(){return this.codec},r.prototype.getParams=function(){return this.params},r.prototype.setParam=function(e,t){this.params[e]=t},r.prototype.hasRTX=function(){return this.rtx},r.prototype.getRTX=function(){return this.rtx},r.prototype.getRate=function(){return this.rate},r.prototype.getEncoding=function(){return this.encoding},r.prototype.getFeedback=function(){return this.feedback},r.mapFromNames=function(e,t){var n=new Map,o=96;return e.forEach((function(e){var i="pcmu"===(e=e.toLowerCase())?0:"pcma"===e?8:o+=1;i=new r(e,i),t&&"ulpfec"!==e&&"flexfec-03"!==e&&"red"!==e&&(o+=1,i.setRTX(o)),n.set(i.getCodec().toLowerCase(),i)})),n},e.exports=r},function(e,t,r){var n=r(2),o=function(e,t,r){this.setup=e,this.hash=t,this.fingerprint=r};o.prototype.clone=function(){return new o(this.setup,this.hash,this.fingerprint)},o.prototype.plain=function(){return{setup:n.toString(this.setup),hash:this.hash,fingerprint:this.fingerprint}},o.prototype.getFingerprint=function(){return this.fingerprint},o.prototype.getHash=function(){return this.hash},o.prototype.getSetup=function(){return this.setup},o.prototype.setSetup=function(e){this.setup=e},e.exports=o},function(e,t){function r(e){e=new Uint8Array(e);for(var t=0;t<e.length;t+=1)e[t]=Math.floor(256*Math.random()+0);return e}function n(e){return Array.prototype.map.call(new Uint8Array(e),(function(e){return("00"+e.toString(16)).slice(-2)})).join("")}var o=function(e,t,r){this.ufrag=e,this.pwd=t,this.opts=r,this.endOfCandidates=this.lite=!1};o.prototype.clone=function(){var e=new o(this.ufrag,this.pwd,this.opts);return e.setLite(this.lite),e.setEndOfCandidates(this.endOfCandidates),e},o.prototype.plain=function(){var e={ufrag:this.ufrag,pwd:this.pwd};return this.lite&&(e.lite=this.lite),this.endOfCandidates&&(e.endOfCandidates=this.endOfCandidates),e},o.prototype.getUfrag=function(){return this.ufrag},o.prototype.getPwd=function(){return this.pwd},o.prototype.isLite=function(){return this.lite},o.prototype.getOpts=function(){return this.opts},o.prototype.setLite=function(e){this.lite=e},o.prototype.isEndOfCandidates=function(){return this.endOfCandidates},o.prototype.setEndOfCandidates=function(e){this.endOfCandidates=e},o.generate=function(){var e=new o,t=r(8),i=r(24);return e.ufrag=n(t),e.pwd=n(i),e},e.exports=o},function(e,t,r){var n=r(18),o=r(4),i=r(3),a=function(e,t,r){this.id=e,this.type=r,this.port=t,this.direction=o.SENDRECV,this.extensions=new Map,this.codecs=new Map,this.rids=new Map,this.simulcast_03=this.simulcast=null,this.bitrate=0,this.connection=this.dtls=this.ice=null,this.candidates=[]};a.prototype.clone=function(){var e=new a(this.id,this.port,this.type);return e.setDirection(this.direction),e.setBitrate(this.bitrate),e.setConnection(this.connection),this.codecs.forEach((function(t){e.addCodec(t.clone())})),this.extensions.forEach((function(t,r){e.addExtension(r,t)})),this.rids.forEach((function(t,r){e.addRID(r,t.clone())})),this.simulcast&&e.setSimulcast(this.simulcast.clone()),this.xGoogleFlag&&e.setXGoogleFlag(this.xGoogleFlag),this.ice&&e.setICE(this.ice.clone()),this.dtls&&e.setDTLS(this.dtls.clone()),this.candidates.forEach((function(t){e.addCandidate(t.clone())})),this.setup&&e.setSetup(this.setup),e},a.prototype.plain=function(){var e={id:this.id,port:this.port,type:this.type,connection:this.connection,direction:o.toString(this.direction),xGoogleFlag:this.xGoogleFlag,extensions:{},rids:[],codecs:[],candidates:[]};return this.bitrate&&(e.bitrate=this.bitrate),this.codecs.forEach((function(t){e.codecs.push(t.plain())})),this.extensions.forEach((function(t){e.extensions.push(t.plain())})),this.rids.forEach((function(t){e.rids.push(t.plain())})),this.simulcast&&(e.simulcast=this.simulcast.plain()),this.candidates.forEach((function(t){e.candidates.push(t.plain())})),e.ice=this.ice&&this.ice.plain(),e.dtls=this.dtls&&this.dtls.plain(),e},a.prototype.getType=function(){return this.type},a.prototype.getPort=function(){return this.port},a.prototype.getId=function(){return this.id},a.prototype.addExtension=function(e,t){this.extensions.set(e,t)},a.prototype.addRID=function(e){this.rids.set(e.getId(),e)},a.prototype.addCodec=function(e){this.codecs.set(e.getType(),e)},a.prototype.getCodecForType=function(e){return this.codecs.get(e)},a.prototype.getCodec=function(e){var t;return this.codecs.forEach((function(r){r.getCodec().toLowerCase()===e.toLowerCase()&&(t=r)})),t},a.prototype.hasCodec=function(e){return null!==this.getCodec(e)},a.prototype.getCodecs=function(){return this.codecs},a.prototype.getExtensions=function(){return this.extensions},a.prototype.getRIDs=function(){return this.rids},a.prototype.getRID=function(e){return this.rids.get(e)},a.prototype.getBitrate=function(){return this.bitrate},a.prototype.setBitrate=function(e){this.bitrate=e},a.prototype.getDirection=function(){return this.direction},a.prototype.setDirection=function(e){this.direction=e},a.prototype.getDTLS=function(){return this.dtls},a.prototype.setDTLS=function(e){this.dtls=e},a.prototype.getICE=function(){return this.ice},a.prototype.setICE=function(e){this.ice=e},a.prototype.addCandidate=function(e){this.candidates.push(e)},a.prototype.addCandidates=function(e){var t=this;e.forEach((function(e){t.addCandidate(e)}))},a.prototype.getCandidates=function(){return this.candidates},a.prototype.setXGoogleFlag=function(e){this.xGoogleFlag=e},a.prototype.getXGoogleFlag=function(){return this.xGoogleFlag},a.prototype.getConnection=function(){return this.connection},a.prototype.setConnection=function(e){this.connection=e},a.prototype.answer=function(e){var t=new a(this.id,this.port,this.type);if(t.setDirection(o.reverse(this.direction)),e.codecs&&this.codecs.forEach((function(r){if(e.codecs.has(r.getCodec().toLowerCase())){var n=e.codecs.get(r.getCodec().toLowerCase()).clone();n.setType(r.getType()),n.hasRTX()&&n.setRTX(r.getRTX()),t.addCodec(n)}})),this.extensions.forEach((function(r,n){e.extensions.has(n)&&t.addExtension(n,r)})),e.simulcast&&this.simulcast){var r=new n,s=this.simulcast.getSimulcastStreams(i.SEND);s&&s.forEach((function(e){var t=[];e.forEach((function(e){t.push(e.clone())})),r.addSimulcastAlternativeStreams(i.RECV,t)})),(s=this.simulcast.getSimulcastStreams(i.RECV))&&s.forEach((function(e){var t=[];e.forEach((function(e){t.push(e.clone())})),r.addSimulcastAlternativeStreams(i.SEND,t)})),this.rids.forEach((function(e){var r=e.clone();r.setDirection(i.reverse(e.getDirection())),t.addRID(r)})),t.setSimulcast(r)}return t},a.prototype.getSimulcast=function(){return this.simulcast},a.prototype.setSimulcast=function(e){this.simulcast=e},a.prototype.getSimulcast03=function(){return this.simulcast_03},a.prototype.setSimulcast03=function(e){this.simulcast_03=e},a.prototype.getSetup=function(){return this.setup},a.prototype.setSetup=function(e){this.setup=e},e.exports=a},function(e,t,r){var n=r(3),o=function(){this.send=[],this.recv=[],this.plainString=null};o.prototype.clone=function(){var e=new o;return this.send.forEach((function(t){var r=[];t.forEach((function(e){r.push(e.clone())})),e.addSimulcastAlternativeStreams(n.SEND,r)})),this.recv.forEach((function(t){var r=[];t.forEach((function(e){r.push(e.clone())})),e.addSimulcastAlternativeStreams(n.RECV,r)})),e},o.prototype.plain=function(){var e={send:[],recv:[]};return this.send.forEach((function(t){var r=[];t.forEach((function(e){r.push(e.plain())})),e.send.push(r)})),this.recv.forEach((function(t){var r=[];t.forEach((function(e){r.push(e.plain())})),e.recv.push(r)})),e},o.prototype.addSimulcastAlternativeStreams=function(e,t){return e===n.SEND?this.send.push(t):this.recv.push(t)},o.prototype.addSimulcastStream=function(e,t){return e===n.SEND?this.send.push([t]):this.recv.push([t])},o.prototype.getSimulcastStreams=function(e){return e===n.SEND?this.send:this.recv},o.prototype.setSimulcastPlainString=function(e){this.plainString=e},o.prototype.getSimulcastPlainString=function(){return this.plainString},e.exports=o},function(e,t){var r=function(e,t){var r=this;this.semantics=e,this.ssrcs=[],t.forEach((function(e){r.ssrcs.push(parseInt(e,10))}))};r.prototype.clone=function(){return new r(this.semantics,this.ssrcs)},r.prototype.plain=function(){var e={semantics:this.semantics,ssrcs:[]};return e.ssrcs=this.ssrcs,e},r.prototype.getSemantics=function(){return this.semantics},r.prototype.getSSRCs=function(){return this.ssrcs},e.exports=r},function(e,t){var r=function(e){this.ssrc=e};r.prototype.clone=function(){var e=new r(this.ssrc);e.setCName(this.cname),e.setStreamId(this.streamId),this.setTrackId(this.trackId)},r.prototype.plain=function(){var e={ssrc:this.ssrc};return this.cname&&(e.cname=this.cname),this.label&&(e.label=this.label),this.mslabel&&(e.mslabel=this.mslabel),this.streamId&&(e.streamId=this.streamId),this.trackId&&(e.trackid=this.trackId),e},r.prototype.getCName=function(){return this.cname},r.prototype.setCName=function(e){this.cname=e},r.prototype.getStreamId=function(){return this.streamId},r.prototype.setStreamId=function(e){this.streamId=e},r.prototype.getTrackId=function(){return this.trackId},r.prototype.setTrackId=function(e){this.trackId=e},r.prototype.getMSLabel=function(){return this.mslabel},r.prototype.setMSLabel=function(e){this.mslabel=e},r.prototype.getLabel=function(){return this.label},r.prototype.setLabel=function(e){this.label=e},r.prototype.getSSRC=function(){return this.ssrc},e.exports=r},function(e,t){var r=function(e){this.id=e,this.tracks=new Map};r.prototype.clone=function(){var e=new r(this.id);return this.tracks.forEach((function(t){e.addTrack(t.clone())})),e},r.prototype.plain=function(){var e={id:this.id,tracks:[]};return this.tracks.forEach((function(t){e.tracks.push(t.plain())})),e},r.prototype.getId=function(){return this.id},r.prototype.addTrack=function(e){this.tracks.set(e.getId(),e)},r.prototype.getFirstTrack=function(e){var t;return this.tracks.forEach((function(r){r.getMedia().toLowerCase()===e.toLowerCase()&&(t=r)})),t},r.prototype.getTracks=function(){return this.tracks},r.prototype.removeAllTracks=function(){this.tracks.clear()},r.prototype.getTrack=function(e){return this.tracks.get(e)},e.exports=r},function(e,t){var r=function(e,t){this.media=e,this.id=t,this.ssrcs=[],this.groups=[],this.encodings=[]};r.prototype.clone=function(){var e=new r(this.media,this.id);return this.mediaId&&e.setMediaId(this.mediaId),this.ssrcs.forEach((function(t){e.addSSRC(t)})),this.groups.forEach((function(t){e.addSourceGroup(t.clone())})),this.encodings.forEach((function(t){var r=[];t.forEach((function(e){r.push(e.cloned())})),e.addAlternativeEncoding(r)})),e},r.prototype.plain=function(){var e={media:this.media,id:this.id,ssrcs:[],groups:[],encodings:[]};return this.mediaId&&(e.mediaId=this.mediaId),this.ssrcs.forEach((function(t){e.ssrcs.push(t)})),this.groups.forEach((function(t){e.groups.push(t.plain())})),this.encodings.forEach((function(t){var r=[];t.forEach((function(e){r.push(e.plain())})),e.encodings.push(r)})),e},r.prototype.getMedia=function(){return this.media},r.prototype.setMediaId=function(e){this.mediaId=e},r.prototype.getMediaId=function(){return this.mediaId},r.prototype.getId=function(){return this.id},r.prototype.addSSRC=function(e){this.ssrcs.push(e)},r.prototype.getSSRCs=function(){return this.ssrcs},r.prototype.addSourceGroup=function(e){this.groups.push(e)},r.prototype.getSourceGroup=function(e){var t;return this.groups.forEach((function(r){r.getSemantics().toLowerCase()===e.toLowerCase()&&(t=r)})),t},r.prototype.getSourceGroups=function(){return this.groups},r.prototype.hasSourceGroup=function(e){var t=!1;return this.groups.forEach((function(r){r.getSemantics().toLowerCase()===e.toLowerCase()&&(t=!0)})),t},r.prototype.getEncodings=function(){return this.encodings},r.prototype.addAlternaticeEncodings=function(e){this.encodings.push(e)},r.prototype.setEncodings=function(e){this.encodings=e},e.exports=r},function(e,t,r){t.a={addSim:function(e){var t="a=ssrc-group:SIM";return e.forEach((function(e){t+=" "+e})),t+"\r\n"},addGroup:function(e,t){return"a=ssrc-group:FID "+e+" "+t+"\r\n"},addSpatialLayer:function(e,t,r,n,o,i){return"a=ssrc:"+o+" cname:"+e+"\r\na=ssrc:"+o+" msid:"+t+"\r\na=ssrc:"+o+" mslabel:"+r+"\r\na=ssrc:"+o+" label:"+n+"\r\na=ssrc:"+i+" cname:"+e+"\r\na=ssrc:"+i+" msid:"+t+"\r\na=ssrc:"+i+" mslabel:"+r+"\r\na=ssrc:"+i+" label:"+n+"\r\n"},setMaxBW:function(e,t){if(t.p2p){if(t.video&&t.maxVideoBW){var r=e.getMedia("video");r&&r.setBitrate(t.maxVideoBW)}t.audio&&t.maxAudioBW&&(e=e.getMedia("audio"))&&e.setBitrate(t.maxAudioBW)}},enableOpusNacks:function(e){var t=e.match(/a=rtpmap:(.*)opus.*\r\n/);return null!==t&&(e=e.replace(t[0],t[0]+"a=rtcp-fb:"+t[1]+"nack\r\n")),e},useHighOpusQuality:function(e){return null!==e.match(/sprop-stereo=1/)?e:e=e.replace("minptime=10;useinbandfec=1","minptime=10;useinbandfec=1;sprop-stereo=1;stereo=1;maxaveragebitrate=128000")},setParamForCodecs:function(e,t,r,n){e.medias.forEach((function(e){e.id===t&&e.codecs.forEach((function(e){e.setParam(r,n)}))}))}}},function(e,t,r){var n=this,o=r(1),i=r(8),a=r(7),s=r(46),c=r(47),u=r(49),d=r(0).a.module("Stream");t.a=function(e,t){var r=Object(o.b)(t);r.stream=t.stream,r.url=t.url,r.recording=t.recording,r.room=void 0,r.showing=!1,r.local=!1,r.video=t.video,r.audio=t.audio,r.screen=t.screen,r.videoSize=t.videoSize,r.videoFrameRate=t.videoFrameRate,r.extensionId=t.extensionId,r.desktopStreamId=t.desktopStreamId,r.audioMuted=!1,r.videoMuted=!1,r.unsubscribing={callbackReceived:!1,pcEventReceived:!1},r.p2p=!1,r.ConnectionHelpers=void 0===e?i.a:e,void 0!==r.url&&(t.label="ei_"+s.a.getRandomValue());var p=function(e){e.stream.id===r.getLabel()&&r.emit(Object(o.f)({type:"added",stream:e.stream}))},l=function(e){e.stream.id===r.getLabel()&&r.emit(Object(o.f)({type:"removed",stream:r}))},f=function(e){r.emit(Object(o.f)({type:"icestatechanged",msg:e}))};if(!(void 0===r.videoSize||r.videoSize instanceof Array&&4===r.videoSize.length))throw Error("Invalid Video Size");void 0!==t.local&&!0!==t.local||(r.local=!0),r.getID=function(){return r.local&&!t.streamID?"local":t.streamID},r.getLabel=function(){return r.stream&&r.stream.id?r.stream.id:t.label},r.getAttributes=function(){return t.attributes},r.setAttributes=function(e){r.local?r.emit(Object(o.f)({type:"internal-set-attributes",stream:r,attrs:e})):d.error("message: Failed to set attributes data, reason: Stream has not been published, "+r.toLog())},r.toLog=function(){var e="streamId: "+r.getID()+", label: "+r.getLabel();return t.attributes&&Object.keys(t.attributes).forEach((function(r){e=e+", "+r+": "+t.attributes[r]})),e},r.updateLocalAttributes=function(e){t.attributes=e},r.hasAudio=function(){return!1!==t.audio&&void 0!==t.audio},r.hasVideo=function(){return!1!==t.video&&void 0!==t.video},r.hasData=function(){return!1!==t.data&&void 0!==t.data},r.hasScreen=function(){return t.screen},r.hasMedia=function(){return t.audio||t.video||t.screen},r.isExternal=function(){return void 0!==r.url||void 0!==r.recording},r.addPC=function(e,t){t?(r.p2p=!0,void 0===r.pc&&(r.pc=Object(a.a)()),r.pc.add(t,e),e.on("ice-state-change",f)):(r.pc&&(r.pc.off("add-stream",p),r.pc.off("remove-stream",l),r.pc.off("ice-state-change",f)),r.pc=e,r.pc.on("add-stream",p),r.pc.on("remove-stream",l),r.pc.on("ice-state-change",f))},r.sendData=function(e){r.local&&r.hasData()?r.emit(Object(o.f)({type:"internal-send-data",stream:r,msg:e})):d.error("message: Failed to send data, reason: Stream has not been published, "+r.toLog())},r.init=function(){try{if((t.audio||t.video||t.screen)&&void 0===t.url){d.debug("message: Requested access to local media, "+r.toLog());var e=t.video;!0===e||!0===t.screen?(e=!0===e||null===e?{}:e,void 0!==r.videoSize&&(e.width={min:r.videoSize[0],max:r.videoSize[2]},e.height={min:r.videoSize[1],max:r.videoSize[3]}),void 0!==r.videoFrameRate&&(e.frameRate={min:r.videoFrameRate[0],max:r.videoFrameRate[1]})):!0===t.screen&&void 0===e&&(e=!0),r.ConnectionHelpers.GetUserMedia({video:e,audio:t.audio,fake:t.fake,screen:t.screen,extensionId:r.extensionId,desktopStreamId:r.desktopStreamId},(function(e){d.debug("message: User has granted access to local media, "+r.toLog()),r.stream=e,r.dispatchEvent(Object(o.f)({type:"access-accepted"})),r.stream.getTracks().forEach((function(e){d.debug("message: getTracks, track: "+e.kind+", "+r.toLog()),e.onended=function(){r.stream.getTracks().forEach((function(e){e.onended=null}));var t=Object(o.f)({type:"stream-ended",stream:r,msg:e.kind});r.dispatchEvent(t)}}))}),(function(e){d.error("message: Failed to get access to local media, "+r.toLog()+", error: "+e.name+", message: "+e.message),e=Object(o.f)({type:"access-denied",msg:e}),r.dispatchEvent(e)}))}else{var n=Object(o.f)({type:"access-accepted"});r.dispatchEvent(n)}}catch(t){d.error("message: Failed to get access to local media, "+r.toLog()+", error: "+t),e=Object(o.f)({type:"access-denied",msg:t}),r.dispatchEvent(e)}},r.close=function(){r.local&&(void 0!==r.room&&r.room.unpublish(r),r.hide(),void 0!==r.stream&&r.stream.getTracks().forEach((function(e){e.onended=null,e.stop()})),r.stream=void 0),r.pc&&!r.p2p?(r.pc.off("add-stream",p),r.pc.off("remove-stream",l),r.pc.off("ice-state-change",f)):r.pc&&r.p2p&&r.pc.forEach((function(e){e.off("add-stream",p),e.off("remove-stream",l),e.off("ice-state-change",f)})),r.removeAllListeners()},r.play=function(e,t){t=t||{},r.elementID=e,r.hasVideo()||r.hasScreen()?void 0!==e&&(e=Object(c.a)({id:r.getID(),stream:r,elementID:e,options:t}),r.player=e,r.showing=!0):r.hasAudio()&&(e=Object(u.a)({id:r.getID(),stream:r,elementID:e,options:t}),r.player=e,r.showing=!0)},r.stop=function(){if(r.showing&&void 0!==r.player){try{r.player.destroy()}catch(e){d.warning("message: Exception when destroying Player, error: "+e.message+", "+r.toLog())}r.showing=!1}},r.show=r.play,r.hide=r.stop;var h=function(){if(void 0!==r.player&&void 0!==r.stream){var e=r.player.video,t=document.defaultView.getComputedStyle(e),n=parseInt(t.getPropertyValue("width"),10),o=parseInt(t.getPropertyValue("height"),10),i=parseInt(t.getPropertyValue("left"),10),a=(t=parseInt(t.getPropertyValue("top"),10),"object"==typeof r.elementID&&"function"==typeof r.elementID.appendChild?r.elementID:document.getElementById(r.elementID)),s=document.defaultView.getComputedStyle(a);a=parseInt(s.getPropertyValue("width"),10);s=parseInt(s.getPropertyValue("height"),10);var c=document.createElement("canvas");return c.id="testing",c.width=a,c.height=s,c.setAttribute("style","display: none"),c.getContext("2d").drawImage(e,i,t,n,o),c}return null};r.getVideoFrameURL=function(e){var t=h();return null!==t?e?t.toDataURL(e):t.toDataURL():null},r.getVideoFrame=function(){var e=h();return null!==e?e.getContext("2d").getImageData(0,0,e.width,e.height):null},r.checkOptions=function(e,t){!0===t?(e.audio||e.screen)&&(d.warning("message: Cannot update type of subscription, "+r.toLog()),e.audio=void 0,e.screen=void 0):!1===r.local&&(!0===e.video&&!1===r.hasVideo()&&(d.warning("message: Trying to subscribe to video when there is no video, "+r.toLog()),e.video=!1),!0===e.audio&&!1===r.hasAudio()&&(d.warning("message: Trying to subscribe to audio when there is no audio, "+r.toLog()),e.audio=!1)),!1!==r.local||r.hasVideo()||!0!==e.slideShowMode||(d.warning("message: Cannot enable slideShowMode without video, "+r.toLog()),e.slideShowMode=!1)};var m=function(e){if(e=void 0===e?function(){}:e,r.room&&r.room.p2p)d.warning("message: muteAudio/muteVideo are not implemented in p2p streams, "+r.toLog()),e("error");else{r.stream&&r.pc||(d.warning("message: muteAudio/muteVideo cannot be called until a stream is published or subscribed, "+r.toLog()),e("error"));for(var t=0;t<r.stream.getVideoTracks().length;t+=1)r.stream.getVideoTracks()[t].enabled=!r.videoMuted;t={muteStream:{audio:r.audioMuted,video:r.videoMuted}},r.checkOptions(t,!0),r.pc.updateSpec(t,r.getID(),e)}};r.muteAudio=function(e,t){r.audioMuted=e,m(void 0===t?function(){}:t)},r.muteVideo=function(e,t){r.videoMuted=e,m(void 0===t?function(){}:t)},r._setStaticQualityLayer=function(e,t,n){n=void 0===n?function(){}:n,r.room&&r.room.p2p?(d.warning("message: setStaticQualityLayer is not implemented in p2p streams, "+r.toLog()),n("error")):(e={qualityLayer:{spatialLayer:e,temporalLayer:t}},r.checkOptions(e,!0),r.pc.updateSpec(e,r.getID(),n))},r._setDynamicQualityLayer=function(e){if(r.room&&r.room.p2p)d.warning("message: setDynamicQualityLayer is not implemented in p2p streams, "+r.toLog()),e("error");else{var t={qualityLayer:{spatialLayer:-1,temporalLayer:-1}};r.checkOptions(t,!0),r.pc.updateSpec(t,r.getID(),e)}},r._enableSlideShowBelowSpatialLayer=function(e,t,n){t=void 0===t?0:t,n=void 0===n?function(){}:n,r.room&&r.room.p2p?(d.warning("message: enableSlideShowBelowSpatialLayer is not implemented in p2p streams, "+r.toLog()),n("error")):(e={slideShowBelowLayer:{enabled:e,spatialLayer:t}},r.checkOptions(e,!0),d.debug("message: Calling updateSpec, "+r.toLog()+", config: "+JSON.stringify(e)),r.pc.updateSpec(e,r.getID(),n))},r._setMinSpatialLayer=r._enableSlideShowBelowSpatialLayer.bind(n,!0);var v=function(e,t,n){!0!==t&&(t=!1),0<(e=(e="string"==typeof e?[e]:e)instanceof Array?e:[]).length&&r.room.sendControlMessage(r,"control",{name:"controlhandlers",enable:n,publisherSide:t,handlers:e})};return r.disableHandlers=function(e,t){v(e,t,!1)},r.enableHandlers=function(e,t){v(e,t,!0)},r.updateSimulcastLayersBitrate=function(e){r.pc&&r.local&&r.pc.updateSimulcastLayersBitrate(e)},r.updateSimulcastActiveLayers=function(e){r.pc&&r.local&&r.pc.updateSimulcastActiveLayers(e)},r.updateConfiguration=function(e,t){if(t=void 0===t?function(){}:t,void 0!==e)if(r.pc)if(r.checkOptions(e,!0),r.local)if(r.room.p2p)for(var n=0;n<r.pc.length;n+=1)r.pc[n].updateSpec(e,r.getID(),t);else r.pc.updateSpec(e,r.getID(),t);else r.pc.updateSpec(e,r.getID(),t);else t("This stream has no peerConnection attached, ignoring")},r}},function(e,t,r){var n=r(5),o=r(48);t.a=function(e){var t,r=Object(n.a)({});r.elementID=e.elementID,r.id=e.id,r.div=document.createElement("div"),r.div.setAttribute("id","bar_"+r.id),r.div.setAttribute("class","licode_bar"),r.bar=document.createElement("div"),r.bar.setAttribute("style","width: 100%; height: 15%; max-height: 30px; position: absolute; bottom: 0; right: 0; background-color: rgba(255,255,255,0.62)"),r.bar.setAttribute("id","subbar_"+r.id),r.bar.setAttribute("class","licode_subbar"),r.link=document.createElement("a"),r.link.setAttribute("href","http://www.lynckia.com/"),r.link.setAttribute("class","licode_link"),r.link.setAttribute("target","_blank"),r.logo=document.createElement("img"),r.logo.setAttribute("style","width: 100%; height: 100%; max-width: 30px; position: absolute; top: 0; left: 2px;"),r.logo.setAttribute("class","licode_logo"),r.logo.setAttribute("alt","Lynckia"),r.logo.setAttribute("src",r.url+"/assets/star.svg");var i=function(e){var n=e;"block"!==e?n="none":clearTimeout(t),r.div.setAttribute("style","width: 100%; height: 100%; position: relative; bottom: 0; right: 0; display: "+n)};return r.display=function(){i("block")},r.hide=function(){t=setTimeout(i,1e3)},document.getElementById(r.elementID).appendChild(r.div),r.div.appendChild(r.bar),r.bar.appendChild(r.link),r.link.appendChild(r.logo),e.stream.screen||void 0!==e.options&&void 0!==e.options.speaker&&!0!==e.options.speaker||(r.speaker=Object(o.a)({elementID:"subbar_"+r.id,id:r.id,stream:e.stream,media:e.media})),r.display(),r.hide(),r}},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),e=r(27);var n=r(9),o=r(1),i=r(24),a=r(0);r(51),r={Room:e.a.bind(null,void 0,void 0,void 0),LicodeEvent:o.d,RoomEvent:o.e,StreamEvent:o.f,ConnectionEvent:o.a,Stream:i.a.bind(null,void 0),UnboundStream:i.a,Logger:a.a,_:{ErizoConnectionManager:n.a}},t.default=r},function(e,t,n){var o=this,i=n(9),a=n(8),s=n(1),c=n(43),u=n(24),d=n(7),p=n(50),l=n(0).a.module("Room");t.a=function(e,t,n,f){var h=Object(s.b)(f);h.remoteStreams=Object(d.a)(),h.localStreams=Object(d.a)(),h.iceServers=f.iceServers,h.roomID="",h.state=0,h.p2p=!1,h.minConnectionQualityLevel="",h.ConnectionHelpers=void 0===t?a.a:t,h.erizoConnectionManager=void 0===n?new i.a:new n.ErizoConnectionManager,h.disableIceRestart=!!f.disableIceRestart;var m=Object(c.a)(e);h.socket=m;var v=h.remoteStreams,g=h.localStreams,y=function(){return"roomId: "+(0<h.roomID.length?h.roomID:"undefined")},_=function(e){e.removeAllListeners(),e.pc&&!h.p2p&&e.pc.removeStream(e),l.debug("message: Removed stream, "+e.toLog()+", "+y()),e.stream&&(e.hide(),e.stop(),e.close(),delete e.stream),e.pc&&(e.local&&h.p2p?e.pc.forEach((function(t,r){t.close(),e.pc.remove(r)})):(h.erizoConnectionManager.maybeCloseConnection(e.pc),delete e.pc))},E=function(e,t){l.info("message: Stream subscribed, "+e.toLog()+", "+y()),e.stream=t.stream,h.p2p||e.pc.addStream(e),e.state="subscribed",e=Object(s.f)({type:"stream-subscribed",stream:e}),h.dispatchEvent(e)},S=function(e){l.debug("message: Unsubscribing Stream, "+e.toLog()+", unsubscribing: "+e.unsubscribing+", "+y()),e&&e.unsubscribing.callbackReceived&&(e.unsubscribing.pcEventReceived||e.failed)?(l.info("message: Stream fully unsubscribed, "+e.toLog()+", "+y()),e.unsubscribing.callbackReceived=!1,e.unsubscribing.pcEventReceived=!1,_(e),delete e.failed,e.state="unsubscribed",e=Object(s.f)({type:"stream-unsubscribed",stream:e}),h.dispatchEvent(e)):l.debug("message: Not dispatching stream unsubscribed yet, "+e.toLog()+", "+y())},b=function(e,t,r,n){0!==h.state&&e&&!e.failed&&(e.failed=!0,t=Object(s.f)({type:"stream-failed",msg:t||"Stream failed after connection",stream:e,origin:void 0===r?"unknown":r,wasAbleToConnect:void 0!==n&&n}),h.dispatchEvent(t),t=e.pc,e.local?h.unpublish(e):e.unsubscribing.callbackReceived?S(e):h.unsubscribe(e),t&&f.singlePC&&h.erizoConnectionManager.maybeCloseConnection(t,!0))},T=function(e,t){return{callback:function(r,n){m.sendSDP("streamMessageP2P",{streamId:e.getID(),streamIds:n,peerSocket:t,msg:r})},audio:e.hasAudio(),video:e.hasVideo(),iceServers:h.iceServers,maxAudioBW:e.maxAudioBW,maxVideoBW:e.maxVideoBW,limitMaxAudioBW:f.maxAudioBW,limitMaxVideoBW:f.maxVideoBW,forceTurn:e.forceTurn,p2p:!0,disableIceRestart:h.disableIceRestart}},R=function(e){h.remoteStreams.forEach((function(t){t.local||t.getLabel()!==e||(t.unsubscribing.pcEventReceived=!0,S(t))}))},C=function(e,t,r,n,o){var i={callback:function(n,o){o=void 0===o?e.getID():o,l.debug("message: Sending message, data: "+JSON.stringify(n)+", "+e.toLog()+", "+y()),n&&n.type&&"updatestream"===n.type?m.sendSDP("streamMessage",{streamId:o,erizoId:r,msg:n,browser:e.pc&&e.pc.browser},void 0,(function(){})):m.sendSDP("connectionMessage",{connectionId:t,erizoId:r,msg:n,browser:e.pc&&e.pc.browser},void 0,(function(){}))},connectionId:t,nop2p:!0,audio:n.audio&&e.hasAudio(),video:n.video&&e.hasVideo(),maxAudioBW:n.maxAudioBW,maxVideoBW:n.maxVideoBW,limitMaxAudioBW:f.maxAudioBW,limitMaxVideoBW:f.maxVideoBW,label:e.getLabel(),opusHQ:n.opusHQ,iceServers:h.iceServers,disableIceRestart:h.disableIceRestart,forceTurn:e.forceTurn,p2p:!1,streamRemovedListener:R};return o||(i.simulcast=n.simulcast,i.startVideoBW=n.startVideoBW,i.hardMinVideoBW=n.hardMinVideoBW),i},O=function(e,t,r,n){var i=C(e,t,r,n,!0);t=h.erizoConnectionManager.getOrBuildErizoConnection(i,r,f.singlePC),e.addPC(t),t.on("connection-failed",h.dispatchEvent.bind(o)),e.on("added",E.bind(null,e)),e.on("icestatechanged",(function(t){l.debug("message: icestatechanged, "+e.toLog()+", iceConnectionState: "+t.msg.state+", "+y()),"failed"===t.msg.state&&(b(e,"ICE Connection Failed","ice-client",t.msg.wasAbleToConnect),f.singlePC&&i.callback({type:"failed"}))}))},w=function(e,t,r,n){var i=C(e,t,r,n);t=h.erizoConnectionManager.getOrBuildErizoConnection(i,r,f.singlePC),e.addPC(t),t.on("connection-failed",h.dispatchEvent.bind(o)),e.on("icestatechanged",(function(t){l.debug("message: icestatechanged, "+e.toLog()+", iceConnectionState: "+t.msg.state+", "+y()),"failed"===t.msg.state&&(b(e,"ICE Connection Failed","ice-client",t.msg.wasAbleToConnect),f.singlePC&&i.callback({type:"failed"}))})),e.pc.addStream(e)},A=function(e){var t=e.evt.level,r=Number.MAX_SAFE_INTEGER,n="";g.forEach((function(o){!o.failed&&o.pc&&(o.pc.connectionId===e.connectionId&&o.pc.setQualityLevel(t),(o=o.pc.getQualityLevel()).index<r&&(r=o.index,n=o.message))})),v.forEach((function(o){o.failed&&o.pc&&(o.pc.connectionId===e.connectionId&&o.pc.setQualityLevel(t),(o=o.pc.getQualityLevel()).index<r&&(r=o.index,n=o.message))})),n!==h.minConnectionQualityLevel&&(h.minConnectionQualityLevel=n,h.dispatchEvent(Object(s.e)({type:"quality-level",message:n})))},I=function(e){var t=e.stream;e=e.msg,t.local?m.sendMessage("sendDataStream",{id:t.getID(),msg:e}):l.error("message: You can not send data through a remote stream, "+t.toLog()+", "+y())},x=function(e){var t=e.stream;e=e.attrs,t.local?(t.updateLocalAttributes(e),m.sendMessage("updateStreamAttributes",{id:t.getID(),attrs:e})):l.error("message: You can not update attributes in a remote stream, "+t.toLog()+", "+y())};e=function(e,t){t.args?e.apply(null,[].concat(r.arrayFromIterable(t.args))):e()};var k=function(e,t,r){return{state:e,data:t.hasData(),audio:t.hasAudio(),video:t.hasVideo(),label:t.getLabel(),screen:t.hasScreen(),attributes:t.getAttributes(),metadata:r.metadata,createOffer:r.createOffer,muteStream:r.muteStream}},P=function(e,t,r,n){n=void 0===n?function(){}:n,null===e?(l.error("message: Error when publishing the stream, "+t.toLog()+", "+y()+", error: "+r),n(void 0,r)):(l.info("message: Stream published, "+t.toLog()+", "+y()),t.getID=function(){return e},t.on("internal-send-data",I),t.on("internal-set-attributes",x),g.add(e,t),t.room=h,n(e))},N=function(e,t){e=t&&e.hasVideo();var r=t&&t.width,n=t&&t.height;return t=t&&t.frameRate,r||n||t?{width:r,height:n,frameRate:t}:e},D=function(e,t,r){r=void 0===r?function(){}:r,m.sendSDP("subscribe",{streamId:e.getID(),data:t.data,metadata:t.metadata},void 0,(function(t,n){null===t?(l.error("message: Error subscribing to stream, "+e.toLog()+", "+y()+", error: "+n),e.state="unsubscribed",r(void 0,n)):(l.debug("message: Stream subscribed, "+e.toLog()+", "+y()),t=Object(s.f)({type:"stream-subscribed",stream:e}),h.dispatchEvent(t),r(!0))}))};return h.connect=function(e){e=void 0===e?{}:e;var t=JSON.parse(p.a.decodeBase64(f.token));0!==h.state&&l.warning("message: Room already connected, roomId: "+h.roomID+", "+y()),h.state=1,h.clientIntiatedDisconnection=!1,l.info("message: Connecting to room, tokenId: "+t.tokenId),m.connect(t,e,(function(e){var t=[],r=e.streams||[],n=e.id;h.p2p=e.p2p,h.iceServers=h.iceServers?h.iceServers:e.iceServers,h.state=2,f.singlePC=e.singlePC,f.defaultVideoBW=e.defaultVideoBW,f.maxVideoBW=e.maxVideoBW;for(var o=Object.keys(r),i=0;i<o.length;i+=1){var a=r[o[i]];(e=Object(u.a)(h.ConnectionHelpers,{streamID:a.id,local:!1,audio:a.audio,video:a.video,data:a.data,label:a.label,screen:a.screen,attributes:a.attributes})).room=h,e.state="unsubscribed",t.push(e),v.add(a.id,e)}h.roomID=n,l.info("message: Connected to room, "+y()),t=Object(s.e)({type:"room-connected",streams:t}),h.dispatchEvent(t)}),(function(e){l.error("message: Error connecting to room, "+y()+", error: "+e),e=Object(s.e)({type:"room-error",message:e}),h.dispatchEvent(e)}))},h.disconnect=function(){l.info("message: Disconnection requested, "+y());var e=Object(s.e)({type:"room-disconnected",message:"expected-disconnection"});h.clientIntiatedDisconnection=!0,h.dispatchEvent(e)},h.publish=function(e,t,r){t=void 0===t?{}:t,r=void 0===r?function(){}:r,l.info("message: Publishing stream, "+e.toLog()+", "+y()),t.maxVideoBW=t.maxVideoBW||f.defaultVideoBW,t.maxVideoBW>f.maxVideoBW&&(t.maxVideoBW=f.maxVideoBW),void 0===t.minVideoBW&&(t.minVideoBW=0),t.minVideoBW>f.defaultVideoBW&&(t.minVideoBW=f.defaultVideoBW),e.forceTurn=t.forceTurn,t.simulcast=t.simulcast||!1,t.muteStream={audio:e.audioMuted,video:e.videoMuted},e&&e.local&&!e.failed&&!g.has(e.getID())?e.hasMedia()?e.isExternal()?function(e,t,r){if(r=void 0===r?function(){}:r,e.url)var n="url",o=e.url;else n="recording",o=e.recording;l.debug("message: Checking publish options, "+e.toLog()+", "+y()),e.checkOptions(t),m.sendSDP("publish",k(n,e,t),o,(function(t,n){P(t,e,n,r)}))}(e,t,r):h.p2p?function(e,t,r){r=void 0===r?function(){}:r,e.maxAudioBW=t.maxAudioBW,e.maxVideoBW=t.maxVideoBW,m.sendSDP("publish",k("p2p",e,t),void 0,(function(t,n){P(t,e,n,r)}))}(e,t,r):function(e,t,r){r=void 0===r?function(){}:r,l.debug("OPTIONS",t),l.debug("message: Publishing to Erizo Normally, createOffer: "+t.createOffer+", "+y());var n=k("erizo",e,t);n.minVideoBW=t.minVideoBW,n.maxVideoBW=t.maxVideoBW,n.scheme=t.scheme,m.sendSDP("publish",n,void 0,(function(n,o,i,a){null===n?(l.error("message: Error publishing stream, "+e.toLog()+", "+y()+", error: "+a),r(void 0,a)):(P(n,e,a,void 0),w(e,i,o,t),r(n))}))}(e,t,r):e.hasData()&&function(e,t,r){r=void 0===r?function(){}:r,m.sendSDP("publish",k("data",e,t),void 0,(function(t,n){P(t,e,n,r)}))}(e,t,r):(l.error("message: Trying to publish invalid stream, "+e.toLog()+", "+y()),r(void 0,"Invalid Stream"))},h.startRecording=function(e,t){t=void 0===t?function(){}:t,void 0===e?(l.error("message: Trying to start recording on an invalid stream, "+e.toLog()+", "+y()),t(void 0,"Invalid Stream")):(l.debug("message: Start Recording stream, "+e.toLog()+", "+y()),m.sendMessage("startRecorder",{to:e.getID()},(function(r,n){null===r?(l.error("message: Error on start recording, "+e.toLog()+", "+y()+", error: "+n),t(void 0,n)):(l.debug("message: Start recording, id: "+r+", "+y()),t(r))})))},h.stopRecording=function(e,t){t=void 0===t?function(){}:t,m.sendMessage("stopRecorder",{id:e},(function(r,n){null===r?(l.error("message: Error on stop recording, recordingId: "+e+", "+y()+", error: "+n),t(void 0,n)):(l.debug("message: Stop recording, id: "+e+", "+y()),t(!0))}))},h.unpublish=function(e,t){if(t=void 0===t?function(){}:t,e&&e.local){if(m.sendMessage("unpublish",e.getID(),(function(r,n){null===r?(l.error("message: Error unpublishing stream, "+e.toLog()+", "+y()+", error: "+n),t(void 0,n)):(l.info("message: Stream unpublished, "+e.toLog()+", "+y()),delete e.failed,t(!0))})),l.info("message: Unpublishing stream, "+e.toLog()+", "+y()),e.room=void 0,e.hasMedia()&&!e.isExternal()){var r=g.has(e.getID())?g.get(e.getID()):e;_(r)}g.remove(e.getID()),e.getID=function(){},e.off("internal-send-data",I),e.off("internal-set-attributes",x)}else r="message: Cannot unpublish because stream does not exist or is not local, "+e.toLog()+", "+y(),l.error(r),t(void 0,r)},h.sendControlMessage=function(e,t,r){e&&e.getID()&&(t={type:"control",action:r},m.sendSDP("streamMessage",{streamId:e.getID(),msg:t}))},h.subscribe=function(e,t,r){if(t=void 0===t?{}:t,r=void 0===r?function(){}:r,!e||e.local||e.failed)t="Error on subscribe",e.state="unsubscribed",e?e.local?(l.warning("message: Cannot subscribe to local stream, "+e.toLog()+", "+y()),t="Local copy of stream"):e.failed&&(l.warning("message: Cannot subscribe to failed stream, "+e.toLog()+", "+y()+",unsubscribing: "+e.unsubscribing+", failed: "+e.failed),t="Failed stream"):(l.warning("message: Cannot subscribe to invalid stream, "+e.toLog()+", "+y()),t="Invalid or undefined stream"),r(void 0,t);else if("unsubscribed"!==e.state)l.warning("message: Cannot subscribe to a subscribed stream, "+e.toLog()+", "+y()),r(void 0,"Stream already subscribed");else{if(e.state="subscribing",e.hasMedia())if(e.hasVideo()||e.hasScreen()||(t.video=!1),e.hasAudio()||(t.audio=!1),t.muteStream={audio:e.audioMuted,video:e.videoMuted},e.forceTurn=t.forceTurn,h.p2p){var n=v.get(e.getID());n.maxAudioBW=t.maxAudioBW,n.maxVideoBW=t.maxVideoBW,m.sendSDP("subscribe",{streamId:e.getID(),metadata:t.metadata}),r(!0)}else!function(e,t,r){r=void 0===r?function(){}:r,t.maxVideoBW=t.maxVideoBW||f.defaultVideoBW,t.maxVideoBW>f.maxVideoBW&&(t.maxVideoBW=f.maxVideoBW),t.audio=void 0===t.audio||t.audio,t.video=void 0===t.video||t.video,t.data=void 0===t.data||t.data,t.offerFromErizo=void 0===t.offerFromErizo||t.offerFromErizo,e.checkOptions(t);var n={streamId:e.getID(),audio:t.audio&&e.hasAudio(),video:N(e,t.video),maxVideoBW:t.maxVideoBW,data:t.data&&e.hasData(),browser:h.ConnectionHelpers.getBrowser(),createOffer:t.createOffer,offerFromErizo:t.offerFromErizo,metadata:t.metadata,muteStream:t.muteStream,slideShowMode:t.slideShowMode};m.sendSDP("subscribe",n,void 0,(function(n,o,i,a){null===n?(l.error("message: Error subscribing to stream, "+e.toLog()+", "+y()+", error: "+a),e.state="unsubscribed",r(void 0,a)):(l.debug("message: Subscriber added, "+e.toLog()+", "+y()+", erizoId: "+o+", connectionId: "+i),O(e,i,o,t),t.offerFromErizo||e.pc.sendOffer(),r(!0))}))}(e,t,r);else{if(!e.hasData()||!1===t.data)return l.warning("message: There is nothing to subscribe to in stream, "+e.toLog()+", "+y()),e.state="unsubscribed",void r(void 0,"Nothing to subscribe to");D(e,t,r)}l.info("message: Subscribing to stream, "+e.toLog()+", "+y())}},h.unsubscribe=function(e,t){t=void 0===t?function(){}:t,void 0!==m&&(e&&!e.local?"subscribed"!==e.state?(l.warning("message: Cannot unsubscribe to a stream that is not subscribed, "+e.toLog()+", "+y()),t(void 0,"Stream not subscribed")):(e.state="unsubscribing",l.info("message: Subscribing to stream, "+e.toLog()+", "+y()),m.sendMessage("unsubscribe",e.getID(),(function(r,n){null===r?(e.state="subscribed",t(void 0,n)):(t(!0),e.unsubscribing.callbackReceived=!0,S(e))}),(function(){e.state="subscribed",l.error("message: Error calling unsubscribe, "+e.toLog()+", "+y())}))):(e.state="unsubscribed",t(void 0,"Error unsubscribing, stream does not exist or is not local")))},h.autoSubscribe=function(e,t,r,n){m&&m.sendMessage("autoSubscribe",{selectors:e,negativeSelectors:t,options:r},(function(e){e&&n(e)}))},h.getStreamStats=function(e,t){return t=void 0===t?function(){}:t,m?e?void m.sendMessage("getStreamStats",e.getID(),(function(e){e&&t(e)})):"Error getting stats - no stream":"Error getting stats - no socket"},h.getStreamsByAttribute=function(e,t){var r=[];return v.forEach((function(n){void 0!==n.getAttributes()&&n.getAttributes()[e]===t&&r.push(n)})),r},h.on("room-disconnected",(function(){h.state=0,m.state=m.DISCONNECTED,h.erizoConnectionManager.ErizoConnectionsMap.forEach((function(e){Object.keys(e).forEach((function(t){e[t].close()}))})),v.forEach((function(e,t){_(e),v.remove(t),e&&!e.failed&&(e=Object(s.f)({type:"stream-removed",stream:e}),h.dispatchEvent(e))})),v=Object(d.a)(),g.forEach((function(e,t){_(e),g.remove(t)})),g=Object(d.a)();try{m.disconnect(h.clientIntiatedDisconnection)}catch(e){l.debug("message: Socket already disconnected, "+y()+", error: "+e)}l.info("message: Disconnected from room, roomId: "+h.roomID+", "+y()),m=void 0})),m.on("onAddStream",e.bind(null,(function(e){if(!v.has(e.id)){var t=Object(u.a)(h.Connection,{streamID:e.id,local:g.has(e.id),audio:e.audio,video:e.video,data:e.data,label:e.label,screen:e.screen,attributes:e.attributes});t.room=h,t.state="unsubscribed",v.add(e.id,t),e=Object(s.f)({type:"stream-added",stream:t}),h.dispatchEvent(e)}}))),m.on("stream_message_erizo",e.bind(null,(function(e){"auto-streams-subscription"===e.context?function(e){var t,r=e.streamIds,n=e.erizoId,o=e.connectionId,i=e.options;switch(e.type){case"multiple-initializing":r.forEach((function(e){t=v.get(e),O(t,o,n,i)}))}}(e.mess):"auto-streams-unsubscription"===e.context?function(e){var t;(e=e.streamIds).forEach((function(e){t=v.get(e)})),e.forEach((function(e){t=v.get(e),_(t),delete t.failed}))}(e.mess):l.debug("message: Failed applying a stream message from erizo, "+y()+", msg: "+JSON.stringify(e))}))),m.on("stream_message_p2p",e.bind(null,(function(e){var t=g.get(e.streamId);t&&!t.failed?t.pc.get(e.peerSocket).processSignalingMessage(e.msg):((t=v.get(e.streamId)).pc||function(e,t){t=h.erizoConnectionManager.getOrBuildErizoConnection(T(e,t)),e.addPC(t),t.on("connection-failed",h.dispatchEvent.bind(o)),e.on("added",E.bind(null,e)),e.on("icestatechanged",(function(t){l.debug("message: icestatechanged, "+e.toLog()+", iceConnectionState: "+t.msg.state+", "+y()),"failed"===t.msg.state&&b(e,"ICE Connection Failed","ice-client",t.msg.wasAbleToConnect)}))}(t,e.peerSocket),t.pc.processSignalingMessage(e.msg))}))),m.on("connection_message_erizo",e.bind(null,(function(e){if("quality_level"===e.evt.type)A(e);else{var t=h.erizoConnectionManager.getErizoConnection(e.connectionId);t?t.processSignalingMessage(e.evt):l.warning("message: Received signaling message to unknown connectionId, connectionId: "+e.connectionId+", "+y())}}))),m.on("publish_me",e.bind(null,(function(e){!function(e,t){var r=h.erizoConnectionManager.getOrBuildErizoConnection(T(e,t));e.addPC(r,t),r.on("connection-failed",h.dispatchEvent.bind(o)),e.on("icestatechanged",(function(r){l.debug("message: icestatechanged, streamId: "+e.getID()+", iceConnectionState: "+r.msg.state+", "+y()),"failed"===r.msg.state&&(e.pc.get(t).close(),e.pc.remove(t))})),r.addStream(e)}(g.get(e.streamId),e.peerSocket)}))),m.on("unpublish_me",e.bind(null,(function(e){var t=g.get(e.streamId);t&&(e=e.peerSocket,void 0!==t.pc&&t.pc.has(e)&&(t.pc.get(e).close(),t.pc.remove(e)))}))),m.on("onBandwidthAlert",e.bind(null,(function(e){if(l.debug("message: Bandwidth Alert, streamId: "+e.streamID+", bwMessage: "+e.message+", bandwidth: "+e.bandwidth+", "+y()),e.streamID){var t=v.get(e.streamID);t&&!t.failed&&(e=Object(s.f)({type:"bandwidth-alert",stream:t,msg:e.message,bandwidth:e.bandwidth}),t.dispatchEvent(e))}}))),m.on("onDataStream",e.bind(null,(function(e){var t=v.get(e.id);e=Object(s.f)({type:"stream-data",msg:e.msg,stream:t}),t.dispatchEvent(e)}))),m.on("onUpdateAttributeStream",e.bind(null,(function(e){var t=v.get(e.id),r=Object(s.f)({type:"stream-attributes-update",attrs:e.attrs,stream:t});t.updateLocalAttributes(e.attrs),t.dispatchEvent(r)}))),m.on("onRemoveStream",e.bind(null,(function(e){var t=g.get(e.id);t?b(t,"Stream removed from server","server"):(t=v.get(e.id))&&(l.info("message: Stream removed, "+t.toLog()+", "+y()),_(t),v.remove(e.id),e=Object(s.f)({type:"stream-removed",stream:t}),h.dispatchEvent(e))}))),m.on("disconnect",e.bind(null,(function(){if(l.info("message: Socket disconnected, reason: lost connection to ErizoController, "+y()),0!==h.state){l.error("message: Unexpected disconnection from ErizoController, "+y());var e=Object(s.e)({type:"room-disconnected",message:"unexpected-disconnection"});h.dispatchEvent(e)}}))),m.on("reconnecting",e.bind(null,(function(e){l.info("message: Socket reconnecting, reason: lost connection to ErizoController, "+y()),e=Object(s.e)({type:"room-reconnecting",message:"reconnecting - "+e}),h.dispatchEvent(e)}))),m.on("reconnected",e.bind(null,(function(){l.info("message: Socket reconnected, reason: restablished connection to ErizoController, "+y());var e=Object(s.e)({type:"room-reconnected",message:"reconnected"});h.dispatchEvent(e)}))),m.on("connection_failed",e.bind(null,(function(e){if(e.streamId){var t="message: ICE Connection Failed, type: "+e.type+", streamId: "+e.streamId+", state: "+h.state+", "+y();l.error(t),e="publish"===e.type?g.get(e.streamId):v.get(e.streamId),b(e,t,"ice-server")}}))),m.on("error",e.bind(null,(function(e){l.error("message: Error in the connection to Erizo Controller, "+y()+", error: "+e),e=Object(s.e)({type:"room-error",message:e}),h.dispatchEvent(e)}))),h}},function(e,t,r){t=r(29);var n=r(13),o=r(14),i=r(15),a=r(16),s=r(17),c=r(2),u=r(19),d=r(20),p=r(21),l=r(22);r=r(4),e.exports={SDPInfo:t,CandidateInfo:n,CodecInfo:o,DTLSInfo:i,ICEInfo:a,MediaInfo:s,Setup:c,SourceGroupInfo:u,SourceInfo:d,StreamInfo:p,TrackInfo:l,Direction:r}},function(e,t,n){function o(e,t){var r=new Map;t.rtp.forEach((function(n){var o=n.payload,i=n.codec,a=n.rate;n=n.encoding;var s={},c=[];t.fmtp.forEach((function(e){e.payload===o&&e.config.split(";").forEach((function(e){e=e.split("="),s[e[0].trim()]=(e[1]||"").trim()}))})),t.rtcpFb&&t.rtcpFb.forEach((function(e){e.payload===o&&c.push({type:e.type,subtype:e.subtype})})),"RTX"===i.toUpperCase()?r.set(parseInt(s.apt,10),o):e.addCodec(new p(i,o,a,n,s,c))})),r.forEach((function(t,r){(r=e.getCodecForType(r))&&r.setRTX(t)}))}function i(e,t){(t=t.rids)&&t.forEach((function(t){var r=new C(t.id,g.byValue(t.direction)),n=[],o=new Map;if(t.params){var i=u.parseParams(t.params);Object.keys(i).forEach((function(e){"pt"===e?n=i[e].split(","):o.set(e,i[e])})),r.setFormats(n),r.setParams(o)}e.addRID(r)}))}function a(e,t,r){var n=t.simulcast["dir"+e];if(e=t.simulcast["list"+e],n){var o=g.byValue(n);u.parseSimulcastStreamList(e).forEach((function(e){var t=[];e.forEach((function(e){t.push(new R(e.scid,e.paused))})),r.addSimulcastAlternativeStreams(o,t)}))}}function s(e,t){var r=[];if(t.simulcast){var n=new T;a("1",t,n),a("2",t,n),n.getSimulcastStreams(g.SEND).forEach((function(t){var n=[];t.forEach((function(t){var r=new b(t.getId(),t.isPaused());(t=e.getRID(r.getId()))&&(t.getFormats().forEach((function(t){(t=e.getCodecForType(t))&&r.addCodec(t)})),r.setParams(t.getParams()),n.push(r))})),n.length&&r.push(n)})),e.setSimulcast(n)}return t.simulcast_03&&((n=new T).setSimulcastPlainString(t.simulcast_03.value),e.setSimulcast03(n)),r}function c(e,t,r){var n,o,i,a=new Map,s=r.type;r.ssrcs&&r.ssrcs.forEach((function(r){var c=r.id,u=r.attribute;r=r.value,(i=a.get(c))||(i=new _(c),a.set(i.getSSRC(),i)),"cname"===u.toLowerCase()?i.setCName(r):"mslabel"===u.toLowerCase()?i.setMSLabel(r):"label"===u.toLowerCase()?i.setLabel(r):"msid"===u.toLowerCase()&&(c=(u=r.split(" "))[0],u=u[1],i.setStreamId(c),i.setTrackId(u),(o=t.getStream(c))||(o=new E(c),t.addStream(o)),(n=o.getTrack(u))||((n=new S(s,u)).setEncodings(e),o.addTrack(n)),n.addSSRC(i))}));if(r.msid){var c,u=(c=r.msid.split(" "))[0],d=c[1];(c=t.getStream(u))||(c=new E(u),t.addStream(c));var p=c.getTrack(d);p||((p=new S(s,d)).setMediaId(r.mid),p.setEncodings(e),c.addTrack(p)),a.forEach((function(e,t){(e=a.get(t)).getStreamId()||(e.setStreamId(u),e.setTrackId(d),p.addSSRC(e))}))}r.ssrcGroups&&r.ssrcGroups.forEach((function(e){var r=e.ssrcs.split(" ");e=new y(e.semantics,r),r=a.get(parseInt(r[0],10)),t.getStream(r.getStreamId()).getTrack(r.getTrackId()).addSourceGroup(e)}))}var u=n(30),d=n(13),p=n(14),l=n(15),f=n(16),h=n(17),m=n(2),v=n(4),g=n(3),y=n(19),_=n(20),E=n(21),S=n(22),b=n(33),T=n(18),R=n(34),C=n(35),O=function(e){this.version=e||1,this.name="sdp-semantic",this.streams=new Map,this.medias=[],this.candidates=[],this.dtls=this.ice=this.connection=null};O.prototype.clone=function(){var e=new O(this.version);return e.name=this.name,e.setConnection(this.connection),this.medias.forEach((function(t){e.addMedia(t.clone())})),this.streams.forEach((function(t){e.addStream(t.clone())})),this.candidates.forEach((function(t){e.addCandidate(t.clone())})),e.setICE(this.ice.clone()),e.setDTLS(this.dtls.clone()),e},O.prototype.plain=function(){var e={version:this.version,name:this.name,streams:[],medias:[],candidates:[],connection:this.connection};return this.medias.forEach((function(t){e.medias.push(t.plain())})),this.streams.forEach((function(t){e.streams.push(t.plain())})),this.candidates.forEach((function(t){e.candidates.push(t.plain())})),e.ice=this.ice&&this.ice.plain(),e.dtls=this.dtls&&this.dtls.plain(),e},O.prototype.setVersion=function(e){this.version=e},O.prototype.setOrigin=function(e){this.origin=e},O.prototype.setName=function(e){this.name=e},O.prototype.getConnection=function(){return this.connection},O.prototype.setConnection=function(e){this.connection=e},O.prototype.setTiming=function(e){this.timing=e},O.prototype.addMedia=function(e){this.medias.push(e)},O.prototype.getMedia=function(e){var t;return this.medias.forEach((function(r){r.getType().toLowerCase()===e.toLowerCase()&&(t=r)})),t},O.prototype.getMedias=function(e){if(!e)return this.medias;var t=[];return this.medias.forEach((function(r){r.getType().toLowerCase()===e.toLowerCase()&&t.push(r)})),t},O.prototype.getMediaById=function(e){var t;return this.medias.forEach((function(r){r.getId().toLowerCase()===e.toLowerCase()&&(t=r)})),t},O.prototype.getVersion=function(){return this.version},O.prototype.getDTLS=function(){return this.dtls},O.prototype.setDTLS=function(e){this.dtls=e},O.prototype.getICE=function(){return this.ice},O.prototype.setICE=function(e){this.ice=e},O.prototype.addCandidate=function(e){this.candidates.push(e)},O.prototype.addCandidates=function(e){var t=this;e.forEach((function(e){t.addCandidate(e)}))},O.prototype.getCandidates=function(){return this.candidates},O.prototype.getStream=function(e){return this.streams.get(e)},O.prototype.getStreams=function(){return this.streams},O.prototype.getFirstStream=function(){return 0<this.streams.values().length?this.streams.values()[0]:null},O.prototype.addStream=function(e){this.streams.set(e.getId(),e)},O.prototype.removeStream=function(e){this.streams.delete(e.getId())},O.prototype.toJSON=function(){var e={version:0,media:[]};e.version=this.version||0,e.origin=this.origin||{username:"-",sessionId:(new Date).getTime(),sessionVersion:this.version,netType:"IN",ipVer:4,address:"127.0.0.1"},e.name=this.name||"semantic-sdp",e.connection=this.getConnection(),e.timing=this.timing||{start:0,stop:0};var t=this.getICE();t&&(t.isLite()&&(e.icelite="ice-lite"),e.iceOptions=t.getOpts(),e.iceUfrag=t.getUfrag(),e.icePwd=t.getPwd()),e.msidSemantic=this.msidSemantic||{semantic:"WMS",token:"*"},e.groups=[];var n={type:"BUNDLE",mids:[]},o=this.getDTLS();o&&(e.fingerprint={type:o.getHash(),hash:o.getFingerprint()},e.setup=m.toString(o.getSetup())),this.medias.forEach((function(r){var i={type:r.getType(),port:r.getPort(),protocol:"UDP/TLS/RTP/SAVPF",fmtp:[],rtp:[],rtcpFb:[],ext:[],bandwidth:[],candidates:[],ssrcGroups:[],ssrcs:[],rids:[]};i.direction=v.toString(r.getDirection()),i.rtcpMux="rtcp-mux",i.connection=r.getConnection(),i.xGoogleFlag=r.getXGoogleFlag(),i.mid=r.getId(),n.mids.push(r.getId()),i.rtcp=r.rtcp,0<r.getBitrate()&&i.bandwidth.push({type:"AS",limit:r.getBitrate()}),r.getCandidates().forEach((function(e){i.candidates.push({foundation:e.getFoundation(),component:e.getComponentId(),transport:e.getTransport(),priority:e.getPriority(),ip:e.getAddress(),port:e.getPort(),type:e.getType(),relAddr:e.getRelAddr(),relPort:e.getRelPort(),generation:e.getGeneration()})})),(t=r.getICE())&&(t.isLite()&&(i.icelite="ice-lite"),i.iceOptions=t.getOpts(),i.iceUfrag=t.getUfrag(),i.icePwd=t.getPwd(),t.isEndOfCandidates()&&(i.endOfCandidates=t.isEndOfCandidates())),(o=r.getDTLS())&&(i.fingerprint={type:o.getHash(),hash:o.getFingerprint()},i.setup=m.toString(o.getSetup())),r.setup&&(i.setup=m.toString(r.setup)),r.getCodecs().forEach((function(e){i.rtp.push({payload:e.getType(),codec:e.getCodec(),rate:e.getRate(),encoding:e.getEncoding()});var t=e.getParams();0<Object.keys(t).length&&i.fmtp.push({payload:e.getType(),config:Object.keys(t).map((function(e){return e+(t[e]?"="+t[e]:"")})).join(";")}),e.getFeedback().forEach((function(t){i.rtcpFb.push({payload:e.getType(),type:t.type,subtype:t.subtype})})),e.hasRTX()&&(i.rtp.push({payload:e.getRTX(),codec:"rtx",rate:e.getRate(),encoding:e.getEncoding()}),i.fmtp.push({payload:e.getRTX(),config:"apt="+e.getType()}))}));var a=[];i.rtp.forEach((function(e){a.push(e.payload)})),i.payloads=a.join(" "),r.getExtensions().forEach((function(e,t){i.ext.push({value:t,uri:e})})),r.getRIDs().forEach((function(e){var t={id:e.getId(),direction:g.toString(e.getDirection()),params:""};e.getFormats().length&&(t.params="pt="+e.getFormats().join(",")),e.getParams().forEach((function(e,r){t.params+=(t.params.length?";":"")+r+"="+e})),i.rids.push(t)}));var s=r.getSimulcast();if(r=r.getSimulcast03(),s){var c=1;i.simulcast={};var u=s.getSimulcastStreams(g.SEND);s=s.getSimulcastStreams(g.RECV);if(u&&u.length){var d="";u.forEach((function(e){var t="";e.forEach((function(e){t+=(t.length?",":"")+(e.isPaused()?"~":"")+e.getId()})),d+=(d.length?";":"")+t})),i.simulcast["dir"+c]="send",i.simulcast["list"+c]=d,c+=1}if(s&&s.length){var p=[];s.forEach((function(e){var t="";e.forEach((function(e){t+=(t.length?",":"")+(e.isPaused()?"~":"")+e.getId()})),p+=(p.length?";":"")+t})),i.simulcast["dir"+c]="recv",i.simulcast["list"+c]=p,c+=1}}r&&(i.simulcast_03={value:r.getSimulcastPlainString()}),e.media.push(i)})),n.mids.sort(),e.media.sort((function(e,t){return e.mid<t.mid?-1:e.mid>t.mid?1:0}));for(var i=r.makeIterator(this.streams.values()),a=i.next();!a.done;a=i.next()){a=a.value;for(var s=r.makeIterator(a.getTracks().values()),c=s.next();!c.done;c=s.next()){c=c.value;for(var u={},d=r.makeIterator(e.media),p=d.next();!p.done;u={md:u.md},p=d.next())if(u.md=p.value,c.getMediaId()){if(c.getMediaId()===u.md.mid){c.getSourceGroups().forEach(function(e){return function(t){e.md.ssrcGroups.push({semantics:t.getSemantics(),ssrcs:t.getSSRCs().join(" ")})}}(u)),c.getSSRCs().forEach(function(e){return function(t){e.md.ssrcs.push({id:t.ssrc,attribute:"cname",value:t.getCName()})}}(u)),a.getId()&&c.getId()&&(u.md.msid=a.getId()+" "+c.getId());break}}else if(u.md.type.toLowerCase()===c.getMedia().toLowerCase()){c.getSourceGroups().forEach(function(e){return function(t){e.md.ssrcGroups.push({semantics:t.getSemantics(),ssrcs:t.getSSRCs().join(" ")})}}(u)),c.getSSRCs().forEach(function(e){return function(t){e.md.ssrcs.push({id:t.ssrc,attribute:"cname",value:t.getCName()}),t.getStreamId()&&t.getTrackId()&&e.md.ssrcs.push({id:t.ssrc,attribute:"msid",value:t.getStreamId()+" "+t.getTrackId()}),t.getMSLabel()&&e.md.ssrcs.push({id:t.ssrc,attribute:"mslabel",value:t.getMSLabel()}),t.getLabel()&&e.md.ssrcs.push({id:t.ssrc,attribute:"label",value:t.getLabel()})}}(u));break}}}return n.mids=n.mids.join(" "),e.groups.push(n),e},O.prototype.toString=function(){var e=this.toJSON();return u.write(e)},O.processString=function(e){return e=u.parse(e),O.process(e)},O.process=function(e){var t=new O;t.setVersion(e.version),t.setTiming(e.timing),t.setConnection(e.connection),t.setOrigin(e.origin),t.msidSemantic=e.msidSemantic,t.name=e.name;var r=e.iceUfrag,n=e.icePwd,a=e.iceOptions;(r||n||a)&&t.setICE(new f(r,n,a));var u=e.fingerprint;if(u){var p=u.type,g=u.hash,y=null;e.setup&&(y=m.byValue(e.setup)),t.setDTLS(new l(y,p,g))}return e.media.forEach((function(e){var p=new h(e.mid,e.port,e.type);if(p.setXGoogleFlag(e.xGoogleFlag),p.rtcp=e.rtcp,p.setConnection(e.connection),e.bandwidth&&0<e.bandwidth.length&&e.bandwidth.forEach((function(e){"AS"===e.type&&p.setBitrate(e.limit)})),r=e.iceUfrag,n=e.icePwd,a=e.iceOptions,r||n||a){var g=new f(r,n,a);e.endOfCandidates&&g.setEndOfCandidates("end-of-candidates"),p.setICE(g)}if(u=e.fingerprint){g=u.type;var y=u.hash,_=m.ACTPASS;e.setup&&(_=m.byValue(e.setup)),p.setDTLS(new l(_,g,y))}e.setup&&p.setSetup(m.byValue(e.setup)),g=v.SENDRECV,e.direction&&(g=v.byValue(e.direction.toUpperCase())),p.setDirection(g),(g=e.candidates)&&g.forEach((function(e){p.addCandidate(new d(e.foundation,e.component,e.transport,e.priority,e.ip,e.port,e.type,e.generation,e.relAddr,e.relPort))})),o(p,e),(g=e.ext)&&g.forEach((function(e){p.addExtension(e.value,e.uri)})),i(p,e),c(g=s(p,e),t,e),t.addMedia(p)})),t},e.exports=O},function(e,t,r){e=r(31),r=r(32),t.write=r,t.parse=e.parse,t.parseFmtpConfig=e.parseFmtpConfig,t.parseParams=e.parseParams,t.parsePayloads=e.parsePayloads,t.parseRemoteCandidates=e.parseRemoteCandidates,t.parseImageAttributes=e.parseImageAttributes,t.parseSimulcastStreamList=e.parseSimulcastStreamList},function(e,t,r){var n=function(e){return String(Number(e))===e?Number(e):e},o=r(12),i=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(e){var t={},r=[],a=t;return e.split(/(\r\n|\r|\n)/).filter(i).forEach((function(e){var t=e[0],i=e.slice(2);for("m"===t&&(r.push({rtp:[],fmtp:[]}),a=r[r.length-1]),e=0;e<(o[t]||[]).length;e+=1){if((s=o[t][e]).reg.test(i)){t=s,e=a,s=i,i=t.name&&t.names,t.push&&!e[t.push]?e[t.push]=[]:i&&!e[t.name]&&(e[t.name]={});i=t.push?{}:i?e[t.name]:e;var s=s.match(t.reg),c=i,u=t.names,d=t.name;if(d&&!u)c[d]=n(s[1]);else for(d=0;d<u.length;d+=1)null!=s[d+1]&&(c[u[d]]=n(s[d+1]));t.push&&e[t.push].push(i);break}}})),t.media=r,t};var a=function(e,t){return 2===(t=t.split(/=(.+)/,2)).length&&(e[t[0]]=n(t[1])),e};t.parseParams=function(e){return e.split(/\;\s?/).reduce(a,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(e){return e.split(" ").map(Number)},t.parseRemoteCandidates=function(e){var t=[];e=e.split(" ").map(n);for(var r=0;r<e.length;r+=3)t.push({component:e[r],ip:e[r+1],port:e[r+2]});return t},t.parseImageAttributes=function(e){return e.split(" ").map((function(e){return e.substring(1,e.length-1).split(",").reduce(a,{})}))},t.parseSimulcastStreamList=function(e){return e.split(";").map((function(e){return e.split(",").map((function(e){var t=!1;return"~"!==e[0]?e=n(e):(e=n(e.substring(1,e.length)),t=!0),{scid:e,paused:t}}))}))}},function(e,t,r){var n=r(12),o=/%[sdv%]/g,i=function(e){var t=1,r=arguments,n=r.length;return e.replace(o,(function(e){if(t>=n)return e;var o=r[t];switch(t+=1,e){case"%%":return"%";case"%s":return String(o);case"%d":return Number(o);case"%v":return""}}))},a=function(e,t,r){var n=t.format instanceof Function?t.format(t.push?r:r[t.name]):t.format;if(e=[e+"="+n],t.names)for(n=0;n<t.names.length;n+=1){var o=t.names[n];t.name?e.push(r[t.name][o]):e.push(r[t.names[n]])}else e.push(r[t.name]);return i.apply(null,e)},s="vosiuepcbtrza".split(""),c=["i","c","b","a"];e.exports=function(e,t){t=t||{},null==e.version&&(e.version=0),null==e.name&&(e.name=" "),e.media.forEach((function(e){null==e.payloads&&(e.payloads="")}));var r=t.innerOrder||c,o=[];return(t.outerOrder||s).forEach((function(t){n[t].forEach((function(r){r.name in e&&null!=e[r.name]?o.push(a(t,r,e)):r.push in e&&null!=e[r.push]&&e[r.push].forEach((function(e){o.push(a(t,r,e))}))}))})),e.media.forEach((function(e){o.push(a("m",n.m[0],e)),r.forEach((function(t){n[t].forEach((function(r){r.name in e&&null!=e[r.name]?o.push(a(t,r,e)):r.push in e&&null!=e[r.push]&&e[r.push].forEach((function(e){o.push(a(t,r,e))}))}))}))})),o.join("\r\n")+"\r\n"}},function(e,t){var r=function(e,t){this.id=e,this.paused=t,this.codecs=new Map,this.params=new Map};r.prototype.clone=function(){var e=new r(this.id,this.paused);return this.codecs.forEach((function(t){e.addCodec(t.cloned())})),e.setParams(this.params),e},r.prototype.plain=function(){var e=this,t={id:this.id,paused:this.paused,codecs:{},params:{}};return this.codecs.keys().forEach((function(r){t.codecs[r]=e.codecs.get(r).plain()})),this.params.keys().forEach((function(r){t.params[r]=e.params.get(r).param})),t},r.prototype.getId=function(){return this.id},r.prototype.getCodecs=function(){return this.codecs},r.prototype.addCodec=function(e){this.codecs.set(e.getType(),e)},r.prototype.getParams=function(){return this.params},r.prototype.setParams=function(e){this.params=new Map(e)},r.prototype.isPaused=function(){return this.paused},e.exports=r},function(e,t){var r=function(e,t){this.paused=t,this.id=e};r.prototype.clone=function(){return new r(this.id,this.paused)},r.prototype.plain=function(){return{id:this.id,paused:this.paused}},r.prototype.isPaused=function(){return this.paused},r.prototype.getId=function(){return this.id},e.exports=r},function(e,t,r){var n=r(3),o=function(e,t){this.id=e,this.direction=t,this.formats=[],this.params=new Map};o.prototype.clone=function(){var e=new o(this.id,this.direction);return e.setFormats(this.formats),e.setParams(this.params),e},o.prototype.plain=function(){var e={id:this.id,direction:n.toString(this.direction),formats:this.formats,params:{}};return this.params.forEach((function(t,r){e.params[r]=t})),e},o.prototype.getId=function(){return this.id},o.prototype.getDirection=function(){return this.direction},o.prototype.setDirection=function(e){this.direction=e},o.prototype.getFormats=function(){return this.formats},o.prototype.setFormats=function(e){var t=this;this.formats=[],e.forEach((function(e){t.formats.push(parseInt(e,10))}))},o.prototype.getParams=function(){return this.params},o.prototype.setParams=function(e){this.params=new Map(e)},e.exports=o},function(e,t,r){e=r(37),e=r.n(e);var n=r(0).a.module("PeerConnectionFsm");r=["initial","failed","stable"],r=e.a.factory({init:"initial",transitions:[{name:"create-offer",from:r,to:"stable"},{name:"add-ice-candidate",from:r,to:function(){return this.state}},{name:"process-answer",from:r,to:"stable"},{name:"process-offer",from:r,to:"stable"},{name:"negotiate-max-bw",from:r,to:"stable"},{name:"add-stream",from:r,to:function(){return this.state}},{name:"remove-stream",from:r,to:function(){return this.state}},{name:"close",from:r,to:"closed"},{name:"error",from:"*",to:"failed"}],data:function(e){return{baseStackCalls:e,history:[]}},methods:{getHistory:function(){return this.history},onBeforeClose:function(e){return n.debug("mesage: onBeforeClose, from: "+e.from+", to: "+e.to),this.baseStackCalls.protectedClose()},onBeforeAddIceCandidate:function(e,t){return n.debug("message: onBeforeAddIceCandidate, from: "+e.from+", to: "+e.to),this.baseStackCalls.protectedAddIceCandidate(t)},onBeforeAddStream:function(e,t){return n.debug("message: onBeforeAddStream, from: "+e.from+", to: "+e.to),this.baseStackCalls.protectedAddStream(t)},onBeforeRemoveStream:function(e,t){return n.debug("message: onBeforeRemoveStream, from: "+e.from+", to: "+e.to),this.baseStackCalls.protectedRemoveStream(t)},onBeforeCreateOffer:function(e,t){return n.debug("message: onBeforeCreateOffer, from: "+e.from+", to: "+e.to),this.baseStackCalls.protectedCreateOffer(t)},onBeforeProcessOffer:function(e,t){return n.debug("message: onBeforeProcessOffer, from: "+e.from+", to: "+e.to),this.baseStackCalls.protectedProcessOffer(t)},onBeforeProcessAnswer:function(e,t){return n.debug("message: onBeforeProcessAnswer, from: "+e.from+", to: "+e.to),this.baseStackCalls.protectedProcessAnswer(t)},onBeforeNegotiateMaxBW:function(e,t,r){return n.debug("message: onBeforeNegotiateMaxBW, from: "+e.from+", to: "+e.to),this.baseStackCalls.protectedNegotiateMaxBW(t,r)},onStable:function(e){n.debug("message: reached STABLE, from: "+e.from+", to: "+e.to)},onClosed:function(e){n.debug("message: reached close, from: "+e.from+", to: "+e.to)},onTransition:function(e){n.info("message: onTransition, transition: "+e.transition+", from: "+e.from+", to: "+e.to),this.history.push({from:e.from,to:e.to,transition:e.transition}),200<this.history.length&&this.history.shift()},onError:function(e,t){n.warning("message: Error Transition Failed, message: "+t+", from: "+e.from+", to: "+e.to+", printing history"),this.history.forEach((function(e){n.warning("message: Error Transition Failed continuation, item: "+JSON.stringify(e))}))},onInvalidTransition:function(e,t,r){"closed"===t?n.debug("message:Trying to transition a closed state, transition: "+e+", from: "+t+", to: "+r):n.warning("message: Error Invalid transition, transition: "+e+", from: "+t+", to: "+r)},onPendingTransition:function(e,t,r){n.warning("message: Error Pending transition, transition: "+e+", from: "+t+", to: "+r+", lastTransition: "+(0<this.history.length?this.history[this.history.length-1].transition:"none"))}}}),t.a=r},function(e,t,r){e.exports=function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=5)}([function(e,t,r){e.exports=function(e,t){var r,n;for(r=1;r<arguments.length;r++){var o=arguments[r];for(n in o)o.hasOwnProperty(n)&&(e[n]=o[n])}return e}},function(e,t,r){var n=r(0);e.exports={build:function(e,t){var r,o=t.plugins;for(t=0,r=o.length;t<r;t++){var i=o[t];i.methods&&n(e,i.methods),i.properties&&Object.defineProperties(e,i.properties)}},hook:function(e,t,r){var n,o,i=e.config.plugins;for(e=[e.context],r&&(e=e.concat(r)),r=0,n=i.length;r<n;r++){var a=i[r];(o=i[r][t])&&o.apply(a,e)}}}},function(e,t,r){function n(e){if(0===e.length)return e;var t=e.split(/[_-]/);if(1===t.length&&t[0][0].toLowerCase()===t[0][0])return e;var r=t[0].toLowerCase();for(e=1;e<t.length;e++)r=r+t[e].charAt(0).toUpperCase()+t[e].substring(1).toLowerCase();return r}n.prepended=function(e,t){return e+(t=n(t))[0].toUpperCase()+t.substring(1)},e.exports=n},function(e,t,r){function n(e,t){this.options=e=e||{},this.defaults=t.defaults,this.states=[],this.transitions=[],this.map={},this.lifecycle=this.configureLifecycle(),this.init=this.configureInitTransition(e.init),this.data=this.configureData(e.data),this.methods=this.configureMethods(e.methods),this.map[this.defaults.wildcard]={},this.configureTransitions(e.transitions||[]),this.plugins=this.configurePlugins(e.plugins,t.plugin)}var o=r(0),i=r(2);o(n.prototype,{addState:function(e){this.map[e]||(this.states.push(e),this.addStateLifecycleNames(e),this.map[e]={})},addStateLifecycleNames:function(e){this.lifecycle.onEnter[e]=i.prepended("onEnter",e),this.lifecycle.onLeave[e]=i.prepended("onLeave",e),this.lifecycle.on[e]=i.prepended("on",e)},addTransition:function(e){0>this.transitions.indexOf(e)&&(this.transitions.push(e),this.addTransitionLifecycleNames(e))},addTransitionLifecycleNames:function(e){this.lifecycle.onBefore[e]=i.prepended("onBefore",e),this.lifecycle.onAfter[e]=i.prepended("onAfter",e),this.lifecycle.on[e]=i.prepended("on",e)},mapTransition:function(e){var t=e.name,r=e.from,n=e.to;return this.addState(r),"function"!=typeof n&&this.addState(n),this.addTransition(t),this.map[r][t]=e},configureLifecycle:function(){return{onBefore:{transition:"onBeforeTransition"},onAfter:{transition:"onAfterTransition"},onEnter:{state:"onEnterState"},onLeave:{state:"onLeaveState"},on:{transition:"onTransition"}}},configureInitTransition:function(e){return"string"==typeof e?this.mapTransition(o({},this.defaults.init,{to:e,active:!0})):"object"==typeof e?this.mapTransition(o({},this.defaults.init,e,{active:!0})):(this.addState(this.defaults.init.from),this.defaults.init)},configureData:function(e){return"function"==typeof e?e:"object"==typeof e?function(){return e}:function(){return{}}},configureMethods:function(e){return e||{}},configurePlugins:function(e,t){var r;for(t=0,r=(e=e||[]).length;t<r;t++){var n=e[t];"function"==typeof n&&(e[t]=n=n()),n.configure&&n.configure(this)}return e},configureTransitions:function(e){var t,r,n=this.defaults.wildcard;for(r=0;r<e.length;r++){var o=e[r],i=Array.isArray(o.from)?o.from:[o.from||n],a=o.to||n;for(t=0;t<i.length;t++)this.mapTransition({name:o.name,from:i[t],to:a})}},transitionFor:function(e,t){var r=this.defaults.wildcard;return this.map[e][t]||this.map[r][t]},transitionsFor:function(e){var t=this.defaults.wildcard;return Object.keys(this.map[e]).concat(Object.keys(this.map[t]))},allStates:function(){return this.states},allTransitions:function(){return this.transitions}}),e.exports=n},function(e,t,r){function n(e,t){this.context=e,this.config=t,this.state=t.init.from,this.observers=[e]}var o=r(0),i=r(6),a=r(1),s=[null,[]];o(n.prototype,{init:function(e){if(o(this.context,this.config.data.apply(this.context,e)),a.hook(this,"init"),this.config.init.active)return this.fire(this.config.init.name,[])},is:function(e){return Array.isArray(e)?0<=e.indexOf(this.state):this.state===e},isPending:function(){return this.pending},can:function(e){return!this.isPending()&&!!this.seek(e)},cannot:function(e){return!this.can(e)},allStates:function(){return this.config.allStates()},allTransitions:function(){return this.config.allTransitions()},transitions:function(){return this.config.transitionsFor(this.state)},seek:function(e,t){var r=this.config.defaults.wildcard;return"function"==typeof(e=(e=this.config.transitionFor(this.state,e))&&e.to)?e.apply(this.context,t):e===r?this.state:e},fire:function(e,t){return this.transit(e,this.state,this.seek(e,t),t)},transit:function(e,t,r,n){var o=this.config.lifecycle,i=this.config.options.observeUnchangedState||t!==r;return r?this.isPending()?this.context.onPendingTransition(e,t,r):(this.config.addState(r),this.beginTransit(),n.unshift({transition:e,from:t,to:r,fsm:this.context}),this.observeEvents([this.observersForEvent(o.onBefore.transition),this.observersForEvent(o.onBefore[e]),i?this.observersForEvent(o.onLeave.state):s,i?this.observersForEvent(o.onLeave[t]):s,this.observersForEvent(o.on.transition),i?["doTransit",[this]]:s,i?this.observersForEvent(o.onEnter.state):s,i?this.observersForEvent(o.onEnter[r]):s,i?this.observersForEvent(o.on[r]):s,this.observersForEvent(o.onAfter.transition),this.observersForEvent(o.onAfter[e]),this.observersForEvent(o.on[e])],n)):this.context.onInvalidTransition(e,t,r)},beginTransit:function(){this.pending=!0},endTransit:function(e){return this.pending=!1,e},failTransit:function(e){throw this.pending=!1,e},doTransit:function(e){this.state=e.to},observe:function(e){if(2===e.length){var t={};t[e[0]]=e[1],this.observers.push(t)}else this.observers.push(e[0])},observersForEvent:function(e){for(var t,r=0,n=this.observers.length,o=[];r<n;r++)(t=this.observers[r])[e]&&o.push(t);return[e,o,!0]},observeEvents:function(e,t,r,n){if(0===e.length)return this.endTransit(void 0===n||n);var o=e[0][0],i=e[0][1],s=e[0][2];return(t[0].event=o)&&s&&o!==r&&a.hook(this,"lifecycle",t),0===i.length?(e.shift(),this.observeEvents(e,t,o,n)):(r=(r=i.shift())[o].apply(r,t))&&"function"==typeof r.then?r.then(this.observeEvents.bind(this,e,t,o)).catch(this.failTransit.bind(this)):!1===r?this.endTransit(!1):this.observeEvents(e,t,o,r)},onInvalidTransition:function(e,t,r){throw new i("transition is invalid in current state",e,t,r,this.state)},onPendingTransition:function(e,t,r){throw new i("transition is invalid while previous transition is still in progress",e,t,r,this.state)}}),e.exports=n},function(e,t,r){function n(e){return o(this||{},e)}function o(e,t){return i(e,t=new u(t,n)),e._fsm(),e}function i(e,t){if("object"!=typeof e||Array.isArray(e))throw Error("StateMachine can only be applied to objects");c.build(e,t),Object.defineProperties(e,l),a(e,p),a(e,t.methods),t.allTransitions().forEach((function(t){e[s(t)]=function(){return this._fsm.fire(t,[].slice.call(arguments))}})),e._fsm=function(){this._fsm=new d(this,t),this._fsm.init(arguments)}}var a=r(0),s=r(2),c=r(1),u=r(3),d=r(4),p={is:function(e){return this._fsm.is(e)},can:function(e){return this._fsm.can(e)},cannot:function(e){return this._fsm.cannot(e)},observe:function(){return this._fsm.observe(arguments)},transitions:function(){return this._fsm.transitions()},allTransitions:function(){return this._fsm.allTransitions()},allStates:function(){return this._fsm.allStates()},onInvalidTransition:function(e,t,r){return this._fsm.onInvalidTransition(e,t,r)},onPendingTransition:function(e,t,r){return this._fsm.onPendingTransition(e,t,r)}},l={state:{configurable:!1,enumerable:!0,get:function(){return this._fsm.state},set:function(e){throw Error("use transitions to change state")}}};n.version="3.0.1",n.factory=function(e,t){if("function"==typeof e){var r=e;e=t||{}}else r=function(){this._fsm.apply(this,arguments)},e=e||{};return e=new u(e,n),i(r.prototype,e),r.prototype._fsm.config=e,r},n.apply=o,n.defaults={wildcard:"*",init:{name:"init",from:"none"}},e.exports=n},function(e,t,r){e.exports=function(e,t,r,n,o){this.message=e,this.transition=t,this.from=r,this.to=n,this.current=o}}])},function(e,t,n){(e=function(e,t){this._enqueuing=!1,this._queuedArgs=[],this.maxEnqueueingTime=void 0===e?3e4:e,this.onEnqueueingTimeout=void 0===t?function(){}:t}).prototype.protectFunction=function(e){return this._protectedFunction.bind(this,e)},e.prototype.isEnqueueing=function(){return this._enqueuing},e.prototype.startEnqueuing=function(e){var t=this;this._enqueuing=!0,clearTimeout(this._enqueueingTimeout),this._enqueueingTimeout=setTimeout((function(){t.onEnqueueingTimeout&&t.onEnqueueingTimeout(e)}),this.maxEnqueueingTime)},e.prototype.stopEnqueuing=function(){this._enqueuing=!1,clearTimeout(this._enqueueingTimeout)},e.prototype.nextInQueue=function(){if(0<this._queuedArgs.length){var e=this._queuedArgs.shift();e.protectedFunction.apply(null,[].concat(r.arrayFromIterable(e.args)))}},e.prototype.dequeueAll=function(){var e=this._queuedArgs;this._queuedArgs=[],e.forEach((function(e){e.protectedFunction.apply(null,[].concat(r.arrayFromIterable(e.args)))}))},e.prototype._protectedFunction=function(e,t){for(var n=[],o=1;o<arguments.length;++o)n[o-1]=arguments[o];this.isEnqueueing()?this._enqueue.apply(this,[].concat([e],r.arrayFromIterable(n))):e.apply(null,[].concat(r.arrayFromIterable(n)))},e.prototype._enqueue=function(e,t){for(var r=[],n=1;n<arguments.length;++n)r[n-1]=arguments[n];this._queuedArgs.push({protectedFunction:e,args:r})},t.a=e},function(e,t,r){e=r(0);var n=r(10),o=e.a.module("SafariStack");t.a=function(e){o.debug("message: Starting Safari stack");var t=Object(n.a)(e);return t._updateTracksToBeNegotiatedFromStream=function(){t.tracksToBeNegotiated+=1},t}},function(e,t,r){e=r(0);var n=r(11),o=e.a.module("FirefoxStack");t.a=function(e){o.debug("message: Starting Firefox stack");var t=Object(n.a)(e),r=[{rid:"low",scaleResolutionDownBy:3},{rid:"med",scaleResolutionDownBy:2},{rid:"high"}],i=function(e){var n=t.simulcast.numSpatialLayers||2,o=r.length,i=(n=n<o?n:o,e.getParameters()||{});i.encodings=[];for(var a=o-1;a>=o-n;--a)i.encodings.push(r[a]);return e.setParameters(i)},a=function(){if(!t.simulcast)return[];var e=[];return t.peerConnection.getSenders().forEach((function(t){"video"===t.track.kind&&e.push(i(t))})),e};return t.enableSimulcast=function(e){return e},t.prepareCreateOffer=function(e){var t=[];return!0!==(void 0!==e&&e)&&(t=a()),Promise.all(t)},t._updateTracksToBeNegotiatedFromStream=function(){t.tracksToBeNegotiated+=1},t}},function(e,t,r){var n=r(0).a.module("FcStack");t.a=function(e){var t={pcConfig:{},peerConnection:{},desc:{},signalCallback:void 0,close:function(){n.debug("message: Close FcStack")},createOffer:function(){n.debug("message: CreateOffer")},addStream:function(e){n.debug("message: addStream, "+e.toLog())},processSignalingMessage:function(e){n.debug("message: processSignaling, message: "+e),void 0!==t.signalCallback&&t.signalCallback(e)},sendSignalingMessage:function(t){n.debug("message: Sending signaling Message, message: "+t),e.callback(t)},setSignalingCallback:function(e){e=void 0===e?function(){}:e,n.debug("message: Setting signalling callback"),t.signalCallback=e}};return t}},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,n){n.d(t,"a",(function(){return u})),e=n(44);var o=n.n(e);e=n(0);var i=n(45);n.n(i);var a=n(1),s=e.a.module("Socket"),c=function(e,t){return(e=Object(a.d)({type:e})).args=t.args,e},u=function(e){var t=Object(a.b)(),n=function(){};r.initSymbol(),t.CONNECTED=Symbol("connected"),r.initSymbol(),t.RECONNECTING=Symbol("reconnecting"),r.initSymbol(),t.DISCONNECTED=Symbol("disconnected"),t.state=t.DISCONNECTED,t.IO=void 0===e?o.a:e;var u,d,p=!1,l=function(e,r){for(var n=[],o=1;o<arguments.length;++o)n[o-1]=arguments[o];t.emit(c(e,{args:n}))};t.connect=function(e,r,o,a){o=void 0===o?n:o,a=void 0===a?n:a,Object.assign(r,e),u=t.IO.connect((e.secure?"wss://":"ws://")+e.host,{reconnection:!0,reconnectionAttempts:3,reconnectionDelay:1e3,reconnectionDelayMax:4e3,randomizationFactor:.5,secure:e.secure,forceNew:!0,transports:["websocket"],rejectUnauthorized:!1,query:r}),d=new i.ReliableSocket(u),t.reliableSocket=d;var c=1e3,f=u.io.engine.transport.ws.onclose;u.io.engine.transport.ws.onclose=function(e){s.info("message: WebSocket closed, code: "+e.code+", id: "+t.id),c=e.code,f(e)},d.on("connected",(function(e){s.info("message: connected, previousState: "+t.state.toString()+", id: "+t.id),t.state=t.CONNECTED,t.id=e.clientId,o(e)})),d.on("onAddStream",l.bind(t,"onAddStream")),d.on("stream_message_erizo",l.bind(t,"stream_message_erizo")),d.on("stream_message_p2p",l.bind(t,"stream_message_p2p")),d.on("connection_message_erizo",l.bind(t,"connection_message_erizo")),d.on("publish_me",l.bind(t,"publish_me")),d.on("unpublish_me",l.bind(t,"unpublish_me")),d.on("onBandwidthAlert",l.bind(t,"onBandwidthAlert")),d.on("onDataStream",l.bind(t,"onDataStream")),d.on("onUpdateAttributeStream",l.bind(t,"onUpdateAttributeStream")),d.on("onRemoveStream",l.bind(t,"onRemoveStream")),d.on("onAutomaticStreamsSubscription",l.bind(t,"onAutomaticStreamsSubscription")),d.on("connection_failed",(function(e){s.warning("message: connection failed, id: "+t.id+", evt: "+e),l("connection_failed",e)})),d.on("connect",(function(){s.info("message: connect, previousState: "+t.state.toString()+", id: "+t.id),t.state===t.RECONNECTING&&(s.info("message: reconnected, id: "+t.id),t.state=t.CONNECTED,l("reconnected",t.id))})),d.on("error",(function(e){s.warning("message: socket error, id: "+t.id+", state: "+t.state.toString()+", error: "+e),e.startsWith("token: ")?(t.state=t.DISCONNECTED,a(e.slice(7)),d.disconnect()):t.state===t.RECONNECTING?(t.state=t.DISCONNECTED,d.disconnect(!0),l("disconnect",e)):t.state===t.DISCONNECTED?d.disconnect(!0):l("error")})),d.on("disconnect",(function(e){var r=d.getNumberOfPending();s.info("message: disconnect, id: "+t.id+", reason: "+e+", closeCode: "+c+", pending: "+r),t.clientInitiated?(t.state=t.DISCONNECTED,p||l("disconnect",e),d.disconnect(!0)):(t.state=t.RECONNECTING,l("reconnecting","reason: "+e+", pendingMessages: "+r))})),d.on("connect_error",(function(e){s.warning("message: connect error, id: "+t.id+", error: "+e.message)})),d.on("connect_timeout",(function(e){s.warning("message: connect timeout, id: "+t.id+", error: "+e.message)})),d.on("reconnecting",(function(e){s.info("message: reconnecting, id: "+t.id+", attempt: "+e)})),d.on("reconnect",(function(e){s.info("message: internal ws reconnected, id: "+t.id+", attempt: "+e)})),d.on("reconnect_attempt",(function(e){s.debug("message: reconnect attempt, id: "+t.id+", attempt: "+e),r.clientId=t.id,u.io.opts.query=r})),d.on("reconnect_error",(function(e){s.info("message: error reconnecting, id: "+t.id+", error: "+e.message)})),d.on("reconnect_failed",(function(){s.info("message: reconnect failed, id: "+t.id),t.state=t.DISCONNECTED,l("disconnect","reconnect failed"),d.disconnect(!0)}))};var f=function(e){t.state!==t.DISCONNECTED&&(e.preventDefault(),delete e.returnValue,p=!0,t.disconnect(!0))};return t.disconnect=function(e){s.warning("message: disconnect, id: "+t.id+", clientInitiated: "+e+", state: "+t.state.toString()),t.state=t.DISCONNECTED,(t.clientInitiated=e)&&d.emit("clientDisconnection"),d.disconnect(),window.removeEventListener("beforeunload",f)},t.sendMessage=function(e,r,o,i){o=void 0===o?n:o,i=void 0===i?n:i,t.state===t.DISCONNECTED?s.debug("message: Trying to send a message over a disconnected Socket, id: "+t.id+", type: "+e):d.emit(e,r,(function(e,t){"success"===e?o(t):"error"===e?i(t):o(e,t)}))},t.sendSDP=function(e,o,i,a){a=void 0===a?n:a,t.state===t.DISCONNECTED?s.warning("message: Trying to send a message over a disconnected Socket, id: "+t.id):d.emit(e,{options:o,sdp:i},(function(e){for(var t=[],n=0;n<arguments.length;++n)t[n-0]=arguments[n];a.apply(null,[].concat(r.arrayFromIterable(t)))}))},t}},function(e,t,n){e.exports=function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,n){function o(e,t){var r;"object"===(void 0===e?"undefined":i(e))&&(t=e,e=void 0),t=t||{};var n=(e=a(e)).source,o=e.id,s=e.path;return s=d[o]&&s in d[o].nsps,t.forceNew||t["force new connection"]||!1===t.multiplex||s?(u("ignoring socket cache for %s",n),r=c(n,t)):(d[o]||(u("new io instance for %s",n),d[o]=c(n,t)),r=d[o]),e.query&&!t.query&&(t.query=e.query),r.socket(e.path,t)}r.initSymbol(),r.initSymbol(),r.initSymbolIterator();var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return r.initSymbol(),r.initSymbol(),r.initSymbol(),e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=n(1),s=n(7),c=n(13),u=n(3)("socket.io-client");e.exports=t=o;var d=t.managers={};t.protocol=s.protocol,t.connect=o,t.Manager=n(13),t.Socket=n(39)},function(e,t,r){(function(t){var n=r(2),o=r(3)("socket.io-client:url");e.exports=function(e,r){var i=e;return r=r||t.location,null==e&&(e=r.protocol+"//"+r.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?r.protocol+e:r.host+e),/^(https?|wss?):\/\//.test(e)||(o("protocol-less url %s",e),e=void 0!==r?r.protocol+"//"+e:"https://"+e),o("parse %s",e),i=n(e)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/",e=-1!==i.host.indexOf(":")?"["+i.host+"]":i.host,i.id=i.protocol+"://"+e+":"+i.port,i.href=i.protocol+"://"+e+(r&&r.port===i.port?"":":"+i.port),i}}).call(t,function(){return this}())},function(e,t){var r=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,n="source protocol authority userInfo user password host port relative path directory file query anchor".split(" ");e.exports=function(e){var t=e,o=e.indexOf("["),i=e.indexOf("]");-1!=o&&-1!=i&&(e=e.substring(0,o)+e.substring(o,i).replace(/:/g,";")+e.substring(i,e.length)),e=r.exec(e||"");for(var a={},s=14;s--;)a[n[s]]=e[s]||"";return-1!=o&&-1!=i&&(a.source=t,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a}},function(e,t,r){(function(n){function o(){try{var e=t.storage.debug}catch(e){}return!e&&void 0!==n&&"env"in n&&(e=n.env.DEBUG),e}(t=e.exports=r(5)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var r=this.useColors;if(e[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+e[0]+(r?"%c ":" ")+"+"+t.humanize(this.diff),r){r="color: "+this.color,e.splice(1,0,r,"color: inherit");var n=0,o=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(n++,"%c"===e&&(o=n))})),e.splice(o,0,r)}},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=o,t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)};var i=t;if("undefined"!=typeof chrome&&void 0!==chrome.storage)var a=chrome.storage.local;else e:{try{a=window.localStorage;break e}catch(e){}a=void 0}i.storage=a,t.colors="lightseagreen forestgreen goldenrod dodgerblue darkorchid crimson".split(" "),t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(o())}).call(t,r(4))},function(e,t){function r(){throw Error("setTimeout has not been defined")}function n(){throw Error("clearTimeout has not been defined")}function o(e){if(d===setTimeout)return setTimeout(e,0);if((d===r||!d)&&setTimeout)return d=setTimeout,setTimeout(e,0);try{return d(e,0)}catch(t){try{return d.call(null,e,0)}catch(t){return d.call(this,e,0)}}}function i(e){if(p===clearTimeout)return clearTimeout(e);if((p===n||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(e);try{return p(e)}catch(t){try{return p.call(null,e)}catch(t){return p.call(this,e)}}}function a(){h&&l&&(h=!1,l.length?f=l.concat(f):m=-1,f.length&&s())}function s(){if(!h){var e=o(a);h=!0;for(var t=f.length;t;){for(l=f,f=[];++m<t;)l&&l[m].run();m=-1,t=f.length}l=null,h=!1,i(e)}}function c(e,t){this.fun=e,this.array=t}function u(){}e=e.exports={};try{var d="function"==typeof setTimeout?setTimeout:r}catch(e){d=r}try{var p="function"==typeof clearTimeout?clearTimeout:n}catch(e){p=n}var l,f=[],h=!1,m=-1;e.nextTick=function(e){var t=Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];f.push(new c(e,t)),1!==f.length||h||o(s)},c.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={},e.on=u,e.addListener=u,e.once=u,e.off=u,e.removeListener=u,e.removeAllListeners=u,e.emit=u,e.prependListener=u,e.prependOnceListener=u,e.listeners=function(e){return[]},e.binding=function(e){throw Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(e){throw Error("process.chdir is not supported")},e.umask=function(){return 0}},function(e,t,r){function n(e){function r(){if(r.enabled){var e=+new Date;r.diff=e-(o||e),r.prev=o,o=r.curr=e;var n=Array(arguments.length);for(e=0;e<n.length;e++)n[e]=arguments[e];n[0]=t.coerce(n[0]),"string"!=typeof n[0]&&n.unshift("%O");var i=0;n[0]=n[0].replace(/%([a-zA-Z%])/g,(function(e,o){return"%%"===e||(i++,"function"==typeof(o=t.formatters[o])&&(e=o.call(r,n[i]),n.splice(i,1),i--)),e})),t.formatArgs.call(r,n),(r.log||t.log||console.log.bind(console)).apply(r,n)}}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=function(e){var r,n=0;for(r in e)n=(n<<5)-n+e.charCodeAt(r),n|=0;return t.colors[Math.abs(n)%t.colors.length]}(e),"function"==typeof t.init&&t.init(r),r}var o;(t=e.exports=n.debug=n.default=n).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];for(var r=("string"==typeof e?e:"").split(/[\s,]+/),n=r.length,o=0;o<n;o++)r[o]&&("-"===(e=r[o].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){var r,n=0;for(r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=r(6),t.names=[],t.skips=[],t.formatters={}},function(e,t){function r(e,t,r){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}var n=1e3,o=60*n,i=60*o,a=24*i,s=365.25*a;e.exports=function(e,t){t=t||{};var c=typeof e;if("string"===c&&0<e.length)return function(e){if(!(100<(e=String(e)).length)&&(e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e))){var t=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return t*s;case"days":case"day":case"d":return t*a;case"hours":case"hour":case"hrs":case"hr":case"h":return t*i;case"minutes":case"minute":case"mins":case"min":case"m":return t*o;case"seconds":case"second":case"secs":case"sec":case"s":return t*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t}}}(e);if("number"===c&&!1===isNaN(e))return t.long?r(e,a,"day")||r(e,i,"hour")||r(e,o,"minute")||r(e,n,"second")||e+" ms":e>=a?Math.round(e/a)+"d":e>=i?Math.round(e/i)+"h":e>=o?Math.round(e/o)+"m":e>=n?Math.round(e/n)+"s":e+"ms";throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,r){function n(){}function o(e){var r=""+e.type;return t.BINARY_EVENT!==e.type&&t.BINARY_ACK!==e.type||(r+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(r+=e.nsp+","),null!=e.id&&(r+=e.id),null!=e.data&&(r+=JSON.stringify(e.data)),c("encoded %j as %s",e,r),r}function i(){this.reconstructor=null}function a(e){this.reconPack=e,this.buffers=[]}function s(){return{type:t.ERROR,data:"parser error"}}var c=r(3)("socket.io-parser");e=r(8);var u=r(9),d=r(11),p=r(12);t.protocol=4,t.types="CONNECT DISCONNECT EVENT ACK ERROR BINARY_EVENT BINARY_ACK".split(" "),t.CONNECT=0,t.DISCONNECT=1,t.EVENT=2,t.ACK=3,t.ERROR=4,t.BINARY_EVENT=5,t.BINARY_ACK=6,t.Encoder=n,t.Decoder=i,n.prototype.encode=function(e,r){e.type!==t.EVENT&&e.type!==t.ACK||!u(e.data)||(e.type=e.type===t.EVENT?t.BINARY_EVENT:t.BINARY_ACK),c("encoding packet %j",e),t.BINARY_EVENT===e.type||t.BINARY_ACK===e.type?function(e,t){d.removeBlobs(e,(function(e){var r=d.deconstructPacket(e);e=o(r.packet),(r=r.buffers).unshift(e),t(r)}))}(e,r):r([e=o(e)])},e(i.prototype),i.prototype.add=function(e){if("string"==typeof e){var r,n=0,o={type:Number(e.charAt(0))};if(null==t.types[o.type])e=s();else{if(t.BINARY_EVENT===o.type||t.BINARY_ACK===o.type){for(r="";"-"!==e.charAt(++n)&&(r+=e.charAt(n),n!=e.length););if(r!=Number(r)||"-"!==e.charAt(n))throw Error("Illegal attachments");o.attachments=Number(r)}if("/"===e.charAt(n+1))for(o.nsp="";++n&&","!==(r=e.charAt(n))&&(o.nsp+=r,n!==e.length););else o.nsp="/";if(""!==(r=e.charAt(n+1))&&Number(r)==r){for(o.id="";++n;){if(null==(r=e.charAt(n))||Number(r)!=r){--n;break}if(o.id+=e.charAt(n),n===e.length)break}o.id=Number(o.id)}if(e.charAt(++n)){e:{n=e.substr(n);try{o.data=JSON.parse(n)}catch(e){n=s();break e}n=o}o=n}c("decoded %s as %j",e,o),e=o}t.BINARY_EVENT===e.type||t.BINARY_ACK===e.type?(this.reconstructor=new a(e),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",e)):this.emit("decoded",e)}else{if(!p(e)&&!e.base64)throw Error("Unknown type: "+e);if(!this.reconstructor)throw Error("got binary data when not reconstructing a packet");(e=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,this.emit("decoded",e))}},i.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},a.prototype.takeBinaryData=function(e){return this.buffers.push(e),this.buffers.length===this.reconPack.attachments?(e=d.reconstructPacket(this.reconPack,this.buffers),this.finishedReconstruction(),e):null},a.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(e,t,r){function n(e){if(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}}e.exports=n,n.prototype.on=n.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},n.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var n,o=0;o<r.length;o++)if((n=r[o])===t||n.fn===t){r.splice(o,1);break}return this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1);if(r=this._callbacks["$"+e])for(var r,n=0,o=(r=r.slice(0)).length;n<o;++n)r[n].apply(this,t);return this},n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,r){(function(t){var n=r(10),o=Object.prototype.toString,i="function"==typeof t.Blob||"[object BlobConstructor]"===o.call(t.Blob),a="function"==typeof t.File||"[object FileConstructor]"===o.call(t.File);e.exports=function e(r){if(!r||"object"!=typeof r)return!1;if(n(r)){for(var o=0,s=r.length;o<s;o++)if(e(r[o]))return!0;return!1}if("function"==typeof t.Buffer&&t.Buffer.isBuffer&&t.Buffer.isBuffer(r)||"function"==typeof t.ArrayBuffer&&r instanceof ArrayBuffer||i&&r instanceof Blob||a&&r instanceof File)return!0;if(r.toJSON&&"function"==typeof r.toJSON&&1===arguments.length)return e(r.toJSON(),!0);for(o in r)if(Object.prototype.hasOwnProperty.call(r,o)&&e(r[o]))return!0;return!1}}).call(t,function(){return this}())},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t,r){(function(e){var n=r(10),o=r(12),i=Object.prototype.toString,a="function"==typeof e.Blob||"[object BlobConstructor]"===i.call(e.Blob),s="function"==typeof e.File||"[object FileConstructor]"===i.call(e.File);t.deconstructPacket=function(e){var t=[];return e.data=function e(t,r){if(!t)return t;if(o(t)){var i={_placeholder:!0,num:r.length};return r.push(t),i}if(n(t)){i=Array(t.length);for(var a=0;a<t.length;a++)i[a]=e(t[a],r);return i}if("object"==typeof t&&!(t instanceof Date)){for(a in i={},t)i[a]=e(t[a],r);return i}return t}(e.data,t),e.attachments=t.length,{packet:e,buffers:t}},t.reconstructPacket=function(e,t){return e.data=function e(t,r){if(!t)return t;if(t&&t._placeholder)return r[t.num];if(n(t))for(var o=0;o<t.length;o++)t[o]=e(t[o],r);else if("object"==typeof t)for(o in t)t[o]=e(t[o],r);return t}(e.data,t),e.attachments=void 0,e},t.removeBlobs=function(e,t){var r=0,i=e;!function e(c,u,d){if(!c)return c;if(a&&c instanceof Blob||s&&c instanceof File){r++;var p=new FileReader;p.onload=function(){d?d[u]=this.result:i=this.result,--r||t(i)},p.readAsArrayBuffer(c)}else if(n(c))for(p=0;p<c.length;p++)e(c[p],p,c);else if("object"==typeof c&&!o(c))for(p in c)e(c[p],p,c)}(i),r||t(i)}}).call(t,function(){return this}())},function(e,t){(function(t){e.exports=function(e){return t.Buffer&&t.Buffer.isBuffer(e)||t.ArrayBuffer&&e instanceof ArrayBuffer}}).call(t,function(){return this}())},function(e,t,n){function o(e,t){if(!(this instanceof o))return new o(e,t);e&&"object"===(void 0===e?"undefined":i(e))&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new f({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[],e=t.parser||c,this.encoder=new e.Encoder,this.decoder=new e.Decoder,(this.autoConnect=!1!==t.autoConnect)&&this.open()}r.initSymbol(),r.initSymbol(),r.initSymbolIterator();var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return r.initSymbol(),r.initSymbol(),r.initSymbol(),e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=n(14),s=n(39);t=n(8);var c=n(7),u=n(41),d=n(42),p=n(3)("socket.io-client:manager"),l=n(37),f=n(43),h=Object.prototype.hasOwnProperty;e.exports=o,o.prototype.emitAll=function(){for(var e in this.emit.apply(this,arguments),this.nsps)h.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},o.prototype.updateSocketIds=function(){for(var e in this.nsps)h.call(this.nsps,e)&&(this.nsps[e].id=this.generateId(e))},o.prototype.generateId=function(e){return("/"===e?"":e+"#")+this.engine.id},t(o.prototype),o.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},o.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},o.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},o.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},o.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},o.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},o.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},o.prototype.open=o.prototype.connect=function(e,t){if(p("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;p("opening %s",this.uri);var r=this.engine=a(this.uri,this.opts),n=this;this.readyState="opening",this.skipReconnect=!1;var o=u(r,"open",(function(){n.onopen(),e&&e()}));if(t=u(r,"error",(function(t){if(p("connect_error"),n.cleanup(),n.readyState="closed",n.emitAll("connect_error",t),e){var r=Error("Connection error");r.data=t,e(r)}else n.maybeReconnectOnOpen()})),!1!==this._timeout){var i=this._timeout;p("connect attempt will timeout after %d",i);var s=setTimeout((function(){p("connect attempt timed out after %d",i),o.destroy(),r.close(),r.emit("error","timeout"),n.emitAll("connect_timeout",i)}),i);this.subs.push({destroy:function(){clearTimeout(s)}})}return this.subs.push(o),this.subs.push(t),this},o.prototype.onopen=function(){p("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(u(e,"data",d(this,"ondata"))),this.subs.push(u(e,"ping",d(this,"onping"))),this.subs.push(u(e,"pong",d(this,"onpong"))),this.subs.push(u(e,"error",d(this,"onerror"))),this.subs.push(u(e,"close",d(this,"onclose"))),this.subs.push(u(this.decoder,"decoded",d(this,"ondecoded")))},o.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},o.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},o.prototype.ondata=function(e){this.decoder.add(e)},o.prototype.ondecoded=function(e){this.emit("packet",e)},o.prototype.onerror=function(e){p("error",e),this.emitAll("error",e)},o.prototype.socket=function(e,t){function r(){~l(o.connecting,n)||o.connecting.push(n)}var n=this.nsps[e];if(!n){n=new s(this,e,t),this.nsps[e]=n;var o=this;n.on("connecting",r),n.on("connect",(function(){n.id=o.generateId(e)})),this.autoConnect&&r()}return n},o.prototype.destroy=function(e){~(e=l(this.connecting,e))&&this.connecting.splice(e,1),this.connecting.length||this.close()},o.prototype.packet=function(e){p("writing packet %j",e);var t=this;e.query&&0===e.type&&(e.nsp+="?"+e.query),t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,(function(r){for(var n=0;n<r.length;n++)t.engine.write(r[n],e.options);t.encoding=!1,t.processPacketQueue()})))},o.prototype.processPacketQueue=function(){if(0<this.packetBuffer.length&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},o.prototype.cleanup=function(){p("cleanup");for(var e=this.subs.length,t=0;t<e;t++)this.subs.shift().destroy();this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},o.prototype.close=o.prototype.disconnect=function(){p("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},o.prototype.onclose=function(e){p("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},o.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)p("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();p("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var r=setTimeout((function(){e.skipReconnect||(p("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open((function(t){t?(p("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(p("reconnect success"),e.onreconnect())})))}),t);this.subs.push({destroy:function(){clearTimeout(r)}})}},o.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}},function(e,t,r){e.exports=r(15)},function(e,t,r){e.exports=r(16),e.exports.parser=r(23)},function(e,t,r){(function(t){function n(e,r){if(!(this instanceof n))return new n(e,r);r=r||{},e&&"object"==typeof e&&(r=e,e=null),e?(e=u(e),r.hostname=e.host,r.secure="https"===e.protocol||"wss"===e.protocol,r.port=e.port,e.query&&(r.query=e.query)):r.host&&(r.hostname=u(r.host).host),this.secure=null!=r.secure?r.secure:t.location&&"https:"===location.protocol,r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.agent=r.agent||!1,this.hostname=r.hostname||(t.location?location.hostname:"localhost"),this.port=r.port||(t.location&&location.port?location.port:this.secure?443:80),this.query=r.query||{},"string"==typeof this.query&&(this.query=p.decode(this.query)),this.upgrade=!1!==r.upgrade,this.path=(r.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!r.forceJSONP,this.jsonp=!1!==r.jsonp,this.forceBase64=!!r.forceBase64,this.enablesXDR=!!r.enablesXDR,this.timestampParam=r.timestampParam||"t",this.timestampRequests=r.timestampRequests,this.transports=r.transports||["polling","websocket"],this.transportOptions=r.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=r.policyPort||843,this.rememberUpgrade=r.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=r.onlyBinaryUpgrades,this.perMessageDeflate=!1!==r.perMessageDeflate&&(r.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=r.pfx||null,this.key=r.key||null,this.passphrase=r.passphrase||null,this.cert=r.cert||null,this.ca=r.ca||null,this.ciphers=r.ciphers||null,this.rejectUnauthorized=void 0===r.rejectUnauthorized||r.rejectUnauthorized,this.forceNode=!!r.forceNode,(e="object"==typeof t&&t).global===e&&(r.extraHeaders&&0<Object.keys(r.extraHeaders).length&&(this.extraHeaders=r.extraHeaders),r.localAddress&&(this.localAddress=r.localAddress)),this.pingTimeoutTimer=this.pingIntervalTimer=this.pingTimeout=this.pingInterval=this.upgrades=this.id=null,this.open()}var o=r(17),i=r(8),a=r(3)("engine.io-client:socket"),s=r(37),c=r(23),u=r(2),d=r(38),p=r(31);e.exports=n,n.priorWebsocketSuccess=!1,i(n.prototype),n.protocol=c.protocol,n.Socket=n,n.Transport=r(22),n.transports=r(17),n.parser=r(23),n.prototype.createTransport=function(e){a('creating transport "%s"',e);var t,r=this.query,n={};for(t in r)r.hasOwnProperty(t)&&(n[t]=r[t]);return n.EIO=c.protocol,n.transport=e,r=this.transportOptions[e]||{},this.id&&(n.sid=this.id),new o[e]({query:n,socket:this,agent:r.agent||this.agent,hostname:r.hostname||this.hostname,port:r.port||this.port,secure:r.secure||this.secure,path:r.path||this.path,forceJSONP:r.forceJSONP||this.forceJSONP,jsonp:r.jsonp||this.jsonp,forceBase64:r.forceBase64||this.forceBase64,enablesXDR:r.enablesXDR||this.enablesXDR,timestampRequests:r.timestampRequests||this.timestampRequests,timestampParam:r.timestampParam||this.timestampParam,policyPort:r.policyPort||this.policyPort,pfx:r.pfx||this.pfx,key:r.key||this.key,passphrase:r.passphrase||this.passphrase,cert:r.cert||this.cert,ca:r.ca||this.ca,ciphers:r.ciphers||this.ciphers,rejectUnauthorized:r.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:r.perMessageDeflate||this.perMessageDeflate,extraHeaders:r.extraHeaders||this.extraHeaders,forceNode:r.forceNode||this.forceNode,localAddress:r.localAddress||this.localAddress,requestTimeout:r.requestTimeout||this.requestTimeout,protocols:r.protocols||void 0})},n.prototype.open=function(){if(this.rememberUpgrade&&n.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))var e="websocket";else{if(0===this.transports.length){var t=this;return void setTimeout((function(){t.emit("error","No transports available")}),0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},n.prototype.setTransport=function(e){a("setting transport %s",e.name);var t=this;this.transport&&(a("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",(function(){t.onDrain()})).on("packet",(function(e){t.onPacket(e)})).on("error",(function(e){t.onError(e)})).on("close",(function(){t.onClose("transport close")}))},n.prototype.probe=function(e){function t(){if(l.onlyBinaryUpgrades){var t=!this.supportsBinary&&l.transport.supportsBinary;p=p||t}p||(a('probe transport "%s" opened',e),d.send([{type:"ping",data:"probe"}]),d.once("packet",(function(t){p||("pong"===t.type&&"probe"===t.data?(a('probe transport "%s" pong',e),l.upgrading=!0,l.emit("upgrading",d),d&&(n.priorWebsocketSuccess="websocket"===d.name,a('pausing current transport "%s"',l.transport.name),l.transport.pause((function(){p||"closed"!==l.readyState&&(a("changing transport and sending upgrade packet"),u(),l.setTransport(d),d.send([{type:"upgrade"}]),l.emit("upgrade",d),d=null,l.upgrading=!1,l.flush())})))):(a('probe transport "%s" failed',e),(t=Error("probe error")).transport=d.name,l.emit("upgradeError",t)))})))}function r(){p||(p=!0,u(),d.close(),d=null)}function o(t){var n=Error("probe error: "+t);n.transport=d.name,r(),a('probe transport "%s" failed because of error: %s',e,t),l.emit("upgradeError",n)}function i(){o("transport closed")}function s(){o("socket closed")}function c(e){d&&e.name!==d.name&&(a('"%s" works - aborting "%s"',e.name,d.name),r())}function u(){d.removeListener("open",t),d.removeListener("error",o),d.removeListener("close",i),l.removeListener("close",s),l.removeListener("upgrading",c)}a('probing transport "%s"',e);var d=this.createTransport(e,{probe:1}),p=!1,l=this;n.priorWebsocketSuccess=!1,d.once("open",t),d.once("error",o),d.once("close",i),this.once("close",s),this.once("upgrading",c),d.open()},n.prototype.onOpen=function(){if(a("socket open"),this.readyState="open",n.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){a("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},n.prototype.onPacket=function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(a('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(d(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else a('packet received with socket readyState "%s"',this.readyState)},n.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},n.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout((function(){"closed"!==t.readyState&&t.onClose("ping timeout")}),e||t.pingInterval+t.pingTimeout)},n.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout((function(){a("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)}),e.pingInterval)},n.prototype.ping=function(){var e=this;this.sendPacket("ping",(function(){e.emit("ping")}))},n.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},n.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(a("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},n.prototype.write=n.prototype.send=function(e,t,r){return this.sendPacket("message",e,t,r),this},n.prototype.sendPacket=function(e,t,r,n){"function"==typeof t&&(n=t,t=void 0),"function"==typeof r&&(n=r,r=null),"closing"!==this.readyState&&"closed"!==this.readyState&&((r=r||{}).compress=!1!==r.compress,e={type:e,data:t,options:r},this.emit("packetCreate",e),this.writeBuffer.push(e),n&&this.once("flush",n),this.flush())},n.prototype.close=function(){function e(){n.onClose("forced close"),a("socket closing - telling transport to close"),n.transport.close()}function t(){n.removeListener("upgrade",t),n.removeListener("upgradeError",t),e()}function r(){n.once("upgrade",t),n.once("upgradeError",t)}if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var n=this;this.writeBuffer.length?this.once("drain",(function(){this.upgrading?r():e()})):this.upgrading?r():e()}return this},n.prototype.onError=function(e){a("socket error %j",e),n.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},n.prototype.onClose=function(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(a('socket close with reason: "%s"',e),clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)},n.prototype.filterUpgrades=function(e){for(var t=[],r=0,n=e.length;r<n;r++)~s(this.transports,e[r])&&t.push(e[r]);return t}}).call(t,function(){return this}())},function(e,t,r){(function(e){var n=r(18),o=r(20),i=r(34),a=r(35);t.polling=function(t){var r=!1,a=!1,s=!1!==t.jsonp;if(e.location&&(a="https:"===location.protocol,(r=location.port)||(r=a?443:80),r=t.hostname!==location.hostname||r!==t.port,a=t.secure!==a),t.xdomain=r,t.xscheme=a,"open"in new n(t)&&!t.forceJSONP)return new o(t);if(!s)throw Error("JSONP disabled");return new i(t)},t.websocket=a}).call(t,function(){return this}())},function(e,t,r){(function(t){var n=r(19);e.exports=function(e){var r=e.xdomain,o=e.xscheme;e=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!r||n))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!o&&e)return new XDomainRequest}catch(e){}if(!r)try{return new(t[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}}).call(t,function(){return this}())},function(e,t){try{e.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){e.exports=!1}},function(e,t,r){(function(t){function n(){}function o(e){if(c.call(this,e),this.requestTimeout=e.requestTimeout,this.extraHeaders=e.extraHeaders,t.location){var r="https:"===location.protocol,n=location.port;n||(n=r?443:80),this.xd=e.hostname!==t.location.hostname||n!==e.port,this.xs=e.secure!==r}}function i(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.requestTimeout=e.requestTimeout,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}function a(){for(var e in i.requests)i.requests.hasOwnProperty(e)&&i.requests[e].abort()}var s=r(18),c=r(21),u=r(8),d=r(32),p=r(3)("engine.io-client:polling-xhr");e.exports=o,e.exports.Request=i,d(o,c),o.prototype.supportsBinary=!0,o.prototype.request=function(e){return(e=e||{}).uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.requestTimeout=this.requestTimeout,e.extraHeaders=this.extraHeaders,new i(e)},o.prototype.doWrite=function(e,t){e=this.request({method:"POST",data:e,isBinary:"string"!=typeof e&&void 0!==e});var r=this;e.on("success",t),e.on("error",(function(e){r.onError("xhr post error",e)})),this.sendXhr=e},o.prototype.doPoll=function(){p("xhr poll");var e=this.request(),t=this;e.on("data",(function(e){t.onData(e)})),e.on("error",(function(e){t.onError("xhr poll error",e)})),this.pollXhr=e},u(i.prototype),i.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var r=this.xhr=new s(e),n=this;try{p("xhr open %s: %s",this.method,this.uri),r.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var o in r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(o)&&r.setRequestHeader(o,this.extraHeaders[o])}catch(e){}if("POST"===this.method)try{this.isBinary?r.setRequestHeader("Content-type","application/octet-stream"):r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{r.setRequestHeader("Accept","*/*")}catch(e){}"withCredentials"in r&&(r.withCredentials=!0),this.requestTimeout&&(r.timeout=this.requestTimeout),this.hasXDR()?(r.onload=function(){n.onLoad()},r.onerror=function(){n.onError(r.responseText)}):r.onreadystatechange=function(){if(2===r.readyState){try{var e=r.getResponseHeader("Content-Type")}catch(e){}"application/octet-stream"===e&&(r.responseType="arraybuffer")}4===r.readyState&&(200===r.status||1223===r.status?n.onLoad():setTimeout((function(){n.onError(r.status)}),0))},p("xhr data %s",this.data),r.send(this.data)}catch(e){return void setTimeout((function(){n.onError(e)}),0)}t.document&&(this.index=i.requestsCount++,i.requests[this.index]=this)},i.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},i.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},i.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},i.prototype.cleanup=function(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=n:this.xhr.onreadystatechange=n,e)try{this.xhr.abort()}catch(e){}t.document&&delete i.requests[this.index],this.xhr=null}},i.prototype.onLoad=function(){try{try{var e=this.xhr.getResponseHeader("Content-Type")}catch(e){}var t="application/octet-stream"===e&&this.xhr.response||this.xhr.responseText}catch(e){this.onError(e)}null!=t&&this.onData(t)},i.prototype.hasXDR=function(){return void 0!==t.XDomainRequest&&!this.xs&&this.enablesXDR},i.prototype.abort=function(){this.cleanup()},i.requestsCount=0,i.requests={},t.document&&(t.attachEvent?t.attachEvent("onunload",a):t.addEventListener&&t.addEventListener("beforeunload",a,!1))}).call(t,function(){return this}())},function(e,t,r){function n(e){var t=e&&e.forceBase64;u&&!t||(this.supportsBinary=!1),o.call(this,e)}var o=r(22),i=r(31),a=r(23);t=r(32);var s=r(33),c=r(3)("engine.io-client:polling");e.exports=n;var u=null!=new(r(18))({xdomain:!1}).responseType;t(n,o),n.prototype.name="polling",n.prototype.doOpen=function(){this.poll()},n.prototype.pause=function(e){function t(){c("paused"),r.readyState="paused",e()}var r=this;if(this.readyState="pausing",this.polling||!this.writable){var n=0;this.polling&&(c("we are currently polling - waiting to pause"),n++,this.once("pollComplete",(function(){c("pre-pause polling complete"),--n||t()}))),this.writable||(c("we are currently writing - waiting to pause"),n++,this.once("drain",(function(){c("pre-pause writing complete"),--n||t()})))}else t()},n.prototype.poll=function(){c("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},n.prototype.onData=function(e){var t=this;c("polling got data %s",e),a.decodePayload(e,this.socket.binaryType,(function(e,r,n){return"opening"===t.readyState&&t.onOpen(),"close"===e.type?(t.onClose(),!1):void t.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():c('ignoring poll - transport state "%s"',this.readyState))},n.prototype.doClose=function(){function e(){c("writing close packet"),t.write([{type:"close"}])}var t=this;"open"===this.readyState?(c("transport open - closing"),e()):(c("transport not open - deferring close"),this.once("open",e))},n.prototype.write=function(e){var t=this;this.writable=!1;var r=function(){t.writable=!0,t.emit("drain")};a.encodePayload(e,this.supportsBinary,(function(e){t.doWrite(e,r)}))},n.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",r="";return!1!==this.timestampRequests&&(e[this.timestampParam]=s()),this.supportsBinary||e.sid||(e.b64=1),e=i.encode(e),this.port&&("https"===t&&443!==Number(this.port)||"http"===t&&80!==Number(this.port))&&(r=":"+this.port),e.length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+r+this.path+e}},function(e,t,r){function n(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.forceNode=e.forceNode,this.extraHeaders=e.extraHeaders,this.localAddress=e.localAddress}var o=r(23);t=r(8),e.exports=n,t(n.prototype),n.prototype.onError=function(e,t){return(e=Error(e)).type="TransportError",e.description=t,this.emit("error",e),this},n.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},n.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},n.prototype.send=function(e){if("open"!==this.readyState)throw Error("Transport not open");this.write(e)},n.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},n.prototype.onData=function(e){e=o.decodePacket(e,this.socket.binaryType),this.onPacket(e)},n.prototype.onPacket=function(e){this.emit("packet",e)},n.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},function(e,t,r){(function(e){function n(e,t,r){var n=Array(e.length);r=c(e.length,r);for(var o=function(e,r,o){t(r,(function(t,r){n[e]=r,o(t,n)}))},i=0;i<e.length;i++)o(i,e[i],r)}var o,i=r(24),a=r(9),s=r(25),c=r(26),u=r(27);e&&e.ArrayBuffer&&(o=r(29));var d="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),p="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),l=d||p;t.protocol=3;var f=t.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},h=i(f),m={type:"error",data:"parser error"},v=r(30);t.encodePacket=function(r,n,o,i){"function"==typeof n&&(i=n,n=!1),"function"==typeof o&&(i=o,o=null);var a=void 0===r.data?void 0:r.data.buffer||r.data;if(e.ArrayBuffer&&a instanceof ArrayBuffer){if(n){for(o=r.data,n=new Uint8Array(o),(o=new Uint8Array(1+o.byteLength))[0]=f[r.type],r=0;r<n.length;r++)o[r+1]=n[r];r=i(o.buffer)}else r=t.encodeBase64Packet(r,i);return r}return v&&a instanceof e.Blob?(n?l?r=function(e,r,n){if(!r)return t.encodeBase64Packet(e,n);var o=new FileReader;return o.onload=function(){e.data=o.result,t.encodePacket(e,r,!0,n)},o.readAsArrayBuffer(e.data)}(r,n,i):((n=new Uint8Array(1))[0]=f[r.type],r=i(r=new v([n.buffer,r.data]))):r=t.encodeBase64Packet(r,i),r):a&&a.base64?i("b"+t.packets[r.type]+r.data.data):(n=f[r.type],void 0!==r.data&&(n+=o?u.encode(String(r.data),{strict:!1}):String(r.data)),i(""+n))},t.encodeBase64Packet=function(r,n){var o="b"+t.packets[r.type];if(v&&r.data instanceof e.Blob){var i=new FileReader;return i.onload=function(){var e=i.result.split(",")[1];n(o+e)},i.readAsDataURL(r.data)}try{var a=String.fromCharCode.apply(null,new Uint8Array(r.data))}catch(e){r=new Uint8Array(r.data),a=Array(r.length);for(var s=0;s<r.length;s++)a[s]=r[s];a=String.fromCharCode.apply(null,a)}return o+=e.btoa(a),n(o)},t.decodePacket=function(e,r,n){if(void 0===e)return m;if("string"==typeof e){if("b"===e.charAt(0))return t.decodeBase64Packet(e.substr(1),r);if(r=n){r=e;try{r=u.decode(r,{strict:!1})}catch(e){r=!1}r=!1===(e=r)}return r?m:(n=e.charAt(0),Number(n)==n&&h[n]?1<e.length?{type:h[n],data:e.substring(1)}:{type:h[n]}:m)}return n=new Uint8Array(e)[0],e=s(e,1),v&&"blob"===r&&(e=new v([e])),{type:h[n],data:e}},t.decodeBase64Packet=function(e,t){var r=h[e.charAt(0)];return o?(e=o.decode(e.substr(1)),"blob"===t&&v&&(e=new v([e])),{type:r,data:e}):{type:r,data:{base64:!0,data:e.substr(1)}}},t.encodePayload=function(e,r,o){"function"==typeof r&&(o=r,r=null);var i=a(e);return r&&i?v&&!l?t.encodePayloadAsBlob(e,o):t.encodePayloadAsArrayBuffer(e,o):e.length?void n(e,(function(e,n){t.encodePacket(e,!!i&&r,!1,(function(e){n(null,e.length+":"+e)}))}),(function(e,t){return o(t.join(""))})):o("0:")},t.decodePayload=function(e,r,n){if("string"!=typeof e)return t.decodePayloadAsBinary(e,r,n);var o;if("function"==typeof r&&(n=r,r=null),""===e)return n(m,0,1);for(var i,a,s="",c=0,u=e.length;c<u;c++){var d=e.charAt(c);if(":"===d){if(""===s||s!=(i=Number(s))||s!=(a=e.substr(c+1,i)).length)return n(m,0,1);if(a.length){if(o=t.decodePacket(a,r,!1),m.type===o.type&&m.data===o.data)return n(m,0,1);if(!1===n(o,c+i,u))return}c+=i,s=""}else s+=d}return""!==s?n(m,0,1):void 0},t.encodePayloadAsArrayBuffer=function(e,r){return e.length?void n(e,(function(e,r){t.encodePacket(e,!0,!0,(function(e){return r(null,e)}))}),(function(e,t){e=t.reduce((function(e,t){var r;return e+(r="string"==typeof t?t.length:t.byteLength).toString().length+r+2}),0);var n=new Uint8Array(e),o=0;return t.forEach((function(e){var t="string"==typeof e,r=e;if(t){r=new Uint8Array(e.length);for(var i=0;i<e.length;i++)r[i]=e.charCodeAt(i);r=r.buffer}for(n[o++]=t?0:1,e=r.byteLength.toString(),i=0;i<e.length;i++)n[o++]=parseInt(e[i]);for(n[o++]=255,r=new Uint8Array(r),i=0;i<r.length;i++)n[o++]=r[i]})),r(n.buffer)})):r(new ArrayBuffer(0))},t.encodePayloadAsBlob=function(e,r){n(e,(function(e,r){t.encodePacket(e,!0,!0,(function(e){var t=new Uint8Array(1);if(t[0]=1,"string"==typeof e){for(var n=new Uint8Array(e.length),o=0;o<e.length;o++)n[o]=e.charCodeAt(o);e=n.buffer,t[0]=0}n=(e instanceof ArrayBuffer?e.byteLength:e.size).toString();var i=new Uint8Array(n.length+1);for(o=0;o<n.length;o++)i[o]=parseInt(n[o]);i[n.length]=255,v&&(e=new v([t.buffer,i.buffer,e]),r(null,e))}))}),(function(e,t){return r(new v(t))}))},t.decodePayloadAsBinary=function(e,r,n){"function"==typeof r&&(n=r,r=null);for(var o=[];0<e.byteLength;){for(var i=new Uint8Array(e),a=0===i[0],c="",u=1;255!==i[u];u++){if(310<c.length)return n(m,0,1);c+=i[u]}if(e=s(e,2+c.length),c=parseInt(c),i=s(e,0,c),a)try{i=String.fromCharCode.apply(null,new Uint8Array(i))}catch(e){for(a=new Uint8Array(i),i="",u=0;u<a.length;u++)i+=String.fromCharCode(a[u])}o.push(i),e=s(e,c)}var d=o.length;o.forEach((function(e,o){n(t.decodePacket(e,r,!0),o,d)}))}}).call(t,function(){return this}())},function(e,t){e.exports=Object.keys||function(e){var t,r=[],n=Object.prototype.hasOwnProperty;for(t in e)n.call(e,t)&&r.push(t);return r}},function(e,t){e.exports=function(e,t,r){var n=e.byteLength;if(t=t||0,r=r||n,e.slice)return e.slice(t,r);if(0>t&&(t+=n),0>r&&(r+=n),r>n&&(r=n),t>=n||t>=r||0===n)return new ArrayBuffer(0);e=new Uint8Array(e),n=new Uint8Array(r-t);for(var o=0;t<r;t++,o++)n[o]=e[t];return n.buffer}},function(e,t){function r(){}e.exports=function(e,t,n){function o(e,r){if(0>=o.count)throw Error("after called too many times");--o.count,e?(i=!0,t(e),t=n):0!==o.count||i||t(null,r)}var i=!1;return n=n||r,o.count=e,0===e?t():o}},function(e,t,r){var n;(function(e,o){!function(o){function i(e){for(var t,r,n=[],o=0,i=e.length;o<i;)55296<=(t=e.charCodeAt(o++))&&56319>=t&&o<i?56320==(64512&(r=e.charCodeAt(o++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),o--):n.push(t);return n}function a(e,t){if(55296<=e&&57343>=e){if(t)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function s(){if(p>=d)throw Error("Invalid byte index");var e=255&u[p];if(p++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function c(e){var t,r;if(p>d)throw Error("Invalid byte index");if(p==d)return!1;if(t=255&u[p],p++,0==(128&t))return t;if(192==(224&t)){if(128<=(r=(31&t)<<6|s()))return r;throw Error("Invalid continuation byte")}if(224==(240&t)){if(2048<=(r=(15&t)<<12|s()<<6|s()))return a(r,e)?r:65533;throw Error("Invalid continuation byte")}if(240==(248&t)&&65536<=(r=(7&t)<<18|s()<<12|s()<<6|s())&&1114111>=r)return r;throw Error("Invalid UTF-8 detected")}"object"==typeof e&&e&&e.exports;var u,d,p,l=String.fromCharCode,f={version:"2.1.2",encode:function(e,t){t=!1!==(t=t||{}).strict;for(var r=(e=i(e)).length,n=-1,o="";++n<r;){var s=e[n],c=t;if(0==(4294967168&s))c=l(s);else{var u="";0==(4294965248&s)?u=l(s>>6&31|192):0==(4294901760&s)?(a(s,c)||(s=65533),u=l(s>>12&15|224),u+=l(s>>6&63|128)):0==(4292870144&s)&&(u=l(s>>18&7|240),u+=l(s>>12&63|128),u+=l(s>>6&63|128)),c=u+l(63&s|128)}o+=c}return o},decode:function(e,t){var r;for(t=!1!==(t=t||{}).strict,u=i(e),d=u.length,p=0,e=[];!1!==(r=c(t));)e.push(r);r=e.length;for(var n=-1,o="";++n<r;)65535<(t=e[n])&&(o+=l((t-=65536)>>>10&1023|55296),t=56320|1023&t),o+=l(t);return o}};void 0===(n=function(){return f}.call(t,r,t,e))||(e.exports=n)}()}).call(t,r(28)(e),function(){return this}())},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){!function(){for(var e=new Uint8Array(256),r=0;64>r;r++)e["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(r)]=r;t.encode=function(e){var t=new Uint8Array(e),r=t.length,n="";for(e=0;e<r;e+=3)n+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[t[e]>>2],n+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(3&t[e])<<4|t[e+1]>>4],n+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(15&t[e+1])<<2|t[e+2]>>6],n+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[63&t[e+2]];return 2==r%3?n=n.substring(0,n.length-1)+"=":1==r%3&&(n=n.substring(0,n.length-2)+"=="),n},t.decode=function(t){var r=.75*t.length,n=t.length,o=0;"="===t[t.length-1]&&(r--,"="===t[t.length-2]&&r--);var i=new ArrayBuffer(r),a=new Uint8Array(i);for(r=0;r<n;r+=4){var s=e[t.charCodeAt(r)],c=e[t.charCodeAt(r+1)],u=e[t.charCodeAt(r+2)],d=e[t.charCodeAt(r+3)];a[o++]=s<<2|c>>4,a[o++]=(15&c)<<4|u>>2,a[o++]=(3&u)<<6|63&d}return i}}()},function(e,t){(function(t){function r(e){for(var t=0;t<e.length;t++){var r=e[t];if(r.buffer instanceof ArrayBuffer){var n=r.buffer;if(r.byteLength!==n.byteLength){var o=new Uint8Array(r.byteLength);o.set(new Uint8Array(n,r.byteOffset,r.byteLength)),n=o.buffer}e[t]=n}}}var n,o=t.BlobBuilder||t.WebKitBlobBuilder||t.MSBlobBuilder||t.MozBlobBuilder;try{var i=2===new Blob(["hi"]).size}catch(e){i=!1}if(n=i)try{n=2===new Blob([new Uint8Array([1,2])]).size}catch(e){n=!1}var a=o&&o.prototype.append&&o.prototype.getBlob;e.exports=i?n?t.Blob:function(e,t){return r(e),new Blob(e,t||{})}:a?function(e,t){t=t||{};var n=new o;r(e);for(var i=0;i<e.length;i++)n.append(e[i]);return t.type?n.getBlob(t.type):n.getBlob()}:void 0}).call(t,function(){return this}())},function(e,t){t.encode=function(e){var t,r="";for(t in e)e.hasOwnProperty(t)&&(r.length&&(r+="&"),r+=encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return r},t.decode=function(e){for(var t={},r=0,n=(e=e.split("&")).length;r<n;r++){var o=e[r].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}},function(e,t){e.exports=function(e,t){var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},function(e,t){function r(e){var t="";do{t=i[e%a]+t,e=Math.floor(e/a)}while(0<e);return t}function n(){var e=r(+new Date);return e!==o?(c=0,o=e):e+"."+r(c++)}for(var o,i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),a=64,s={},c=0,u=0;u<a;u++)s[i[u]]=u;n.encode=r,n.decode=function(e){var t=0;for(u=0;u<e.length;u++)t=t*a+s[e.charAt(u)];return t},e.exports=n},function(e,t,r){(function(t){function n(){}function o(e){i.call(this,e),this.query=this.query||{},s||(t.___eio||(t.___eio=[]),s=t.___eio),this.index=s.length;var r=this;s.push((function(e){r.onData(e)})),this.query.j=this.index,t.document&&t.addEventListener&&t.addEventListener("beforeunload",(function(){r.script&&(r.script.onerror=n)}),!1)}var i=r(21),a=r(32);e.exports=o;var s,c=/\n/g,u=/\\n/g;a(o,i),o.prototype.supportsBinary=!1,o.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),i.prototype.doClose.call(this)},o.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var r=document.getElementsByTagName("script")[0];r?r.parentNode.insertBefore(t,r):(document.head||document.body).appendChild(t),this.script=t,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout((function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)}),100)},o.prototype.doWrite=function(e,t){function r(){n(),t()}function n(){if(i.iframe)try{i.form.removeChild(i.iframe)}catch(e){i.onError("jsonp polling iframe removal error",e)}try{o=document.createElement('<iframe src="javascript:0" name="'+i.iframeId+'">')}catch(e){(o=document.createElement("iframe")).name=i.iframeId,o.src="javascript:0"}o.id=i.iframeId,i.form.appendChild(o),i.iframe=o}var o,i=this;if(!this.form){var a=document.createElement("form"),s=document.createElement("textarea"),d=this.iframeId="eio_iframe_"+this.index;a.className="socketio",a.style.position="absolute",a.style.top="-1000px",a.style.left="-1000px",a.target=d,a.method="POST",a.setAttribute("accept-charset","utf-8"),s.name="d",a.appendChild(s),document.body.appendChild(a),this.form=a,this.area=s}this.form.action=this.uri(),n(),e=e.replace(u,"\\\n"),this.area.value=e.replace(c,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===i.iframe.readyState&&r()}:this.iframe.onload=r}}).call(t,function(){return this}())},function(e,t,r){(function(t){function n(e){e&&e.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,this.usingBrowserWebSocket=d&&!e.forceNode,this.protocols=e.protocols,this.usingBrowserWebSocket||(l=p),o.call(this,e)}var o=r(22),i=r(23),a=r(31),s=r(32),c=r(33),u=r(3)("engine.io-client:websocket"),d=t.WebSocket||t.MozWebSocket;if("undefined"==typeof window)try{var p=r(36)}catch(e){}var l=d;l||"undefined"!=typeof window||(l=p),e.exports=n,s(n,o),n.prototype.name="websocket",n.prototype.supportsBinary=!0,n.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=this.protocols,r={agent:this.agent,perMessageDeflate:this.perMessageDeflate};r.pfx=this.pfx,r.key=this.key,r.passphrase=this.passphrase,r.cert=this.cert,r.ca=this.ca,r.ciphers=this.ciphers,r.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(r.headers=this.extraHeaders),this.localAddress&&(r.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket?t?new l(e,t):new l(e):new l(e,t,r)}catch(e){return this.emit("error",e)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},n.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},n.prototype.write=function(e){var r=this;this.writable=!1;for(var n=e.length,o=0,a=n;o<a;o++)!function(e){i.encodePacket(e,r.supportsBinary,(function(o){if(!r.usingBrowserWebSocket){var i={};e.options&&(i.compress=e.options.compress),r.perMessageDeflate&&("string"==typeof o?t.Buffer.byteLength(o):o.length)<r.perMessageDeflate.threshold&&(i.compress=!1)}try{r.usingBrowserWebSocket?r.ws.send(o):r.ws.send(o,i)}catch(e){u("websocket closed before onclose event")}--n||(r.emit("flush"),setTimeout((function(){r.writable=!0,r.emit("drain")}),0))}))}(e[o])},n.prototype.onClose=function(){o.prototype.onClose.call(this)},n.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},n.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",r="";return this.port&&("wss"===t&&443!==Number(this.port)||"ws"===t&&80!==Number(this.port))&&(r=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=c()),this.supportsBinary||(e.b64=1),(e=a.encode(e)).length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+r+this.path+e},n.prototype.check=function(){return!(!l||"__initialize"in l&&this.name===n.prototype.name)}}).call(t,function(){return this}())},function(e,t){},function(e,t){var r=[].indexOf;e.exports=function(e,t){if(r)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}},function(e,t){(function(t){var r=/^[\],:{}\s]*$/,n=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,o=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,i=/(?:^|:|,)(?:\s*\[)+/g,a=/^\s+/,s=/\s+$/;e.exports=function(e){return"string"==typeof e&&e?(e=e.replace(a,"").replace(s,""),t.JSON&&JSON.parse?JSON.parse(e):r.test(e.replace(n,"@").replace(o,"]").replace(i,""))?new Function("return "+e)():void 0):null}}).call(t,function(){return this}())},function(e,t,n){function o(e,t,r){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,r&&r.query&&(this.query=r.query),this.io.autoConnect&&this.open()}r.initSymbol(),r.initSymbol(),r.initSymbolIterator();var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return r.initSymbol(),r.initSymbol(),r.initSymbol(),e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=n(7);t=n(8);var s=n(40),c=n(41),u=n(42),d=n(3)("socket.io-client:socket"),p=n(31);e.exports=o;var l={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},f=t.prototype.emit;t(o.prototype),o.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[c(e,"open",u(this,"onopen")),c(e,"packet",u(this,"onpacket")),c(e,"close",u(this,"onclose"))]}},o.prototype.open=o.prototype.connect=function(){return this.connected||(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting")),this},o.prototype.send=function(){var e=s(arguments);return e.unshift("message"),this.emit.apply(this,e),this},o.prototype.emit=function(e){if(l.hasOwnProperty(e))return f.apply(this,arguments),this;var t=s(arguments),r={type:a.EVENT,data:t,options:{}};return r.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(d("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),r.id=this.ids++),this.connected?this.packet(r):this.sendBuffer.push(r),delete this.flags,this},o.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},o.prototype.onopen=function(){if(d("transport is open - connecting"),"/"!==this.nsp)if(this.query){var e="object"===i(this.query)?p.encode(this.query):this.query;d("sending connect packet with query %s",e),this.packet({type:a.CONNECT,query:e})}else this.packet({type:a.CONNECT})},o.prototype.onclose=function(e){d("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},o.prototype.onpacket=function(e){if(e.nsp===this.nsp)switch(e.type){case a.CONNECT:this.onconnect();break;case a.EVENT:case a.BINARY_EVENT:this.onevent(e);break;case a.ACK:case a.BINARY_ACK:this.onack(e);break;case a.DISCONNECT:this.ondisconnect();break;case a.ERROR:this.emit("error",e.data)}},o.prototype.onevent=function(e){var t=e.data||[];d("emitting event %j",t),null!=e.id&&(d("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?f.apply(this,t):this.receiveBuffer.push(t)},o.prototype.ack=function(e){var t=this,r=!1;return function(){if(!r){r=!0;var n=s(arguments);d("sending ack %j",n),t.packet({type:a.ACK,id:e,data:n})}}},o.prototype.onack=function(e){var t=this.acks[e.id];"function"==typeof t?(d("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):d("bad ack %s",e.id)},o.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},o.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)f.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},o.prototype.ondisconnect=function(){d("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},o.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},o.prototype.close=o.prototype.disconnect=function(){return this.connected&&(d("performing disconnect (%s)",this.nsp),this.packet({type:a.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},o.prototype.compress=function(e){return this.flags=this.flags||{},this.flags.compress=e,this}},function(e,t){e.exports=function(e,t){for(var r=[],n=(t=t||0)||0;n<e.length;n++)r[n-t]=e[n];return r}},function(e,t){e.exports=function(e,t,r){return e.on(t,r),{destroy:function(){e.removeListener(t,r)}}}},function(e,t){var r=[].slice;e.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw Error("bind() requires a function");var n=r.call(arguments,2);return function(){return t.apply(e,n.concat(r.call(arguments)))}}},function(e,t){function r(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=0<e.jitter&&1>=e.jitter?e.jitter:0,this.attempts=0}e.exports=r,r.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-r:e+r}return 0|Math.min(e,this.max)},r.prototype.reset=function(){this.attempts=0},r.prototype.setMin=function(e){this.ms=e},r.prototype.setMax=function(e){this.max=e},r.prototype.setJitter=function(e){this.jitter=e}}])},function(e,t){(t=function(e,t){this._pending=[],this._events={},this._id=0,this._enabled=!0,this._onAckCB=this._onAck.bind(this),this._onReconnectCB=this._onReconnect.bind(this),this.setLastAcked(t),this.setSocket(e)}).prototype.setId=function(e){this._id=0<=e?e:0},t.prototype.id=function(){return this._id},t.prototype.setLastAcked=function(e){this._lastAcked=0<=e?e:-1},t.prototype.lastAcked=function(){return this._lastAcked},t.prototype.setSocket=function(e){var t=this;this._cleanup(),(this._socket=e)&&(Object.keys(this._events).forEach((function(e){for(var r=0;r<t._events[e].length;r+=1)t._socket.on(e,t._events[e][r].wrapped)})),this._socket.on("reconnect",this._onReconnectCB),this._socket.on("socketgd_ack",this._onAckCB),this.sendPending())},t.prototype.sendPending=function(){var e=this;this._pending.forEach((function(t){e._sendOnSocket(t)}))},t.prototype.clearPending=function(){this._pending=[]},t.prototype.getNumberOfPending=function(){return this._pending.length},t.prototype.enable=function(e){this._enabled=e},t.prototype.socket=function(){return this._socket},t.prototype._cleanup=function(){var e=this;this._socket&&(this._socket.removeListener("reconnect",this._onReconnectCB),this._socket.removeListener("socketgd_ack",this._onAckCB),Object.keys(this._events).forEach((function(t){for(var r=0;r<e._events[t].length;r+=1)e._socket.removeListener(t,e._events[t][r].wrapped)})))},t.prototype._onAck=function(e){for(;0<this._pending.length&&this._pending[0].id<=e.id;)this._pending.shift()},t.prototype._onReconnect=function(){this.sendPending()},t.prototype._sendAck=function(e){if(this._socket)return this._lastAcked=e,this._socket.emit("socketgd_ack",{id:e}),this._lastAcked},t.prototype._sendOnSocket=function(e){if(this._enabled&&void 0===e.id&&(e.id=this._id,this._id+=1,e.gd=!0,this._pending.push(e)),this._socket)if(this._enabled)switch(e.type){case"send":this._socket.send("socketgd:"+e.id+":"+e.msg,e.ack);break;case"emit":this._socket.emit(e.event,{socketgd:e.id,msg:e.msg},e.ack)}else switch(e.type){case"send":this._socket.send(e.msg,e.ack);break;case"emit":this._socket.emit(e.event,e.msg,e.ack)}},t.prototype.send=function(e,t){this._sendOnSocket({type:"send",msg:e,ack:t})},t.prototype.emit=function(e,t,r){this._sendOnSocket({type:"emit",event:e,msg:t,ack:r})},t.prototype.disconnect=function(e){this._socket&&this._socket.disconnect(e),this._cleanup(),this._socket=null},t.prototype.disconnectSync=function(){this._socket&&this._socket.disconnectSync(),this._cleanup(),this._socket=null},t.prototype.on=function(e,t){var r=this;this._events[e]=this._events[e]||[];var n={cb:t,wrapped:function(n,o){if(n&&"message"===e)if(0!==n.indexOf("socketgd:"))t(n,o);else{var i=n.indexOf(":",9);if(-1===i)t(n,o);else{var a=parseInt(n.substring(9,i),10);if(!(a<=r._lastAcked)){if(n=n.substring(i+1),t)try{t(n,o)}catch(e){}r._sendAck(a)}}}else if(n&&"object"==typeof n&&void 0!==n.socketgd){if(!(n.socketgd<=r._lastAcked)){if(t)try{t(n.msg,o)}catch(e){}r._sendAck(n.socketgd)}}else t(n,o)}};this._events[e].push(n),this._socket&&this._socket.on(e,n.wrapped)},t.prototype.off=function(e,t){if(this._events[e])for(var r=0;r<this._events[e].length;r+=1)this._events[e][r].cb===t&&(this._socket&&this._socket.removeListener(e,this._events[e][r].wrapped),this._events[e].splice(r,1))},e.exports={ReliableSocket:t}},function(e,t,r){e={getRandomValue:function(){var e=new Uint16Array(1);return window.crypto.getRandomValues(e),e[0]}},t.a=e},function(e,t,r){var n=r(5),o=r(25);t.a=function(e){var t=Object(n.a)({});t.id=e.id,t.stream=e.stream.stream,t.elementID=e.elementID;return t.destroy=function(){t.video.pause(),t.parentNode.removeChild(t.div)},t.div=document.createElement("div"),t.div.setAttribute("id","player_"+t.id),t.div.setAttribute("class","licode_player"),t.div.setAttribute("style","width: 100%; height: 100%; position: relative; background-color: black; overflow: hidden;"),!1!==e.options.loader&&(t.loader=document.createElement("img"),t.loader.setAttribute("style","width: 16px; height: 16px; position: absolute; top: 50%; left: 50%; margin-top: -8px; margin-left: -8px"),t.loader.setAttribute("id","back_"+t.id),t.loader.setAttribute("class","licode_loader"),t.loader.setAttribute("src",t.url+"/assets/loader.gif")),t.video=document.createElement("video"),t.video.setAttribute("id","stream"+t.id),t.video.setAttribute("class","licode_stream"),t.video.setAttribute("style","width: 100%; height: 100%; position: absolute; object-fit: cover"),t.video.setAttribute("autoplay","autoplay"),t.video.setAttribute("playsinline","playsinline"),e.stream.local&&(t.video.setAttribute("muted","muted"),t.video.volume=0),t.container=void 0!==t.elementID?"object"==typeof t.elementID&&"function"==typeof t.elementID.appendChild?t.elementID:document.getElementById(t.elementID):document.body,t.container.appendChild(t.div),t.parentNode=t.div.parentNode,t.loader&&t.div.appendChild(t.loader),t.div.appendChild(t.video),t.containerWidth=0,t.containerHeight=0,!1!==e.options.bar?(t.bar=Object(o.a)({elementID:"player_"+t.id,id:t.id,stream:e.stream,media:t.video,options:e.options}),t.div.onmouseover=function(){t.bar.display()},t.div.onmouseout=function(){t.bar.hide()}):t.media=t.video,t.video.srcObject=t.stream,t}},function(e,t,r){var n=r(5);t.a=function(e){var t=Object(n.a)({}),r=50;if(t.elementID=e.elementID,t.media=e.media,t.id=e.id,t.stream=e.stream,t.div=document.createElement("div"),t.div.setAttribute("style","width: 40%; height: 100%; max-width: 32px; position: absolute; right: 0;z-index:0;"),t.icon=document.createElement("img"),t.icon.setAttribute("id","volume_"+t.id),t.icon.setAttribute("src",t.url+"/assets/sound48.png"),t.icon.setAttribute("style","width: 80%; height: 100%; position: absolute;"),t.div.appendChild(t.icon),t.icon.onclick=function(){t.media.muted?(t.media.muted=!1,t.icon.setAttribute("src",t.url+"/assets/sound48.png"),t.stream.local?t.stream.stream.getAudioTracks()[0].enabled=!0:(t.picker.value=r,t.media.volume=t.picker.value/100)):(t.media.muted=!0,t.icon.setAttribute("src",t.url+"/assets/mute48.png"),t.stream.local?t.stream.stream.getAudioTracks()[0].enabled=!1:(r=t.picker.value,t.picker.value=0,t.media.volume=0))},!t.stream.local){t.picker=document.createElement("input"),t.picker.setAttribute("id","picker_"+t.id),t.picker.type="range",t.picker.min=0,t.picker.max=100,t.picker.step=10,t.picker.value=r,t.picker.setAttribute("orient","vertical"),t.div.appendChild(t.picker),t.media.volume=t.picker.value/100,t.media.muted=!1,t.picker.oninput=function(){0<t.picker.value?(t.media.muted=!1,t.icon.setAttribute("src",t.url+"/assets/sound48.png")):(t.media.muted=!0,t.icon.setAttribute("src",t.url+"/assets/mute48.png")),t.media.volume=t.picker.value/100};var o=function(e){t.picker.setAttribute("style","background: transparent; width: 32px;\n                                         height: 100px; position: absolute; bottom: 90%;\n                                         z-index: 1; right: 0px; -webkit-appearance: slider-vertical;\n                                         bottom: "+t.div.offsetHeight+"px; display: "+e)};t.div.onmouseover=function(){o("block")},t.div.onmouseout=function(){o("none")},o("none")}return document.getElementById(t.elementID).appendChild(t.div),t}},function(e,t,r){var n=r(5),o=r(25);t.a=function(e){var t=Object(n.a)({});if(t.id=e.id,t.stream=e.stream.stream,t.elementID=e.elementID,t.audio=document.createElement("audio"),t.audio.setAttribute("id","stream"+t.id),t.audio.setAttribute("class","licode_stream"),t.audio.setAttribute("style","width: 100%; height: 100%; position: absolute"),t.audio.setAttribute("autoplay","autoplay"),e.stream.local&&(t.audio.volume=0),void 0!==t.elementID){t.destroy=function(){t.audio.pause(),t.parentNode.removeChild(t.div)};t.div=document.createElement("div"),t.div.setAttribute("id","player_"+t.id),t.div.setAttribute("class","licode_player"),t.div.setAttribute("style","width: 100%; height: 100%; position: relative; overflow: hidden;"),t.container="object"==typeof t.elementID&&"function"==typeof t.elementID.appendChild?t.elementID:document.getElementById(t.elementID),t.container.appendChild(t.div),t.parentNode=t.div.parentNode,t.div.appendChild(t.audio),!1!==e.options.bar?(t.bar=Object(o.a)({elementID:"player_"+t.id,id:t.id,stream:e.stream,media:t.audio,options:e.options}),t.div.onmouseover=function(){t.bar.display()},t.div.onmouseout=function(){t.bar.hide()}):t.media=t.audio}else t.destroy=function(){t.audio.pause(),t.parentNode.removeChild(t.audio)},document.body.appendChild(t.audio),t.parentNode=document.body;return t.audio.srcObject=t.stream,t}},function(e,t,r){e=function(){for(var e,t,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),n=[],o=0;o<r.length;o+=1)n[r[o]]=o;var i=function(){if(!e||t>=e.length)return-1;var r=255&e.charCodeAt(t);return t+=1,r},a=function(){if(!e)return-1;for(;;){if(t>=e.length)return-1;var r=e.charAt(t);if(t+=1,n[r])return n[r];if("A"===r)return 0}},s=function(e){return 1===(e=e.toString(16)).length&&(e="0"+e),unescape("%"+e)};return{encodeBase64:function(n){var o;e=n,t=0,n="";var a=Array(3),s=0;for(o=!1;!o&&-1!==(a[0]=i());)a[1]=i(),a[2]=i(),n+=r[a[0]>>2],-1!==a[1]?(n+=r[a[0]<<4&48|a[1]>>4],-1!==a[2]?(n+=r[a[1]<<2&60|a[2]>>6],n+=r[63&a[2]]):(n+=r[a[1]<<2&60],n+="=",o=!0)):(n+=r[a[0]<<4&48],n+="=",n+="=",o=!0),76<=(s+=4)&&(n+="\n",s=0);return n},decodeBase64:function(r){var n;e=r,t=0,r="";var o=Array(4);for(n=!1;!n&&-1!==(o[0]=a())&&-1!==(o[1]=a());)o[2]=a(),o[3]=a(),r+=s(o[0]<<2&255|o[1]>>4),-1!==o[2]?(r+=s(o[1]<<4&255|o[2]>>2),-1!==o[3]?r+=s(o[2]<<6&255|o[3]):n=!0):n=!0;return r}}}(),t.a=e},function(e,t,r){(function(t){e.exports=t.adapter=r(53)}).call(t,r(52))},function(e,t){t=function(){return this}();try{t=t||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(t=window)}e.exports=t},function(e,t,n){e.exports=function e(t,r,n){function o(a,s){if(!r[a]){if(!t[a]){if(i)return i(a,!0);throw(s=Error("Cannot find module '"+a+"'")).code="MODULE_NOT_FOUND",s}s=r[a]={exports:{}},t[a][0].call(s.exports,(function(e){return o(t[a][1][e]||e)}),s,s.exports,e,t,r,n)}return r[a].exports}for(var i=!1,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(e,t,r){e=(0,(e=e("./adapter_factory.js")).adapterFactory)({window:"undefined"==typeof window?void 0:window}),t.exports=e},{"./adapter_factory.js":2}],2:[function(e,t,r){function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}Object.defineProperty(r,"__esModule",{value:!0}),r.adapterFactory=function(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).window,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0},r=o.log,n=o.detectBrowser(e),d={browserDetails:n,commonShim:u,extractVersion:o.extractVersion,disableLog:o.disableLog,disableWarnings:o.disableWarnings};switch(n.browser){case"chrome":if(!i||!i.shimPeerConnection||!t.shimChrome){r("Chrome shim is not included in this adapter release.");break}if(null===n.version){r("Chrome shim can not determine version, not shimming.");break}r("adapter.js shimming chrome."),d.browserShim=i,i.shimGetUserMedia(e),i.shimMediaStream(e),i.shimPeerConnection(e),i.shimOnTrack(e),i.shimAddTrackRemoveTrack(e),i.shimGetSendersWithDtmf(e),i.shimGetStats(e),i.shimSenderReceiverGetStats(e),i.fixNegotiationNeeded(e),u.shimRTCIceCandidate(e),u.shimConnectionState(e),u.shimMaxMessageSize(e),u.shimSendThrowTypeError(e),u.removeAllowExtmapMixed(e);break;case"firefox":if(!s||!s.shimPeerConnection||!t.shimFirefox){r("Firefox shim is not included in this adapter release.");break}r("adapter.js shimming firefox."),d.browserShim=s,s.shimGetUserMedia(e),s.shimPeerConnection(e),s.shimOnTrack(e),s.shimRemoveStream(e),s.shimSenderGetStats(e),s.shimReceiverGetStats(e),s.shimRTCDataChannel(e),s.shimAddTransceiver(e),s.shimGetParameters(e),s.shimCreateOffer(e),s.shimCreateAnswer(e),u.shimRTCIceCandidate(e),u.shimConnectionState(e),u.shimMaxMessageSize(e),u.shimSendThrowTypeError(e);break;case"edge":if(!a||!a.shimPeerConnection||!t.shimEdge){r("MS edge shim is not included in this adapter release.");break}r("adapter.js shimming edge."),d.browserShim=a,a.shimGetUserMedia(e),a.shimGetDisplayMedia(e),a.shimPeerConnection(e),a.shimReplaceTrack(e),u.shimMaxMessageSize(e),u.shimSendThrowTypeError(e);break;case"safari":if(!c||!t.shimSafari){r("Safari shim is not included in this adapter release.");break}r("adapter.js shimming safari."),d.browserShim=c,c.shimRTCIceServerUrls(e),c.shimCreateOfferLegacy(e),c.shimCallbacksAPI(e),c.shimLocalStreamsAPI(e),c.shimRemoteStreamsAPI(e),c.shimTrackEventTransceiver(e),c.shimGetUserMedia(e),c.shimAudioContext(e),u.shimRTCIceCandidate(e),u.shimMaxMessageSize(e),u.shimSendThrowTypeError(e),u.removeAllowExtmapMixed(e);break;default:r("Unsupported browser!")}return d};var o=n(e("./utils")),i=n(e("./chrome/chrome_shim")),a=n(e("./edge/edge_shim")),s=n(e("./firefox/firefox_shim")),c=n(e("./safari/safari_shim")),u=n(e=e("./common_shim"))},{"./chrome/chrome_shim":3,"./common_shim":6,"./edge/edge_shim":7,"./firefox/firefox_shim":11,"./safari/safari_shim":14,"./utils":15}],3:[function(e,t,n){function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((function(t){return e._shimmedLocalStreams[t][0]}))};var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){if(!r)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var n=t.apply(this,arguments);return this._shimmedLocalStreams[r.id]?-1===this._shimmedLocalStreams[r.id].indexOf(n)&&this._shimmedLocalStreams[r.id].push(n):this._shimmedLocalStreams[r.id]=[r,n],n};var r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((function(e){if(t.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")}));var n=this.getSenders();r.apply(this,arguments);var o=this.getSenders().filter((function(e){return-1===n.indexOf(e)}));this._shimmedLocalStreams[e.id]=[e].concat(o)};var n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],n.apply(this,arguments)};var o=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((function(r){var n=t._shimmedLocalStreams[r].indexOf(e);-1!==n&&t._shimmedLocalStreams[r].splice(n,1),1===t._shimmedLocalStreams[r].length&&delete t._shimmedLocalStreams[r]})),o.apply(this,arguments)}}Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=n.shimGetUserMedia=void 0,r.initSymbol(),r.initSymbol(),r.initSymbolIterator();var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return r.initSymbol(),r.initSymbol(),r.initSymbol(),e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=e("./getusermedia");Object.defineProperty(n,"shimGetUserMedia",{enumerable:!0,get:function(){return s.shimGetUserMedia}});var c=e("./getdisplaymedia");Object.defineProperty(n,"shimGetDisplayMedia",{enumerable:!0,get:function(){return c.shimGetDisplayMedia}}),n.shimMediaStream=function(e){e.MediaStream=e.MediaStream||e.webkitMediaStream},n.shimOnTrack=function(e){if("object"!==(void 0===e?"undefined":a(e))||!e.RTCPeerConnection||"ontrack"in e.RTCPeerConnection.prototype)u.wrapPeerConnectionEvent(e,"track",(function(e){return e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e}));else{Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var r=this;return this._ontrackpoly||(this._ontrackpoly=function(t){t.stream.addEventListener("addtrack",(function(n){var o=e.RTCPeerConnection.prototype.getReceivers?r.getReceivers().find((function(e){return e.track&&e.track.id===n.track.id})):{track:n.track},i=new Event("track");i.track=n.track,i.receiver=o,i.transceiver={receiver:o},i.streams=[t.stream],r.dispatchEvent(i)})),t.stream.getTracks().forEach((function(n){var o=e.RTCPeerConnection.prototype.getReceivers?r.getReceivers().find((function(e){return e.track&&e.track.id===n.id})):{track:n},i=new Event("track");i.track=n,i.receiver=o,i.transceiver={receiver:o},i.streams=[t.stream],r.dispatchEvent(i)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}},n.shimGetSendersWithDtmf=function(e){if("object"===(void 0===e?"undefined":a(e))&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&(this._dtmf="audio"===t.kind?e.createDTMFSender(t):null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var r=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){var o=r.apply(this,arguments);return o||(o=t(this,e),this._senders.push(o)),o};var n=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){n.apply(this,arguments);var t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}var o=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var r=this;this._senders=this._senders||[],o.apply(this,[e]),e.getTracks().forEach((function(e){r._senders.push(t(r,e))}))};var i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._senders=this._senders||[],i.apply(this,[e]),e.getTracks().forEach((function(e){var r=t._senders.find((function(t){return t.track===e}));r&&t._senders.splice(t._senders.indexOf(r),1)}))}}else if("object"===(void 0===e?"undefined":a(e))&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var s=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=s.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&(this._dtmf="audio"===this.track.kind?this._pc.createDTMFSender(this.track):null),this._dtmf}})}},n.shimGetStats=function(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=this,r=(o=Array.prototype.slice.call(arguments))[0],n=o[1],o=o[2];if(0<arguments.length&&"function"==typeof r)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof r))return t.apply(this,[]);var i=function(e){var t={};return e.result().forEach((function(e){var r={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((function(t){r[t]=e.stat(t)})),t[r.id]=r})),t},a=function(e){return new Map(Object.keys(e).map((function(t){return[t,e[t]]})))};return 2<=arguments.length?t.apply(this,[function(e){n(a(i(e)))},r]):new Promise((function(r,n){t.apply(e,[function(e){r(a(i(e)))},n])})).then(n,o)}}},n.shimSenderReceiverGetStats=function(e){if("object"===(void 0===e?"undefined":a(e))&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver){if(!("getStats"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,r=t.apply(this,[]);return r.forEach((function(t){return t._pc=e})),r});var r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=r.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return u.filterStats(t,e.track,!0)}))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){var n=e.RTCPeerConnection.prototype.getReceivers;n&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,t=n.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t}),u.wrapPeerConnectionEvent(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return u.filterStats(t,e.track,!1)}))}}if("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype){var o=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(0<arguments.length&&arguments[0]instanceof e.MediaStreamTrack){var t=arguments[0],r=void 0,n=void 0,i=void 0;return this.getSenders().forEach((function(e){e.track===t&&(r?i=!0:r=e)})),this.getReceivers().forEach((function(e){return e.track===t&&(n?i=!0:n=e),e.track===t})),i||r&&n?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):r?r.getStats():n?n.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return o.apply(this,arguments)}}}},n.shimAddTrackRemoveTrackWithNative=i,n.shimAddTrackRemoveTrack=function(e){function t(e,t){var r=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){t=e._reverseStreams[t],r=r.replace(new RegExp(e._streams[t.id].id,"g"),t.id)})),new RTCSessionDescription({type:t.type,sdp:r})}function r(e,t){var r=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){t=e._reverseStreams[t],r=r.replace(new RegExp(t.id,"g"),e._streams[t.id].id)})),new RTCSessionDescription({type:t.type,sdp:r})}if(e.RTCPeerConnection){var n=u.detectBrowser(e);if(e.RTCPeerConnection.prototype.addTrack&&65<=n.version)return i(e);var a=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this,t=a.apply(this);return this._reverseStreams=this._reverseStreams||{},t.map((function(t){return e._reverseStreams[t.id]}))};var s=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var r=this;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((function(e){if(r.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){var n=new e.MediaStream(t.getTracks());this._streams[t.id]=n,this._reverseStreams[n.id]=t,t=n}s.apply(this,[t])};var c=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},c.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,r){var n=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var o=[].slice.call(arguments,1);if(1!==o.length||!o[0].getTracks().find((function(e){return e===t})))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find((function(e){return e.track===t})))throw new DOMException("Track already exists.","InvalidAccessError");return this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},(o=this._streams[r.id])?(o.addTrack(t),Promise.resolve().then((function(){n.dispatchEvent(new Event("negotiationneeded"))}))):(o=new e.MediaStream([t]),this._streams[r.id]=o,this._reverseStreams[o.id]=r,this.addStream(o)),this.getSenders().find((function(e){return e.track===t}))},["createOffer","createAnswer"].forEach((function(r){var n=e.RTCPeerConnection.prototype[r],i=o({},r,(function(){var e=this,r=arguments;return arguments.length&&"function"==typeof arguments[0]?n.apply(this,[function(n){n=t(e,n),r[0].apply(null,[n])},function(e){r[1]&&r[1].apply(null,e)},arguments[2]]):n.apply(this,arguments).then((function(r){return t(e,r)}))}));e.RTCPeerConnection.prototype[r]=i[r]}));var d=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=r(this,arguments[0]),d.apply(this,arguments)):d.apply(this,arguments)};var p=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=p.get.apply(this);return""===e.type?e:t(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(e._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};var r=void 0;Object.keys(this._streams).forEach((function(n){t._streams[n].getTracks().find((function(t){return e.track===t}))&&(r=t._streams[n])})),r&&(1===r.getTracks().length?this.removeStream(this._reverseStreams[r.id]):r.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}},n.shimPeerConnection=function(e){var t=u.detectBrowser(e);if(!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection){var r=0===e.RTCPeerConnection.prototype.addIceCandidate.length;53>t.version&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var r=e.RTCPeerConnection.prototype[t],n=o({},t,(function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}));e.RTCPeerConnection.prototype[t]=n[t]}));var n=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return r||arguments[0]?78>t.version&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}},n.fixNegotiationNeeded=function(e){var t=u.detectBrowser(e);u.wrapPeerConnectionEvent(e,"negotiationneeded",(function(e){var r=e.target;if(!(72>t.version||r.getConfiguration&&"plan-b"===r.getConfiguration().sdpSemantics)||"stable"===r.signalingState)return e}))};var u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("../utils.js"))},{"../utils.js":15,"./getdisplaymedia":4,"./getusermedia":5}],4:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.shimGetDisplayMedia=function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||!e.navigator.mediaDevices||("function"!=typeof t?console.error("shimGetDisplayMedia: getSourceId argument is not a function"):e.navigator.mediaDevices.getDisplayMedia=function(r){return t(r).then((function(t){var n=r.video&&r.video.width,o=r.video&&r.video.height;return r.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:r.video&&r.video.frameRate||3}},n&&(r.video.mandatory.maxWidth=n),o&&(r.video.mandatory.maxHeight=o),e.navigator.mediaDevices.getUserMedia(r)}))})}},{}],5:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),r.initSymbol(),r.initSymbol(),r.initSymbolIterator();var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return r.initSymbol(),r.initSymbol(),r.initSymbol(),e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.shimGetUserMedia=function(e){var t=e&&e.navigator;if(t.mediaDevices){var r=i.detectBrowser(e),n=function(e){if("object"!==(void 0===e?"undefined":o(e))||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach((function(r){if("require"!==r&&"advanced"!==r&&"mediaSource"!==r){var n="object"===o(e[r])?e[r]:{ideal:e[r]};void 0!==n.exact&&"number"==typeof n.exact&&(n.min=n.max=n.exact);var i=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==n.ideal){t.optional=t.optional||[];var a={};"number"==typeof n.ideal?(a[i("min",r)]=n.ideal,t.optional.push(a),(a={})[i("max",r)]=n.ideal):a[i("",r)]=n.ideal,t.optional.push(a)}void 0!==n.exact&&"number"!=typeof n.exact?(t.mandatory=t.mandatory||{},t.mandatory[i("",r)]=n.exact):["min","max"].forEach((function(e){void 0!==n[e]&&(t.mandatory=t.mandatory||{},t.mandatory[i(e,r)]=n[e])}))}})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},s=function(e,i){if(61<=r.version)return i(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"===o(e.audio)&&((c=function(e,t,r){t in e&&!(r in e)&&(e[r]=e[t],delete e[t])})((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),c(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=n(e.audio)),e&&"object"===o(e.video)){var s=(s=e.video.facingMode)&&("object"===(void 0===s?"undefined":o(s))?s:{ideal:s}),c=66>r.version;if(!(!s||"user"!==s.exact&&"environment"!==s.exact&&"user"!==s.ideal&&"environment"!==s.ideal||t.mediaDevices.getSupportedConstraints&&t.mediaDevices.getSupportedConstraints().facingMode&&!c)){delete e.video.facingMode;var u=void 0;if("environment"===s.exact||"environment"===s.ideal?u=["back","rear"]:"user"!==s.exact&&"user"!==s.ideal||(u=["front"]),u)return t.mediaDevices.enumerateDevices().then((function(t){var r=(t=t.filter((function(e){return"videoinput"===e.kind}))).find((function(e){return u.some((function(t){return e.label.toLowerCase().includes(t)}))}));return!r&&t.length&&u.includes("back")&&(r=t[t.length-1]),r&&(e.video.deviceId=s.exact?{exact:r.deviceId}:{ideal:r.deviceId}),e.video=n(e.video),a("chrome: "+JSON.stringify(e)),i(e)}))}e.video=n(e.video)}return a("chrome: "+JSON.stringify(e)),i(e)},c=function(e){return 64<=r.version?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}};if(t.getUserMedia=function(e,r,n){s(e,(function(e){t.webkitGetUserMedia(e,r,(function(e){n&&n(c(e))}))}))}.bind(t),t.mediaDevices.getUserMedia){var u=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return s(e,(function(e){return u(e).then((function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach((function(e){e.stop()})),new DOMException("","NotFoundError");return t}),(function(e){return Promise.reject(c(e))}))}))}}}};var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("../utils.js")),a=i.log},{"../utils.js":15}],6:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),r.initSymbol(),r.initSymbol(),r.initSymbolIterator();var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return r.initSymbol(),r.initSymbol(),r.initSymbol(),e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.shimRTCIceCandidate=function(e){if(e.RTCIceCandidate&&(!e.RTCIceCandidate||!("foundation"in e.RTCIceCandidate.prototype))){var t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"===(void 0===e?"undefined":o(e))&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){var r=new t(e);e=i.default.parseCandidate(e.candidate);var n=Object.assign(r,e);return n.toJSON=function(){return{candidate:n.candidate,sdpMid:n.sdpMid,sdpMLineIndex:n.sdpMLineIndex,usernameFragment:n.usernameFragment}},n}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,a.wrapPeerConnectionEvent(e,"icecandidate",(function(t){return t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t}))}},n.shimMaxMessageSize=function(e){if(e.RTCPeerConnection){var t=a.detectBrowser(e);"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp}});var r=function(e){return!(!e||!e.sdp)&&((e=i.default.splitSections(e.sdp)).shift(),e.some((function(e){return(e=i.default.parseMLine(e))&&"application"===e.kind&&-1!==e.protocol.indexOf("SCTP")})))},n=function(e){return null===(e=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/))||2>e.length||(e=parseInt(e[1],10))!=e?-1:e},o=function(e){var r=65536;return"firefox"===t.browser&&(r=57>t.version?-1===e?16384:2147483637:60>t.version?57===t.version?65535:65536:2147483637),r},s=function(e,r){var n=65536;return"firefox"===t.browser&&57===t.version&&(n=65535),0<(e=i.default.matchPrefix(e.sdp,"a=max-message-size:")).length?n=parseInt(e[0].substr(19),10):"firefox"===t.browser&&-1!==r&&(n=2147483637),n},c=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&76<=t.version&&"plan-b"===this.getConfiguration().sdpSemantics&&Object.defineProperty(this,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0}),r(arguments[0])){var e=n(arguments[0]),i=o(e),a=void(e=s(arguments[0],e));a=0===i&&0===e?Number.POSITIVE_INFINITY:0===i||0===e?Math.max(i,e):Math.min(i,e),i={},Object.defineProperty(i,"maxMessageSize",{get:function(){return a}}),this._sctp=i}return c.apply(this,arguments)}}},n.shimSendThrowTypeError=function(e){function t(e,t){var r=e.send;e.send=function(){var n=(n=arguments[0]).length||n.size||n.byteLength;if("open"===e.readyState&&t.sctp&&n>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return r.apply(e,arguments)}}if(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype){var r=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){var e=r.apply(this,arguments);return t(e,this),e},a.wrapPeerConnectionEvent(e,"datachannel",(function(e){return t(e.channel,e.target),e}))}},n.shimConnectionState=function(e){if(e.RTCPeerConnection&&!("connectionState"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((function(e){var r=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(e){var t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;var r=new Event("connectionstatechange",e);t.dispatchEvent(r)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}}))}},n.removeAllowExtmapMixed=function(e){if(e.RTCPeerConnection){var t=a.detectBrowser(e);if(!("chrome"===t.browser&&71<=t.version||"safari"===t.browser&&605<=t.version)){var r=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(e){return e&&e.sdp&&-1!==e.sdp.indexOf("\na=extmap-allow-mixed")&&(e.sdp=e.sdp.split("\n").filter((function(e){return"a=extmap-allow-mixed"!==e.trim()})).join("\n")),r.apply(this,arguments)}}}};var i=(t=e("sdp"))&&t.__esModule?t:{default:t},a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("./utils"))},{"./utils":15,sdp:17}],7:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.shimGetDisplayMedia=r.shimGetUserMedia=void 0;var n=e("./getusermedia");Object.defineProperty(r,"shimGetUserMedia",{enumerable:!0,get:function(){return n.shimGetUserMedia}});var o=e("./getdisplaymedia");Object.defineProperty(r,"shimGetDisplayMedia",{enumerable:!0,get:function(){return o.shimGetDisplayMedia}}),r.shimPeerConnection=function(e){var t=i.detectBrowser(e);if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),15025>t.version)){var r=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set:function(e){r.set.call(this,e);var t=new Event("enabled");t.enabled=e,this.dispatchEvent(t)}})}!e.RTCRtpSender||"dtmf"in e.RTCRtpSender.prototype||Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);var n=(0,s.default)(e,t.version);e.RTCPeerConnection=function(e){return e&&e.iceServers&&(e.iceServers=(0,a.filterIceServers)(e.iceServers,t.version),i.log("ICE servers after filtering:",e.iceServers)),new n(e)},e.RTCPeerConnection.prototype=n.prototype},r.shimReplaceTrack=function(e){!e.RTCRtpSender||"replaceTrack"in e.RTCRtpSender.prototype||(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)};var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("../utils")),a=e("./filtericeservers"),s=(e=e("rtcpeerconnection-shim"))&&e.__esModule?e:{default:e}},{"../utils":15,"./filtericeservers":8,"./getdisplaymedia":9,"./getusermedia":10,"rtcpeerconnection-shim":16}],8:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.filterIceServers=function(e,t){var r=!1;return(e=JSON.parse(JSON.stringify(e))).filter((function(e){if(e&&(e.urls||e.url)){var t=e.urls||e.url;e.url&&!e.urls&&n.deprecated("RTCIceServer.url","RTCIceServer.urls");var o="string"==typeof t;return o&&(t=[t]),t=t.filter((function(e){return 0!==e.indexOf("stun:")&&((e=e.startsWith("turn")&&!e.startsWith("turn:[")&&e.includes("transport=udp"))&&!r?r=!0:e&&!r)})),delete e.url,e.urls=o?t[0]:t,!!t.length}}))};var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("../utils"))},{"../utils":15}],9:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.shimGetDisplayMedia=function(e){"getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&(!e.navigator.mediaDevices||!("getDisplayMedia"in e.navigator.mediaDevices))&&(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator))}},{}],10:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.shimGetUserMedia=function(e){var t=(e=e&&e.navigator).mediaDevices.getUserMedia.bind(e.mediaDevices);e.mediaDevices.getUserMedia=function(e){return t(e).catch((function(e){return Promise.reject(function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString:function(){return this.name}}}(e))}))}}},{}],11:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=n.shimGetUserMedia=void 0,r.initSymbol(),r.initSymbol(),r.initSymbolIterator();var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return r.initSymbol(),r.initSymbol(),r.initSymbol(),e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=e("./getusermedia");Object.defineProperty(n,"shimGetUserMedia",{enumerable:!0,get:function(){return i.shimGetUserMedia}});var a=e("./getdisplaymedia");Object.defineProperty(n,"shimGetDisplayMedia",{enumerable:!0,get:function(){return a.shimGetDisplayMedia}}),n.shimOnTrack=function(e){"object"===(void 0===e?"undefined":o(e))&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},n.shimPeerConnection=function(e){var t=s.detectBrowser(e);if("object"===(void 0===e?"undefined":o(e))&&(e.RTCPeerConnection||e.mozRTCPeerConnection)){if(!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),53>t.version&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var r=e.RTCPeerConnection.prototype[t],n=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},t,(function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}));e.RTCPeerConnection.prototype[t]=n[t]})),68>t.version){var r=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?arguments[0]&&""===arguments[0].candidate?Promise.resolve():r.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}var n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},i=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=Array.prototype.slice.call(arguments),r=e[1],o=e[2];return i.apply(this,[e[0]||null]).then((function(e){if(53>t.version&&!r)try{e.forEach((function(e){e.type=n[e.type]||e.type}))}catch(t){if("TypeError"!==t.name)throw t;e.forEach((function(t,r){e.set(r,Object.assign({},t,{type:n[t.type]||t.type}))}))}return e})).then(r,o)}}},n.shimSenderGetStats=function(e){if("object"===(void 0===e?"undefined":o(e))&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpSender.prototype))){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,r=t.apply(this,[]);return r.forEach((function(t){return t._pc=e})),r});var r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=r.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}},n.shimReceiverGetStats=function(e){if("object"===(void 0===e?"undefined":o(e))&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpReceiver.prototype))){var t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,r=t.apply(this,[]);return r.forEach((function(t){return t._pc=e})),r}),s.wrapPeerConnectionEvent(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}},n.shimRemoveStream=function(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;s.deprecated("removeStream","removeTrack"),this.getSenders().forEach((function(r){r.track&&e.getTracks().includes(r.track)&&t.removeTrack(r)}))})},n.shimRTCDataChannel=function(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)},n.shimAddTransceiver=function(e){if("object"===(void 0===e?"undefined":o(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];var e=arguments[1];(n=e&&"sendEncodings"in e)&&e.sendEncodings.forEach((function(e){if("rid"in e&&!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in e&&!(1<=parseFloat(e.scaleResolutionDownBy)))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(0<=parseFloat(e.maxFramerate)))throw new RangeError("max_framerate must be >= 0.0")}));var r=t.apply(this,arguments);if(n){var n,o=r.sender;"encodings"in(n=o.getParameters())&&(1!==n.encodings.length||0!==Object.keys(n.encodings[0]).length)||(n.encodings=e.sendEncodings,o.sendEncodings=e.sendEncodings,this.setParametersPromises.push(o.setParameters(n).then((function(){delete o.sendEncodings})).catch((function(){delete o.sendEncodings}))))}return r})}},n.shimGetParameters=function(e){if("object"===(void 0===e?"undefined":o(e))&&e.RTCRtpSender){var t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){var e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}},n.shimCreateOffer=function(e){if("object"===(void 0===e?"undefined":o(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){var e=this,r=arguments;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((function(){return t.apply(e,r)})).finally((function(){e.setParametersPromises=[]})):t.apply(this,arguments)}}},n.shimCreateAnswer=function(e){if("object"===(void 0===e?"undefined":o(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){var e=this,r=arguments;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((function(){return t.apply(e,r)})).finally((function(){e.setParametersPromises=[]})):t.apply(this,arguments)}}};var s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("../utils"))},{"../utils":15,"./getdisplaymedia":12,"./getusermedia":13}],12:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.shimGetDisplayMedia=function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||!e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=function(r){return r&&r.video?(!0===r.video?r.video={mediaSource:t}:r.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(r)):((r=new DOMException("getDisplayMedia without video constraints is undefined")).name="NotFoundError",r.code=8,Promise.reject(r))})}},{}],13:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),r.initSymbol(),r.initSymbol(),r.initSymbolIterator();var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return r.initSymbol(),r.initSymbol(),r.initSymbol(),e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.shimGetUserMedia=function(e){var t=i.detectBrowser(e),r=e&&e.navigator;if(e=e&&e.MediaStreamTrack,r.getUserMedia=function(e,t,n){i.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),r.mediaDevices.getUserMedia(e).then(t,n)},!(55<t.version&&"autoGainControl"in r.mediaDevices.getSupportedConstraints())){var n=function(e,t,r){t in e&&!(r in e)&&(e[r]=e[t],delete e[t])},a=r.mediaDevices.getUserMedia.bind(r.mediaDevices);if(r.mediaDevices.getUserMedia=function(e){return"object"===(void 0===e?"undefined":o(e))&&"object"===o(e.audio)&&(e=JSON.parse(JSON.stringify(e)),n(e.audio,"autoGainControl","mozAutoGainControl"),n(e.audio,"noiseSuppression","mozNoiseSuppression")),a(e)},e&&e.prototype.getSettings){var s=e.prototype.getSettings;e.prototype.getSettings=function(){var e=s.apply(this,arguments);return n(e,"mozAutoGainControl","autoGainControl"),n(e,"mozNoiseSuppression","noiseSuppression"),e}}if(e&&e.prototype.applyConstraints){var c=e.prototype.applyConstraints;e.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"===(void 0===e?"undefined":o(e))&&(e=JSON.parse(JSON.stringify(e)),n(e,"autoGainControl","mozAutoGainControl"),n(e,"noiseSuppression","mozNoiseSuppression")),c.apply(this,[e])}}}};var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("../utils"))},{"../utils":15}],14:[function(e,t,n){function o(e){return e&&void 0!==e.video?Object.assign({},e,{video:a.compactObject(e.video)}):e}Object.defineProperty(n,"__esModule",{value:!0}),r.initSymbol(),r.initSymbol(),r.initSymbolIterator();var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return r.initSymbol(),r.initSymbol(),r.initSymbol(),e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.shimLocalStreamsAPI=function(e){if("object"===(void 0===e?"undefined":i(e))&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){var r=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach((function(n){return t.call(r,n,e)})),e.getVideoTracks().forEach((function(n){return t.call(r,n,e)}))},e.RTCPeerConnection.prototype.addTrack=function(e){for(var r=this,n=arguments.length,o=Array(1<n?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return o&&o.forEach((function(e){r._localStreams?r._localStreams.includes(e)||r._localStreams.push(e):r._localStreams=[e]})),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._localStreams||(this._localStreams=[]);var r=this._localStreams.indexOf(e);if(-1!==r){this._localStreams.splice(r,1);var n=e.getTracks();this.getSenders().forEach((function(e){n.includes(e.track)&&t.removeTrack(e)}))}})}},n.shimRemoteStreamsAPI=function(e){if("object"===(void 0===e?"undefined":i(e))&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){var t=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach((function(e){if(t._remoteStreams||(t._remoteStreams=[]),!t._remoteStreams.includes(e)){t._remoteStreams.push(e);var r=new Event("addstream");r.stream=e,t.dispatchEvent(r)}}))})}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((function(t){if(e._remoteStreams||(e._remoteStreams=[]),!(0<=e._remoteStreams.indexOf(t))){e._remoteStreams.push(t);var r=new Event("addstream");r.stream=t,e.dispatchEvent(r)}}))}),t.apply(e,arguments)}}},n.shimCallbacksAPI=function(e){if("object"===(void 0===e?"undefined":i(e))&&e.RTCPeerConnection){var t=(e=e.RTCPeerConnection.prototype).createOffer,r=e.createAnswer,n=e.setLocalDescription,o=e.setRemoteDescription,a=e.addIceCandidate;e.createOffer=function(e,r){var n=t.apply(this,[2<=arguments.length?arguments[2]:arguments[0]]);return r?(n.then(e,r),Promise.resolve()):n},e.createAnswer=function(e,t){var n=r.apply(this,[2<=arguments.length?arguments[2]:arguments[0]]);return t?(n.then(e,t),Promise.resolve()):n};var s=function(e,t,r){return e=n.apply(this,[e]),r?(e.then(t,r),Promise.resolve()):e};e.setLocalDescription=s,s=function(e,t,r){return e=o.apply(this,[e]),r?(e.then(t,r),Promise.resolve()):e},e.setRemoteDescription=s,s=function(e,t,r){return e=a.apply(this,[e]),r?(e.then(t,r),Promise.resolve()):e},e.addIceCandidate=s}},n.shimGetUserMedia=function(e){var t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){var r=(e=t.mediaDevices).getUserMedia.bind(e);t.mediaDevices.getUserMedia=function(e){return r(o(e))}}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,r,n){t.mediaDevices.getUserMedia(e).then(r,n)}.bind(t))},n.shimConstraints=o,n.shimRTCIceServerUrls=function(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,r){if(e&&e.iceServers){for(var n=[],o=0;o<e.iceServers.length;o++){var i=e.iceServers[o];!i.hasOwnProperty("urls")&&i.hasOwnProperty("url")?(a.deprecated("RTCIceServer.url","RTCIceServer.urls"),(i=JSON.parse(JSON.stringify(i))).urls=i.url,delete i.url,n.push(i)):n.push(e.iceServers[o])}e.iceServers=n}return new t(e,r)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return t.generateCertificate}})}},n.shimTrackEventTransceiver=function(e){"object"===(void 0===e?"undefined":i(e))&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},n.shimCreateOfferLegacy=function(e){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);var r=this.getTransceivers().find((function(e){return"audio"===e.receiver.track.kind}));!1===e.offerToReceiveAudio&&r?"sendrecv"===r.direction?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":"recvonly"===r.direction&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):!0!==e.offerToReceiveAudio||r||this.addTransceiver("audio"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo),r=this.getTransceivers().find((function(e){return"video"===e.receiver.track.kind})),!1===e.offerToReceiveVideo&&r?"sendrecv"===r.direction?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":"recvonly"===r.direction&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):!0!==e.offerToReceiveVideo||r||this.addTransceiver("video")}return t.apply(this,arguments)}},n.shimAudioContext=function(e){"object"!==(void 0===e?"undefined":i(e))||e.AudioContext||(e.AudioContext=e.webkitAudioContext)};var a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("../utils"))},{"../utils":15}],15:[function(e,t,n){function o(e,t,r){return(e=e.match(t))&&e.length>=r&&parseInt(e[r],10)}function i(e,t,r){t&&!r.has(t.id)&&(r.set(t.id,t),Object.keys(t).forEach((function(n){n.endsWith("Id")?i(e,e.get(t[n]),r):n.endsWith("Ids")&&t[n].forEach((function(t){i(e,e.get(t),r)}))})))}Object.defineProperty(n,"__esModule",{value:!0}),r.initSymbol(),r.initSymbol(),r.initSymbolIterator();var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return r.initSymbol(),r.initSymbol(),r.initSymbol(),e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.extractVersion=o,n.wrapPeerConnectionEvent=function(e,t,r){if(e.RTCPeerConnection){var n=(e=e.RTCPeerConnection.prototype).addEventListener;e.addEventListener=function(e,o){if(e!==t)return n.apply(this,arguments);var i=function(e){(e=r(e))&&(o.handleEvent?o.handleEvent(e):o(e))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(o,i),n.apply(this,[e,i])};var o=e.removeEventListener;e.removeEventListener=function(e,r){if(e!==t||!this._eventMap||!this._eventMap[t]||!this._eventMap[t].has(r))return o.apply(this,arguments);var n=this._eventMap[t].get(r);return this._eventMap[t].delete(r),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,o.apply(this,[e,n])},Object.defineProperty(e,"on"+t,{get:function(){return this["_on"+t]},set:function(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}},n.disableLog=function(e){return"boolean"!=typeof e?Error("Argument type: "+(void 0===e?"undefined":a(e))+". Please use a boolean."):(s=e)?"adapter.js logging disabled":"adapter.js logging enabled"},n.disableWarnings=function(e){return"boolean"!=typeof e?Error("Argument type: "+(void 0===e?"undefined":a(e))+". Please use a boolean."):(c=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))},n.log=function(){"object"!==("undefined"==typeof window?"undefined":a(window))||s||"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)},n.deprecated=function(e,t){c&&console.warn(e+" is deprecated, please use "+t+" instead.")},n.detectBrowser=function(e){var t={browser:null,version:null};if(void 0===e||!e.navigator)return t.browser="Not a browser.",t;var r=e.navigator;return r.mozGetUserMedia?(t.browser="firefox",t.version=o(r.userAgent,/Firefox\/(\d+)\./,1)):r.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer?(t.browser="chrome",t.version=o(r.userAgent,/Chrom(e|ium)\/(\d+)\./,2)):r.mediaDevices&&r.userAgent.match(/Edge\/(\d+).(\d+)$/)?(t.browser="edge",t.version=o(r.userAgent,/Edge\/(\d+).(\d+)$/,2)):e.RTCPeerConnection&&r.userAgent.match(/AppleWebKit\/(\d+)\./)?(t.browser="safari",t.version=o(r.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype):t.browser="Not a supported browser.",t},n.compactObject=function e(t){return"[object Object]"!==Object.prototype.toString.call(t)?t:Object.keys(t).reduce((function(r,n){var o=(i="[object Object]"===Object.prototype.toString.call(t[n]))?e(t[n]):t[n],i=i&&!Object.keys(o).length;return void 0===o||i?r:Object.assign(r,function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},n,o))}),{})},n.walkStats=i,n.filterStats=function(e,t,r){var n=r?"outbound-rtp":"inbound-rtp",o=new Map;if(null===t)return o;var a=[];return e.forEach((function(e){"track"===e.type&&e.trackIdentifier===t.id&&a.push(e)})),a.forEach((function(t){e.forEach((function(r){r.type===n&&r.trackId===t.id&&i(e,r,o)}))})),o};var s=!0,c=!0},{}],16:[function(e,t,r){function n(e,t,r,n,o){return t=c.writeRtpDescription(e.kind,t),t+=c.writeIceParameters(e.iceGatherer.getLocalParameters()),t+=c.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===r?"actpass":o||"active"),t+="a=mid:"+e.mid+"\r\n",t=e.rtpSender&&e.rtpReceiver?t+"a=sendrecv\r\n":e.rtpSender?t+"a=sendonly\r\n":e.rtpReceiver?t+"a=recvonly\r\n":t+"a=inactive\r\n",e.rtpSender&&(r=e.rtpSender._initialTrackId||e.rtpSender.track.id,e.rtpSender._initialTrackId=r,t=t+"a="+(n="msid:"+(n?n.id:"-")+" "+r+"\r\n")+"a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+n,e.sendEncodingParameters[0].rtx&&(t+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+n,t+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")),t+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+c.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(t+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+c.localCName+"\r\n"),t}function o(e,t){var r={codecs:[],headerExtensions:[],fecMechanisms:[]},n=function(e,t){e=parseInt(e,10);for(var r=0;r<t.length;r++)if(t[r].payloadType===e||t[r].preferredPayloadType===e)return t[r]},o=function(e,t,r,o){return e=n(e.parameters.apt,r),t=n(t.parameters.apt,o),e&&t&&e.name.toLowerCase()===t.name.toLowerCase()};return e.codecs.forEach((function(n){for(var i=0;i<t.codecs.length;i++){var a=t.codecs[i];if(n.name.toLowerCase()===a.name.toLowerCase()&&n.clockRate===a.clockRate&&("rtx"!==n.name.toLowerCase()||!n.parameters||!a.parameters.apt||o(n,a,e.codecs,t.codecs))){(a=JSON.parse(JSON.stringify(a))).numChannels=Math.min(n.numChannels,a.numChannels),r.codecs.push(a),a.rtcpFeedback=a.rtcpFeedback.filter((function(e){for(var t=0;t<n.rtcpFeedback.length;t++)if(n.rtcpFeedback[t].type===e.type&&n.rtcpFeedback[t].parameter===e.parameter)return!0;return!1}));break}}})),e.headerExtensions.forEach((function(e){for(var n=0;n<t.headerExtensions.length;n++){var o=t.headerExtensions[n];if(e.uri===o.uri){r.headerExtensions.push(o);break}}})),r}function i(e,t,r){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(r)}function a(e,t){var r=e.getRemoteCandidates().find((function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type}));return r||e.addRemoteCandidate(t),!r}function s(e,t){return(t=Error(t)).name=e,t.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],t}var c=e("sdp");t.exports=function(e,t){function r(t,r){r.addTrack(t),r.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:t}))}function u(t,r,n,o){var i=new Event("track");i.track=r,i.receiver=n,i.transceiver={receiver:n},i.streams=o,e.setTimeout((function(){t._dispatchEvent("track",i)}))}var d=function(r){var n=this,o=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach((function(e){n[e]=o[e].bind(o)})),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._remoteDescription=this._localDescription=null,this.signalingState="stable",this.iceGatheringState=this.connectionState=this.iceConnectionState="new",r=JSON.parse(JSON.stringify(r||{})),this.usingBundle="max-bundle"===r.bundlePolicy,"negotiate"===r.rtcpMuxPolicy)throw s("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(r.rtcpMuxPolicy||(r.rtcpMuxPolicy="require"),r.iceTransportPolicy){case"all":case"relay":break;default:r.iceTransportPolicy="all"}switch(r.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:r.bundlePolicy="balanced"}if(r.iceServers=function(e,t){var r=!1;return(e=JSON.parse(JSON.stringify(e))).filter((function(e){if(e&&(e.urls||e.url)){var n=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var o="string"==typeof n;return o&&(n=[n]),n=n.filter((function(e){return 0!==e.indexOf("turn:")||-1===e.indexOf("transport=udp")||-1!==e.indexOf("turn:[")||r?0===e.indexOf("stun:")&&14393<=t&&-1===e.indexOf("?transport=udp"):r=!0})),delete e.url,e.urls=o?n[0]:n,!!n.length}}))}(r.iceServers||[],t),this._iceGatherers=[],r.iceCandidatePoolSize)for(var i=r.iceCandidatePoolSize;0<i;i--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:r.iceServers,gatherPolicy:r.iceTransportPolicy}));else r.iceCandidatePoolSize=0;this._config=r,this.transceivers=[],this._sdpSessionId=c.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(d.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(d.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),d.prototype.onicecandidate=null,d.prototype.onaddstream=null,d.prototype.ontrack=null,d.prototype.onremovestream=null,d.prototype.onsignalingstatechange=null,d.prototype.oniceconnectionstatechange=null,d.prototype.onconnectionstatechange=null,d.prototype.onicegatheringstatechange=null,d.prototype.onnegotiationneeded=null,d.prototype.ondatachannel=null,d.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"!=typeof this["on"+e])||this["on"+e](t)},d.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},d.prototype.getConfiguration=function(){return this._config},d.prototype.getLocalStreams=function(){return this.localStreams},d.prototype.getRemoteStreams=function(){return this.remoteStreams},d.prototype._createTransceiver=function(e,t){var r=0<this.transceivers.length;return e={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0},this.usingBundle&&r?(e.iceTransport=this.transceivers[0].iceTransport,e.dtlsTransport=this.transceivers[0].dtlsTransport):(r=this._createIceAndDtlsTransports(),e.iceTransport=r.iceTransport,e.dtlsTransport=r.dtlsTransport),t||this.transceivers.push(e),e},d.prototype.addTrack=function(t,r){if(this._isClosed)throw s("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");if(this.transceivers.find((function(e){return e.track===t})))throw s("InvalidAccessError","Track already exists.");for(var n,o=0;o<this.transceivers.length;o++)this.transceivers[o].track||this.transceivers[o].kind!==t.kind||(n=this.transceivers[o]);return n||(n=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(r)&&this.localStreams.push(r),n.track=t,n.stream=r,n.rtpSender=new e.RTCRtpSender(t,n.dtlsTransport),n.rtpSender},d.prototype.addStream=function(e){var r=this;if(15025<=t)e.getTracks().forEach((function(t){r.addTrack(t,e)}));else{var n=e.clone();e.getTracks().forEach((function(e,t){var r=n.getTracks()[t];e.addEventListener("enabled",(function(e){r.enabled=e.enabled}))})),n.getTracks().forEach((function(e){r.addTrack(e,n)}))}},d.prototype.removeTrack=function(t){if(this._isClosed)throw s("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var r=this.transceivers.find((function(e){return e.rtpSender===t}));if(!r)throw s("InvalidAccessError","Sender was not created by this connection.");var n=r.stream;r.rtpSender.stop(),r.rtpSender=null,r.track=null,r.stream=null,-1===this.transceivers.map((function(e){return e.stream})).indexOf(n)&&-1<this.localStreams.indexOf(n)&&this.localStreams.splice(this.localStreams.indexOf(n),1),this._maybeFireNegotiationNeeded()},d.prototype.removeStream=function(e){var t=this;e.getTracks().forEach((function(e){var r=t.getSenders().find((function(t){return t.track===e}));r&&t.removeTrack(r)}))},d.prototype.getSenders=function(){return this.transceivers.filter((function(e){return!!e.rtpSender})).map((function(e){return e.rtpSender}))},d.prototype.getReceivers=function(){return this.transceivers.filter((function(e){return!!e.rtpReceiver})).map((function(e){return e.rtpReceiver}))},d.prototype._createIceGatherer=function(t,r){var n=this;if(r&&0<t)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var o=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(o,"state",{value:"new",writable:!0}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var r=!e.candidate||0===Object.keys(e.candidate).length;o.state=r?"completed":"gathering",null!==n.transceivers[t].bufferedCandidateEvents&&n.transceivers[t].bufferedCandidateEvents.push(e)},o.addEventListener("localcandidate",this.transceivers[t].bufferCandidates),o},d.prototype._gather=function(t,r){var n=this,o=this.transceivers[r].iceGatherer;if(!o.onlocalcandidate){var i=this.transceivers[r].bufferedCandidateEvents;this.transceivers[r].bufferedCandidateEvents=null,o.removeEventListener("localcandidate",this.transceivers[r].bufferCandidates),o.onlocalcandidate=function(e){if(!(n.usingBundle&&0<r)){var i=new Event("icecandidate");i.candidate={sdpMid:t,sdpMLineIndex:r};var a=e.candidate;(e=!a||0===Object.keys(a).length)?"new"!==o.state&&"gathering"!==o.state||(o.state="completed"):("new"===o.state&&(o.state="gathering"),a.component=1,a.ufrag=o.getLocalParameters().usernameFragment,a=c.writeCandidate(a),i.candidate=Object.assign(i.candidate,c.parseCandidate(a)),i.candidate.candidate=a,i.candidate.toJSON=function(){return{candidate:i.candidate.candidate,sdpMid:i.candidate.sdpMid,sdpMLineIndex:i.candidate.sdpMLineIndex,usernameFragment:i.candidate.usernameFragment}}),(a=c.getMediaSections(n._localDescription.sdp))[i.candidate.sdpMLineIndex]=e?a[i.candidate.sdpMLineIndex]+"a=end-of-candidates\r\n":a[i.candidate.sdpMLineIndex]+"a="+i.candidate.candidate+"\r\n",n._localDescription.sdp=c.getDescription(n._localDescription.sdp)+a.join(""),a=n.transceivers.every((function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state})),"gathering"!==n.iceGatheringState&&(n.iceGatheringState="gathering",n._emitGatheringStateChange()),e||n._dispatchEvent("icecandidate",i),a&&(n._dispatchEvent("icecandidate",new Event("icecandidate")),n.iceGatheringState="complete",n._emitGatheringStateChange())}},e.setTimeout((function(){i.forEach((function(e){o.onlocalcandidate(e)}))}),0)}},d.prototype._createIceAndDtlsTransports=function(){var t=this,r=new e.RTCIceTransport(null);r.onicestatechange=function(){t._updateIceConnectionState(),t._updateConnectionState()};var n=new e.RTCDtlsTransport(r);return n.ondtlsstatechange=function(){t._updateConnectionState()},n.onerror=function(){Object.defineProperty(n,"state",{value:"failed",writable:!0}),t._updateConnectionState()},{iceTransport:r,dtlsTransport:n}},d.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer),(t=this.transceivers[e].iceTransport)&&(delete t.onicestatechange,delete this.transceivers[e].iceTransport),(t=this.transceivers[e].dtlsTransport)&&(delete t.ondtlsstatechange,delete t.onerror,delete this.transceivers[e].dtlsTransport)},d.prototype._transceive=function(e,r,n){var i=o(e.localCapabilities,e.remoteCapabilities);r&&e.rtpSender&&(i.encodings=e.sendEncodingParameters,i.rtcp={cname:c.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(i.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(i)),n&&e.rtpReceiver&&0<i.codecs.length&&("video"===e.kind&&e.recvEncodingParameters&&15019>t&&e.recvEncodingParameters.forEach((function(e){delete e.rtx})),i.encodings=e.recvEncodingParameters.length?e.recvEncodingParameters:[{}],i.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(i.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(i.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(i))},d.prototype.setLocalDescription=function(e){var t=this;if(-1===["offer","answer"].indexOf(e.type))return Promise.reject(s("TypeError",'Unsupported type "'+e.type+'"'));if(!i("setLocalDescription",e.type,t.signalingState)||t._isClosed)return Promise.reject(s("InvalidStateError","Can not set local "+e.type+" in state "+t.signalingState));if("offer"===e.type){var r=c.splitSections(e.sdp),n=r.shift();r.forEach((function(e,r){e=c.parseRtpParameters(e),t.transceivers[r].localCapabilities=e})),t.transceivers.forEach((function(e,r){t._gather(e.mid,r)}))}else if("answer"===e.type){r=c.splitSections(t._remoteDescription.sdp),n=r.shift();var a=0<c.matchPrefix(n,"a=ice-lite").length;r.forEach((function(e,r){var i=t.transceivers[r],s=i.iceGatherer,u=i.iceTransport,d=i.dtlsTransport,p=i.localCapabilities,l=i.remoteCapabilities;if(!(c.isRejected(e)&&0===c.matchPrefix(e,"a=bundle-only").length||i.rejected)){var f=c.getIceParameters(e,n);e=c.getDtlsParameters(e,n),a&&(e.role="server"),t.usingBundle&&0!==r||(t._gather(i.mid,r),"new"===u.state&&u.start(s,f,a?"controlling":"controlled"),"new"===d.state&&d.start(e)),r=o(p,l),t._transceive(i,0<r.codecs.length,!1)}}))}return t._localDescription={type:e.type,sdp:e.sdp},"offer"===e.type?t._updateSignalingState("have-local-offer"):t._updateSignalingState("stable"),Promise.resolve()},d.prototype.setRemoteDescription=function(n){var d=this;if(-1===["offer","answer"].indexOf(n.type))return Promise.reject(s("TypeError",'Unsupported type "'+n.type+'"'));if(!i("setRemoteDescription",n.type,d.signalingState)||d._isClosed)return Promise.reject(s("InvalidStateError","Can not set remote "+n.type+" in state "+d.signalingState));var p={};d.remoteStreams.forEach((function(e){p[e.id]=e}));var l=[],f=c.splitSections(n.sdp),h=f.shift(),m=0<c.matchPrefix(h,"a=ice-lite").length,v=0<c.matchPrefix(h,"a=group:BUNDLE ").length;d.usingBundle=v;var g=c.matchPrefix(h,"a=ice-options:")[0];return d.canTrickleIceCandidates=!!g&&0<=g.substr(14).split(" ").indexOf("trickle"),f.forEach((function(i,s){var u=c.splitLines(i),f=c.getKind(i),g=c.isRejected(i)&&0===c.matchPrefix(i,"a=bundle-only").length,y=u[0].substr(2).split(" ")[2],_=(u=c.getDirection(i,h),c.parseMsid(i)),E=c.getMid(i)||c.generateIdentifier();if(g||"application"===f&&("DTLS/SCTP"===y||"UDP/DTLS/SCTP"===y))d.transceivers[s]={mid:E,kind:f,protocol:y,rejected:!0};else{!g&&d.transceivers[s]&&d.transceivers[s].rejected&&(d.transceivers[s]=d._createTransceiver(f,!0));var S=c.parseRtpParameters(i);if(!g){var b=c.getIceParameters(i,h),T=c.getDtlsParameters(i,h);T.role="client"}y=c.parseRtpEncodingParameters(i);var R=c.parseRtcpParameters(i),C=0<c.matchPrefix(i,"a=end-of-candidates",h).length,O=c.matchPrefix(i,"a=candidate:").map((function(e){return c.parseCandidate(e)})).filter((function(e){return 1===e.component}));if(("offer"===n.type||"answer"===n.type)&&!g&&v&&0<s&&d.transceivers[s]&&(d._disposeIceAndDtlsTransports(s),d.transceivers[s].iceGatherer=d.transceivers[0].iceGatherer,d.transceivers[s].iceTransport=d.transceivers[0].iceTransport,d.transceivers[s].dtlsTransport=d.transceivers[0].dtlsTransport,d.transceivers[s].rtpSender&&d.transceivers[s].rtpSender.setTransport(d.transceivers[0].dtlsTransport),d.transceivers[s].rtpReceiver&&d.transceivers[s].rtpReceiver.setTransport(d.transceivers[0].dtlsTransport)),"offer"!==n.type||g)"answer"!==n.type||g||(I=(w=d.transceivers[s]).iceGatherer,f=w.iceTransport,E=w.dtlsTransport,A=w.rtpReceiver,g=w.sendEncodingParameters,i=w.localCapabilities,d.transceivers[s].recvEncodingParameters=y,d.transceivers[s].remoteCapabilities=S,d.transceivers[s].rtcpParameters=R,O.length&&"new"===f.state&&(!m&&!C||v&&0!==s?O.forEach((function(e){a(w.iceTransport,e)})):f.setRemoteCandidates(O)),v&&0!==s||("new"===f.state&&f.start(I,b,"controlling"),"new"===E.state&&E.start(T)),!o(w.localCapabilities,w.remoteCapabilities).codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&w.sendEncodingParameters[0].rtx&&delete w.sendEncodingParameters[0].rtx,d._transceive(w,"sendrecv"===u||"recvonly"===u,"sendrecv"===u||"sendonly"===u),!A||"sendrecv"!==u&&"sendonly"!==u?delete w.rtpReceiver:(u=A.track,_?(p[_.stream]||(p[_.stream]=new e.MediaStream),r(u,p[_.stream]),l.push([u,A,p[_.stream]])):(p.default||(p.default=new e.MediaStream),r(u,p.default),l.push([u,A,p.default]))));else{var w=d.transceivers[s]||d._createTransceiver(f);if(w.mid=E,w.iceGatherer||(w.iceGatherer=d._createIceGatherer(s,v)),O.length&&"new"===w.iceTransport.state&&(!C||v&&0!==s?O.forEach((function(e){a(w.iceTransport,e)})):w.iceTransport.setRemoteCandidates(O)),i=e.RTCRtpReceiver.getCapabilities(f),15019>t&&(i.codecs=i.codecs.filter((function(e){return"rtx"!==e.name}))),g=w.sendEncodingParameters||[{ssrc:1001*(2*s+2)}],b=!1,"sendrecv"===u||"sendonly"===u){b=!w.rtpReceiver;var A=w.rtpReceiver||new e.RTCRtpReceiver(w.dtlsTransport,f);if(b){if(u=A.track,!_||"-"!==_.stream)if(_){p[_.stream]||(p[_.stream]=new e.MediaStream,Object.defineProperty(p[_.stream],"id",{get:function(){return _.stream}})),Object.defineProperty(u,"id",{get:function(){return _.track}});var I=p[_.stream]}else p.default||(p.default=new e.MediaStream),I=p.default;I&&(r(u,I),w.associatedRemoteMediaStreams.push(I)),l.push([u,A,I])}}else w.rtpReceiver&&w.rtpReceiver.track&&(w.associatedRemoteMediaStreams.forEach((function(t){var r=t.getTracks().find((function(e){return e.id===w.rtpReceiver.track.id}));r&&function(t,r){r.removeTrack(t),r.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:t}))}(r,t)})),w.associatedRemoteMediaStreams=[]);w.localCapabilities=i,w.remoteCapabilities=S,w.rtpReceiver=A,w.rtcpParameters=R,w.sendEncodingParameters=g,w.recvEncodingParameters=y,d._transceive(d.transceivers[s],!1,b)}}})),void 0===d._dtlsRole&&(d._dtlsRole="offer"===n.type?"active":"passive"),d._remoteDescription={type:n.type,sdp:n.sdp},"offer"===n.type?d._updateSignalingState("have-remote-offer"):d._updateSignalingState("stable"),Object.keys(p).forEach((function(t){var r=p[t];if(r.getTracks().length){if(-1===d.remoteStreams.indexOf(r)){d.remoteStreams.push(r);var n=new Event("addstream");n.stream=r,e.setTimeout((function(){d._dispatchEvent("addstream",n)}))}l.forEach((function(e){r.id===e[2].id&&u(d,e[0],e[1],[r])}))}})),l.forEach((function(e){e[2]||u(d,e[0],e[1],[])})),e.setTimeout((function(){d&&d.transceivers&&d.transceivers.forEach((function(e){e.iceTransport&&"new"===e.iceTransport.state&&0<e.iceTransport.getRemoteCandidates().length&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))}))}),4e3),Promise.resolve()},d.prototype.close=function(){this.transceivers.forEach((function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()})),this._isClosed=!0,this._updateSignalingState("closed")},d.prototype._updateSignalingState=function(e){this.signalingState=e,e=new Event("signalingstatechange"),this._dispatchEvent("signalingstatechange",e)},d.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout((function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}}),0))},d.prototype._updateIceConnectionState=function(){var e={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};this.transceivers.forEach((function(t){t.iceTransport&&!t.rejected&&e[t.iceTransport.state]++}));var t="new";0<e.failed?t="failed":0<e.checking?t="checking":0<e.disconnected?t="disconnected":0<e.new?t="new":0<e.connected?t="connected":0<e.completed&&(t="completed"),t!==this.iceConnectionState&&(this.iceConnectionState=t,t=new Event("iceconnectionstatechange"),this._dispatchEvent("iceconnectionstatechange",t))},d.prototype._updateConnectionState=function(){var e={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};this.transceivers.forEach((function(t){t.iceTransport&&t.dtlsTransport&&!t.rejected&&(e[t.iceTransport.state]++,e[t.dtlsTransport.state]++)})),e.connected+=e.completed;var t="new";0<e.failed?t="failed":0<e.connecting?t="connecting":0<e.disconnected?t="disconnected":0<e.new?t="new":0<e.connected&&(t="connected"),t!==this.connectionState&&(this.connectionState=t,t=new Event("connectionstatechange"),this._dispatchEvent("connectionstatechange",t))},d.prototype.createOffer=function(r){var o=this;if(o._isClosed)return Promise.reject(s("InvalidStateError","Can not call createOffer after close"));var i=o.transceivers.filter((function(e){return"audio"===e.kind})).length,a=o.transceivers.filter((function(e){return"video"===e.kind})).length;if(r){if(r.mandatory||r.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==r.offerToReceiveAudio&&(i=!0===r.offerToReceiveAudio?1:!1===r.offerToReceiveAudio?0:r.offerToReceiveAudio),void 0!==r.offerToReceiveVideo&&(a=!0===r.offerToReceiveVideo?1:!1===r.offerToReceiveVideo?0:r.offerToReceiveVideo)}for(o.transceivers.forEach((function(e){"audio"===e.kind?0>--i&&(e.wantReceive=!1):"video"===e.kind&&0>--a&&(e.wantReceive=!1)}));0<i||0<a;)0<i&&(o._createTransceiver("audio"),i--),0<a&&(o._createTransceiver("video"),a--);var u=c.writeSessionBoilerplate(o._sdpSessionId,o._sdpSessionVersion++);return o.transceivers.forEach((function(r,n){var i=r.track,a=r.kind,s=r.mid||c.generateIdentifier();r.mid=s,r.iceGatherer||(r.iceGatherer=o._createIceGatherer(n,o.usingBundle)),s=e.RTCRtpSender.getCapabilities(a),15019>t&&(s.codecs=s.codecs.filter((function(e){return"rtx"!==e.name}))),s.codecs.forEach((function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),r.remoteCapabilities&&r.remoteCapabilities.codecs&&r.remoteCapabilities.codecs.forEach((function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)}))})),s.headerExtensions.forEach((function(e){(r.remoteCapabilities&&r.remoteCapabilities.headerExtensions||[]).forEach((function(t){e.uri===t.uri&&(e.id=t.id)}))})),n=r.sendEncodingParameters||[{ssrc:1001*(2*n+1)}],i&&15019<=t&&"video"===a&&!n[0].rtx&&(n[0].rtx={ssrc:n[0].ssrc+1}),r.wantReceive&&(r.rtpReceiver=new e.RTCRtpReceiver(r.dtlsTransport,a)),r.localCapabilities=s,r.sendEncodingParameters=n})),"max-compat"!==o._config.bundlePolicy&&(u+="a=group:BUNDLE "+o.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),u+="a=ice-options:trickle\r\n",o.transceivers.forEach((function(e,t){u+=n(e,e.localCapabilities,"offer",e.stream,o._dtlsRole),u+="a=rtcp-rsize\r\n",!e.iceGatherer||"new"===o.iceGatheringState||0!==t&&o.usingBundle||(e.iceGatherer.getLocalCandidates().forEach((function(e){e.component=1,u+="a="+c.writeCandidate(e)+"\r\n"})),"completed"===e.iceGatherer.state&&(u+="a=end-of-candidates\r\n"))})),r=new e.RTCSessionDescription({type:"offer",sdp:u}),Promise.resolve(r)},d.prototype.createAnswer=function(){var r=this;if(r._isClosed)return Promise.reject(s("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==r.signalingState&&"have-local-pranswer"!==r.signalingState)return Promise.reject(s("InvalidStateError","Can not call createAnswer in signalingState "+r.signalingState));var i=c.writeSessionBoilerplate(r._sdpSessionId,r._sdpSessionVersion++);r.usingBundle&&(i+="a=group:BUNDLE "+r.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),i+="a=ice-options:trickle\r\n";var a=c.getMediaSections(r._remoteDescription.sdp).length;r.transceivers.forEach((function(e,s){if(!(s+1>a))if(e.rejected)"application"===e.kind?i="DTLS/SCTP"===e.protocol?i+"m=application 0 DTLS/SCTP 5000\r\n":i+"m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?i+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(i+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),i+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n";else{var c;e.stream&&("audio"===e.kind?c=e.stream.getAudioTracks()[0]:"video"===e.kind&&(c=e.stream.getVideoTracks()[0]),c&&15019<=t&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1})),!(s=o(e.localCapabilities,e.remoteCapabilities)).codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,i+=n(e,s,"answer",e.stream,r._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(i+="a=rtcp-rsize\r\n")}}));var u=new e.RTCSessionDescription({type:"answer",sdp:i});return Promise.resolve(u)},d.prototype.addIceCandidate=function(e){var t,r=this;return e&&void 0===e.sdpMLineIndex&&!e.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise((function(n,o){if(!r._remoteDescription)return o(s("InvalidStateError","Can not add ICE candidate without a remote description"));if(e&&""!==e.candidate){var i=e.sdpMLineIndex;if(e.sdpMid)for(var u=0;u<r.transceivers.length;u++)if(r.transceivers[u].mid===e.sdpMid){i=u;break}var d=r.transceivers[i];if(!d)return o(s("OperationError","Can not add ICE candidate"));if(d.rejected)return n();if("tcp"===(u=0<Object.keys(e.candidate).length?c.parseCandidate(e.candidate):{}).protocol&&(0===u.port||9===u.port)||u.component&&1!==u.component)return n();if((0===i||0<i&&d.iceTransport!==r.transceivers[0].iceTransport)&&!a(d.iceTransport,u))return o(s("OperationError","Can not add ICE candidate"));0===(o=e.candidate.trim()).indexOf("a=")&&(o=o.substr(2)),(t=c.getMediaSections(r._remoteDescription.sdp))[i]+="a="+(u.type?o:"end-of-candidates")+"\r\n",r._remoteDescription.sdp=c.getDescription(r._remoteDescription.sdp)+t.join("")}else for(i=0;i<r.transceivers.length&&(r.transceivers[i].rejected||(r.transceivers[i].iceTransport.addRemoteCandidate({}),(t=c.getMediaSections(r._remoteDescription.sdp))[i]+="a=end-of-candidates\r\n",r._remoteDescription.sdp=c.getDescription(r._remoteDescription.sdp)+t.join(""),!r.usingBundle));i++);n()}))},d.prototype.getStats=function(t){if(t&&t instanceof e.MediaStreamTrack){var r=null;if(this.transceivers.forEach((function(e){e.rtpSender&&e.rtpSender.track===t?r=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(r=e.rtpReceiver)})),!r)throw s("InvalidAccessError","Invalid selector.");return r.getStats()}var n=[];return this.transceivers.forEach((function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach((function(t){e[t]&&n.push(e[t].getStats())}))})),Promise.all(n).then((function(e){var t=new Map;return e.forEach((function(e){e.forEach((function(e){t.set(e.id,e)}))})),t}))},["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach((function(t){if((t=e[t])&&t.prototype&&t.prototype.getStats){var r=t.prototype.getStats;t.prototype.getStats=function(){return r.apply(this).then((function(e){var t=new Map;return Object.keys(e).forEach((function(r){var n=e[r];e[r].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[n.type]||n.type,t.set(r,e[r])})),t}))}}}));var p=["createOffer","createAnswer"];return p.forEach((function(e){var t=d.prototype[e];d.prototype[e]=function(){var e=arguments;return"function"==typeof e[0]||"function"==typeof e[1]?t.apply(this,[arguments[2]]).then((function(t){"function"==typeof e[0]&&e[0].apply(null,[t])}),(function(t){"function"==typeof e[1]&&e[1].apply(null,[t])})):t.apply(this,arguments)}})),(p=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach((function(e){var t=d.prototype[e];d.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]||"function"==typeof e[2]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)}),(function(t){"function"==typeof e[2]&&e[2].apply(null,[t])})):t.apply(this,arguments)}})),["getStats"].forEach((function(e){var t=d.prototype[e];d.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)})):t.apply(this,arguments)}})),d}},{sdp:17}],17:[function(e,t,r){var n={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};n.localCName=n.generateIdentifier(),n.splitLines=function(e){return e.trim().split("\n").map((function(e){return e.trim()}))},n.splitSections=function(e){return e.split("\nm=").map((function(e,t){return(0<t?"m="+e:e).trim()+"\r\n"}))},n.getDescription=function(e){return(e=n.splitSections(e))&&e[0]},n.getMediaSections=function(e){return(e=n.splitSections(e)).shift(),e},n.matchPrefix=function(e,t){return n.splitLines(e).filter((function(e){return 0===e.indexOf(t)}))},n.parseCandidate=function(e){for(var t={foundation:(e=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:parseInt(e[1],10),protocol:e[2].toLowerCase(),priority:parseInt(e[3],10),ip:e[4],address:e[4],port:parseInt(e[5],10),type:e[7]},r=8;r<e.length;r+=2)switch(e[r]){case"raddr":t.relatedAddress=e[r+1];break;case"rport":t.relatedPort=parseInt(e[r+1],10);break;case"tcptype":t.tcpType=e[r+1];break;case"ufrag":t.ufrag=e[r+1],t.usernameFragment=e[r+1];break;default:t[e[r]]=e[r+1]}return t},n.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var r=e.type;return t.push("typ"),t.push(r),"host"!==r&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},n.parseIceOptions=function(e){return e.substr(14).split(" ")},n.parseRtpMap=function(e){e=e.substr(9).split(" ");var t={payloadType:parseInt(e.shift(),10)};return e=e[0].split("/"),t.name=e[0],t.clockRate=parseInt(e[1],10),t.channels=3===e.length?parseInt(e[2],10):1,t.numChannels=t.channels,t},n.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var r=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==r?"/"+r:"")+"\r\n"},n.parseExtmap=function(e){return e=e.substr(9).split(" "),{id:parseInt(e[0],10),direction:0<e[0].indexOf("/")?e[0].split("/")[1]:"sendrecv",uri:e[1]}},n.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},n.parseFmtp=function(e){for(var t={},r=e.substr(e.indexOf(" ")+1).split(";"),n=0;n<r.length;n++)t[(e=r[n].trim().split("="))[0].trim()]=e[1];return t},n.writeFmtp=function(e){var t="",r=e.payloadType;if(void 0!==e.preferredPayloadType&&(r=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var n=[];Object.keys(e.parameters).forEach((function(t){e.parameters[t]?n.push(t+"="+e.parameters[t]):n.push(t)})),t+="a=fmtp:"+r+" "+n.join(";")+"\r\n"}return t},n.parseRtcpFb=function(e){return{type:(e=e.substr(e.indexOf(" ")+1).split(" ")).shift(),parameter:e.join(" ")}},n.writeRtcpFb=function(e){var t="",r=e.payloadType;return void 0!==e.preferredPayloadType&&(r=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((function(e){t+="a=rtcp-fb:"+r+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},n.parseSsrcMedia=function(e){var t=e.indexOf(" "),r={ssrc:parseInt(e.substr(7,t-7),10)},n=e.indexOf(":",t);return-1<n?(r.attribute=e.substr(t+1,n-t-1),r.value=e.substr(n+1)):r.attribute=e.substr(t+1),r},n.parseSsrcGroup=function(e){return{semantics:(e=e.substr(13).split(" ")).shift(),ssrcs:e.map((function(e){return parseInt(e,10)}))}},n.getMid=function(e){if(e=n.matchPrefix(e,"a=mid:")[0])return e.substr(6)},n.parseFingerprint=function(e){return{algorithm:(e=e.substr(14).split(" "))[0].toLowerCase(),value:e[1]}},n.getDtlsParameters=function(e,t){return{role:"auto",fingerprints:n.matchPrefix(e+t,"a=fingerprint:").map(n.parseFingerprint)}},n.writeDtlsParameters=function(e,t){var r="a=setup:"+t+"\r\n";return e.fingerprints.forEach((function(e){r+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),r},n.parseCryptoLine=function(e){return e=e.substr(9).split(" "),{tag:parseInt(e[0],10),cryptoSuite:e[1],keyParams:e[2],sessionParams:e.slice(3)}},n.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"==typeof e.keyParams?n.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},n.parseCryptoKeyParams=function(e){return 0!==e.indexOf("inline:")?null:{keyMethod:"inline",keySalt:(e=e.substr(7).split("|"))[0],lifeTime:e[1],mkiValue:e[2]?e[2].split(":")[0]:void 0,mkiLength:e[2]?e[2].split(":")[1]:void 0}},n.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},n.getCryptoParameters=function(e,t){return n.matchPrefix(e+t,"a=crypto:").map(n.parseCryptoLine)},n.getIceParameters=function(e,t){var r=n.matchPrefix(e+t,"a=ice-ufrag:")[0];return e=n.matchPrefix(e+t,"a=ice-pwd:")[0],r&&e?{usernameFragment:r.substr(12),password:e.substr(10)}:null},n.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},n.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=n.splitLines(e)[0].split(" "),o=3;o<r.length;o++){var i=r[o];if(a=n.matchPrefix(e,"a=rtpmap:"+i+" ")[0]){var a=n.parseRtpMap(a),s=n.matchPrefix(e,"a=fmtp:"+i+" ");switch(a.parameters=s.length?n.parseFmtp(s[0]):{},a.rtcpFeedback=n.matchPrefix(e,"a=rtcp-fb:"+i+" ").map(n.parseRtcpFb),t.codecs.push(a),a.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(a.name.toUpperCase())}}}return n.matchPrefix(e,"a=extmap:").forEach((function(e){t.headerExtensions.push(n.parseExtmap(e))})),t},n.writeRtpDescription=function(e,t){var r=(r=(r=(r=(r=(r=(r="")+"m="+e+" ")+(0<t.codecs.length?"9":"0"))+" UDP/TLS/RTP/SAVPF ")+t.codecs.map((function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(" ")+"\r\n")+"c=IN IP4 0.0.0.0\r\n")+"a=rtcp:9 IN IP4 0.0.0.0\r\n";t.codecs.forEach((function(e){r+=n.writeRtpMap(e),r+=n.writeFmtp(e),r+=n.writeRtcpFb(e)}));var o=0;return t.codecs.forEach((function(e){e.maxptime>o&&(o=e.maxptime)})),0<o&&(r+="a=maxptime:"+o+"\r\n"),r+="a=rtcp-mux\r\n",t.headerExtensions&&t.headerExtensions.forEach((function(e){r+=n.writeExtmap(e)})),r},n.parseRtpEncodingParameters=function(e){var t,r,o=[],i=n.parseRtpParameters(e),a=-1!==i.fecMechanisms.indexOf("RED"),s=-1!==i.fecMechanisms.indexOf("ULPFEC"),c=0<(r=n.matchPrefix(e,"a=ssrc:").map((function(e){return n.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute}))).length&&r[0].ssrc;0<(r=n.matchPrefix(e,"a=ssrc-group:FID").map((function(e){return e.substr(17).split(" ").map((function(e){return parseInt(e,10)}))}))).length&&1<r[0].length&&r[0][0]===c&&(t=r[0][1]),i.codecs.forEach((function(e){"RTX"===e.name.toUpperCase()&&e.parameters.apt&&(e={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10)},c&&t&&(e.rtx={ssrc:t}),o.push(e),a&&((e=JSON.parse(JSON.stringify(e))).fec={ssrc:c,mechanism:s?"red+ulpfec":"red"},o.push(e)))})),0===o.length&&c&&o.push({ssrc:c});var u=n.matchPrefix(e,"b=");return u.length&&(u=0===u[0].indexOf("b=TIAS:")?parseInt(u[0].substr(7),10):0===u[0].indexOf("b=AS:")?950*parseInt(u[0].substr(5),10)-16e3:void 0,o.forEach((function(e){e.maxBitrate=u}))),o},n.parseRtcpParameters=function(e){var t={},r=n.matchPrefix(e,"a=ssrc:").map((function(e){return n.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute}))[0];return r&&(t.cname=r.value,t.ssrc=r.ssrc),r=n.matchPrefix(e,"a=rtcp-rsize"),t.reducedSize=0<r.length,t.compound=0===r.length,e=n.matchPrefix(e,"a=rtcp-mux"),t.mux=0<e.length,t},n.parseMsid=function(e){var t=n.matchPrefix(e,"a=msid:");return 1===t.length?{stream:(e=t[0].substr(7).split(" "))[0],track:e[1]}:0<(e=n.matchPrefix(e,"a=ssrc:").map((function(e){return n.parseSsrcMedia(e)})).filter((function(e){return"msid"===e.attribute}))).length?{stream:(e=e[0].value.split(" "))[0],track:e[1]}:void 0},n.parseSctpDescription=function(e){var t,r=n.parseMLine(e),o=n.matchPrefix(e,"a=max-message-size:");return 0<o.length&&(t=parseInt(o[0].substr(19),10)),isNaN(t)&&(t=65536),0<(o=n.matchPrefix(e,"a=sctp-port:")).length?{port:parseInt(o[0].substr(12),10),protocol:r.fmt,maxMessageSize:t}:0<n.matchPrefix(e,"a=sctpmap:").length?(e=n.matchPrefix(e,"a=sctpmap:")[0].substr(10).split(" "),{port:parseInt(e[0],10),protocol:e[1],maxMessageSize:t}):void 0},n.writeSctpDescription=function(e,t){return e="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&e.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),e.join("")},n.generateSessionId=function(){return Math.random().toString().substr(2,21)},n.writeSessionBoilerplate=function(e,t,r){return t=void 0!==t?t:2,"v=0\r\no="+(r||"thisisadapterortc")+" "+(e=e||n.generateSessionId())+" "+t+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},n.writeMediaSection=function(e,t,r,o){return t=n.writeRtpDescription(e.kind,t),t+=n.writeIceParameters(e.iceGatherer.getLocalParameters()),t+=n.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===r?"actpass":"active"),t+="a=mid:"+e.mid+"\r\n",t=e.direction?t+"a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?t+"a=sendrecv\r\n":e.rtpSender?t+"a=sendonly\r\n":e.rtpReceiver?t+"a=recvonly\r\n":t+"a=inactive\r\n",e.rtpSender&&(t=t+"a="+(r="msid:"+o.id+" "+e.rtpSender.track.id+"\r\n")+"a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+r,e.sendEncodingParameters[0].rtx&&(t+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+r,t+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")),t+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+n.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(t+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+n.localCName+"\r\n"),t},n.getDirection=function(e,t){e=n.splitLines(e);for(var r=0;r<e.length;r++)switch(e[r]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return e[r].substr(2)}return t?n.getDirection(t):"sendrecv"},n.getKind=function(e){return n.splitLines(e)[0].split(" ")[0].substr(2)},n.isRejected=function(e){return"0"===e.split(" ",2)[1]},n.parseMLine=function(e){return{kind:(e=n.splitLines(e)[0].substr(2).split(" "))[0],port:parseInt(e[1],10),protocol:e[2],fmt:e.slice(3).join(" ")}},n.parseOLine=function(e){return{username:(e=n.matchPrefix(e,"o=")[0].substr(2).split(" "))[0],sessionId:e[1],sessionVersion:parseInt(e[2],10),netType:e[3],addressType:e[4],address:e[5]}},n.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;e=n.splitLines(e);for(var t=0;t<e.length;t++)if(2>e[t].length||"="!==e[t].charAt(1))return!1;return!0},"object"==typeof t&&(t.exports=n)},{}]},{},[1])(1)}]).default}).call(this,r("./node_modules/webpack/buildin/global.js"))},"./sdk/polyfills.js":function(e,t,r){"use strict";r.r(t);r("./node_modules/regenerator-runtime/runtime.js"),r("./node_modules/raf/polyfill.js");"undefined"==typeof Promise&&(r("./node_modules/promise/lib/rejection-tracking.js").enable(),window.Promise=r("./node_modules/promise/lib/es6-extensions.js")),r("./node_modules/whatwg-fetch/fetch.js"),Object.assign=r("./node_modules/object-assign/index.js")},0:function(e,t,r){r("./sdk/polyfills.js"),e.exports=r("./sdk/index.js")}});
//# sourceMappingURL=sdk.js.map